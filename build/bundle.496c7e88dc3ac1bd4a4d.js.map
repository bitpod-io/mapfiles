{"version":3,"sources":["webpack:///bundle.496c7e88dc3ac1bd4a4d.js","webpack:///./src/js/actions/appactions.js","webpack:///./src/js/stores/appstore.js","webpack:///./src/js/helpers/publishedsurveys/publishedsurveymodelprovider/index.js","webpack:///./src/js/actions/surveysactions.js","webpack:///./src/js/actions/publishsurveyactions.js","webpack:///./src/js/actions/settingsactions.js","webpack:///./src/js/helpers/clientsurveyresponsemodelprovider/index.js","webpack:///./src/js/helpers/regex/index.js","webpack:///./src/js/components/userprofile.jsx","webpack:///./src/js/actions/timetrackeractions.js","webpack:///./src/js/helpers/contacts/contactbuilder/index.js","webpack:///./src/js/helpers/surveydataprovider/index.js","webpack:///./src/js/helpers/settingdefinitionbuilder.js","webpack:///./src/js/customtheme/getcustomtheme.js","webpack:///./src/js/helpers/preferenceprovider/index.js","webpack:///./src/js/helpers/timetrackerprovider/index.js","webpack:///./src/js/helpers/contacts/groupsandrecipientsprovider/index.js","webpack:///./src/js/customtheme/colors.js","webpack:///./src/js/stores/authstore.js","webpack:///./src/js/actions/surveyrunneractions.js","webpack:///./src/js/customtheme/customthemeprovider.js","webpack:///./src/js/detectdevice.jsx","webpack:///./src/js/actions/erroractions.js","webpack:///./src/js/appsettings.json","webpack:///./src/js/actions/authactions.js","webpack:///./src/js/helpers/paginatorprovider/index.js","webpack:///./src/js/helpers/groupspaginatorprovider/index.js","webpack:///./src/js/helpers/responsespaginatorprovider/index.js","webpack:///./src/js/helpers/errors/errorsprovider/index.js","webpack:///./src/js/helpers/contexts/contextprovider/index.js","webpack:///./src/js/helpers/contexts/usercontext/index.js","webpack:///./src/js/helpers/abstractdataprovider/index.js","webpack:///./src/js/helpers/publishedsurveys/publishedsurveyprovider/index.js","webpack:///./src/js/helpers/couchdbsurveyadapter/index.js","webpack:///./src/js/helpers/image/imageprovider/index.js","webpack:///./src/js/helpers/publishedsurveys/publishedsurveyresponseprovider/index.js","webpack:///./src/js/helpers/guestprofile/index.js","webpack:///./src/js/components/helppage.jsx","webpack:///./src/js/customtheme/colorManipulator.js","webpack:///./src/js/runapp.jsx","webpack:///./src/js/actions/addactions.js","webpack:///./src/js/stores/surveysstore.js","webpack:///./src/js/stores/publishsurveystore.js","webpack:///./src/js/helpers/timedifference/index.js","webpack:///./src/js/actions/recipientsactions.js","webpack:///./src/js/stores/clientsurveystore.js","webpack:///./src/js/actions/clientsurveyactions.js","webpack:///./src/js/helpers/diservice/index.js","webpack:///./src/js/helpers/timetracker/index.js","webpack:///./src/js/stores/surveyrunnerstore.js","webpack:///./src/js/stores/imagesstore.js","webpack:///./src/js/actions/imagesactions.js","webpack:///./src/js/stores/groupsandrecipientsstore.js","webpack:///./src/js/actions/groupsactions.js","webpack:///./src/js/stores/analysisstore.js","webpack:///./src/js/actions/analysisactions.js","webpack:///./src/js/startup.js","webpack:///./src/js/helpers/styles.js","webpack:///./src/js/errorlogger.js","webpack:///./src/js/approute.jsx","webpack:///./src/js/helpers/surveymodelbuilder/index.js","webpack:///./src/js/proxyloader/proxyloader.jsx","webpack:///./src/js/proxyloader/defaultloader.jsx","webpack:///./src/js/helpers/logger.js","webpack:///./src/js/actions/notificationactions.js","webpack:///./src/js/proxyloader/errorloadercomponent.jsx","webpack:///./src/js/designapp.jsx","webpack:///./src/js/helpers/dependable/index.js","webpack:///./src/js/helpers/surveymodelbuilder/assertions.js","webpack:///./src/js/helpers/publishedsurveys/publishedsurveymodelprovider/assertions.js","webpack:///./src/js/helpers/contacts/couchdbrecipientadapter/index.js","webpack:///./src/js/helpers/contexts/pouchmirrorlocalfirst/index.js","webpack:///./src/js/helpers/contexts/designs/private/designs.js","webpack:///./src/js/helpers/contexts/designs/private/views.js","webpack:///./src/js/helpers/designs/indexes/index.js","webpack:///./src/js/helpers/settleAll/index.js","webpack:///./src/js/helpers/contacts/contactbuilder/assertions.js","webpack:///./src/js/actions/datastorageactions.js","webpack:///./src/js/helpers/surveyrunnermodelprovider/index.js","webpack:///./src/js/helpers/surveyrunnermodelprovider/makevalid.js","webpack:///./src/js/helpers/clientsurveyresponsemodelprovider/assertions.js","webpack:///./src/js/helpers/i18n.js","webpack:///./src/js/helpers/image/imagemodelbuilder/index.js","webpack:///./src/js/helpers/image/imagemodelbuilder/assertions.js","webpack:///./src/js/helpers/maketypedrecord/index.js","webpack:///./src/js/stores/errorstore.js","webpack:///./src/js/components/siteheader.jsx","webpack:///./src/js/helpers/processrevivers/index.js","webpack:///./src/js/components/footermobile.jsx","webpack:///./src/js/components/headertabs.jsx","webpack:///./src/js/components/languagemenu.jsx","webpack:///./src/js/components/mobilemenu.jsx","webpack:///./src/js/components/mobilelanguagelink.jsx","webpack:///./src/navIcon.png","webpack:///./src/js/customtheme/lightBaseTheme.js","webpack:///./src/js/customtheme/spacing.js","webpack:///./src/js/customtheme/zIndex.js","webpack:///./src/js/customtheme/autoprefixer.js","webpack:///./src/js/customtheme/callOnce.js","webpack:///./src/js/customtheme/rtl.js","webpack:///./src/js/customtheme/typography.js","webpack:///./src/js/themesetting.js","webpack:///./src/js/reactdndtouchbackend.js","webpack:///./src/js/stores/timetrackerstore.js"],"names":["webpackJsonp","100","module","exports","__webpack_require__","Object","defineProperty","value","_refluxCore","_refluxCore2","obj","__esModule","default","AppActions","createActions","129","_interopRequireDefault","_createStore","_createStore2","_immutable","_immutable2","_appactions","_appactions2","_i18n","_i18n2","_preferenceprovider","_authactions","_authactions2","_diservice","_diservice2","defaultData","Map","editMode","language","footer","questionMode","AppStore","listenables","_currentProfile","_preferenceProvider","init","this","data","userChanged","prevProfile","newProfile","_this","get","getPreference","then","set","setLanguage","updateState","getInitialState","trigger","test","testMode","changeQuestionMode","_this2","setPreference","result","ok","changeLanguage","_this3","130","_merge2","_merge3","_map2","_map3","_slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","done","push","length","err","Array","isArray","TypeError","_bsonObjectid","_bsonObjectid2","_surveymodelbuilder","_surveymodelbuilder2","_maketypedrecord","_maketypedrecord2","_processrevivers","_processrevivers2","_assertions","PublishedSurveySchemaProvider","version","publishedSurveyOrModel","Model","schema","_id","_rev","docType","surveyId","survey","commonLink","contacts","providers","Set","askLocation","locationRestrict","locationRequired","isSurveyAvailabilitySet","surveyStartDateTime","surveyEndDateTime","selectedLocations","notification","recipientsForNotification","methods","validateSurvey","questionKeys","responses","getSurvey","promises","questionKey","getPageItem","validate","Promise","all","revivers","publishedSurvey","model","date","_schemaVersion","fromModel","setId","setRev","setSurveyId","setSurvey","setContacts","setCreated","created","setUpdated","updated","setCommonLink","setProviders","setAskLocation","setLocationRestrict","setIsSurveyAvailabilitySet","setLocationRequired","setSelectedLocations","setNotification","setSurveyStartDateTime","setSurveyEndDateTime","setRecipientsForNotification","getId","id","setIn","getRev","rev","getSurveyId","getCommonLink","getContacts","getContact","key","getIn","setCompleted","responseId","status","_get$filter","filter","contact","_get$filter2","_contact","isUserCompleted","completed","toArray","validResponseId","getProviders","getAskLocation","getLocationRestrict","getIsSurveyAvailabilitySet","getSurveyStartDateTime","getSurveyEndDateTime","getLocationRequired","getSelectedLocations","getNotification","getRecipientsForNotification","Date","getDate","getCreated","dateString","getUpdated","Attachments","thumbnail","attachments","setThumbnail","getThumbnail","PublishedSurvey","Types","revivePublishedSurveyModel","SurveyModelBuilder","str","getPublishedSurveyModel","PublishedSurveyModelProvider","arguments","141","SurveysActions","143","PublishSurveyActions","153","SettingsActions","155","_isArray2","_isArray3","_forIn2","_forIn3","ClientSurveyResponseSchemaProvider","clientSurveyResponseOrModel","TimeTrackerFactory","timeTracker","TimeTracker","publishedInstanceId","sharedInformation","link","session","startTime","endTime","client","surveyArriveTime","tracker","code","total","success","totalMarks","obtainedMarks","userLocations","clientSurveyResponse","setRevision","setPublishedInstanceId","setSharedInformation","setResponses","setTotalMarks","setObtainedMarks","setSurveyArriveTime","setSession","setClientStartTime","setClientEndTime","setClientTracker","setUserLocations","getRevision","getPublishedInstanceId","getSharedInformation","getSharedLink","getSharedId","getResponses","getResponse","setResponse","response","getCode","setCode","getTotalCodeQuestions","setTotalCodeQuestions","getTotalSuccessCodeQuestions","setTotalSuccessCodeQuestions","getSession","getClient","setClient","getSessionStartTime","setSessionStartTime","getSessionEndTime","setSessionEndTime","getClientStartTime","getClientEndTime","getTotalMarks","marks","getObtainedMarks","getUserLocations","getClientTracker","getClientTrackers","addClientTracker","getSurveyArriveTime","UserInfo","userInfo","general","name","email","device","screenResolution","timeZoneOffset","os","browser","setGeneral","setDeviceId","setDeviceScreenResolution","setDeviceTimeZoneOffset","setOS","setBrowserName","setBrowserVersion","getUserInfo","setUserInfo","getGeneral","getName","setName","getEmail","setEmail","getDevice","setDevice","getDeviceId","setDeviceName","getDeviceScreenResolution","getDeviceTimeZoneOffset","getOS","getBrowser","setBrowser","getBrowserName","getBrowserVersion","timeTrail","switchTrail","finalResponseTime","setTimeTrail","setSwitchTrail","setFinalResponseTime","getTimeTrail","getSwitchTrail","getFinalResponseTime","ClientSurveyResponse","reviveClientSurveyResponseModel","getClientSurveyResponseModel","ClientSurveyResponseModelProvider","156","157","_react","_react2","_connect","_connect2","_reactAddonsPureRenderMixin","_reactAddonsPureRenderMixin2","_FontIcon","_FontIcon2","_CircularProgress","_CircularProgress2","_Avatar","_Avatar2","_IconButton","_IconButton2","_Paper","_Paper2","_MenuItem","_MenuItem2","_IconMenu","_IconMenu2","_colors","Colors","newObj","prototype","hasOwnProperty","call","_authstore","_authstore2","_appsettings","UserProfile","createClass","displayName","mixins","handleLogout","logout","handleLogin","provider","login","handleChildLogOut","props","onLogOut","getUserIcon","auth","authState","AuthStates","error","userProfile","isMobile","context","customTheme","SIGNED_IN","createElement","className","tooltip","tooltipPosition","touch","src","size","SIGNED_OUT","iconClassName","t","ERROR","message","iconStyle","color","red","textShadow","lightBlue800","style","height","width","margin","getAuthMenu","AuthProviders","icon","blue500","iconButtonElement","anchorOrigin","horizontal","vertical","targetOrigin","menuItem","leftIcon","primaryText","onTouchTap","providersItems","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","title","logo","bind","return","render","state","Auth","toJSON","node","_props","signoutCaption","cancelCaption","zDepth","display","circle","contextTypes","PropTypes","object","163","TimeTrackerActions","165","_isBoolean2","_isBoolean3","_bluebird","_bluebird2","_regex","_regex2","_assertions2","ContactsBuilder","_deleted","groups","setGroups","getDeleted","setDeleted","deleted","hasGroup","groupName","includes","getGroups","toSeq","setGroup","add","removeGroup","remove","validatorsKeys","keys","validators","validatorsKey","map","promise","reflect","each","inspection","isFulfilled","reason","Email","validEmail","resolve","reject","FullName","fullName","setFullName","getFullName","validFullName","Contact","reviveContactModel","contactModel","createContact","recipientInfo","166","_classCallCheck","instance","Constructor","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","_createClass","defineProperties","target","descriptor","protoProps","staticProps","_abstractdataprovider","_abstractdataprovider2","_logger","_logger2","_couchdbsurveyadapter","_couchdbsurveyadapter2","_axios","_axios2","_settleAll","_settleAll2","SurveyDataProvider","_AbstractDataProvider","container","surveyModelBuilder","getPrototypeOf","CouchDBSurveyProvider","getUserContext","userContext","DB","allDocs","include_docs","_result$rows","rows","toSurveyModel","doc","surveys","forEach","row","find","selector","fields","docs","header","isGuest","url","method","newSurvey","_this4","toISOString","modified","_ref","uc","save","fromSurveyModel","_docs$rows","triggerListener","_this5","try","addUserSurvey","editedSurvey","_this6","_ref2","debug","_this7","undoAppliedSurveys","_this8","bulkDocs","getSurveysBykeys","log","167","Setting","type","options","toString","JSON","stringify","SettingsGroup","settings","addSetting","getSettings","SettingsDefinitionBuilder","getSettingsDefinition","settingsGroup","addSettingsGroup","168","_toConsumableArray","arr2","from","getCustomTheme","_len","more","_key","apply","zIndex","isRtl","userAgent","_lightBaseTheme2","concat","_customTheme","spacing","fontFamily","palette","baseTheme","_themesetting2","rawTheme","transformers","_autoprefixer2","_rtl2","_callOnce2","prepareStyles","_compose2","_lightBaseTheme","_zIndex","_zIndex2","_autoprefixer","_callOnce","_rtl","_compose","_typography","_themesetting","206","_defineProperty","_merge4","defaultPreferences","PreferenceProvider","_preferences","query","_fetchSavedPreferences","preferences","catch","_ensurePreferences","208","ErrorProvider","209","_values2","_values3","_difference2","_difference3","_filter2","_filter3","_concat2","_concat3","_uniq2","_uniq3","_compact2","_compact3","_cloneDeep2","_cloneDeep3","_couchdbrecipientadapter","_couchdbrecipientadapter2","GroupsAndRecipientsProvider","CB","CouchDBRecipientAdapter","_groups","toRecipientModel","fromRecipientModel","$eq","editedRecipient","removeUnwantedGroups","contactDoc","put","recipient","group","_fetchSavedGroups","_ensureGroups","$elemMatch","searchForAll","_this9","getRecipientsByGroup","count","outputs","groupsPromises","reduce","promiseCollection","output","isRejected","newGroups","_this10","_userContext","_this11","lastRecipients","newRecipients","saveDocs","results","oldName","newName","_this12","oldGroups","_this13","groupDifference","223","red50","red100","red200","red300","red400","red500","red600","red700","red800","red900","redA100","redA200","redA400","redA700","pink50","pink100","pink200","pink300","pink400","pink500","pink600","pink700","pink800","pink900","pinkA100","pinkA200","pinkA400","pinkA700","purple50","purple100","purple200","purple300","purple400","purple500","purple600","purple700","purple800","purple900","purpleA100","purpleA200","purpleA400","purpleA700","deepPurple50","deepPurple100","deepPurple200","deepPurple300","deepPurple400","deepPurple500","deepPurple600","deepPurple700","deepPurple800","deepPurple900","deepPurpleA100","deepPurpleA200","deepPurpleA400","deepPurpleA700","indigo50","indigo100","indigo200","indigo300","indigo400","indigo500","indigo600","indigo700","indigo800","indigo900","indigoA100","indigoA200","indigoA400","indigoA700","blue50","blue100","blue200","blue300","blue400","blue600","blue700","blue800","blue900","blueA100","blueA200","blueA400","blueA700","lightBlue50","lightBlue100","lightBlue200","lightBlue300","lightBlue400","lightBlue500","lightBlue600","lightBlue700","lightBlue900","lightBlueA100","lightBlueA200","lightBlueA400","lightBlueA700","cyan50","cyan100","cyan200","cyan300","cyan400","cyan500","cyan600","cyan700","cyan800","cyan900","cyanA100","cyanA200","cyanA400","cyanA700","teal50","teal100","teal200","teal300","teal400","teal500","teal600","teal700","teal800","teal900","tealA100","tealA200","tealA400","tealA700","green50","green100","green200","green300","green400","green500","green600","green700","green800","green900","greenA100","greenA200","greenA400","greenA700","lightGreen50","lightGreen100","lightGreen200","lightGreen300","lightGreen400","lightGreen500","lightGreen600","lightGreen700","lightGreen800","lightGreen900","lightGreenA100","lightGreenA200","lightGreenA400","lightGreenA700","lime50","lime100","lime200","lime300","lime400","lime500","lime600","lime700","lime800","lime900","limeA100","limeA200","limeA400","limeA700","yellow50","yellow100","yellow200","yellow300","yellow400","yellow500","yellow600","yellow700","yellow800","yellow900","yellowA100","yellowA200","yellowA400","yellowA700","amber50","amber100","amber200","amber300","amber400","amber500","amber600","amber700","amber800","amber900","amberA100","amberA200","amberA400","amberA700","orange50","orange100","orange200","orange300","orange400","orange500","orange600","orange700","orange800","orange900","orangeA100","orangeA200","orangeA400","orangeA700","deepOrange50","deepOrange100","deepOrange200","deepOrange300","deepOrange400","deepOrange500","deepOrange600","deepOrange700","deepOrange800","deepOrange900","deepOrangeA100","deepOrangeA200","deepOrangeA400","deepOrangeA700","brown50","brown100","brown200","brown300","brown400","brown500","brown600","brown700","brown800","brown900","blueGrey50","blueGrey100","blueGrey200","blueGrey300","blueGrey400","blueGrey500","blueGrey600","blueGrey700","blueGrey800","blueGrey900","grey50","grey100","grey200","grey300","grey400","grey500","grey600","grey700","grey800","grey900","black","white","transparent","fullBlack","darkBlack","lightBlack","minBlack","faintBlack","fullWhite","darkWhite","lightWhite","231","_indexOf2","_indexOf3","_findKey2","_findKey3","_takeWhile2","_takeWhile3","_superloginClient","_superloginClient2","_createHashHistory","_createHashHistory2","_contextprovider","_contextprovider2","_preferenceprovider2","_errorsprovider","_errorsprovider2","_timetrackerprovider","_timetrackerprovider2","_groupsandrecipientsprovider","_groupsandrecipientsprovider2","_imageprovider","_imageprovider2","_surveydataprovider","_surveydataprovider2","_publishedsurveyresponseprovider","_publishedsurveyresponseprovider2","_publishedsurveyprovider","_publishedsurveyprovider2","_paginatorprovider","_paginatorprovider2","_groupspaginatorprovider","_groupspaginatorprovider2","_responsespaginatorprovider","_responsespaginatorprovider2","_contactbuilder","_contactbuilder2","_publishedsurveymodelprovider","_publishedsurveymodelprovider2","_guestprofile","_guestprofile2","_usercontext","_i18nextXhrBackend","_url","_url2","_notificationactions","_notificationactions2","contactBuilder","publishedSurveyModelProvider","SIGNING_IN","SIGNING_OUT","fromJS","OAuth","AuthStore","_subscribers","onbeforelogout","onafterlogout","onLogout","newState","subscribe","event","fn","indexOf","unsubscribe","index","splice","triggerEvent","payload","acc","handler","routeToSurveys","currentLocationArr","window","location","href","split","skipSignOutRoutes","testRoute","history","queryKey","createLocation","configure","clientConfig","authenticated","_getProfile","profile","mergeDeep","registerContextAndProviders","getProperDBURL","dbURL","urlObj","parse","protocol","host","port","pathname","format","getHttp","res","getDbUrl","userDb","socialAuth","notify","Notifications","INFO","_len2","_key2","destroy","register","245","SurveyRunnerActions","252","_getcustomtheme","_getcustomtheme2","CustomThemeProvider","_Component","children","Component","propTypes","element","childContextTypes","isRequired","255","_reactResponsive","_reactResponsive2","DetectDevice","getChildContext","getChildWithProps","isShort","Children","child","cloneElement","266","ErrorActions","28","AppTitle","Emboss","markdownGuideLink","DisabledStyle","opacity","SupportedLanguages","English","हिंदी","SupportedLanguagesCollection","SurveyModelDefaults","SchemaRevision","DataStoreKey","SurveyCollectionKey","MaxSurveyTitleLength","MaxSurveySubTitleLength","MaxPageTitleLength","MaxPageSubTitleLength","Google","Facebook","CouchDbUrl","siteURL","lable","timespan","SUCCESS","WARNING","LONGINFO","baseUrl","endpoints","noDefaultEndpoint","storage","checkExpired","refreshThreshold","tag","delimiters","actions","contactView","navigation","pageSize","allowedImageFileType","fonts","xxx_small","xx_small","x_small","smaller","small","medium","normal","large","larger","x_large","xx_large","xxx_large","xxxx_large","Placeholders","text","image","question","distributionTypes","commonlink","yourcontacts","shortUrl","apiKey","googleMap","mapIcons","grayIcon","greenIcon","redIcon","blueIcon","selectedUserLocationIcon","addUserLocationIcon","locationRange","min","max","locationSelecteionLimit","defaultMapCenter","latitude","longitude","locationDifferenceLimit","providerLinks","google","label","facebook","mediaAPIEndpoint","sharedPath","30","AuthActions","314","_findIndex2","_findIndex3","PaginatorProvider","filterFunction","callback","registerListener","unregisterListener","skip","limit","_find","isEqual","lDoc","315","GroupsPaginatorProvider","_fetchGroups","getGroupWithContactsCount","316","ResponsesPaginatorProvider","_publidhedSurveys","_publishedSurveyModelProvider","sortBy","reverse","take","_fetchPublishedSurvey","322","errors","328","_usercontext2","ContextProvider","userContexts","isValid","_initialize","329","_forEach2","_forEach3","_remove2","_remove3","_flattenDeep2","_flattenDeep3","_events","_events2","_pouchdbCore","_pouchdbCore2","_pouchmirrorlocalfirst","_pouchmirrorlocalfirst2","_pouchdbSeedDesign","_pouchdbSeedDesign2","_designs","_designs2","_views","_views2","_indexes","_indexes2","_pouchdbAdapterHttp","_pouchdbAdapterHttp2","_pouchdbMapreduce","_pouchdbMapreduce2","_pouchdbReplication","_pouchdbReplication2","_pouchdbFind","_pouchdbFind2","_pouchdbAdapterIdb","_pouchdbAdapterIdb2","_pouchdbAdapterWebsql","_pouchdbAdapterWebsql2","plugin","disable","Assertions","AssertContextValid","valid","AssertDBInitialized","initialized","UserContext","_EventEmitter","_userId","_userProfile","_initialized","_db","_listeners","iCallback","localDB","adapter","userDbUrl","addEventListener","isPublished","userId","action","callbacks","invokeCallbacks","change","direction","triggerChanges","db","on","syncCompleted","emit","changesFound","_seedDesigns","createIndex","_isValid","eventName","removeListener","removeAllListeners","33","AbstractDataProvider","352","PublishedSurveyProvider","publishedsurveys","publishedSurveyId","newPublishedSurvey","toJS","publishedsurvey","updatedPublishedSurvey","_docs$rows2","undoAppliedSurvey","getUserSurveys","353","CouchDBSurveyAdapter","surveyModelInstance","docJSON","createDefaultModel","354","Buffer","ImageProvider","imageDoc","newImages","newImage","_attachments","Blob","mimeType","355","PublishedSurveyResponseProvider","responseDoc","respondedSurveys","356","providerId","365","HelpPage","366","clamp","convertColorToString","values","parseInt","colorString","convertHexToRGB","extendedColor","charAt","r","substr","g","b","decomposeColor","marker","substring","parseFloat","getContrastRatio","foreground","background","lumA","getLuminance","lumB","contrastRatio","Math","Number","toFixed","rgb","val","pow","emphasize","coefficient","darken","lighten","fade","376","_extends","assign","source","_AppBar","_AppBar2","_ToolbarGroup","_ToolbarGroup2","_reactTapEventPlugin","_getMuiTheme","_getMuiTheme2","_MuiThemeProvider","_MuiThemeProvider2","_customthemeprovider","_customthemeprovider2","_timetrackerstore","_userprofile","_userprofile2","_timetracker","_timetracker2","RunAppBar","titleStyle","siteHeader","showMenuIconButton","position","top","renderToolbar","right","RunApp","childrenWithProps","_state$Auth$toJSON","muiTheme","marginTop","paddingTop","paddingBottom","378","AddActions","383","_isNumber2","_isNumber3","_trim2","_trim3","_get2","_get3","_shuffle2","_shuffle3","_addactions","_addactions2","_surveysactions","_surveysactions2","_surveyrunneractions","_surveyrunneractions2","_settingdefinitionbuilder","_settingdefinitionbuilder2","_settingsactions","_settingsactions2","_fileSaver","_fileSaver2","SurveysStore","lastState","currentSurvey","_surveyProvider","_delAttributes","userSurveys","showLoader","getUserSurvey","updateSurveyState","newSurveyState","suppressTrigger","equals","updateUserSurvey","addNewSurvey","routeToSurvey","exportToJSON","surveyToExport","surveyTitle","getTitle","surveyJSON","validateSurveyIds","blob","saveAs","uploadSurvey","acceptedFiles","file","reader","FileReader","fileName","onload","validateJSONFile","importSurvey","readAsText","surveyJson","_ensureDefaults","surveyName","pages","pageItems","newPages","newPageItems","page","newPageId","oldPageItemRefs","newPageItemRefs","pageItemRef","pageItem","parentPageId","pageItemRefs","cloneSurvey","cloned","clone","setTitle","deleteSurvey","deleteUserSurvey","deleteIn","undoSurvey","collectionState","dialogOpen","refIndex","undo","undoModifiedSurveys","latestSurvey","undoUserSurveys","merge","reset","loadSurvey","_getSurveyById","currentReference","optionsSurveyHeaderOpen","settingsDef","settingsValues","showHeader","getShowHeader","description","getDescription","questionDisplay","getQuestionDisplay","minimumMarks","getMinimumMarks","required","maxLength","multiLine","rowsMax","choice","open","optionsSurveyHeaderDone","timer","timeout","startFrom","showMarksRunMode","restrictPrevious","setQuestionDisplay","setMinimumMarks","setIsTimer","setTimeout","setStartFrom","setShowMarksRunMode","setRestrictPrevious","setSurveyTitle","setSectionTitleDescription","sectionTitle","sectionDescription","pageNo","getPage","setDescription","updatePage","optionPageOpen","pageNumber","randomizeQuestions","getRandomizeQuestions","logic","getLogic","skipTo","getSkipTo","isPrimary","getChoice","optionPageDone","pageLength","getPagesSize","maxPageItemsAllowed","setMaxPageItemsAllowed","setLogic","setSkipTo","randomizePageItems","randomize","setRandomizeQuestions","validateCode","optionsPageItemOpen","pageItemNumber","getType","getSubType","getRequired","quizMode","getQuizMode","getOptions","questionDisplayType","getDisplayType","answer","getAnswer","codeValidator","getCodeValidator","getMarks","getModifiedValue","markdown","getMarkdown","defaultTemplate","getDefaultTemplate","getLanguage","questionTimeOut","getQuestionTimeOut","focusFirst","textOnly","javascript","c","cpp","csharp","java","html","isOtherHeader","customValidation","dropdown","radio","checkbox","linkedchoice","getLinkedChoice","optionsPageItemDone","modifiedValue","linked","questionNo","flag","found","getPageItemRefIndex","getPageItemRefsSize","getQuestionChoice","getPageItemRefs","refs","isQuestion","setQuestionTimeOut","setRequired","setCodeValidator","setDefaultTemplate","setMarkdown","setQuizMode","setAnswer","setMarks","setOptions","setDisplayType","updatePageItem","calculateSectionMarks","getPages","surveyMarks","totalSectionMarks","pageItemType","setPageMarksTotal","setSurveyMarksTotal","skipObj","setUpdatedSurvey","updatedSurvey","addQuestionDone","PageItemFactory","QuestionTypes","subType","addPageItemToPageAndSurvey","addDecoratorDone","decorator","DecoratorTypes","addPageDone","PageFactory","_createDefaultPage","insertPage","pushPage","deleteQuestion","storeLastState","removePageItem","close","changeQuestion","oldPageItem","newPageItem","deletePage","removePage","movePageItem","newPageIndex","newQuestionIndex","oldPageIndex","oldQuestionIndex","movePageItemRef","moveQuestion","moveTo","pageIndex","questionId","questionIndex","destPage","getPageIndex","movePage","oldIndex","newIndex","shuffleQuestions","pageItemRefsSize","shuffledArray","removePageItemRef","addPageItemRef","startTest","surveyStoreObject","stopTest","surveyRunnerModel","386","_isUndefined2","_isUndefined3","_isNaN2","_isNaN3","_isNull2","_isNull3","_omit2","_omit3","_publishsurveyactions","_publishsurveyactions2","_clientsurveyresponsemodelprovider","PublishSurveyStore","totalRows","allSelectedContacts","_allResponses","publishedSurveys","currentPublishedSurveysPage","totalPublishedSurveysPage","isAuthorizedUser","selectedSurveyId","stepIndex","selectedContacts","currentSelectedContactsPage","totalSelectedContactsPage","allSelectedContactsIds","selectedProviders","currentLocation","errorMessage","myLocation","mapCenterLocation","currentFocusedLocation","zoomLevel","blink","selectedForNotification","currentPublishedSurvey","totalResponsePage","currentResponsePage","currentResponses","suppress","getPublishedSurvey","_publishedSurveyProvider","getUserPublishedSurvey","initCurrentPublishedSurvey","enableNotifications","setRecipientsForNotifications","recipients","setLocationSettings","setSurveyAvailibilitySettings","updateCurrentPublishedSurvey","updating","updateUserPublishedSurvey","_groupsAndRecipientsProvider","ContactBuilder","addContact","updateNavigationAndSelectedContactsState","configureSelectedIds","optionsInvitationOpen","to","cc","bcc","subject","requiredText","hintText","showRequiredStatus","disabled","rteDefault","textDefault","optionsInvitationDone","invitation","addContactsByGroup","removeContact","contactId","ids","startPublish","getUserSurveysIdWithTitle","routeToPublish","step","prev","cancel","getPublishSurvey","selectedDistibutionType","setMailsForNotification","mails","finish","addUserPublishedSurvey","removeSharedLinks","_publishedSurveyResponseProvider","deletePublishedSurvey","pSurvey","deleteUserPublishedSurvey","tabChanged","nextSelectedContactsPage","newPageNo","prevSelectedContactsPage","jumpToSelectedContactsPage","totalPage","ceil","sortedContacts","toLowerCase","currentContactsPage","floor","updateProviders","isAdd","has","updateAskLocation","updateSurveyAvailability","updateLocationRequired","updateSurveyStartDateTime","updateSurveyEndDateTime","updateLocationRestrict","jumpToResponses","updateCurrentResponses","nextResponses","previousResponses","initializeSurveysResponses","ensurePublishedSurvey","resetResponses","setCurrentLocation","supressTrigger","mapFocusLocation","setMapCenterLocation","centerLocation","setCurrentFocusedLocation","focusLocation","getCurrentLocation","navigator","geolocation","getCurrentPosition","currentPosition","handleLocationError","decideErrorMessage","_position$coords","coords","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","UNKNOWN_ERROR","getAddressOfLocation","onDistanceChange","locationWithUpdatedDistance","distance","address","inst","onSuggestSelect","suggestedArea","_suggestedArea$locati","lat","lng","onLocationCardClick","locToFocus","oncurrentLocationDragEnd","e","latLng","onSelectedMarkerDelete","locToRemove","updatedSelectedLocations","onSelectedLocMarkerClick","onCurrentLocMarkerClick","locToAdd","formatted_address","388","getTimeDifference","EndTime","Hdiff","_difference_in_hours2","Mdiff","_difference_in_minutes2","hours","minutes","seconds","_difference_in_seconds2","_difference_in_minutes","_difference_in_hours","_difference_in_seconds","394","RecipientsActions","396","_isEqual2","_isEqual3","_clone2","_clone3","_useQueries","_useQueries2","_platform","_platform2","_fingerprintjs","_fingerprintjs2","_clientsurveyresponsemodelprovider2","_clientsurveyactions","_clientsurveyactions2","_timedifference","_timedifference2","_timetrackeractions","_timetrackeractions2","clientSurveyResponseModelProvider","defaultDB","currentPageKey","nextPageKey","prevPageKey","currentQuestionKey","nextQuestionKey","prevQuestionKey","callStack","jumpToStack","ignoredKeys","serverStartTime","timeTrackers","clientTime","surveyStartTime","isCommonLink","ClientSurveyStore","_clientSurvey","_allPages","_callStack","_pageSkipInfo","_questionSkipInfo","_ignoredKeys","_jumpToStack","_totalSurveyQuestions","_isSurveyTimeValid","questionTimer","showNext","showPrev","showFinish","percentSurveyCompleted","timeRemain","questionTimeRemain","showQuestionTimer","surveyStarted","current","last","showMarks","attempted","totalQuestionCount","isTimerEnabled","onSubmission","isQuestionTimer","processLoggedUser","migrate","_isCommonLink","_migrate","_URL","URL","routeTo","_instanceId","alreadyLogged","recordTime","_responseId","prepareState","isPrev","_questionDisplay","nextPageController","nextQuestionController","lastKey","pageKey","skipQuestion","setIgnoreKeys","getRestrictPrevious","_totalPage","nextKey","currentPage","newPage","delete","updateLast","updateCurrent","updateDBSurvey","putDBSurvey","navigate","_getSurveyStatus","currentPageIndex","currentQuestionIndex","totalAtteptedQuestions","_setSurveyProgressPercentages","getIsTimer","getStartFrom","updateTracker","setQuestionTimer","queCount","pop","lastPageItem","skipToObj","_ret","skipToPage","skipToQuestion","_dbSurvey","ignoringQuestionKeys","pageSkipper","questionSkipper","j","_getQuestionKeys","getPageItemsKeys","ignoredKeysIds","getIds","updateAttempted","previous","prevKey","jumpTo","supress","getDataFromServer","instanceId","getProfileDetails","isProfileAbsent","validateUserTimeWithSurveyTime","userRequestDateTime","invitationLink","urlArray","isSurveyAvailable","loadPublishedSurvey","isBefore","isQuiz","migrated","isLocal","otherDetails","isGeolocationAvailable","getPageItemsSize","prepareSurveyStart","routeToCompleted","setSurveyTimer","timeSpent","getTimeout","updateQuestionTimer","timeConverterFromSeconds","sec","remaining","decreseTimeToSec","time","handleProceed","_remaining","addResponseToServer","surveyresponse","_result$rows2","components","componentObj","component","serverResult","surveyResult","routeToThankYou","obtained","pass","path","initQuestionTimer","pageItemID","updateTimerInformation","canSkipIf","disableIf","navigateToAll","checkEOS","setDisable","tabSwitch","visibilityStatus","setInstanceId","_this14","_providers","397","ClientSurveyActions","40","_dependable","_dependable2","_surveysstore","_surveyrunnerstore","_groupsandrecipientsstore","_publishsurveystore","_appstore","_analysisstore","_imagesstore","_clientsurveystore","_errorstore","DIService","initialize","403","_React$Component","Wrapped","411","_surveyrunnermodelprovider","_surveyrunnermodelprovider2","surveyRunnerModelProvider","SurveyRunnerStore","_SurveyRunner","getSurveyRunnerModel","setStatus","isSurvey","getSurveyMarksTotal","isTestMode","413","_startsWith2","_startsWith3","_words2","_words3","_imagesactions","_imagesactions2","_resizeImage","_readBlob","_imagemodelbuilder","_imagemodelbuilder2","imageModelBuilder","ImagesStore","_images","images","uploading","openAddDialog","_imageProvider","getImages","imageDocs","imageModel","prepaireImages","closeAddDialog","addImages","imageFiles","imageFile","tags","newImageModel","createImage","FormData","append","headers","content-type","setHeight","setWidth","setThumbnailInfo","thumbnailInfo","setVibrant","vibrant","setDarkVibrant","darkVibrant","removeImage","onDropReject","search","filterImages","words","getTags","word","imageModels","414","ImagesActions","432","_recipientsactions","_recipientsactions2","_groupsactions","_groupsactions2","GroupsAndRecipientsStore","contactBeingEdited","updateGroups","addRecipient","deleteRecipient","undoRecipent","getAllGroups","ensureEmail","getRecipientDoc","getRecipient","optionsContactOpen","contactSettingToolbar","groupTitle","dataSource","settingFor","optionsContactDone","updateRecipient","optionsEditGroupOpen","optionsEditGroupDone","renameGroup","undoRecipients","undoModifiedRecipients","latestRecipients","undoGroups","433","GroupsActions","436","_analysisactions","_analysisactions2","AnalysisStore","_publishedSurvey","surveyResponses","info","initializeAnalysis","cId","settleAll","setInfo","option","responseObj","objInfo","update","437","AnalysisActions","445","_reactTapEventPlugin2","_detectdevice","_errorlogger","_approute","_approute2","446","_fonts","_layout","_styles","_default","_atelierSulphurpoolLight","_flipmove","447","448","449","450","451","452","475","_endsWith2","_endsWith3","_erroractions","_erroractions2","_errorTojson","_stacktraceJs","_stacktraceJs2","registerError","getError","errorPromise","fromError","errTrace","stackframe","fileNameArray","getFileName","string","setFileName","setSource","getErrorMessage","getBlubirdListenerObject","detail","mapInputParamsToErrorObject","details","lineno","colno","line","column","491","_reactDom","_reactDom2","_Router","_Router2","_Route","_Route2","_Redirect","_Redirect2","_useRouterHistory","_useRouterHistory2","_Link","_IndexRoute","_IndexRoute2","_proxyloader","_proxyloader2","_detectdevice2","_designapp","_designapp2","_runapp","_runapp2","RouteHandler","document","getElementById","54","_isPlainObject2","_isPlainObject3","_isString2","_isString3","_i18next","SurveySchemaBuilders","1.0","_Question","_Decorator","singletext","yesno","datepicker","multivalue","QuestionDisplayTypes","ALL","PAGE","QUESTION","CodeValidationStatus","UNCHECKED","FAILED","Models","Owner","owner","setOwnerId","setOwnerName","getOwnerId","getOwnerName","Id","IdIsValid","Header","setShowHeader","show","PageItem","isPageItem","setParentPageId","getParentPageId","Question","Base","validations","getValidations","Validations","Required","checkRequired","codeValidationStatus","setCodeValidationStatus","mode","getCodeValidationStatus","getCodeValidationReason","removeSkipTo","displayType","List","isList","Decorator","Dimensions","dimensions","setDimensions","getDimensions","getWidth","getHeight","imageId","setImageId","getImageId","Page","totalPageMarks","isPage","getMaxPageItemsAllowed","getPageMarksTotal","valueSeq","getPageItemRef","IndexIsInBounds","ref","PageItemRefIsNotInPage","insert","indexOrRef","_ref3","_ref4","Survey","_isDeleted","isTimer","surveyMarksTotal","pageItemsKeys","pageItemKey","addPageItem","_setEnsureDefaults","_getEnsureDefaults","ensureDefaults","getShowMarksRunMode","toUpperCase","getIsDeleted","setIsDeleted","isDeleted","_ensureDefaultsPageItems","_createDefaultQuestion","_ensureDefaultPage","revision","keySeq","getPageItemBySubtype","ItemIsPageItem","addPageItemToPage","pageOrPageId","pageItemOrPageItemId","pageItemRefPositon","PageItemIsPresentInSurvey","newPageItemOrPageItemId","PageItemIsNotPresentInSurvey","pageItemId","pageId","queryResults","findEntry","ItemIsPage","PageIsPresentInSurvey","pageItemRefsToRemove","pageToMove","item","_createDefaultDecorator","reviveSurvey","createSurveyModel","createEmptyModel","schemaVersion","589","_defaultloader","_defaultloader2","_reactLoadable","_reactLoadable2","_errorloadercomponent","_errorloadercomponent2","ProxyLoader","moduleToImport","customLoadingComponent","loader","LoadingComponent","getLoadingComponent","delay","isLoading","pastDelay","console","590","_RefreshIndicator","_RefreshIndicator2","DefaultLoader","padding","left","6","Logger","warn","64","NotificationActions","644","ErrorLoader","646","_appstore2","_siteheader","_siteheader2","_helppage","_reactdndtouchbackend","_reactdndtouchbackend2","_reactDnd","App","AppState","overflow","DragDropContext","enableMouseEvents","647","argList","factories","haveVisited","notEmpty","registerOne","toFactory","func","hash","_results","Error","match","trim","a","overrides","visited","dependencies","factory","isOverridden","isName","n","654","ItemIsDefined","ItemIsSurvey","655","672","recipientModelInstance","692","pouchMirrorLocalFirst","remoteDB","listenChanges","changes","since","live","conflicts","replicationHandle","clearTimeout","replicateDataToRemote","sync","pendingDestroy","isSynchronized","cancelChanges","getIndexes","deleteIndex","post","replicate","putAttachment","getAttachment","removeAttachment","700","documents","filters","typed","req","701","getByDocType","views","custom","surveyIdAndTitle","passedCandidate","recipientsByFullName","recipientsByEmail","recipientsByGroups","recipientsByKey","702","ddoc","72","742","752","765","772","DataStorageClientActions","DataStorageActions","788","_makevalid","_makevalid2","SurveyRunnerSchemaProvider","surveyOrModel","participantDetails","surveyRunner","setParticipantDetails","getStatus","getParticipantDetails","SurveyRunner","reviveSurveyRunnerModel","SurveyRunnerModelProvider","789","790","MakeValid","794","8","_i18next2","_i18nextXhrBackend2","_i18nextIntervalpluralPostprocessor","_i18nextIntervalpluralPostprocessor2","userLanguage","i18nOptions","load","returnObjects","postProcess","pluralSeparator","contextSeparator","interpolation","escapeValue","prefix","suffix","formatSeparator","unescapePrefix","nestingPrefix","nestingSuffix","fallbackLng","backend","loadPath","use","rej","800","ImageBuilder","uri","setMimeType","setURI","setTags","setDate","getMimeType","getVibrant","getVibrantColor","getDarkVibrant","getDarkVibrantColor","getURI","setTag","base64","dataURL","Thumbnail","orignal","getThumbnailHeight","setThumbnailHeight","getThumbnailWidth","setThumbnailWidth","isThumbnailOrignal","Image","reviveImageModel","img","801","81","_forOwn2","_forOwn3","_isEmpty2","_isEmpty3","typeInfo","deepConvertToImmutable","goingDeep","member","Record","814","_uniqWith2","_uniqWith3","ErrorStore","_errors","callRegisterErrors","postToServer","errorsToPost","_getUserInfo","errordoc","_errorProvider","reportErrors","route","operatingSystem","ua","816","_Drawer","_Drawer2","_footermobile","_footermobile2","_headertabs","_headertabs2","_mobilemenu","_mobilemenu2","_navIcon","SiteHeader","handleToggle","setState","closeMenu","gotoHome","router","getSiteHeader","cursor","onClick","iconClassNameRight","onLeftIconButtonTouchTap","docked","onRequestChange","containerStyle","smallText","iconElementLeft","alt","headerTabs","iconElementRight","iconStyleRight","flex","marginRight","82","reviverKeys","reviverKey","835","Footer","836","_Tabs","_Tabs2","_Tab","_Tab2","_Toolbar","_withRouter","_withRouter2","_languagemenu","_languagemenu2","TabsModel","HeaderTabs","_handleActive","tab","getTabIndexFromPath","findIndex","componentWillMount","React","ReactDOM","renderTabs","onActive","initialSelectedIndex","839","_DropDownMenu","_DropDownMenu2","LanguageMenu","handleChange","preventDefault","languageMenu","selectedLanguage","appCollection","labelStyle","DropDownMenu","menuStyle","onChange","870","_reactCollapse","_Menu","_Menu2","_mobilelanguagelink","_mobilelanguagelink2","fontClass","0","class","1","2","Language","MobileMenu","displayLanguageMenu","renderMenu","menuCSS","menuIconCSS","renderLanguages","lang","isSelected","_handleLanguageRender","titleText","fontWeight","textTransform","marginBottom","rightIcon","Collapse","isOpened","880","MobileLanguageLink","_handleClick","881","p","882","_colorManipulator","_spacing","_spacing2","primary1Color","primary2Color","primary3Color","accent1Color","accent2Color","accent3Color","textColor","secondaryTextColor","alternateTextColor","canvasColor","borderColor","disabledColor","pickerHeaderColor","clockCircleColor","shadowColor","883","iconSize","desktopGutter","desktopGutterMore","desktopGutterLess","desktopGutterMini","desktopKeylineIncrement","desktopDropDownMenuItemHeight","desktopDropDownMenuFontSize","desktopDrawerMenuItemHeight","desktopSubheaderHeight","desktopToolbarHeight","884","menu","appBar","drawerOverlay","drawer","dialogOverlay","dialog","layer","popover","snackbar","885","hasWarnedAboutUserAgent","_warning2","isServer","isFlex","stylePrefixed","_inlineStylePrefixer2","prefixAll","join","prefixer","_inlineStylePrefixer","_warning","886","callOnce","887","rtl","directionInvariant","flippedAttributes","marginLeft","paddingRight","paddingLeft","borderRight","borderLeft","newStyle","attribute","matches","reTranslate","replace","reSkew","888","Typography","textFullBlack","textDarkBlack","textLightBlack","textMinBlack","textFullWhite","textDarkWhite","textLightWhite","fontWeightLight","fontWeightNormal","fontWeightMedium","fontStyleButtonFontSize","889","themeSetting","surveyHeader","fontSize","sectionHeader","textField","radioButton","datePicker","dropDownMenu","titleDecorator","titleDescriptionDecorator","toggleLabel","toggleDescription","failed","unchecked","messageText","descriptionText","infoText","normalText","timerText","890","getEventClientTouchOffset","targetTouches","getEventClientOffset","x","clientX","y","clientY","getNodeClientOffset","el","nodeType","ELEMENT_NODE","parentElement","_el$getBoundingClient","getBoundingClientRect","createTouchBackend","optionsOrManager","touchBackendFactory","manager","TouchBackend","getMonitor","_invariant","_invariant2","supportsPassive","supported","eventNames","mouse","start","move","end","keyboard","keydown","delayTouchStart","enableTouchEvents","enableKeyboardEvents","delayMouseStart","getActions","monitor","registry","getRegistry","sourceNodes","sourceNodeOptions","sourcePreviewNodes","sourcePreviewNodeOptions","targetNodeOptions","listenerTypes","_mouseClientOffset","getSourceClientOffset","handleTopMoveStart","handleTopMoveStartDelay","handleTopMoveStartCapture","handleTopMoveCapture","handleTopMove","handleTopMoveEndCapture","handleCancelOnEscape","isSetUp","getTopMoveStartHandler","removeEventListener","uninstallSourceNodeRemovalObserver","capture","passive","listenerType","sourceId","handleMoveStart","targetId","handleMove","touches","droppedOn","elementFromPoint","childMatch","contains","querySelector","moveStartSourceIds","unshift","clientOffset","dragOverTargetIds","isDragging","beginDrag","publishSource","sourceNode","getSourceId","installSourceNodeRemovalObserver","publishDragSource","rect","scrollHeight","tY","scrollTo","outerHeight","bY","hover","didDrop","drop","endDrag","draggedSourceNode","draggedSourceNodeRemovalObserver","MutationObserver","resurrectSourceNode","observe","childList","removeAttribute","body","appendChild","disconnect","932","TimeTrackerStore","loadTimes","_timeTrackerProvider","componentName","localStorage","getItem","currentTime","getTime","timeDiffSeconds","offset","timeStamp","isRefreshed","trackerInfo","startTimer","instanceInfo","userName","userEmail","trackerInfoDoc","reportTrackerInfo"],"mappings":"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","file":"bundle.496c7e88dc3ac1bd4a4d.js","sourcesContent":["webpackJsonp([3],{\n\n/***/ 100:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _refluxCore = __webpack_require__(14);\n\nvar _refluxCore2 = _interopRequireDefault(_refluxCore);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar AppActions = _refluxCore2.default.createActions([\"new\", \"save\", \"edit\", \"test\", \"changeLanguage\", \"changeQuestionMode\"]);\n\nexports.default = AppActions;\n\n/***/ }),\n\n/***/ 129:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createStore = __webpack_require__(22);\n\nvar _createStore2 = _interopRequireDefault(_createStore);\n\nvar _immutable = __webpack_require__(9);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _appactions = __webpack_require__(100);\n\nvar _appactions2 = _interopRequireDefault(_appactions);\n\nvar _i18n = __webpack_require__(8);\n\nvar _i18n2 = _interopRequireDefault(_i18n);\n\nvar _preferenceprovider = __webpack_require__(206);\n\nvar _preferenceprovider2 = _interopRequireDefault(_preferenceprovider);\n\nvar _authactions = __webpack_require__(30);\n\nvar _authactions2 = _interopRequireDefault(_authactions);\n\nvar _diservice = __webpack_require__(40);\n\nvar _diservice2 = _interopRequireDefault(_diservice);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar defaultData = _immutable2.default.Map({ \"editMode\": true, \"language\": \"en-US\", \"footer\": \"block\", \"questionMode\": false }),\n    AppStore = (0, _createStore2.default)({\n    listenables: [_appactions2.default, _authactions2.default],\n    _currentProfile: null,\n    _preferenceProvider: null,\n    init: function init() {\n        this.data = defaultData;\n    },\n    userChanged: function userChanged(prevProfile, newProfile) {\n        var _this = this;\n\n        this._currentProfile = newProfile;\n        this._preferenceProvider = _diservice2.default.get(\"PreferenceProvider\");\n        return this._preferenceProvider.getPreference(\"language\").then(function (language) {\n            _this.data = _this.data.set(\"language\", language);\n            return _i18n2.default.setLanguage(language);\n        }).then(function () {\n            return _this._preferenceProvider.getPreference(\"questionMode\");\n        }).then(function (questionMode) {\n            _this.data = _this.data.set(\"questionMode\", questionMode);\n            _this.updateState();\n        });\n    },\n    getInitialState: function getInitialState() {\n        return this.data;\n    },\n    updateState: function updateState() {\n        this.trigger(this.data);\n    },\n    test: function test(testMode) {\n        this.data = this.data.set(\"editMode\", testMode);\n        this.updateState();\n    },\n    changeQuestionMode: function changeQuestionMode(questionMode) {\n        var _this2 = this;\n\n        if (questionMode != this.data.get(\"questionMode\")) {\n            if (this._preferenceProvider) {\n                this._preferenceProvider.setPreference(\"questionMode\", questionMode).then(function (result) {\n                    if (result.ok) {\n                        _this2.data = _this2.data.set(\"questionMode\", questionMode);\n                        _this2.updateState();\n                    }\n                });\n            }\n        }\n    },\n    changeLanguage: function changeLanguage(language) {\n        var _this3 = this;\n\n        if (language != this.data.get(\"language\")) {\n            if (this._preferenceProvider) {\n                this._preferenceProvider.setPreference(\"language\", language).then(function (result) {\n                    if (result.ok) {\n                        _this3.data = _this3.data.set(\"language\", language);\n                        return _i18n2.default.setLanguage(language);\n                    }\n                }).then(function () {\n                    return _this3.updateState();\n                });\n            }\n        }\n    }\n});\n\nexports.default = AppStore;\n\n/***/ }),\n\n/***/ 130:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _merge2 = __webpack_require__(15);\n\nvar _merge3 = _interopRequireDefault(_merge2);\n\nvar _map2 = __webpack_require__(56);\n\nvar _map3 = _interopRequireDefault(_map2);\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _bsonObjectid = __webpack_require__(17);\n\nvar _bsonObjectid2 = _interopRequireDefault(_bsonObjectid);\n\nvar _immutable = __webpack_require__(9);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _surveymodelbuilder = __webpack_require__(54);\n\nvar _surveymodelbuilder2 = _interopRequireDefault(_surveymodelbuilder);\n\nvar _maketypedrecord = __webpack_require__(81);\n\nvar _maketypedrecord2 = _interopRequireDefault(_maketypedrecord);\n\nvar _processrevivers = __webpack_require__(82);\n\nvar _processrevivers2 = _interopRequireDefault(_processrevivers);\n\nvar _assertions = __webpack_require__(655);\n\nvar _assertions2 = _interopRequireDefault(_assertions);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar defaultSchemaVersion = \"1.0\",\n    PublishedSurveySchemaProvider = function PublishedSurveySchemaProvider() {\n  var version = [\"1.0\"];\n  version[\"1.0\"] = function (publishedSurveyOrModel) {\n    var SchemaVersion = \"1.0\",\n        Model = {\n      schema: {\n        _id: \"\",\n        _rev: \"\",\n        docType: \"publishedsurvey\",\n        surveyId: null,\n        survey: {},\n        commonLink: \"\",\n        contacts: _immutable2.default.Map(),\n        providers: _immutable2.default.Set(),\n        askLocation: false,\n        locationRestrict: false,\n        locationRequired: false,\n        isSurveyAvailabilitySet: false,\n        surveyStartDateTime: null,\n        surveyEndDateTime: null,\n        selectedLocations: [],\n        notification: false,\n        recipientsForNotification: _immutable2.default.Set()\n      },\n      methods: {\n        validateSurvey: function validateSurvey(questionKeys, responses) {\n          var survey = this.getSurvey(),\n              promises = (0, _map3.default)(questionKeys, function (questionKey) {\n            return survey.getPageItem(questionKey).validate(responses[questionKey]);\n          });\n          return Promise.all(promises);\n        },\n        revivers: {\n          publishedSurvey: function publishedSurvey(model) {\n            var _id = model._id,\n                _rev = model._rev,\n                surveyId = model.surveyId,\n                survey = model.survey,\n                contacts = model.contacts,\n                date = model.date,\n                commonLink = model.commonLink,\n                providers = model.providers,\n                askLocation = model.askLocation,\n                locationRestrict = model.locationRestrict,\n                isSurveyAvailabilitySet = model.isSurveyAvailabilitySet,\n                locationRequired = model.locationRequired,\n                surveyStartDateTime = model.surveyStartDateTime,\n                surveyEndDateTime = model.surveyEndDateTime,\n                selectedLocations = model.selectedLocations,\n                notification = model.notification,\n                recipientsForNotification = model.recipientsForNotification,\n                publishedSurvey = this,\n                SurveyModelBuilder = (0, _surveymodelbuilder2.default)(survey._schemaVersion);\n\n            survey = SurveyModelBuilder.fromModel(survey);\n            return publishedSurvey.setId(_id).setRev(_rev).setSurveyId(surveyId).setSurvey(survey).setContacts(contacts).setCreated(date.created).setUpdated(date.updated).setCommonLink(commonLink).setProviders(providers).setAskLocation(askLocation).setLocationRestrict(locationRestrict).setIsSurveyAvailabilitySet(isSurveyAvailabilitySet).setLocationRequired(locationRequired).setSelectedLocations(selectedLocations).setNotification(notification).setSurveyStartDateTime(surveyStartDateTime).setSurveyEndDateTime(surveyEndDateTime).setRecipientsForNotification(recipientsForNotification);\n          }\n        },\n        getId: function getId() {\n          return this.get(\"_id\");\n        },\n        setId: function setId(id) {\n          return this.setIn([\"_id\"], id);\n        },\n        getRev: function getRev() {\n          return this.get(\"_rev\");\n        },\n        setRev: function setRev(rev) {\n          return this.setIn([\"_rev\"], rev);\n        },\n        getSurveyId: function getSurveyId() {\n          return this.get(\"surveyId\");\n        },\n        setSurveyId: function setSurveyId(surveyId) {\n          return this.setIn([\"surveyId\"], surveyId);\n        },\n        getSurvey: function getSurvey() {\n          return this.get(\"survey\");\n        },\n        setSurvey: function setSurvey(survey) {\n          return this.setIn([\"survey\"], survey);\n        },\n        getCommonLink: function getCommonLink() {\n          return this.get(\"commonLink\");\n        },\n        setCommonLink: function setCommonLink(commonLink) {\n          return this.setIn([\"commonLink\"], commonLink);\n        },\n        getContacts: function getContacts() {\n          return this.get(\"contacts\");\n        },\n        setContacts: function setContacts(contacts) {\n          return this.setIn([\"contacts\"], _immutable2.default.Map(contacts));\n        },\n        getContact: function getContact(key) {\n          return this.getIn([\"contacts\", key]);\n        },\n        setCompleted: function setCompleted(responseId, status) {\n          var _get$filter = this.get(\"contacts\").filter(function (contact) {\n            if (contact.responseId == responseId) {\n              return true;\n            }\n          }),\n              _get$filter2 = _slicedToArray(_get$filter, 1),\n              contact = _get$filter2[0],\n              _contact = _slicedToArray(contact, 2),\n              id = _contact[0],\n              obj = _contact[1];\n\n          obj[\"completed\"] = status;\n          return this.setIn([\"contacts\", id], obj);\n        },\n        isUserCompleted: function isUserCompleted(responseId) {\n          var hasResponseId = this.get(\"contacts\").filter(function (contact) {\n            if (contact.responseId == responseId) {\n              return contact.completed;\n            }\n          });\n          return hasResponseId.toArray().length;\n        },\n        validResponseId: function validResponseId(responseId) {\n          var hasResponseId = this.get(\"contacts\").filter(function (contact) {\n            if (contact.responseId == responseId) {\n              return true;\n            }\n          });\n          return hasResponseId.toArray().length;\n        },\n        getProviders: function getProviders() {\n          return this.get(\"providers\");\n        },\n        setProviders: function setProviders(providers) {\n          if (!providers) {\n            return this;\n          }\n          return this.set(\"providers\", _immutable2.default.Set(providers));\n        },\n        getAskLocation: function getAskLocation() {\n          return this.get(\"askLocation\");\n        },\n        setAskLocation: function setAskLocation(askLocation) {\n          if (!askLocation) {\n            return this;\n          }\n          return this.set(\"askLocation\", askLocation);\n        },\n        getLocationRestrict: function getLocationRestrict() {\n          return this.get(\"locationRestrict\");\n        },\n        setLocationRestrict: function setLocationRestrict(locationRestrict) {\n          if (!locationRestrict) {\n            return this;\n          }\n          return this.set(\"locationRestrict\", locationRestrict);\n        },\n        getIsSurveyAvailabilitySet: function getIsSurveyAvailabilitySet() {\n          return this.get(\"isSurveyAvailabilitySet\");\n        },\n        setIsSurveyAvailabilitySet: function setIsSurveyAvailabilitySet(isSurveyAvailabilitySet) {\n          if (!isSurveyAvailabilitySet) {\n            return this;\n          }\n          return this.set(\"isSurveyAvailabilitySet\", isSurveyAvailabilitySet);\n        },\n        getSurveyStartDateTime: function getSurveyStartDateTime() {\n          return this.get(\"surveyStartDateTime\");\n        },\n        setSurveyStartDateTime: function setSurveyStartDateTime(surveyStartDateTime) {\n          if (!surveyStartDateTime) {\n            return this;\n          }\n          return this.set(\"surveyStartDateTime\", surveyStartDateTime);\n        },\n        getSurveyEndDateTime: function getSurveyEndDateTime() {\n          return this.get(\"surveyEndDateTime\");\n        },\n        setSurveyEndDateTime: function setSurveyEndDateTime(surveyEndDateTime) {\n          if (!surveyEndDateTime) {\n            return this;\n          }\n          return this.set(\"surveyEndDateTime\", surveyEndDateTime);\n        },\n        getLocationRequired: function getLocationRequired() {\n          return this.get(\"locationRequired\");\n        },\n        setLocationRequired: function setLocationRequired(locationRequired) {\n          if (!locationRequired) {\n            return this;\n          }\n          return this.set(\"locationRequired\", locationRequired);\n        },\n        getSelectedLocations: function getSelectedLocations() {\n          return this.get(\"selectedLocations\");\n        },\n        setSelectedLocations: function setSelectedLocations(selectedLocations) {\n          if (!selectedLocations) {\n            return this;\n          }\n          return this.set(\"selectedLocations\", selectedLocations);\n        },\n        getNotification: function getNotification() {\n          return this.get(\"notification\");\n        },\n        setNotification: function setNotification(notification) {\n          return this.setIn([\"notification\"], notification);\n        },\n        getRecipientsForNotification: function getRecipientsForNotification() {\n          return this.get(\"recipientsForNotification\");\n        },\n        setRecipientsForNotification: function setRecipientsForNotification(recipientsForNotification) {\n          if (!recipientsForNotification) {\n            return this;\n          }\n          return this.set(\"recipientsForNotification\", _immutable2.default.Set(recipientsForNotification));\n        }\n      }\n    };\n    Model.Date = {\n      schema: {\n        date: {\n          created: new Date(),\n          updated: new Date()\n        }\n      },\n      methods: {\n        revivers: {\n          date: function date(_date) {\n            var created = _date.created,\n                updated = _date.updated,\n                Date = this;\n\n            return this.setCreated(created).setUpdated(updated);\n          }\n        },\n        getDate: function getDate() {\n          return this.get(\"date\");\n        },\n        getCreated: function getCreated() {\n          return this.getIn([\"date\", \"created\"]);\n        },\n        setCreated: function setCreated(dateString) {\n          if (!dateString) {\n            return this;\n          }\n          var date = new Date(dateString);\n          return this.setIn([\"date\", \"created\"], date);\n        },\n        getUpdated: function getUpdated() {\n          return this.getIn([\"date\", \"updated\"]);\n        },\n        setUpdated: function setUpdated(dateString) {\n          if (!dateString) {\n            return this;\n          }\n          var date = new Date(dateString);\n          return this.setIn([\"date\", \"updated\"], date);\n        }\n      }\n    };\n\n    Model.Attachments = {\n      schema: {\n        thumbnail: \"\"\n      },\n      methods: {\n        revivers: {\n          attachments: function attachments(model) {\n            var thumbnail = model.thumbnail;\n\n            return this.setThumbnail(thumbnail);\n          }\n        },\n        getThumbnail: function getThumbnail() {\n          return this.getIn([\"thumbnail\"]);\n        },\n        setThumbnail: function setThumbnail(thumbnail) {\n          return this.setIn([\"thumbnail\"], thumbnail);\n        }\n      }\n    };\n    Model.PublishedSurvey = (0, _merge3.default)(Model, Model.Date, Model.Attachments);\n    var Types = {\n      PublishedSurvey: (0, _maketypedrecord2.default)(Model.PublishedSurvey)\n    },\n        revivePublishedSurveyModel = function revivePublishedSurveyModel(model) {\n      var publishedSurvey = new Types.PublishedSurvey();\n      return (0, _processrevivers2.default)(publishedSurvey, model);\n    },\n        getPublishedSurveyModel = function getPublishedSurveyModel(publishedSurveyOrModel) {\n      if (!publishedSurveyOrModel.docType) {\n        var SurveyModelBuilder = (0, _surveymodelbuilder2.default)(publishedSurveyOrModel._schemaVersion),\n            model = {\n          _id: (0, _bsonObjectid2.default)().str,\n          surveyId: publishedSurveyOrModel.surveyId,\n          survey: SurveyModelBuilder.fromModel(publishedSurveyOrModel.survey),\n          contacts: publishedSurveyOrModel.contacts,\n          providers: publishedSurveyOrModel.providers,\n          askLocation: publishedSurveyOrModel.askLocation,\n          locationRestrict: publishedSurveyOrModel.locationRestrict,\n          locationRequired: publishedSurveyOrModel.locationRequired,\n          isSurveyAvailabilitySet: publishedSurveyOrModel.isSurveyAvailabilitySet,\n          surveyStartDateTime: publishedSurveyOrModel.surveyStartDateTime,\n          surveyEndDateTime: publishedSurveyOrModel.surveyEndDateTime,\n          selectedLocations: publishedSurveyOrModel.selectedLocations,\n          recipientsForNotification: publishedSurveyOrModel.recipientsForNotification,\n          notification: publishedSurveyOrModel.notification\n        };\n        return new Types.PublishedSurvey(model);\n      }\n      return revivePublishedSurveyModel(publishedSurveyOrModel);\n    };\n\n    return getPublishedSurveyModel(publishedSurveyOrModel);\n  };\n  return {\n    getPublishedSurveyModel: function getPublishedSurveyModel(publishedSurvey) {\n      var _schemaVersion = defaultSchemaVersion;\n      if (publishedSurvey.survey._schemaVersion) {\n        _schemaVersion = publishedSurvey.survey._schemaVersion;\n      }\n      return version[_schemaVersion](publishedSurvey);\n    },\n    fromModel: function fromModel(model) {\n      var _schemaVersion = defaultSchemaVersion;\n      if (model._schemaVersion) {\n        _schemaVersion = model._schemaVersion;\n      }\n      return version[_schemaVersion](model);\n    }\n  };\n},\n    PublishedSurveyModelProvider = function PublishedSurveyModelProvider() {\n  var schemaVersion = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultSchemaVersion;\n\n  return PublishedSurveySchemaProvider();\n};\n\nexports.default = PublishedSurveyModelProvider;\n\n/***/ }),\n\n/***/ 141:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _refluxCore = __webpack_require__(14);\n\nvar _refluxCore2 = _interopRequireDefault(_refluxCore);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar SurveysActions = _refluxCore2.default.createActions([\"addNewSurvey\", \"deleteSurvey\", \"undo\", \"dialogOpen\", \"cloneSurvey\", \"undoSurvey\", \"optionsSurveyHeaderOpen\", \"optionsSurveyHeaderDone\", \"optionPageOpen\", \"optionPageDone\", \"optionsPageItemOpen\", \"optionsPageItemDone\", \"addQuestionDone\", \"addDecoratorDone\", \"addPageDone\", \"deleteQuestion\", \"deletePage\", \"moveQuestion\", \"movePage\", \"loadSurvey\", \"addDefaultPage\", \"addDefaultQuestion\", \"shuffleQuestions\", \"startTest\", \"stopTest\", \"changeQuestion\", \"setSurveyTitle\", \"setSectionTitleDescription\", \"movePageItem\", \"randomizePageItems\", \"setQuestionDisplay\", \"exportToJSON\", \"uploadSurvey\", \"undoSurvey\", \"reset\", \"setUpdatedSurvey\"]);\n\nexports.default = SurveysActions;\n\n/***/ }),\n\n/***/ 143:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _refluxCore = __webpack_require__(14);\n\nvar _refluxCore2 = _interopRequireDefault(_refluxCore);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar PublishSurveyActions = _refluxCore2.default.createActions([\"cancel\", \"next\", \"prev\", \"finish\", \"startPublish\", \"setSurveyId\", \"addContact\", \"removeContact\", \"addGroup\", \"addContactsByGroup\", \"deletePublishedSurvey\", \"tabChanged\", \"searchContacts\", \"nextContactsPage\", \"prevContactsPage\", \"jumpToContactsPage\", \"nextSelectedContactsPage\", \"prevSelectedContactsPage\", \"jumpToSelectedContactsPage\", \"nextPublishedSurveysPage\", \"prevPublishedSurveysPage\", \"jumpToPublishedSurveysPage\", \"updateProviders\", \"updateAskLocation\", \"updateSurveyAvailability\", \"updateLocationRestrict\", \"updateLocationRequired\", \"updateSurveyStartDateTime\", \"updateSurveyEndDateTime\", \"initializeSurveysResponses\", \"jumpToResponses\", \"nextResponses\", \"previousResponses\", \"resetResponses\", \"optionsInvitationOpen\", \"optionsInvitationDone\", \"getCurrentLocation\", \"onSelectedMarkerDelete\", \"onSuggestSelect\", \"oncurrentLocationDragEnd\", \"onCurrentLocMarkerClick\", \"setMapCenterLocation\", \"onDistanceChange\", \"onSelectedLocMarkerClick\", \"onLocationCardClick\", \"setMailsForNotification\", \"initCurrentPublishedSurvey\", \"reset\", \"enableNotifications\", \"setRecipientsForNotifications\", \"updateCurrentPublishedSurvey\"]);\n\nexports.default = PublishSurveyActions;\n\n/***/ }),\n\n/***/ 153:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _refluxCore = __webpack_require__(14);\n\nvar _refluxCore2 = _interopRequireDefault(_refluxCore);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar SettingsActions = _refluxCore2.default.createActions([\"open\", \"update\", \"done\", \"cancel\", \"close\"]);\n\nexports.default = SettingsActions;\n\n/***/ }),\n\n/***/ 155:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _merge2 = __webpack_require__(15);\n\nvar _merge3 = _interopRequireDefault(_merge2);\n\nvar _isArray2 = __webpack_require__(12);\n\nvar _isArray3 = _interopRequireDefault(_isArray2);\n\nvar _forIn2 = __webpack_require__(24);\n\nvar _forIn3 = _interopRequireDefault(_forIn2);\n\nvar _map2 = __webpack_require__(56);\n\nvar _map3 = _interopRequireDefault(_map2);\n\nvar _immutable = __webpack_require__(9);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _surveymodelbuilder = __webpack_require__(54);\n\nvar _surveymodelbuilder2 = _interopRequireDefault(_surveymodelbuilder);\n\nvar _maketypedrecord = __webpack_require__(81);\n\nvar _maketypedrecord2 = _interopRequireDefault(_maketypedrecord);\n\nvar _processrevivers = __webpack_require__(82);\n\nvar _processrevivers2 = _interopRequireDefault(_processrevivers);\n\nvar _assertions = __webpack_require__(794);\n\nvar _assertions2 = _interopRequireDefault(_assertions);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar defaultSchemaVersion = \"1.0\",\n    ClientSurveyResponseSchemaProvider = function ClientSurveyResponseSchemaProvider() {\n  var version = [\"1.0\"];\n  version[\"1.0\"] = function (clientSurveyResponseOrModel) {\n    var SchemaVersion = \"1.0\",\n        TimeTrackerFactory = {\n      timeTracker: function timeTracker(model) {\n        if (!model) {\n          throw \"Empty.\";\n        }\n        return new Types.TimeTracker(model);\n      },\n      fromModel: function fromModel(model) {\n        return (0, _processrevivers2.default)(new Types.TimeTracker(model), model);\n      }\n    },\n        Model = {\n      schema: {\n        _id: \"\",\n        _rev: \"\",\n        docType: \"surveyresponse\",\n        publishedInstanceId: \"\",\n        survey: {},\n        responses: _immutable2.default.Map(),\n        sharedInformation: _immutable2.default.Map({\n          link: \"\",\n          id: \"\"\n        }),\n        session: _immutable2.default.Map({\n          startTime: \"\",\n          endTime: \"\"\n        }),\n        client: _immutable2.default.Map({\n          startTime: \"\",\n          endTime: \"\",\n          surveyArriveTime: \"\",\n          tracker: _immutable2.default.Map()\n        }),\n        code: _immutable2.default.Map({\n          total: 0,\n          success: 0\n        }),\n        totalMarks: 0,\n        obtainedMarks: 0,\n        userLocations: [],\n        selectedLocations: []\n      },\n      methods: {\n        validateSurvey: function validateSurvey(questionKeys, responses) {\n          var survey = this.getSurvey(),\n              promises = (0, _map3.default)(questionKeys, function (questionKey) {\n            return survey.getPageItem(questionKey).validate(responses[questionKey]);\n          });\n          return Promise.all(promises);\n        },\n        revivers: {\n          clientSurveyResponse: function clientSurveyResponse(model) {\n            var _id = model._id,\n                _rev = model._rev,\n                publishedInstanceId = model.publishedInstanceId,\n                survey = model.survey,\n                responses = model.responses,\n                code = model.code,\n                totalMarks = model.totalMarks,\n                obtainedMarks = model.obtainedMarks,\n                session = model.session,\n                client = model.client,\n                userLocations = model.userLocations,\n                selectedLocations = model.selectedLocations,\n                sharedInformation = model.sharedInformation,\n                clientSurveyResponse = this,\n                SurveyModelBuilder = (0, _surveymodelbuilder2.default)(survey._schemaVersion);\n\n            survey = SurveyModelBuilder.fromModel(survey);\n\n            return clientSurveyResponse.setId(_id).setRevision(_rev).setPublishedInstanceId(publishedInstanceId).setSurvey(survey).setSharedInformation(sharedInformation).setResponses(responses).setTotalMarks(totalMarks).setObtainedMarks(obtainedMarks).setSurveyArriveTime(client.surveyArriveTime).setSession(session).setClientStartTime(client.startTime).setClientEndTime(client.endTime).setClientTracker(client.tracker).setUserLocations(userLocations).setSelectedLocations(selectedLocations);\n          }\n        },\n        getId: function getId() {\n          return this.get(\"_id\");\n        },\n        setId: function setId(id) {\n          return this.setIn([\"_id\"], id);\n        },\n        getRevision: function getRevision() {\n          return this.get(\"_rev\");\n        },\n        setRevision: function setRevision(_rev) {\n          return this.setIn([\"_rev\"], _rev);\n        },\n        getPublishedInstanceId: function getPublishedInstanceId() {\n          return this.get(\"publishedInstanceId\");\n        },\n        setPublishedInstanceId: function setPublishedInstanceId(publishedInstanceId) {\n          return this.setIn([\"publishedInstanceId\"], publishedInstanceId);\n        },\n        getSurvey: function getSurvey() {\n          return this.get(\"survey\");\n        },\n        setSurvey: function setSurvey(survey) {\n          return this.setIn([\"survey\"], survey);\n        },\n        setSharedInformation: function setSharedInformation(sharedInformation) {\n          if (!sharedInformation) {\n            return this;\n          }\n          return this.setIn([\"sharedInformation\"], _immutable2.default.Map(sharedInformation));\n        },\n        getSharedInformation: function getSharedInformation() {\n          return this.get(\"sharedInformation\");\n        },\n        getSharedLink: function getSharedLink() {\n          return this.getIn([\"sharedInformation\", \"link\"]);\n        },\n        getSharedId: function getSharedId() {\n          return this.getIn([\"sharedInformation\", \"id\"]);\n        },\n        getResponses: function getResponses() {\n          return this.get(\"responses\");\n        },\n        setResponses: function setResponses(responses) {\n          return this.setIn([\"responses\"], _immutable2.default.Map(responses));\n        },\n        getResponse: function getResponse(key) {\n          return this.getIn([\"responses\", key]);\n        },\n        setResponse: function setResponse(key, response) {\n          return this.setIn([\"responses\", key], response);\n        },\n        getCode: function getCode() {\n          return this.getIn([\"code\"]);\n        },\n        setCode: function setCode(code) {\n          if (!code) {\n            return this;\n          }\n          return this.setIn([\"code\"], _immutable2.default.Map(code));\n        },\n        getTotalCodeQuestions: function getTotalCodeQuestions() {\n          return this.getIn([\"code\", \"total\"]);\n        },\n        setTotalCodeQuestions: function setTotalCodeQuestions(total) {\n          return this.setIn([\"code\", \"total\"], total);\n        },\n        getTotalSuccessCodeQuestions: function getTotalSuccessCodeQuestions() {\n          return this.getIn([\"code\", \"success\"]);\n        },\n        setTotalSuccessCodeQuestions: function setTotalSuccessCodeQuestions(success) {\n          return this.setIn([\"code\", \"success\"], success);\n        },\n        getSession: function getSession() {\n          return this.get(\"session\");\n        },\n        setSession: function setSession(session) {\n          return this.set(\"session\", _immutable2.default.Map(session));\n        },\n        getClient: function getClient() {\n          return this.get(\"client\");\n        },\n        setClient: function setClient(client) {\n          return this.set(\"client\", _immutable2.default.Map(client));\n        },\n        getSessionStartTime: function getSessionStartTime() {\n          return this.getIn([\"session\", \"startTime\"]);\n        },\n        setSessionStartTime: function setSessionStartTime(startTime) {\n          return this.setIn([\"session\", \"startTime\"], startTime);\n        },\n        getSessionEndTime: function getSessionEndTime() {\n          return this.getIn([\"session\", \"endTime\"]);\n        },\n        setSessionEndTime: function setSessionEndTime(endTime) {\n          return this.setIn([\"session\", \"endTime\"], endTime);\n        },\n        getClientStartTime: function getClientStartTime() {\n          return this.getIn([\"client\", \"startTime\"]);\n        },\n        setClientStartTime: function setClientStartTime(startTime) {\n          return this.setIn([\"client\", \"startTime\"], startTime);\n        },\n        getClientEndTime: function getClientEndTime() {\n          return this.getIn([\"client\", \"endTime\"]);\n        },\n        setClientEndTime: function setClientEndTime(endTime) {\n          return this.setIn([\"client\", \"endTime\"], endTime);\n        },\n        getTotalMarks: function getTotalMarks() {\n          return this.get(\"totalMarks\");\n        },\n        setTotalMarks: function setTotalMarks(marks) {\n          return this.set(\"totalMarks\", marks);\n        },\n        getObtainedMarks: function getObtainedMarks() {\n          return this.get(\"obtainedMarks\");\n        },\n        setObtainedMarks: function setObtainedMarks(marks) {\n          return this.set(\"obtainedMarks\", marks);\n        },\n        getUserLocations: function getUserLocations() {\n          return this.get(\"userLocations\");\n        },\n        setUserLocations: function setUserLocations(userLocations) {\n          return this.set(\"userLocations\", userLocations);\n        },\n        getSelectedLocations: function getSelectedLocations() {\n          return this.get(\"selectedLocations\");\n        },\n        setSelectedLocations: function setSelectedLocations(selectedLocations) {\n          return this.set(\"selectedLocations\", selectedLocations);\n        },\n        getClientTracker: function getClientTracker(id) {\n          return this.getIn([\"client\", \"tracker\", id]);\n        },\n        getClientTrackers: function getClientTrackers() {\n          return this.getIn([\"client\", \"tracker\"]);\n        },\n        addClientTracker: function addClientTracker(id, timeTracker) {\n          return this.setIn([\"client\", \"tracker\", id], timeTracker);\n        },\n        setClientTracker: function setClientTracker(tracker) {\n          var clientSurveyResponse = this;\n          (0, _forIn3.default)(tracker, function (timeTracker, key) {\n            clientSurveyResponse = clientSurveyResponse.addClientTracker(key, TimeTrackerFactory.fromModel(timeTracker));\n          });\n          return clientSurveyResponse;\n        },\n        getSurveyArriveTime: function getSurveyArriveTime() {\n          return this.getIn([\"client\", \"surveyArriveTime\"]);\n        },\n        setSurveyArriveTime: function setSurveyArriveTime(surveyArriveTime) {\n          return this.setIn([\"client\", \"surveyArriveTime\"], surveyArriveTime);\n        }\n      }\n    };\n    Model.UserInfo = {\n      schema: {\n        userInfo: {\n          general: {\n            name: \"\",\n            email: \"\"\n          },\n          device: {\n            id: \"\",\n            screenResolution: \"\",\n            timeZoneOffset: \"\"\n          },\n          os: \"\",\n          browser: {\n            name: \"\",\n            version: \"\"\n          }\n        }\n      },\n      methods: {\n        revivers: {\n          userInfo: function userInfo(model) {\n            var userInfo = model.userInfo;\n\n            if (!userInfo) {\n              return this;\n            }\n            return this.setGeneral(userInfo.general).setDeviceId(userInfo.device.id).setDeviceScreenResolution(userInfo.device.screenResolution).setDeviceTimeZoneOffset(userInfo.device.timeZoneOffset).setOS(userInfo.os).setBrowserName(userInfo.browser.name).setBrowserVersion(userInfo.browser.version);\n          }\n        },\n        getUserInfo: function getUserInfo() {\n          return this.get(\"userInfo\");\n        },\n        setUserInfo: function setUserInfo(userInfo) {\n          return this.set(\"userInfo\", _immutable2.default.Map(userInfo));\n        },\n        getGeneral: function getGeneral() {\n          return this.getIn([\"userInfo\", \"general\"]);\n        },\n        setGeneral: function setGeneral(general) {\n          if (!general) {\n            return this;\n          }\n          return this.setIn([\"userInfo\", \"general\"], general);\n        },\n        getName: function getName() {\n          return this.getIn([\"userInfo\", \"general\", \"name\"]);\n        },\n        setName: function setName(name) {\n          return this.setIn([\"userInfo\", \"general\", \"name\"], name);\n        },\n        getEmail: function getEmail() {\n          return this.getIn([\"userInfo\", \"general\", \"email\"]);\n        },\n        setEmail: function setEmail(email) {\n          return this.setIn([\"userInfo\", \"general\", \"email\"], email);\n        },\n        getDevice: function getDevice() {\n          return this.getIn([\"userInfo\", \"device\"]);\n        },\n        setDevice: function setDevice(device) {\n          return this.setIn([\"userInfo\", \"device\"], device);\n        },\n        getDeviceId: function getDeviceId() {\n          return this.getIn([\"userInfo\", \"device\", \"id\"]);\n        },\n        setDeviceId: function setDeviceId(id) {\n          return this.setIn([\"userInfo\", \"device\", \"id\"], id);\n        },\n        setDeviceName: function setDeviceName(name) {\n          return this.setIn([\"userInfo\", \"device\", \"name\"], name);\n        },\n        getDeviceScreenResolution: function getDeviceScreenResolution() {\n          return this.getIn([\"userInfo\", \"device\", \"screenResolution\"]);\n        },\n        setDeviceScreenResolution: function setDeviceScreenResolution(screenResolution) {\n          return this.setIn([\"userInfo\", \"device\", \"screenResolution\"], screenResolution);\n        },\n        getDeviceTimeZoneOffset: function getDeviceTimeZoneOffset() {\n          return this.getIn([\"userInfo\", \"device\", \"timeZoneOffset\"]);\n        },\n        setDeviceTimeZoneOffset: function setDeviceTimeZoneOffset(timeZoneOffset) {\n          return this.setIn([\"userInfo\", \"device\", \"timeZoneOffset\"], timeZoneOffset);\n        },\n        getOS: function getOS() {\n          return this.getIn([\"userInfo\", \"os\"]);\n        },\n        setOS: function setOS(os) {\n          return this.setIn([\"userInfo\", \"os\"], os);\n        },\n        getBrowser: function getBrowser() {\n          return this.getIn([\"userInfo\", \"browser\"]);\n        },\n        setBrowser: function setBrowser(browser) {\n          return this.setIn([\"userInfo\", \"browser\"], browser);\n        },\n        getBrowserName: function getBrowserName() {\n          return this.getIn([\"userInfo\", \"browser\", \"name\"]);\n        },\n        setBrowserName: function setBrowserName(name) {\n          return this.setIn([\"userInfo\", \"browser\", \"name\"], name);\n        },\n        getBrowserVersion: function getBrowserVersion() {\n          return this.getIn([\"userInfo\", \"browser\", \"version\"]);\n        },\n        setBrowserVersion: function setBrowserVersion(version) {\n          return this.setIn([\"userInfo\", \"browser\", \"version\"], version);\n        }\n      }\n    };\n    Model.TimeTracker = {\n      schema: {\n        timeTrail: [],\n        switchTrail: [],\n        finalResponseTime: \"\"\n      },\n      methods: {\n        revivers: {\n          timeTracker: function timeTracker(model) {\n            var timeTrail = model.timeTrail,\n                finalResponseTime = model.finalResponseTime,\n                switchTrail = model.switchTrail;\n\n\n            return this.setTimeTrail(timeTrail).setSwitchTrail(switchTrail).setFinalResponseTime(finalResponseTime);\n          }\n        },\n        getTimeTrail: function getTimeTrail() {\n          return this.get(\"timeTrail\");\n        },\n        setTimeTrail: function setTimeTrail(timeTrail) {\n          if (!(0, _isArray3.default)(timeTrail)) {\n            return this;\n          }\n          return this.set(\"timeTrail\", timeTrail);\n        },\n        getSwitchTrail: function getSwitchTrail() {\n          return this.get(\"switchTrail\");\n        },\n        setSwitchTrail: function setSwitchTrail(switchTrail) {\n          if (!(0, _isArray3.default)(switchTrail)) {\n            return this;\n          }\n          return this.set(\"switchTrail\", switchTrail);\n        },\n        getFinalResponseTime: function getFinalResponseTime() {\n          return this.get(\"finalResponseTime\");\n        },\n        setFinalResponseTime: function setFinalResponseTime(finalResponseTime) {\n          return this.set(\"finalResponseTime\", finalResponseTime);\n        }\n      }\n    };\n    Model.ClientSurveyResponse = (0, _merge3.default)(Model, Model.UserInfo);\n    var Types = {\n      ClientSurveyResponse: (0, _maketypedrecord2.default)(Model.ClientSurveyResponse),\n      TimeTracker: (0, _maketypedrecord2.default)(Model.TimeTracker)\n    },\n        reviveClientSurveyResponseModel = function reviveClientSurveyResponseModel(model) {\n      var clientSurveyResponse = new Types.ClientSurveyResponse();\n      return (0, _processrevivers2.default)(clientSurveyResponse, model);\n    },\n        getClientSurveyResponseModel = function getClientSurveyResponseModel(clientSurveyResponseOrModel) {\n      if (!clientSurveyResponseOrModel.docType) {\n        var SurveyModelBuilder = (0, _surveymodelbuilder2.default)(clientSurveyResponseOrModel._schemaVersion),\n            model = {\n          _id: clientSurveyResponseOrModel.responseId,\n          survey: SurveyModelBuilder.fromModel(clientSurveyResponseOrModel.survey)\n        };\n        return new Types.ClientSurveyResponse(model);\n      }\n      return reviveClientSurveyResponseModel(clientSurveyResponseOrModel);\n    };\n\n    return getClientSurveyResponseModel(clientSurveyResponseOrModel);\n  };\n  return {\n    getClientSurveyResponseModel: function getClientSurveyResponseModel(clientSurveyResponse) {\n      var _schemaVersion = defaultSchemaVersion;\n      if (clientSurveyResponse.survey._schemaVersion) {\n        _schemaVersion = clientSurveyResponse.survey._schemaVersion;\n      }\n      return version[_schemaVersion](clientSurveyResponse);\n    },\n    fromModel: function fromModel(model) {\n      var _schemaVersion = defaultSchemaVersion;\n      if (model._schemaVersion) {\n        _schemaVersion = model._schemaVersion;\n      }\n      return version[_schemaVersion](model);\n    }\n  };\n},\n    ClientSurveyResponseModelProvider = function ClientSurveyResponseModelProvider() {\n  var schemaVersion = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultSchemaVersion;\n\n  return ClientSurveyResponseSchemaProvider();\n};\n\nexports.default = ClientSurveyResponseModelProvider;\n\n/***/ }),\n\n/***/ 156:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = {\n    //http://stackoverflow.com/questions/46155/validate-email-address-in-javascript\n    email: /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n};\n\n/***/ }),\n\n/***/ 157:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _connect = __webpack_require__(63);\n\nvar _connect2 = _interopRequireDefault(_connect);\n\nvar _reactAddonsPureRenderMixin = __webpack_require__(27);\n\nvar _reactAddonsPureRenderMixin2 = _interopRequireDefault(_reactAddonsPureRenderMixin);\n\nvar _FontIcon = __webpack_require__(102);\n\nvar _FontIcon2 = _interopRequireDefault(_FontIcon);\n\nvar _CircularProgress = __webpack_require__(400);\n\nvar _CircularProgress2 = _interopRequireDefault(_CircularProgress);\n\nvar _Avatar = __webpack_require__(377);\n\nvar _Avatar2 = _interopRequireDefault(_Avatar);\n\nvar _IconButton = __webpack_require__(140);\n\nvar _IconButton2 = _interopRequireDefault(_IconButton);\n\nvar _Paper = __webpack_require__(51);\n\nvar _Paper2 = _interopRequireDefault(_Paper);\n\nvar _MenuItem = __webpack_require__(103);\n\nvar _MenuItem2 = _interopRequireDefault(_MenuItem);\n\nvar _IconMenu = __webpack_require__(420);\n\nvar _IconMenu2 = _interopRequireDefault(_IconMenu);\n\nvar _colors = __webpack_require__(48);\n\nvar Colors = _interopRequireWildcard(_colors);\n\nvar _i18n = __webpack_require__(8);\n\nvar _i18n2 = _interopRequireDefault(_i18n);\n\nvar _authactions = __webpack_require__(30);\n\nvar _authactions2 = _interopRequireDefault(_authactions);\n\nvar _authstore = __webpack_require__(231);\n\nvar _authstore2 = _interopRequireDefault(_authstore);\n\nvar _appsettings = __webpack_require__(28);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar UserProfile = _react2.default.createClass({\n  displayName: \"UserProfile\",\n\n  mixins: [_reactAddonsPureRenderMixin2.default, (0, _connect2.default)(_authstore2.default, \"Auth\")],\n  handleLogout: function handleLogout() {\n    _authactions2.default.logout();\n  },\n  handleLogin: function handleLogin(provider) {\n    _authactions2.default.login(provider);\n  },\n  handleChildLogOut: function handleChildLogOut() {\n    this.props.onLogOut();\n  },\n  getUserIcon: function getUserIcon(auth) {\n    var authState = auth.authState,\n        AuthStates = auth.AuthStates,\n        error = auth.error,\n        userProfile = auth.userProfile,\n        isMobile = this.context.customTheme.isMobile;\n\n\n    if (authState == AuthStates.SIGNED_IN) {\n      var name = userProfile.name,\n          thumbnail = userProfile.thumbnail;\n\n      return _react2.default.createElement(\n        _IconButton2.default,\n        {\n          className: \"iconButton\",\n          tooltip: !isMobile && name,\n          tooltipPosition: \"bottom-left\",\n          touch: true\n        },\n        _react2.default.createElement(_Avatar2.default, { src: thumbnail, size: 40, className: \"userAvatar\" })\n      );\n    }\n\n    if (authState == AuthStates.SIGNED_OUT) {\n      return _react2.default.createElement(_IconButton2.default, {\n        className: \"iconButton\",\n        iconClassName: \"icon-person icon_medium\",\n        tooltipPosition: \"bottom-left\",\n        tooltip: !isMobile && _i18n2.default.t(\"Sign-in\"),\n        touch: true\n      });\n    }\n\n    if (authState == AuthStates.ERROR) {\n      return _react2.default.createElement(\n        _IconButton2.default,\n        {\n          className: \"iconButton\",\n          iconClassName: \"material-icons icon_medium\",\n          tooltipPosition: \"bottom-left\",\n          tooltip: !isMobile && error.message || error,\n          iconStyle: { color: Colors.red, textShadow: _appsettings.Emboss },\n          touch: true\n        },\n        \"error_outline\"\n      );\n    }\n\n    // The other states are sining-in ang signing-out.\n    // Display in-progress icon for this period.\n    return _react2.default.createElement(_CircularProgress2.default, {\n      size: 0.4,\n      color: Colors.lightBlue800,\n      style: { height: 40, width: 40, margin: \"-5px 5px 0px -5px\" }\n    });\n  },\n  getAuthMenu: function getAuthMenu(auth) {\n    var authState = auth.authState,\n        AuthStates = auth.AuthStates,\n        provider = auth.provider,\n        AuthProviders = auth.AuthProviders;\n\n    if (authState == AuthStates.SIGNED_IN) {\n      // Render logout for signed-in user.\n      var icon = _react2.default.createElement(_FontIcon2.default, { className: \"icon-logout\", color: Colors.blue500 });\n      return _react2.default.createElement(\n        _IconMenu2.default,\n        {\n          iconButtonElement: this.getUserIcon(auth),\n          anchorOrigin: { horizontal: \"left\", vertical: \"bottom\" },\n          targetOrigin: { horizontal: \"left\", vertical: \"top\" }\n        },\n        _react2.default.createElement(_MenuItem2.default, {\n          style: this.context.customTheme.menuItem,\n          leftIcon: icon,\n          primaryText: _i18n2.default.t(\"Sign-out\"),\n          onTouchTap: this.handleLogout\n        })\n      );\n    }\n\n    if (authState == AuthStates.SIGNED_OUT) {\n      // Render login options from supported providers\n      // for signed-out user.\n      var providersItems = [];\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = AuthProviders[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var _provider = _step.value;\n\n          var name = _provider.name,\n              title = _provider.title,\n              logo = _provider.logo,\n              _icon = _react2.default.createElement(_FontIcon2.default, { className: logo, color: Colors.blue500 });\n\n          providersItems.push(_react2.default.createElement(_MenuItem2.default, {\n            style: this.context.customTheme.menuItem,\n            key: name,\n            primaryText: _i18n2.default.t(title),\n            leftIcon: _icon,\n            onTouchTap: this.handleLogin.bind(this, name)\n          }));\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return _react2.default.createElement(\n        _IconMenu2.default,\n        {\n          iconButtonElement: this.getUserIcon(auth),\n          anchorOrigin: { horizontal: \"right\", vertical: \"bottom\" },\n          targetOrigin: { horizontal: \"right\", vertical: \"top\" }\n        },\n        providersItems\n      );\n    }\n\n    return this.getUserIcon(auth);\n  },\n  render: function render() {\n    var auth = this.state.Auth.toJSON(),\n        node = this.getAuthMenu(auth);\n    var _props = this.props,\n        signoutCaption = _props.signoutCaption,\n        cancelCaption = _props.cancelCaption;\n\n    return _react2.default.createElement(\n      _Paper2.default,\n      {\n        zDepth: 1,\n        style: {\n          height: 40,\n          width: 40,\n          display: \"inline-block\"\n        },\n        circle: true\n      },\n      node\n    );\n  }\n});\nUserProfile.contextTypes = {\n  customTheme: _react2.default.PropTypes.object\n};\n\nexports.default = UserProfile;\n\n/***/ }),\n\n/***/ 163:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _refluxCore = __webpack_require__(14);\n\nvar _refluxCore2 = _interopRequireDefault(_refluxCore);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar TimeTrackerActions = _refluxCore2.default.createActions([\"recordTime\", \"updateTimerInformation\"]);\n\nexports.default = TimeTrackerActions;\n\n/***/ }),\n\n/***/ 165:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _merge2 = __webpack_require__(15);\n\nvar _merge3 = _interopRequireDefault(_merge2);\n\nvar _isBoolean2 = __webpack_require__(318);\n\nvar _isBoolean3 = _interopRequireDefault(_isBoolean2);\n\nvar _bluebird = __webpack_require__(32);\n\nvar _bluebird2 = _interopRequireDefault(_bluebird);\n\nvar _immutable = __webpack_require__(9);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _regex = __webpack_require__(156);\n\nvar _regex2 = _interopRequireDefault(_regex);\n\nvar _maketypedrecord = __webpack_require__(81);\n\nvar _maketypedrecord2 = _interopRequireDefault(_maketypedrecord);\n\nvar _processrevivers = __webpack_require__(82);\n\nvar _processrevivers2 = _interopRequireDefault(_processrevivers);\n\nvar _assertions = __webpack_require__(765);\n\nvar _assertions2 = _interopRequireDefault(_assertions);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ContactsBuilder = function ContactsBuilder() {\n    var contact = function contact(model) {\n        var Model = {\n            \"schema\": {\n                \"_id\": \"\",\n                \"_rev\": \"\",\n                \"_deleted\": false,\n                \"groups\": _immutable2.default.Set()\n            },\n            \"methods\": {\n                \"revivers\": {\n                    \"contact\": function contact(model) {\n                        var _id = model._id,\n                            _rev = model._rev,\n                            groups = model.groups,\n                            contact = this;\n\n                        return contact.setId(_id).setRev(_rev).setGroups(groups);\n                    }\n                },\n                \"getId\": function getId() {\n                    return this.get(\"_id\");\n                },\n                \"setId\": function setId(id) {\n                    return this.set(\"_id\", id);\n                },\n                \"getRev\": function getRev() {\n                    return this.get(\"_rev\");\n                },\n                \"setRev\": function setRev(rev) {\n                    return this.set(\"_rev\", rev);\n                },\n                \"getDeleted\": function getDeleted() {\n                    return this.get(\"_deleted\");\n                },\n                \"setDeleted\": function setDeleted(deleted) {\n                    if ((0, _isBoolean3.default)(deleted)) {\n                        return this.set(\"_deleted\", deleted);\n                    }\n\n                    return this;\n                },\n                \"hasGroup\": function hasGroup(groupName) {\n                    return this.get(\"groups\").includes(groupName);\n                },\n                \"getGroups\": function getGroups() {\n                    return this.get(\"groups\").toSeq();\n                },\n                \"setGroup\": function setGroup(groupName) {\n                    return this.set(\"groups\", this.get(\"groups\").add(groupName));\n                },\n                \"setGroups\": function setGroups(groups) {\n                    groups = _immutable2.default.Set(groups);\n                    return this.set(\"groups\", groups);\n                },\n                \"removeGroup\": function removeGroup(groupName) {\n                    return this.set(\"groups\", this.get(\"groups\").remove(groupName));\n                },\n                \"validate\": function validate() {\n                    var promises = [],\n                        validatorsKeys = Object.keys(this.validators);\n                    for (var i = 0; i < validatorsKeys.length; i++) {\n                        var validatorsKey = validatorsKeys[i];\n                        promises.push(this.validators[validatorsKey].call(this));\n                    }\n                    return _bluebird2.default.all(promises.map(function (promise) {\n                        return promise.reflect();\n                    })).each(function (inspection) {\n                        if (inspection.isFulfilled()) {\n                            return inspection.value();\n                        } else {\n                            return inspection.reason();\n                        }\n                    });\n                }\n            }\n\n        };\n        Model.Email = {\n            \"schema\": {\n                \"email\": \"\"\n            },\n            \"methods\": {\n                \"revivers\": {\n                    \"email\": function email(model) {\n                        var email = model.email;\n\n                        return this.setEmail(email);\n                    }\n                },\n                \"getEmail\": function getEmail() {\n                    return this.get(\"email\");\n                },\n                \"setEmail\": function setEmail(email) {\n                    _assertions2.default.validEmail(email);\n                    return this.set(\"email\", email);\n                },\n                \"validators\": {\n                    \"validEmail\": function validEmail() {\n                        var email = this.getEmail();\n                        if (!email) {\n                            return _bluebird2.default.reject({ \"email\": \"Email is required.\" });\n                        }\n                        if (!_regex2.default[\"email\"].test(email)) {\n                            return _bluebird2.default.reject({ \"email\": \"Email is not valid.\" });\n                        }\n                        return _bluebird2.default.resolve();\n                    }\n                }\n            }\n        };\n        Model.FullName = {\n            \"schema\": {\n                \"fullName\": \"\"\n            },\n            \"methods\": {\n                \"revivers\": {\n                    \"fullName\": function fullName(model) {\n                        var fullName = model.fullName;\n\n                        return this.setFullName(fullName);\n                    }\n                },\n                \"getFullName\": function getFullName() {\n                    return this.get(\"fullName\");\n                },\n                \"setFullName\": function setFullName(fullName) {\n                    _assertions2.default.validFullName(fullName);\n                    return this.set(\"fullName\", fullName);\n                },\n                \"validators\": {\n                    \"validFullName\": function validFullName() {\n                        var fullname = this.getFullName();\n                        if (!fullname) {\n                            return _bluebird2.default.reject({ \"fullName\": \"Full name is required.\" });\n                        }\n                        return _bluebird2.default.resolve();\n                    }\n                }\n            }\n        };\n        Model.Contact = (0, _merge3.default)(Model, Model.FullName, Model.Email);\n        var Types = {\n            \"Contact\": (0, _maketypedrecord2.default)(Model.Contact)\n        },\n            reviveContactModel = function reviveContactModel(model) {\n            var contactModel = new Types.Contact();\n            return (0, _processrevivers2.default)(contactModel, model);\n        },\n            getContactModel = function getContactModel(model) {\n            if (!model._id) {\n                var model = {\n                    \"_id\": model.email,\n                    \"email\": model.email,\n                    \"fullName\": model.fullName,\n                    \"groups\": model.groups || _immutable2.default.Set()\n                };\n                return new Types.Contact(model);\n            }\n            return reviveContactModel(model);\n        };\n\n        return getContactModel(model);\n    };\n\n    return {\n        \"createContact\": function createContact(recipientInfo) {\n            return contact(recipientInfo);\n        },\n        \"fromModel\": function fromModel(model) {\n            return contact(model);\n        }\n    };\n};\n\nexports.default = ContactsBuilder;\n\n/***/ }),\n\n/***/ 166:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _map2 = __webpack_require__(56);\n\nvar _map3 = _interopRequireDefault(_map2);\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _abstractdataprovider = __webpack_require__(33);\n\nvar _abstractdataprovider2 = _interopRequireDefault(_abstractdataprovider);\n\nvar _logger = __webpack_require__(6);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _couchdbsurveyadapter = __webpack_require__(353);\n\nvar _couchdbsurveyadapter2 = _interopRequireDefault(_couchdbsurveyadapter);\n\nvar _axios = __webpack_require__(41);\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nvar _settleAll = __webpack_require__(72);\n\nvar _settleAll2 = _interopRequireDefault(_settleAll);\n\nvar _bluebird = __webpack_require__(32);\n\nvar _bluebird2 = _interopRequireDefault(_bluebird);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar SurveyDataProvider = function (_AbstractDataProvider) {\n  _inherits(SurveyDataProvider, _AbstractDataProvider);\n\n  function SurveyDataProvider(container, surveyModelBuilder) {\n    _classCallCheck(this, SurveyDataProvider);\n\n    var _this = _possibleConstructorReturn(this, (SurveyDataProvider.__proto__ || Object.getPrototypeOf(SurveyDataProvider)).call(this, container));\n\n    _this.CouchDBSurveyProvider = new _couchdbsurveyadapter2.default(surveyModelBuilder);\n    return _this;\n  }\n\n  _createClass(SurveyDataProvider, [{\n    key: \"getUserSurvey\",\n    value: function getUserSurvey(surveyId) {\n      var _this2 = this;\n\n      return this.getUserContext().then(function (userContext) {\n        return userContext.DB.allDocs({\n          key: surveyId,\n          include_docs: true\n        });\n      }).then(function (result) {\n        var _result$rows = _slicedToArray(result.rows, 1),\n            survey = _result$rows[0];\n\n        return _this2.CouchDBSurveyProvider.toSurveyModel(survey.doc);\n      });\n    }\n  }, {\n    key: \"getSurveysBykeys\",\n    value: function getSurveysBykeys(keys) {\n      var _this3 = this;\n\n      return this.getUserContext().then(function (userContext) {\n        return userContext.DB.allDocs({\n          keys: keys,\n          include_docs: true\n        });\n      }).then(function (result) {\n        var surveys = {};\n        result.rows.forEach(function (row) {\n          var survey = _this3.CouchDBSurveyProvider.toSurveyModel(row.doc);\n          surveys[survey.getId()] = survey;\n        });\n        return surveys;\n      });\n    }\n  }, {\n    key: \"getUserSurveysIdWithTitle\",\n    value: function getUserSurveysIdWithTitle() {\n      return this.getUserContext().then(function (userContext) {\n        return userContext.DB.find({\n          selector: {\n            docType: \"surveytemplate\"\n          },\n          fields: [\"_id\", \"header\"]\n        });\n      }).then(function (result) {\n        var surveys = (0, _map3.default)(result.docs, function (doc) {\n          return { id: doc._id, title: doc.header.title };\n        });\n        return surveys;\n      });\n    }\n  }, {\n    key: \"getThumbnail\",\n    value: function getThumbnail(data, isGuest) {\n      if (isGuest) {\n        return _bluebird2.default.resolve();\n      }\n      return (0, _axios2.default)({\n        url: \"/thumbnail\",\n        method: \"POST\",\n        data: data\n      });\n    }\n  }, {\n    key: \"addUserSurvey\",\n    value: function addUserSurvey(newSurvey, isGuest) {\n      var _this4 = this;\n\n      if (!newSurvey) {\n        newSurvey = this.CouchDBSurveyProvider.toSurveyModel();\n      }\n      newSurvey = newSurvey.setCreated(new Date().toISOString()).setUpdated(new Date().toISOString());\n      var userContext = null,\n          data = { survey: newSurvey.toJSON(), modified: newSurvey.getId() };\n      return this.getThumbnail(data, isGuest).then(function (response) {\n        var _ref = response || {},\n            data = _ref.data;\n\n        newSurvey = newSurvey.setThumbnail(data && data.data);\n        return _this4.getUserContext();\n      }).then(function (uc) {\n        userContext = uc;\n        return userContext.save(\"surveytemplate\", _this4.CouchDBSurveyProvider.fromSurveyModel(newSurvey));\n      }).then(function (result) {\n        return userContext.DB.allDocs({\n          key: result.id,\n          include_docs: true\n        });\n      }).then(function (docs) {\n        var _docs$rows = _slicedToArray(docs.rows, 1),\n            doc = _docs$rows[0].doc;\n\n        userContext.triggerListener(doc, \"add\");\n        return _this4.CouchDBSurveyProvider.toSurveyModel(doc);\n      });\n    }\n  }, {\n    key: \"addSurveys\",\n    value: function addSurveys(surveys) {\n      var _this5 = this;\n\n      var promises = surveys.map(function (survey) {\n        survey = _this5.CouchDBSurveyProvider.toSurveyModel(survey);\n        return _bluebird2.default.try(function () {\n          return _this5.addUserSurvey(survey);\n        });\n      });\n      return (0, _settleAll2.default)(promises);\n    }\n  }, {\n    key: \"updateUserSurvey\",\n    value: function updateUserSurvey(editedSurvey, isGuest) {\n      var _this6 = this;\n\n      editedSurvey = editedSurvey.setUpdated(new Date().toISOString());\n      var userContext = null,\n          data = {\n        survey: editedSurvey.toJSON(),\n        modified: editedSurvey.getRevision()\n      };\n      return this.getThumbnail(data, isGuest).then(function (response) {\n        var _ref2 = response || {},\n            data = _ref2.data;\n\n        editedSurvey = editedSurvey.setThumbnail(data && data.data);\n        return _this6.getUserContext();\n      }).then(function (uc) {\n        userContext = uc;\n        return userContext.save(\"surveytemplate\", _this6.CouchDBSurveyProvider.fromSurveyModel(editedSurvey));\n      }).then(function (result) {\n        _logger2.default.debug(\"Survey updated.\", result);\n        userContext.triggerListener(_this6.CouchDBSurveyProvider.fromSurveyModel(editedSurvey.setRevision(result.rev)), \"update\");\n        return result;\n      });\n    }\n  }, {\n    key: \"undoSurvey\",\n    value: function undoSurvey(survey) {\n      var _this7 = this;\n\n      var userContext = null;\n      return this.getUserContext().then(function (uc) {\n        userContext = uc;\n        return userContext.save(\"surveytemplate\", _this7.CouchDBSurveyProvider.fromSurveyModel(survey));\n      }).then(function (result) {\n        userContext.triggerListener(_this7.CouchDBSurveyProvider.fromSurveyModel(survey.setRevision(result.rev)), \"update\");\n        return result;\n      });\n    }\n  }, {\n    key: \"undoUserSurveys\",\n    value: function undoUserSurveys(undoAppliedSurveys) {\n      var _this8 = this;\n\n      var keys = [];\n      undoAppliedSurveys = undoAppliedSurveys.map(function (survey) {\n        keys.push(survey.getId());\n        return _this8.CouchDBSurveyProvider.fromSurveyModel(survey);\n      });\n      var userContext = null;\n      return this.getUserContext().then(function (uc) {\n        userContext = uc;\n        return userContext.DB.bulkDocs(undoAppliedSurveys);\n      }).then(function (result) {\n        _logger2.default.debug(\"undo surveys\", result);\n        return _this8.getSurveysBykeys(keys);\n      });\n    }\n  }, {\n    key: \"deleteUserSurvey\",\n    value: function deleteUserSurvey(survey) {\n      survey = this.CouchDBSurveyProvider.fromSurveyModel(survey);\n      survey[\"_deleted\"] = true;\n      var userContext = null;\n      return this.getUserContext().then(function (uc) {\n        userContext = uc;\n        return userContext.save(\"surveytemplate\", survey);\n      }).then(function (result) {\n        survey[\"_rev\"] = result.rev;\n        userContext.triggerListener(survey, \"delete\");\n        return result;\n      });\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      _logger2.default.log(\"Logged off\");\n    }\n  }, {\n    key: \"initialSyncCompleted\",\n    value: function initialSyncCompleted() {\n      _logger2.default.debug(\"[SurveyDataProvider]: initialSyncCompleted\");\n    }\n  }, {\n    key: \"deltaSyncCompleted\",\n    value: function deltaSyncCompleted() {\n      _logger2.default.debug(\"[SurveyDataProvider]: deltaSyncCompleted\");\n    }\n  }, {\n    key: \"initialSyncFailed\",\n    value: function initialSyncFailed() {\n      _logger2.default.debug(\"[SurveyDataProvider]: initialSyncFailed\");\n    }\n  }, {\n    key: \"deltaSyncFailed\",\n    value: function deltaSyncFailed() {\n      _logger2.default.debug(\"[SurveyDataProvider]: deltaSyncFailed\");\n    }\n  }]);\n\n  return SurveyDataProvider;\n}(_abstractdataprovider2.default);\n\nexports.default = SurveyDataProvider;\n\n/***/ }),\n\n/***/ 167:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar Setting = function Setting(key, type, title, options) {\n\tthis.key = key;\n\tthis.type = type;\n\tthis.title = title;\n\tthis.options = options;\n\n\tthis.toString = function () {\n\t\treturn JSON.stringify(this.toJSON());\n\t};\n\n\tthis.toJSON = function () {\n\t\treturn { key: this.key, type: this.type, title: this.title, options: this.options };\n\t};\n};\n\nvar SettingsGroup = function SettingsGroup(title, options) {\n\tthis.title = title;\n\tthis.options = options;\n\tthis.settings = {};\n\tthis.addSetting = function (key, type, title, options) {\n\t\tthis.settings[key] = new Setting(key, type, title, options || {});\n\t\treturn this;\n\t};\n\tthis.getSettings = function (key) {\n\t\treturn this.settings[key].toJSON();\n\t}, this.toJSON = function () {\n\t\tvar result = {},\n\t\t    settings = {};\n\t\tfor (var key in this.settings) {\n\t\t\tif (this.settings[key].toJSON) {\n\t\t\t\tsettings[key] = this.settings[key].toJSON();\n\t\t\t}\n\t\t}\n\n\t\tresult = { \"title\": this.title, \"settings\": settings };\n\n\t\treturn result;\n\t};\n\tthis.toString = function () {\n\t\treturn JSON.stringify(this.toJSON());\n\t};\n};\n\nvar SettingsDefinitionBuilder = function SettingsDefinitionBuilder() {\n\tvar TemplateClass = function TemplateClass() {\n\t\tvar settings = [];\n\t\tthis.getSettingsDefinition = function () {\n\t\t\tvar result = settings.map(function (settingsGroup) {\n\t\t\t\treturn settingsGroup.toJSON();\n\t\t\t});\n\t\t\treturn result;\n\t\t};\n\t\tthis.addSettingsGroup = function (title, options) {\n\t\t\tvar result = new SettingsGroup(title, options);\n\t\t\tsettings.push(result);\n\n\t\t\treturn result;\n\t\t};\n\t};\n\treturn new TemplateClass();\n};\n\nexports.default = SettingsDefinitionBuilder;\n\n/***/ }),\n\n/***/ 168:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _merge2 = __webpack_require__(15);\n\nvar _merge3 = _interopRequireDefault(_merge2);\n\nexports.default = getCustomTheme;\n\nvar _colorManipulator = __webpack_require__(366);\n\nvar _lightBaseTheme = __webpack_require__(882);\n\nvar _lightBaseTheme2 = _interopRequireDefault(_lightBaseTheme);\n\nvar _zIndex = __webpack_require__(884);\n\nvar _zIndex2 = _interopRequireDefault(_zIndex);\n\nvar _autoprefixer = __webpack_require__(885);\n\nvar _autoprefixer2 = _interopRequireDefault(_autoprefixer);\n\nvar _callOnce = __webpack_require__(886);\n\nvar _callOnce2 = _interopRequireDefault(_callOnce);\n\nvar _rtl = __webpack_require__(887);\n\nvar _rtl2 = _interopRequireDefault(_rtl);\n\nvar _compose = __webpack_require__(442);\n\nvar _compose2 = _interopRequireDefault(_compose);\n\nvar _typography = __webpack_require__(888);\n\nvar _typography2 = _interopRequireDefault(_typography);\n\nvar _colors = __webpack_require__(223);\n\nvar _themesetting = __webpack_require__(889);\n\nvar _themesetting2 = _interopRequireDefault(_themesetting);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n/**\r\n * Get the CUSTOM theme corresponding to a base theme.\r\n * It's possible to override the computed theme values\r\n * by providing a second argument. The calculated\r\n * theme will be deeply merged with the second argument.\r\n */\nfunction getCustomTheme(customTheme, isMobile) {\n  for (var _len = arguments.length, more = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    more[_key - 2] = arguments[_key];\n  }\n\n  customTheme = _merge3.default.apply(undefined, [{\n    zIndex: _zIndex2.default,\n    isRtl: false,\n    userAgent: undefined\n  }, _lightBaseTheme2.default, customTheme].concat(more));\n\n  var _customTheme = customTheme,\n      spacing = _customTheme.spacing,\n      fontFamily = _customTheme.fontFamily,\n      palette = _customTheme.palette;\n\n  var baseTheme = { spacing: spacing, fontFamily: fontFamily, palette: palette };\n\n  customTheme = (0, _merge3.default)(_themesetting2.default, customTheme, {\n    baseTheme: baseTheme, // To provide backward compatibility.\n    rawTheme: baseTheme // To provide backward compatibility.\n  }, { isMobile: isMobile });\n  var transformers = [_autoprefixer2.default, _rtl2.default, _callOnce2.default].map(function (t) {\n    return t(customTheme);\n  }).filter(function (t) {\n    return t;\n  });\n\n  customTheme.prepareStyles = _compose2.default.apply(undefined, _toConsumableArray(transformers));\n\n  return customTheme;\n}\n\n/***/ }),\n\n/***/ 206:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _merge3 = __webpack_require__(15);\n\nvar _merge4 = _interopRequireDefault(_merge3);\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _bsonObjectid = __webpack_require__(17);\n\nvar _bsonObjectid2 = _interopRequireDefault(_bsonObjectid);\n\nvar _abstractdataprovider = __webpack_require__(33);\n\nvar _abstractdataprovider2 = _interopRequireDefault(_abstractdataprovider);\n\nvar _logger = __webpack_require__(6);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar defaultPreferences = { language: \"en-US\", questionMode: false };\n\nvar PreferenceProvider = function (_AbstractDataProvider) {\n  _inherits(PreferenceProvider, _AbstractDataProvider);\n\n  function PreferenceProvider(container) {\n    _classCallCheck(this, PreferenceProvider);\n\n    var _this = _possibleConstructorReturn(this, (PreferenceProvider.__proto__ || Object.getPrototypeOf(PreferenceProvider)).call(this, container));\n\n    _this._preferences = null;\n    return _this;\n  }\n\n  _createClass(PreferenceProvider, [{\n    key: \"_fetchSavedPreferences\",\n    value: function _fetchSavedPreferences() {\n      //fetch preferences from db if present\n      return this.getUserContext().then(function (userContext) {\n        return userContext.DB.query(\"getByDocType/typed\", {\n          key: \"preferences\",\n          include_docs: true\n        });\n      }).then(function (result) {\n        return result.rows[0].doc;\n      });\n    }\n  }, {\n    key: \"_ensurePreferences\",\n    value: function _ensurePreferences() {\n      var _this2 = this;\n\n      //ensures that preference has been initializesed or not\n      if (this._preferences) {\n        return Promise.resolve(this._preferences);\n      } else {\n        return this._fetchSavedPreferences().then(function (preferences) {\n          _this2._preferences = (0, _merge4.default)({}, defaultPreferences);\n          return _this2._preferences = (0, _merge4.default)(_this2._preferences, preferences);\n        }).catch(function (err) {\n          return _this2._preferences = (0, _merge4.default)({}, defaultPreferences);\n        });\n      }\n    }\n  }, {\n    key: \"getPreference\",\n    value: function getPreference(key) {\n      //first ensure that preference is available or not\n      //then according to that further proccess going on\n      return this._ensurePreferences().then(function (preferences) {\n        //Logger.log(\"first preference\",this._preferences)\n        if (preferences.hasOwnProperty(key)) {\n          return Promise.resolve(preferences[key]);\n        }\n        throw TypeError(\"Invalid key.\");\n      });\n    }\n  }, {\n    key: \"setPreference\",\n    value: function setPreference(key, value) {\n      var _this3 = this;\n\n      // first ensure that preference is available or not\n      // if found then assign value to key\n      // if not then create preferences object with given key and value\n      return this._ensurePreferences().then(function (preferences) {\n        _this3._preferences = (0, _merge4.default)(preferences, _defineProperty({}, key, value));\n        if (!_this3._preferences.hasOwnProperty(\"_id\")) {\n          _this3._preferences[\"_id\"] = \"preferences\";\n        }\n        return _this3.getUserContext();\n      }).then(function (userContext) {\n        return userContext.save(\"preferences\", _this3._preferences);\n      }).then(function (result) {\n        _this3._preferences[\"_rev\"] = result.rev;\n        return { ok: true };\n      }).catch(function (err) {\n        if (err.status === 409) {\n          // We found a conflict, let's take the existing version.\n          return _this3._fetchSavedPreferences().then(function () {\n            return { ok: true };\n          });\n        }\n\n        throw err;\n      });\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      _logger2.default.debug(\"[PreferencesProvider]: destroy\");\n    }\n  }, {\n    key: \"initialSyncCompleted\",\n    value: function initialSyncCompleted() {\n      _logger2.default.debug(\"[PreferencesProvider]: initialSyncCompleted\");\n    }\n  }, {\n    key: \"deltaSyncCompleted\",\n    value: function deltaSyncCompleted() {\n      _logger2.default.debug(\"[PreferencesProvider]: deltaSyncCompleted\");\n    }\n  }, {\n    key: \"initialSyncFailed\",\n    value: function initialSyncFailed() {\n      _logger2.default.debug(\"[PreferencesProvider]: initialSyncFailed\");\n    }\n  }, {\n    key: \"deltaSyncFailed\",\n    value: function deltaSyncFailed() {\n      _logger2.default.debug(\"[PreferencesProvider]: deltaSyncFailed\");\n    }\n  }]);\n\n  return PreferenceProvider;\n}(_abstractdataprovider2.default);\n\nexports.default = PreferenceProvider;\n\n/***/ }),\n\n/***/ 208:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _abstractdataprovider = __webpack_require__(33);\n\nvar _abstractdataprovider2 = _interopRequireDefault(_abstractdataprovider);\n\nvar _logger = __webpack_require__(6);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ErrorProvider = function (_AbstractDataProvider) {\n  _inherits(ErrorProvider, _AbstractDataProvider);\n\n  function ErrorProvider(container) {\n    _classCallCheck(this, ErrorProvider);\n\n    return _possibleConstructorReturn(this, (ErrorProvider.__proto__ || Object.getPrototypeOf(ErrorProvider)).call(this, container));\n  }\n\n  _createClass(ErrorProvider, [{\n    key: \"reportTrackerInfo\",\n    value: function reportTrackerInfo(tracker) {\n      return this.getUserContext().then(function (userContext) {\n        return userContext.save(\"surveytracker_info\", tracker);\n      });\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      _logger2.default.debug(\"[ErrorProvider]: destroy\");\n    }\n  }, {\n    key: \"initialSyncCompleted\",\n    value: function initialSyncCompleted() {\n      _logger2.default.debug(\"[ErrorProvider]: initialSyncCompleted\");\n    }\n  }, {\n    key: \"deltaSyncCompleted\",\n    value: function deltaSyncCompleted() {\n      _logger2.default.debug(\"[ErrorProvider]: deltaSyncCompleted\");\n    }\n  }, {\n    key: \"initialSyncFailed\",\n    value: function initialSyncFailed() {\n      _logger2.default.debug(\"[ErrorProvider]: initialSyncFailed\");\n    }\n  }, {\n    key: \"deltaSyncFailed\",\n    value: function deltaSyncFailed() {\n      _logger2.default.debug(\"[ErrorProvider]: deltaSyncFailed\");\n    }\n  }]);\n\n  return ErrorProvider;\n}(_abstractdataprovider2.default);\n\nexports.default = ErrorProvider;\n\n/***/ }),\n\n/***/ 209:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _values2 = __webpack_require__(656);\n\nvar _values3 = _interopRequireDefault(_values2);\n\nvar _difference2 = __webpack_require__(658);\n\nvar _difference3 = _interopRequireDefault(_difference2);\n\nvar _filter2 = __webpack_require__(387);\n\nvar _filter3 = _interopRequireDefault(_filter2);\n\nvar _map2 = __webpack_require__(56);\n\nvar _map3 = _interopRequireDefault(_map2);\n\nvar _concat2 = __webpack_require__(249);\n\nvar _concat3 = _interopRequireDefault(_concat2);\n\nvar _uniq2 = __webpack_require__(324);\n\nvar _uniq3 = _interopRequireDefault(_uniq2);\n\nvar _compact2 = __webpack_require__(248);\n\nvar _compact3 = _interopRequireDefault(_compact2);\n\nvar _merge2 = __webpack_require__(15);\n\nvar _merge3 = _interopRequireDefault(_merge2);\n\nvar _cloneDeep2 = __webpack_require__(325);\n\nvar _cloneDeep3 = _interopRequireDefault(_cloneDeep2);\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _immutable = __webpack_require__(9);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _couchdbrecipientadapter = __webpack_require__(672);\n\nvar _couchdbrecipientadapter2 = _interopRequireDefault(_couchdbrecipientadapter);\n\nvar _abstractdataprovider = __webpack_require__(33);\n\nvar _abstractdataprovider2 = _interopRequireDefault(_abstractdataprovider);\n\nvar _logger = __webpack_require__(6);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _i18n = __webpack_require__(8);\n\nvar _i18n2 = _interopRequireDefault(_i18n);\n\nvar _bluebird = __webpack_require__(32);\n\nvar _bluebird2 = _interopRequireDefault(_bluebird);\n\nvar _settleAll = __webpack_require__(72);\n\nvar _settleAll2 = _interopRequireDefault(_settleAll);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar GroupsAndRecipientsProvider = function (_AbstractDataProvider) {\n  _inherits(GroupsAndRecipientsProvider, _AbstractDataProvider);\n\n  function GroupsAndRecipientsProvider(container, CB) {\n    _classCallCheck(this, GroupsAndRecipientsProvider);\n\n    var _this = _possibleConstructorReturn(this, (GroupsAndRecipientsProvider.__proto__ || Object.getPrototypeOf(GroupsAndRecipientsProvider)).call(this, container));\n\n    _this.CouchDBRecipientAdapter = new _couchdbrecipientadapter2.default(CB);\n    _this._groups = {};\n    return _this;\n  }\n  //recipients APIs\n  //updated by find\n\n\n  _createClass(GroupsAndRecipientsProvider, [{\n    key: \"addRecipient\",\n    value: function addRecipient(model) {\n      var _this2 = this;\n\n      var contact = this.CouchDBRecipientAdapter.toRecipientModel(model);\n      this.add(model.groups);\n      return this.getUserContext().then(function (userContext) {\n        return userContext.save(\"contact\", _this2.CouchDBRecipientAdapter.fromRecipientModel(contact)).then(function (result) {\n          userContext.triggerListener(_this2.CouchDBRecipientAdapter.fromRecipientModel(contact.setRev(result.rev)), \"add\");\n          return contact;\n        });\n      });\n    }\n  }, {\n    key: \"getRecipient\",\n    value: function getRecipient(id) {\n      var _this3 = this;\n\n      return this.getUserContext().then(function (userContext) {\n        return userContext.DB.allDocs({\n          key: id,\n          include_docs: true\n        }).then(function (result) {\n          var _result$rows = _slicedToArray(result.rows, 1),\n              row = _result$rows[0];\n\n          return row && _this3.CouchDBRecipientAdapter.toRecipientModel(row.doc);\n        });\n      });\n    }\n  }, {\n    key: \"ensureEmail\",\n    value: function ensureEmail(value) {\n      return this.getUserContext().then(function (userContext) {\n        return userContext.DB.find({\n          selector: {\n            docType: \"contact\",\n            email: { $eq: value }\n          },\n          fields: [\"_id\"]\n        });\n      }).then(function (result) {\n        if (result.docs.length) {\n          return _bluebird2.default.reject(_i18n2.default.t(\"This email is already present\"));\n        }\n        return _bluebird2.default.resolve();\n      });\n    }\n  }, {\n    key: \"updateRecipient\",\n    value: function updateRecipient(editedRecipient) {\n      var _this4 = this;\n\n      var groups = editedRecipient.getGroups().toArray();\n      return this.add(groups).then(function () {\n        return _this4.getUserContext();\n      }).then(function (userContext) {\n        return userContext.save(\"contact\", _this4.CouchDBRecipientAdapter.fromRecipientModel(editedRecipient)).then(function (result) {\n          _this4.removeUnwantedGroups(null, true);\n          userContext.triggerListener(_this4.CouchDBRecipientAdapter.fromRecipientModel(editedRecipient.setRev(result.rev)), \"update\");\n          return editedRecipient;\n        });\n      });\n    }\n  }, {\n    key: \"deleteRecipient\",\n    value: function deleteRecipient(key) {\n      var _this5 = this;\n\n      var contactDoc = {};\n      return this.getUserContext().then(function (userContext) {\n        return userContext.DB.allDocs({\n          key: key,\n          include_docs: true\n        }).then(function (docs) {\n          var _docs$rows = _slicedToArray(docs.rows, 1),\n              doc = _docs$rows[0].doc;\n\n          contactDoc = (0, _cloneDeep3.default)(doc);\n          doc._deleted = true;\n          return userContext.save(\"contact\", doc);\n        }).then(function (result) {\n          contactDoc._rev = result.rev;\n          _this5.removeUnwantedGroups(contactDoc.groups);\n          userContext.triggerListener(contactDoc, \"delete\");\n          return _this5.CouchDBRecipientAdapter.toRecipientModel(contactDoc);\n        });\n      });\n    }\n  }, {\n    key: \"undo\",\n    value: function undo(doc) {\n      return this.getUserContext().then(function (userContext) {\n        return userContext.DB.put(doc).then(function (result) {\n          doc._rev = result.rev;\n          userContext.triggerListener(doc, \"update\");\n          return doc;\n        });\n      });\n    }\n  }, {\n    key: \"undoRecipent\",\n    value: function undoRecipent(recipient) {\n      var _this6 = this;\n\n      return this.add(recipient.groups).then(function () {\n        return _this6.getUserContext();\n      }).then(function (userContext) {\n        return userContext.save(\"contact\", recipient).then(function (result) {\n          recipient._rev = result.rev;\n          _this6.removeUnwantedGroups(recipient.group);\n          userContext.triggerListener(recipient, \"update\");\n          return recipient;\n        });\n      });\n    }\n    /*** */\n\n  }, {\n    key: \"_fetchSavedGroups\",\n    value: function _fetchSavedGroups() {\n      return this.getUserContext().then(function (userContext) {\n        return userContext.DB.find({\n          selector: {\n            docType: \"groups\"\n          }\n        });\n      }).then(function (result) {\n        return result.docs[0];\n      });\n    }\n  }, {\n    key: \"_ensureGroups\",\n    value: function _ensureGroups() {\n      var _this7 = this;\n\n      if (this._groups && this._groups.groups && this._groups.groups.length) {\n        return _bluebird2.default.resolve(this._groups);\n      } else {\n        return this._fetchSavedGroups().then(function (groups) {\n          return _this7._groups = (0, _merge3.default)({}, groups);\n        }).catch(function (err) {\n          return {};\n        });\n      }\n    }\n  }, {\n    key: \"get\",\n    value: function get() {\n      var _this8 = this;\n\n      return this._ensureGroups().then(function (groups) {\n        _this8._groups = groups;\n        if (!_this8._groups.hasOwnProperty(\"groups\")) {\n          _this8._groups[\"groups\"] = [];\n        }\n        return _this8._groups.groups;\n      });\n    }\n  }, {\n    key: \"getRecipientsByGroup\",\n    value: function getRecipientsByGroup(group) {\n      return this.getUserContext().then(function (userContext) {\n        return userContext.DB.find({\n          selector: {\n            docType: \"contact\",\n            groups: { $elemMatch: { $eq: group } }\n          }\n        });\n      });\n    }\n  }, {\n    key: \"removeUnwantedGroups\",\n    value: function removeUnwantedGroups(groups, searchForAll) {\n      var _this9 = this;\n\n      if (searchForAll && this._groups.groups) {\n        groups = (0, _compact3.default)((0, _uniq3.default)((0, _concat3.default)(this._groups.groups, groups)));\n      }\n      if (!(groups && groups.length)) {\n        return _bluebird2.default.resolve();\n      }\n      var promises = groups.map(function (group) {\n        return _bluebird2.default.try(function () {\n          return _this9.getRecipientsByGroup(group).then(function (result) {\n            return {\n              group: group,\n              count: result.docs.length\n            };\n          });\n        });\n      });\n      return (0, _settleAll2.default)(promises).then(function (outputs) {\n        var groupsPromises = outputs.reduce(function (promiseCollection, output) {\n          if (!output.isRejected()) {\n            var result = output.value();\n            if (!result.count) {\n              promiseCollection.push(_this9.remove(result.group));\n            }\n          }\n          return promiseCollection;\n        }, []);\n        return _bluebird2.default.all(groupsPromises);\n      });\n    }\n  }, {\n    key: \"add\",\n    value: function add(newGroups) {\n      var _this10 = this;\n\n      if (!(newGroups && newGroups.length)) {\n        return _bluebird2.default.resolve();\n      }\n      var _userContext = void 0;\n      return this._ensureGroups().then(function (groups) {\n        _this10._groups = groups;\n        if (!_this10._groups.hasOwnProperty(\"groups\")) {\n          _this10._groups[\"groups\"] = [];\n        }\n        _this10._groups[\"groups\"] = (0, _uniq3.default)((0, _concat3.default)(_this10._groups[\"groups\"], newGroups));\n        if (!_this10._groups.hasOwnProperty(\"_id\")) {\n          _this10._groups[\"_id\"] = \"groups\";\n        }\n        return _this10.getUserContext();\n      }).then(function (userContext) {\n        _userContext = userContext;\n        return userContext.save(\"groups\", _this10._groups);\n      }).then(function (result) {\n        _this10._groups[\"_rev\"] = result.rev;\n        _userContext.triggerListener(_this10._groups, \"add\");\n        return _immutable2.default.Set(_this10._groups[\"groups\"]);\n      }).catch(function (err) {\n        if (err.status === 409) {\n          return _this10._fetchSavedGroups().then(function () {\n            return _immutable2.default.Set(_this10._groups[\"groups\"]);\n          });\n        }\n        throw err;\n      });\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(key) {\n      var _this11 = this;\n\n      if (!key) {\n        return _immutable2.default.Set(this._groups[\"groups\"]);\n      }\n      var _userContext = void 0;\n      return this.getRecipientsByGroup(key).then(function (result) {\n        if (!result.docs.length) {\n          return _this11.getUserContext();\n        }\n        _this11.lastRecipients = _defineProperty({}, key, {});\n        _this11.newRecipients = (0, _map3.default)(result.docs, function (doc) {\n          var contact = _this11.CouchDBRecipientAdapter.toRecipientModel(doc);\n          _this11.lastRecipients[key][contact.getId()] = contact;\n          contact = contact.removeGroup(key);\n          return _this11.CouchDBRecipientAdapter.fromRecipientModel(contact);\n        });\n        return _this11.getUserContext();\n      }).then(function (userContext) {\n        _userContext = userContext;\n        return _this11.newRecipients && _this11.newRecipients.length ? userContext.saveDocs(_this11.newRecipients) : _bluebird2.default.resolve();\n      }).then(function (results) {\n        (0, _map3.default)(results, function (result) {\n          if (_this11.lastRecipients[key][result.id]) _this11.lastRecipients[key][result.id] = _this11.CouchDBRecipientAdapter.fromRecipientModel(_this11.lastRecipients[key][result.id].setRev(result.rev));\n        });\n        return _this11._ensureGroups();\n      }).then(function (groups) {\n        _this11._groups = groups;\n        if (!_this11._groups.hasOwnProperty(\"groups\")) {\n          _this11._groups[\"groups\"] = [];\n        }\n        if (!_this11._groups.hasOwnProperty(\"_id\")) {\n          _this11._groups[\"_id\"] = \"groups\";\n        }\n        _this11._groups.groups = (0, _filter3.default)(_this11._groups.groups, function (group) {\n          return group != key;\n        });\n        _this11._groups.groups = (0, _compact3.default)(_this11._groups.groups);\n        return _userContext.save(\"groups\", _this11._groups);\n      }).then(function (result) {\n        _this11._groups[\"_rev\"] = result.rev;\n        _userContext.triggerListener(_this11._groups, \"delete\");\n        return _immutable2.default.Set(_this11._groups[\"groups\"]);\n      });\n    }\n  }, {\n    key: \"renameGroup\",\n    value: function renameGroup(oldName, newName) {\n      var _this12 = this;\n\n      var _userContext = void 0;\n      return this.getRecipientsByGroup(oldName).then(function (result) {\n        if (!result.docs.length) {\n          return _this12.getUserContext();\n        }\n        _this12.newRecipients = (0, _map3.default)(result.docs, function (doc) {\n          var contact = _this12.CouchDBRecipientAdapter.toRecipientModel(doc);\n          contact = contact.removeGroup(oldName).setGroup(newName);\n          return _this12.CouchDBRecipientAdapter.fromRecipientModel(contact);\n        });\n        return _this12.getUserContext();\n      }).then(function (userContext) {\n        _userContext = userContext;\n        return _this12.newRecipients && _this12.newRecipients.length ? _userContext.saveDocs(_this12.newRecipients) : _bluebird2.default.resolve();\n      }).then(function () {\n        return _this12._ensureGroups();\n      }).then(function (groups) {\n        _this12._groups = groups;\n        if (!_this12._groups.hasOwnProperty(\"groups\")) {\n          _this12._groups[\"groups\"] = [];\n        }\n        if (!_this12._groups.hasOwnProperty(\"_id\")) {\n          _this12._groups[\"_id\"] = \"groups\";\n        }\n        _this12._groups.groups = (0, _filter3.default)(_this12._groups.groups, function (group) {\n          return group != oldName;\n        });\n        _this12._groups.groups.push(newName);\n        _this12._groups.groups = (0, _compact3.default)(_this12._groups.groups);\n        return _userContext.save(\"groups\", _this12._groups);\n      }).then(function (result) {\n        _this12._groups[\"_rev\"] = result.rev;\n        _userContext.triggerListener(_this12._groups, \"update\");\n        return _immutable2.default.Set(_this12._groups[\"groups\"]);\n      }).catch(function (err) {\n        throw err;\n      });\n    }\n  }, {\n    key: \"undoGroups\",\n    value: function undoGroups(oldGroups) {\n      var _this13 = this;\n\n      var _userContext = void 0;\n      return this._ensureGroups().then(function (groups) {\n        _this13._groups = groups;\n        if (!_this13._groups.hasOwnProperty(\"groups\")) {\n          _this13._groups[\"groups\"] = [];\n        }\n        _this13.groupDifference = (0, _difference3.default)(oldGroups, _this13._groups[\"groups\"]);\n        _this13._groups[\"groups\"] = oldGroups;\n        if (!_this13._groups.hasOwnProperty(\"_id\")) {\n          _this13._groups[\"_id\"] = \"groups\";\n        }\n        return _this13.getUserContext();\n      }).then(function (userContext) {\n        _userContext = userContext;\n        return userContext.save(\"groups\", _this13._groups);\n      }).then(function (result) {\n        _this13._groups[\"_rev\"] = result.rev;\n        _userContext.triggerListener(_this13._groups, \"update\");\n        var promises = (0, _map3.default)(_this13.groupDifference, function (group) {\n          if (_this13.lastRecipients[group]) {\n            return _this13.getUserContext().then(function (userContext) {\n              return userContext.DB.bulkDocs((0, _values3.default)(_this13.lastRecipients[group]));\n            });\n          }\n        });\n        return _bluebird2.default.all(promises);\n      }).then(function () {\n        return _immutable2.default.Set(_this13._groups[\"groups\"]);\n      });\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      _logger2.default.debug(\"[GroupsAndRecipientsProvider]: destroy\");\n    }\n  }, {\n    key: \"initialSyncCompleted\",\n    value: function initialSyncCompleted() {\n      _logger2.default.debug(\"[GroupsAndRecipientsProvider]: initialSyncCompleted\");\n    }\n  }, {\n    key: \"deltaSyncCompleted\",\n    value: function deltaSyncCompleted() {\n      _logger2.default.debug(\"[GroupsAndRecipientsProvider]: deltaSyncCompleted\");\n    }\n  }, {\n    key: \"initialSyncFailed\",\n    value: function initialSyncFailed() {\n      _logger2.default.debug(\"[GroupsAndRecipientsProvider]: initialSyncFailed\");\n    }\n  }, {\n    key: \"deltaSyncFailed\",\n    value: function deltaSyncFailed() {\n      _logger2.default.debug(\"[GroupsAndRecipientsProvider]: deltaSyncFailed\");\n    }\n  }]);\n\n  return GroupsAndRecipientsProvider;\n}(_abstractdataprovider2.default);\n\nexports.default = GroupsAndRecipientsProvider;\n\n/***/ }),\n\n/***/ 223:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar red50 = exports.red50 = '#ffebee';\nvar red100 = exports.red100 = '#ffcdd2';\nvar red200 = exports.red200 = '#ef9a9a';\nvar red300 = exports.red300 = '#e57373';\nvar red400 = exports.red400 = '#ef5350';\nvar red500 = exports.red500 = '#f44336';\nvar red600 = exports.red600 = '#e53935';\nvar red700 = exports.red700 = '#d32f2f';\nvar red800 = exports.red800 = '#c62828';\nvar red900 = exports.red900 = '#b71c1c';\nvar redA100 = exports.redA100 = '#ff8a80';\nvar redA200 = exports.redA200 = '#ff5252';\nvar redA400 = exports.redA400 = '#ff1744';\nvar redA700 = exports.redA700 = '#d50000';\n\nvar pink50 = exports.pink50 = '#fce4ec';\nvar pink100 = exports.pink100 = '#f8bbd0';\nvar pink200 = exports.pink200 = '#f48fb1';\nvar pink300 = exports.pink300 = '#f06292';\nvar pink400 = exports.pink400 = '#ec407a';\nvar pink500 = exports.pink500 = '#e91e63';\nvar pink600 = exports.pink600 = '#d81b60';\nvar pink700 = exports.pink700 = '#c2185b';\nvar pink800 = exports.pink800 = '#ad1457';\nvar pink900 = exports.pink900 = '#880e4f';\nvar pinkA100 = exports.pinkA100 = '#ff80ab';\nvar pinkA200 = exports.pinkA200 = '#ff4081';\nvar pinkA400 = exports.pinkA400 = '#f50057';\nvar pinkA700 = exports.pinkA700 = '#c51162';\n\nvar purple50 = exports.purple50 = '#f3e5f5';\nvar purple100 = exports.purple100 = '#e1bee7';\nvar purple200 = exports.purple200 = '#ce93d8';\nvar purple300 = exports.purple300 = '#ba68c8';\nvar purple400 = exports.purple400 = '#ab47bc';\nvar purple500 = exports.purple500 = '#9c27b0';\nvar purple600 = exports.purple600 = '#8e24aa';\nvar purple700 = exports.purple700 = '#7b1fa2';\nvar purple800 = exports.purple800 = '#6a1b9a';\nvar purple900 = exports.purple900 = '#4a148c';\nvar purpleA100 = exports.purpleA100 = '#ea80fc';\nvar purpleA200 = exports.purpleA200 = '#e040fb';\nvar purpleA400 = exports.purpleA400 = '#d500f9';\nvar purpleA700 = exports.purpleA700 = '#aa00ff';\n\nvar deepPurple50 = exports.deepPurple50 = '#ede7f6';\nvar deepPurple100 = exports.deepPurple100 = '#d1c4e9';\nvar deepPurple200 = exports.deepPurple200 = '#b39ddb';\nvar deepPurple300 = exports.deepPurple300 = '#9575cd';\nvar deepPurple400 = exports.deepPurple400 = '#7e57c2';\nvar deepPurple500 = exports.deepPurple500 = '#673ab7';\nvar deepPurple600 = exports.deepPurple600 = '#5e35b1';\nvar deepPurple700 = exports.deepPurple700 = '#512da8';\nvar deepPurple800 = exports.deepPurple800 = '#4527a0';\nvar deepPurple900 = exports.deepPurple900 = '#311b92';\nvar deepPurpleA100 = exports.deepPurpleA100 = '#b388ff';\nvar deepPurpleA200 = exports.deepPurpleA200 = '#7c4dff';\nvar deepPurpleA400 = exports.deepPurpleA400 = '#651fff';\nvar deepPurpleA700 = exports.deepPurpleA700 = '#6200ea';\n\nvar indigo50 = exports.indigo50 = '#e8eaf6';\nvar indigo100 = exports.indigo100 = '#c5cae9';\nvar indigo200 = exports.indigo200 = '#9fa8da';\nvar indigo300 = exports.indigo300 = '#7986cb';\nvar indigo400 = exports.indigo400 = '#5c6bc0';\nvar indigo500 = exports.indigo500 = '#3f51b5';\nvar indigo600 = exports.indigo600 = '#3949ab';\nvar indigo700 = exports.indigo700 = '#303f9f';\nvar indigo800 = exports.indigo800 = '#283593';\nvar indigo900 = exports.indigo900 = '#1a237e';\nvar indigoA100 = exports.indigoA100 = '#8c9eff';\nvar indigoA200 = exports.indigoA200 = '#536dfe';\nvar indigoA400 = exports.indigoA400 = '#3d5afe';\nvar indigoA700 = exports.indigoA700 = '#304ffe';\n\nvar blue50 = exports.blue50 = '#e3f2fd';\nvar blue100 = exports.blue100 = '#bbdefb';\nvar blue200 = exports.blue200 = '#90caf9';\nvar blue300 = exports.blue300 = '#64b5f6';\nvar blue400 = exports.blue400 = '#42a5f5';\nvar blue500 = exports.blue500 = '#2196f3';\nvar blue600 = exports.blue600 = '#1e88e5';\nvar blue700 = exports.blue700 = '#1976d2';\nvar blue800 = exports.blue800 = '#1565c0';\nvar blue900 = exports.blue900 = '#0d47a1';\nvar blueA100 = exports.blueA100 = '#82b1ff';\nvar blueA200 = exports.blueA200 = '#448aff';\nvar blueA400 = exports.blueA400 = '#2979ff';\nvar blueA700 = exports.blueA700 = '#2962ff';\n\nvar lightBlue50 = exports.lightBlue50 = '#e1f5fe';\nvar lightBlue100 = exports.lightBlue100 = '#b3e5fc';\nvar lightBlue200 = exports.lightBlue200 = '#81d4fa';\nvar lightBlue300 = exports.lightBlue300 = '#4fc3f7';\nvar lightBlue400 = exports.lightBlue400 = '#29b6f6';\nvar lightBlue500 = exports.lightBlue500 = '#03a9f4';\nvar lightBlue600 = exports.lightBlue600 = '#039be5';\nvar lightBlue700 = exports.lightBlue700 = '#0288d1';\nvar lightBlue800 = exports.lightBlue800 = '#0277bd';\nvar lightBlue900 = exports.lightBlue900 = '#01579b';\nvar lightBlueA100 = exports.lightBlueA100 = '#80d8ff';\nvar lightBlueA200 = exports.lightBlueA200 = '#40c4ff';\nvar lightBlueA400 = exports.lightBlueA400 = '#00b0ff';\nvar lightBlueA700 = exports.lightBlueA700 = '#0091ea';\n\nvar cyan50 = exports.cyan50 = '#e0f7fa';\nvar cyan100 = exports.cyan100 = '#b2ebf2';\nvar cyan200 = exports.cyan200 = '#80deea';\nvar cyan300 = exports.cyan300 = '#4dd0e1';\nvar cyan400 = exports.cyan400 = '#26c6da';\nvar cyan500 = exports.cyan500 = '#00bcd4';\nvar cyan600 = exports.cyan600 = '#00acc1';\nvar cyan700 = exports.cyan700 = '#0097a7';\nvar cyan800 = exports.cyan800 = '#00838f';\nvar cyan900 = exports.cyan900 = '#006064';\nvar cyanA100 = exports.cyanA100 = '#84ffff';\nvar cyanA200 = exports.cyanA200 = '#18ffff';\nvar cyanA400 = exports.cyanA400 = '#00e5ff';\nvar cyanA700 = exports.cyanA700 = '#00b8d4';\n\nvar teal50 = exports.teal50 = '#e0f2f1';\nvar teal100 = exports.teal100 = '#b2dfdb';\nvar teal200 = exports.teal200 = '#80cbc4';\nvar teal300 = exports.teal300 = '#4db6ac';\nvar teal400 = exports.teal400 = '#26a69a';\nvar teal500 = exports.teal500 = '#009688';\nvar teal600 = exports.teal600 = '#00897b';\nvar teal700 = exports.teal700 = '#00796b';\nvar teal800 = exports.teal800 = '#00695c';\nvar teal900 = exports.teal900 = '#004d40';\nvar tealA100 = exports.tealA100 = '#a7ffeb';\nvar tealA200 = exports.tealA200 = '#64ffda';\nvar tealA400 = exports.tealA400 = '#1de9b6';\nvar tealA700 = exports.tealA700 = '#00bfa5';\n\nvar green50 = exports.green50 = '#e8f5e9';\nvar green100 = exports.green100 = '#c8e6c9';\nvar green200 = exports.green200 = '#a5d6a7';\nvar green300 = exports.green300 = '#81c784';\nvar green400 = exports.green400 = '#66bb6a';\nvar green500 = exports.green500 = '#4caf50';\nvar green600 = exports.green600 = '#43a047';\nvar green700 = exports.green700 = '#388e3c';\nvar green800 = exports.green800 = '#2e7d32';\nvar green900 = exports.green900 = '#1b5e20';\nvar greenA100 = exports.greenA100 = '#b9f6ca';\nvar greenA200 = exports.greenA200 = '#69f0ae';\nvar greenA400 = exports.greenA400 = '#00e676';\nvar greenA700 = exports.greenA700 = '#00c853';\n\nvar lightGreen50 = exports.lightGreen50 = '#f1f8e9';\nvar lightGreen100 = exports.lightGreen100 = '#dcedc8';\nvar lightGreen200 = exports.lightGreen200 = '#c5e1a5';\nvar lightGreen300 = exports.lightGreen300 = '#aed581';\nvar lightGreen400 = exports.lightGreen400 = '#9ccc65';\nvar lightGreen500 = exports.lightGreen500 = '#8bc34a';\nvar lightGreen600 = exports.lightGreen600 = '#7cb342';\nvar lightGreen700 = exports.lightGreen700 = '#689f38';\nvar lightGreen800 = exports.lightGreen800 = '#558b2f';\nvar lightGreen900 = exports.lightGreen900 = '#33691e';\nvar lightGreenA100 = exports.lightGreenA100 = '#ccff90';\nvar lightGreenA200 = exports.lightGreenA200 = '#b2ff59';\nvar lightGreenA400 = exports.lightGreenA400 = '#76ff03';\nvar lightGreenA700 = exports.lightGreenA700 = '#64dd17';\n\nvar lime50 = exports.lime50 = '#f9fbe7';\nvar lime100 = exports.lime100 = '#f0f4c3';\nvar lime200 = exports.lime200 = '#e6ee9c';\nvar lime300 = exports.lime300 = '#dce775';\nvar lime400 = exports.lime400 = '#d4e157';\nvar lime500 = exports.lime500 = '#cddc39';\nvar lime600 = exports.lime600 = '#c0ca33';\nvar lime700 = exports.lime700 = '#afb42b';\nvar lime800 = exports.lime800 = '#9e9d24';\nvar lime900 = exports.lime900 = '#827717';\nvar limeA100 = exports.limeA100 = '#f4ff81';\nvar limeA200 = exports.limeA200 = '#eeff41';\nvar limeA400 = exports.limeA400 = '#c6ff00';\nvar limeA700 = exports.limeA700 = '#aeea00';\n\nvar yellow50 = exports.yellow50 = '#fffde7';\nvar yellow100 = exports.yellow100 = '#fff9c4';\nvar yellow200 = exports.yellow200 = '#fff59d';\nvar yellow300 = exports.yellow300 = '#fff176';\nvar yellow400 = exports.yellow400 = '#ffee58';\nvar yellow500 = exports.yellow500 = '#ffeb3b';\nvar yellow600 = exports.yellow600 = '#fdd835';\nvar yellow700 = exports.yellow700 = '#fbc02d';\nvar yellow800 = exports.yellow800 = '#f9a825';\nvar yellow900 = exports.yellow900 = '#f57f17';\nvar yellowA100 = exports.yellowA100 = '#ffff8d';\nvar yellowA200 = exports.yellowA200 = '#ffff00';\nvar yellowA400 = exports.yellowA400 = '#ffea00';\nvar yellowA700 = exports.yellowA700 = '#ffd600';\n\nvar amber50 = exports.amber50 = '#fff8e1';\nvar amber100 = exports.amber100 = '#ffecb3';\nvar amber200 = exports.amber200 = '#ffe082';\nvar amber300 = exports.amber300 = '#ffd54f';\nvar amber400 = exports.amber400 = '#ffca28';\nvar amber500 = exports.amber500 = '#ffc107';\nvar amber600 = exports.amber600 = '#ffb300';\nvar amber700 = exports.amber700 = '#ffa000';\nvar amber800 = exports.amber800 = '#ff8f00';\nvar amber900 = exports.amber900 = '#ff6f00';\nvar amberA100 = exports.amberA100 = '#ffe57f';\nvar amberA200 = exports.amberA200 = '#ffd740';\nvar amberA400 = exports.amberA400 = '#ffc400';\nvar amberA700 = exports.amberA700 = '#ffab00';\n\nvar orange50 = exports.orange50 = '#fff3e0';\nvar orange100 = exports.orange100 = '#ffe0b2';\nvar orange200 = exports.orange200 = '#ffcc80';\nvar orange300 = exports.orange300 = '#ffb74d';\nvar orange400 = exports.orange400 = '#ffa726';\nvar orange500 = exports.orange500 = '#ff9800';\nvar orange600 = exports.orange600 = '#fb8c00';\nvar orange700 = exports.orange700 = '#f57c00';\nvar orange800 = exports.orange800 = '#ef6c00';\nvar orange900 = exports.orange900 = '#e65100';\nvar orangeA100 = exports.orangeA100 = '#ffd180';\nvar orangeA200 = exports.orangeA200 = '#ffab40';\nvar orangeA400 = exports.orangeA400 = '#ff9100';\nvar orangeA700 = exports.orangeA700 = '#ff6d00';\n\nvar deepOrange50 = exports.deepOrange50 = '#fbe9e7';\nvar deepOrange100 = exports.deepOrange100 = '#ffccbc';\nvar deepOrange200 = exports.deepOrange200 = '#ffab91';\nvar deepOrange300 = exports.deepOrange300 = '#ff8a65';\nvar deepOrange400 = exports.deepOrange400 = '#ff7043';\nvar deepOrange500 = exports.deepOrange500 = '#ff5722';\nvar deepOrange600 = exports.deepOrange600 = '#f4511e';\nvar deepOrange700 = exports.deepOrange700 = '#e64a19';\nvar deepOrange800 = exports.deepOrange800 = '#d84315';\nvar deepOrange900 = exports.deepOrange900 = '#bf360c';\nvar deepOrangeA100 = exports.deepOrangeA100 = '#ff9e80';\nvar deepOrangeA200 = exports.deepOrangeA200 = '#ff6e40';\nvar deepOrangeA400 = exports.deepOrangeA400 = '#ff3d00';\nvar deepOrangeA700 = exports.deepOrangeA700 = '#dd2c00';\n\nvar brown50 = exports.brown50 = '#efebe9';\nvar brown100 = exports.brown100 = '#d7ccc8';\nvar brown200 = exports.brown200 = '#bcaaa4';\nvar brown300 = exports.brown300 = '#a1887f';\nvar brown400 = exports.brown400 = '#8d6e63';\nvar brown500 = exports.brown500 = '#795548';\nvar brown600 = exports.brown600 = '#6d4c41';\nvar brown700 = exports.brown700 = '#5d4037';\nvar brown800 = exports.brown800 = '#4e342e';\nvar brown900 = exports.brown900 = '#3e2723';\n\nvar blueGrey50 = exports.blueGrey50 = '#eceff1';\nvar blueGrey100 = exports.blueGrey100 = '#cfd8dc';\nvar blueGrey200 = exports.blueGrey200 = '#b0bec5';\nvar blueGrey300 = exports.blueGrey300 = '#90a4ae';\nvar blueGrey400 = exports.blueGrey400 = '#78909c';\nvar blueGrey500 = exports.blueGrey500 = '#607d8b';\nvar blueGrey600 = exports.blueGrey600 = '#546e7a';\nvar blueGrey700 = exports.blueGrey700 = '#455a64';\nvar blueGrey800 = exports.blueGrey800 = '#37474f';\nvar blueGrey900 = exports.blueGrey900 = '#263238';\n\nvar grey50 = exports.grey50 = '#fafafa';\nvar grey100 = exports.grey100 = '#f5f5f5';\nvar grey200 = exports.grey200 = '#eeeeee';\nvar grey300 = exports.grey300 = '#e0e0e0';\nvar grey400 = exports.grey400 = '#bdbdbd';\nvar grey500 = exports.grey500 = '#9e9e9e';\nvar grey600 = exports.grey600 = '#757575';\nvar grey700 = exports.grey700 = '#616161';\nvar grey800 = exports.grey800 = '#424242';\nvar grey900 = exports.grey900 = '#212121';\n\nvar black = exports.black = '#000000';\nvar white = exports.white = '#ffffff';\n\nvar transparent = exports.transparent = 'rgba(0, 0, 0, 0)';\nvar fullBlack = exports.fullBlack = 'rgba(0, 0, 0, 1)';\nvar darkBlack = exports.darkBlack = 'rgba(0, 0, 0, 0.87)';\nvar lightBlack = exports.lightBlack = 'rgba(0, 0, 0, 0.54)';\nvar minBlack = exports.minBlack = 'rgba(0, 0, 0, 0.26)';\nvar faintBlack = exports.faintBlack = 'rgba(0, 0, 0, 0.12)';\nvar fullWhite = exports.fullWhite = 'rgba(255, 255, 255, 1)';\nvar darkWhite = exports.darkWhite = 'rgba(255, 255, 255, 0.87)';\nvar lightWhite = exports.lightWhite = 'rgba(255, 255, 255, 0.54)';\n\n/***/ }),\n\n/***/ 231:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _indexOf2 = __webpack_require__(105);\n\nvar _indexOf3 = _interopRequireDefault(_indexOf2);\n\nvar _findKey2 = __webpack_require__(858);\n\nvar _findKey3 = _interopRequireDefault(_findKey2);\n\nvar _takeWhile2 = __webpack_require__(359);\n\nvar _takeWhile3 = _interopRequireDefault(_takeWhile2);\n\nvar _superloginClient = __webpack_require__(860);\n\nvar _superloginClient2 = _interopRequireDefault(_superloginClient);\n\nvar _createHashHistory = __webpack_require__(39);\n\nvar _createHashHistory2 = _interopRequireDefault(_createHashHistory);\n\nvar _createStore = __webpack_require__(22);\n\nvar _createStore2 = _interopRequireDefault(_createStore);\n\nvar _contextprovider = __webpack_require__(328);\n\nvar _contextprovider2 = _interopRequireDefault(_contextprovider);\n\nvar _preferenceprovider = __webpack_require__(206);\n\nvar _preferenceprovider2 = _interopRequireDefault(_preferenceprovider);\n\nvar _errorsprovider = __webpack_require__(322);\n\nvar _errorsprovider2 = _interopRequireDefault(_errorsprovider);\n\nvar _timetrackerprovider = __webpack_require__(208);\n\nvar _timetrackerprovider2 = _interopRequireDefault(_timetrackerprovider);\n\nvar _groupsandrecipientsprovider = __webpack_require__(209);\n\nvar _groupsandrecipientsprovider2 = _interopRequireDefault(_groupsandrecipientsprovider);\n\nvar _imageprovider = __webpack_require__(354);\n\nvar _imageprovider2 = _interopRequireDefault(_imageprovider);\n\nvar _surveydataprovider = __webpack_require__(166);\n\nvar _surveydataprovider2 = _interopRequireDefault(_surveydataprovider);\n\nvar _publishedsurveyresponseprovider = __webpack_require__(355);\n\nvar _publishedsurveyresponseprovider2 = _interopRequireDefault(_publishedsurveyresponseprovider);\n\nvar _publishedsurveyprovider = __webpack_require__(352);\n\nvar _publishedsurveyprovider2 = _interopRequireDefault(_publishedsurveyprovider);\n\nvar _paginatorprovider = __webpack_require__(314);\n\nvar _paginatorprovider2 = _interopRequireDefault(_paginatorprovider);\n\nvar _groupspaginatorprovider = __webpack_require__(315);\n\nvar _groupspaginatorprovider2 = _interopRequireDefault(_groupspaginatorprovider);\n\nvar _responsespaginatorprovider = __webpack_require__(316);\n\nvar _responsespaginatorprovider2 = _interopRequireDefault(_responsespaginatorprovider);\n\nvar _contactbuilder = __webpack_require__(165);\n\nvar _contactbuilder2 = _interopRequireDefault(_contactbuilder);\n\nvar _surveymodelbuilder = __webpack_require__(54);\n\nvar _surveymodelbuilder2 = _interopRequireDefault(_surveymodelbuilder);\n\nvar _publishedsurveymodelprovider = __webpack_require__(130);\n\nvar _publishedsurveymodelprovider2 = _interopRequireDefault(_publishedsurveymodelprovider);\n\nvar _guestprofile = __webpack_require__(356);\n\nvar _guestprofile2 = _interopRequireDefault(_guestprofile);\n\nvar _immutable = __webpack_require__(9);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _appactions = __webpack_require__(100);\n\nvar _appactions2 = _interopRequireDefault(_appactions);\n\nvar _usercontext = __webpack_require__(329);\n\nvar _usercontext2 = _interopRequireDefault(_usercontext);\n\nvar _i18n = __webpack_require__(8);\n\nvar _i18n2 = _interopRequireDefault(_i18n);\n\nvar _logger = __webpack_require__(6);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _diservice = __webpack_require__(40);\n\nvar _diservice2 = _interopRequireDefault(_diservice);\n\nvar _i18nextXhrBackend = __webpack_require__(302);\n\nvar _i18nextXhrBackend2 = _interopRequireDefault(_i18nextXhrBackend);\n\nvar _appsettings = __webpack_require__(28);\n\nvar _authactions = __webpack_require__(30);\n\nvar _authactions2 = _interopRequireDefault(_authactions);\n\nvar _url = __webpack_require__(865);\n\nvar _url2 = _interopRequireDefault(_url);\n\nvar _notificationactions = __webpack_require__(64);\n\nvar _notificationactions2 = _interopRequireDefault(_notificationactions);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar contactBuilder = (0, _contactbuilder2.default)(),\n    surveyModelBuilder = (0, _surveymodelbuilder2.default)(),\n    publishedSurveyModelProvider = (0, _publishedsurveymodelprovider2.default)(),\n    guestUser = \"guest\",\n    AuthStates = {\n  SIGNED_IN: \"signed-in\",\n  SIGNING_IN: \"signing-in\",\n  SIGNED_OUT: \"signed-out\",\n  SIGNING_OUT: \"signing-out\",\n  ERROR: \"error\"\n},\n    AuthProviders = [{\n  name: \"google\",\n  title: \"Google\",\n  logo: \"icon-google\"\n}, {\n  name: \"facebook\",\n  title: \"Facebook\",\n  logo: \"icon-facebook\"\n}],\n    filterProviders = function filterProviders(providers) {\n  return (0, _takeWhile3.default)(providers, function (provider) {\n    return (0, _findKey3.default)(_appsettings.OAuth, function (client) {\n      return client.name == provider.name;\n    }) != undefined;\n  });\n},\n    defaultData = _immutable2.default.fromJS({\n  AuthStates: AuthStates,\n  AuthProviders: filterProviders(AuthProviders),\n  authState: AuthStates.SIGNED_OUT,\n  provider: null,\n  error: null,\n  userProfile: _guestprofile2.default\n}),\n    AuthStore = (0, _createStore2.default)({\n  listenables: _authactions2.default,\n  state: defaultData,\n  provider: null,\n  _subscribers: _immutable2.default.Map({\n    onbeforelogout: [],\n    onafterlogout: []\n  }),\n  onLogout: false,\n  updateState: function updateState(newState, trigger) {\n    this.state = newState;\n    if (trigger) {\n      this.trigger(this.state);\n    }\n  },\n  getInitialState: function getInitialState() {\n    return this.state;\n  },\n  subscribe: function subscribe(event, fn) {\n    if (this._subscribers.get(event).indexOf(fn) == -1) {\n      this._subscribers.get(event).push(fn);\n    }\n  },\n  unsubscribe: function unsubscribe(event, fn) {\n    var index = this._subscribers.get(event).indexOf(fn);\n    if (index > -1) {\n      this._subscribers.get(event).splice(index, 1);\n    }\n  },\n  triggerEvent: function triggerEvent(event) {\n    for (var _len = arguments.length, payload = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      payload[_key - 1] = arguments[_key];\n    }\n\n    return this._subscribers.get(event).reduce(function (acc, handler) {\n      if (!handler.apply(undefined, payload)) {\n        acc = false;\n      }\n      return acc;\n    }, true);\n  },\n  routeToSurveys: function routeToSurveys() {\n    var currentLocationArr = window.location.href.split(\"/\"),\n        skipRoute = _appsettings.skipSignOutRoutes.reduce(function (result, testRoute) {\n      var index = (0, _indexOf3.default)(currentLocationArr, testRoute);\n      if (index != -1) {\n        result = true;\n      }\n      return result;\n    }, false);\n    if (skipRoute) return;\n    var history = (0, _createHashHistory2.default)({\n      queryKey: false\n    }),\n        location = history.createLocation(\"/surveys\");\n    history.push(location);\n  },\n  init: function init() {\n    var _this = this;\n\n    _superloginClient2.default.configure(_appsettings.clientConfig);\n    if (_superloginClient2.default.authenticated()) {\n      this._getProfile().then(function (profile) {\n        _this.updateState(_this.state.mergeDeep({\n          authState: AuthStates.SIGNED_IN,\n          userProfile: profile\n        }), true);\n        _this.registerContextAndProviders(profile);\n        _authactions2.default.userChanged(_guestprofile2.default, profile, true);\n      }).catch(function (err) {\n        return _logger2.default.log;\n      });\n    } else {\n      this.registerContextAndProviders(_guestprofile2.default);\n      _authactions2.default.userChanged(null, _guestprofile2.default);\n    }\n  },\n  getProperDBURL: function getProperDBURL(dbURL) {\n    var urlObj = _url2.default.parse(dbURL);\n    urlObj.protocol = window.location.protocol;\n    urlObj.host = window.location.host;\n    urlObj.port = window.location.port || 443;\n    urlObj.pathname = \"db\" + urlObj.pathname;\n    return _url2.default.format(urlObj);\n  },\n  _getProfile: function _getProfile() {\n    var _this2 = this;\n\n    return _superloginClient2.default.getHttp().get(\"user/profile\").then(function (res) {\n      var profile = res.data,\n          dbURL = _superloginClient2.default.getDbUrl(_appsettings.userDb);\n      profile[\"userDbUrl\"] = _this2.getProperDBURL(dbURL);\n      profile[\"isGuest\"] = false;\n      return profile;\n    });\n  },\n  login: function login(provider) {\n    var _this3 = this;\n\n    this.updateState(this.state.setIn([\"authState\"], AuthStates.SIGNING_IN), true);\n    _superloginClient2.default.socialAuth(provider).then(function () {\n      return _this3._getProfile();\n    }).then(function (profile) {\n      _this3.updateState(_this3.state.mergeDeep({\n        authState: AuthStates.SIGNED_IN,\n        userProfile: profile\n      }), true);\n      _this3.registerContextAndProviders(profile);\n      _authactions2.default.userChanged(_guestprofile2.default, profile);\n      _notificationactions2.default.notify(_appsettings.Notifications.INFO, _i18n2.default.t(\"You are successfully logged in\"));\n      _logger2.default.log(\"logged-in\");\n    }).catch(function (err) {\n      _logger2.default.error(err);\n      _notificationactions2.default.notify(_appsettings.Notifications.ERROR, _i18n2.default.t(\"The Login wasn't completed\"));\n      _this3.updateState(_this3.state.mergeDeep({\n        authState: AuthStates.SIGNED_OUT,\n        userProfile: _guestprofile2.default\n      }), true);\n    });\n  },\n  logout: function logout() {\n    var _this4 = this;\n\n    for (var _len2 = arguments.length, payload = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      payload[_key2] = arguments[_key2];\n    }\n\n    this.updateState(this.state.setIn([\"authState\"], AuthStates.SIGNING_IN), true);\n    //AuthActions.onBeforeLogout();\n    if (this.onLogout) {\n      return;\n    }\n    this.onLogout = true;\n    if (!this.triggerEvent.apply(this, [\"onbeforelogout\"].concat(payload))) {\n      this.onLogout = false;\n      return;\n    }\n    _diservice2.default.get(\"UserContext\").then(function (uc) {\n      return uc.destroy();\n    }).then(function () {\n      return _superloginClient2.default.logout(\"logout\");\n    }).then(function () {\n      _this4.registerContextAndProviders(_guestprofile2.default);\n      _authactions2.default.userChanged(_this4.state.getIn([\"userProfile\"]).toJSON(), _guestprofile2.default);\n      _this4.updateState(_this4.state.mergeDeep({\n        authState: AuthStates.SIGNED_OUT,\n        userProfile: _guestprofile2.default\n      }), true);\n      _this4.onLogout = false;\n      //AuthActions.onAfterLogout();\n      _this4.triggerEvent.apply(_this4, [\"onafterlogout\"].concat(payload));\n      _this4.routeToSurveys();\n      _notificationactions2.default.notify(_appsettings.Notifications.INFO, _i18n2.default.t(\"You have successfully logged out\"));\n      _this4.updateState(_this4.state.setIn([\"authState\"], AuthStates.SIGNED_OUT), true);\n    }).catch(function (error) {\n      _this4.onLogout = false;\n      _logger2.default.error(error);\n      _this4.updateState(_this4.state.mergeDeep({\n        authState: AuthStates.ERROR,\n        error: { message: \"An error occurred during logout\" }\n      }), true);\n      _this4.updateState(_this4.state.setIn([\"authState\"], AuthStates.SIGNED_IN), true);\n    });\n  },\n  registerContextAndProviders: function registerContextAndProviders(profile) {\n    _diservice2.default.register(\"UserContext\", _contextprovider2.default.getUserContext(profile));\n    _diservice2.default.register(\"GroupsAndRecipientsProvider\", new _groupsandrecipientsprovider2.default(_diservice2.default, contactBuilder));\n    _diservice2.default.register(\"SurveyDataProvider\", new _surveydataprovider2.default(_diservice2.default, surveyModelBuilder));\n    _diservice2.default.register(\"PublishedSurveyProvider\", new _publishedsurveyprovider2.default(_diservice2.default, publishedSurveyModelProvider));\n    _diservice2.default.register(\"PreferenceProvider\", new _preferenceprovider2.default(_diservice2.default));\n    _diservice2.default.register(\"PublishedSurveyResponeseProvider\", new _publishedsurveyresponseprovider2.default(_diservice2.default));\n    _diservice2.default.register(\"ImageProvider\", new _imageprovider2.default(_diservice2.default));\n    _diservice2.default.register(\"DefaultPaginatorProvider\", new _paginatorprovider2.default(_diservice2.default));\n    _diservice2.default.register(\"GroupsPaginatorProvider\", new _groupspaginatorprovider2.default(_diservice2.default));\n    _diservice2.default.register(\"ResponsesPaginatorProvider\", new _responsespaginatorprovider2.default(_diservice2.default));\n    _diservice2.default.register(\"ErrorProvider\", new _errorsprovider2.default(_diservice2.default));\n    _diservice2.default.register(\"TimeTrackerProvider\", new _timetrackerprovider2.default(_diservice2.default));\n  }\n});\n\nexports.default = AuthStore;\n\n/***/ }),\n\n/***/ 245:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _refluxCore = __webpack_require__(14);\n\nvar _refluxCore2 = _interopRequireDefault(_refluxCore);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar SurveyRunnerActions = _refluxCore2.default.createActions([\"setResponse\", \"startTest\", \"stopTest\", \"next\", \"previous\", \"finish\", \"setDisable\"]);\n\nexports.default = SurveyRunnerActions;\n\n/***/ }),\n\n/***/ 252:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(0);\n\nvar _getcustomtheme = __webpack_require__(168);\n\nvar _getcustomtheme2 = _interopRequireDefault(_getcustomtheme);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar CustomThemeProvider = function (_Component) {\n  _inherits(CustomThemeProvider, _Component);\n\n  function CustomThemeProvider() {\n    _classCallCheck(this, CustomThemeProvider);\n\n    return _possibleConstructorReturn(this, (CustomThemeProvider.__proto__ || Object.getPrototypeOf(CustomThemeProvider)).apply(this, arguments));\n  }\n\n  _createClass(CustomThemeProvider, [{\n    key: 'getChildContext',\n    value: function getChildContext() {\n      return {\n        customTheme: this.props.customTheme || (0, _getcustomtheme2.default)()\n      };\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return this.props.children;\n    }\n  }]);\n\n  return CustomThemeProvider;\n}(_react.Component);\n\nCustomThemeProvider.propTypes = {\n  children: _react.PropTypes.element,\n  customTheme: _react.PropTypes.object\n};\nCustomThemeProvider.childContextTypes = {\n  customTheme: _react.PropTypes.object.isRequired\n};\nexports.default = CustomThemeProvider;\n\n/***/ }),\n\n/***/ 255:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _connect = __webpack_require__(63);\n\nvar _connect2 = _interopRequireDefault(_connect);\n\nvar _reactAddonsPureRenderMixin = __webpack_require__(27);\n\nvar _reactAddonsPureRenderMixin2 = _interopRequireDefault(_reactAddonsPureRenderMixin);\n\nvar _reactResponsive = __webpack_require__(227);\n\nvar _reactResponsive2 = _interopRequireDefault(_reactResponsive);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar DetectDevice = _react2.default.createClass({\n  displayName: \"DetectDevice\",\n\n  mixins: [_reactAddonsPureRenderMixin2.default],\n  childContextTypes: {\n    location: _react2.default.PropTypes.object,\n    history: _react2.default.PropTypes.object\n  },\n\n  getChildContext: function getChildContext() {\n    return { location: this.props.location, history: this.props.history };\n  },\n  getChildWithProps: function getChildWithProps(isMobile, isShort) {\n    return _react2.default.Children.map(this.props.children, function (child) {\n      return _react2.default.cloneElement(child, {\n        isMobile: isMobile,\n        isShort: isShort\n      });\n    });\n  },\n  render: function render() {\n    return _react2.default.createElement(\n      \"div\",\n      null,\n      _react2.default.createElement(\n        _reactResponsive2.default,\n        { query: \"(min-device-width: 1224px)\" },\n        _react2.default.createElement(\n          _reactResponsive2.default,\n          { query: \"(min-width: 808px)\" },\n          this.getChildWithProps(false)\n        ),\n        _react2.default.createElement(\n          _reactResponsive2.default,\n          { query: \"(max-width: 807px) and (min-width: 471px)\" },\n          this.getChildWithProps(true)\n        ),\n        _react2.default.createElement(\n          _reactResponsive2.default,\n          { query: \"(max-width: 470px)\" },\n          this.getChildWithProps(true, true)\n        )\n      ),\n      _react2.default.createElement(\n        _reactResponsive2.default,\n        { query: \"(max-device-width: 1224px)\" },\n        _react2.default.createElement(\n          _reactResponsive2.default,\n          { query: \"(min-width: 471px)\" },\n          this.getChildWithProps(true)\n        ),\n        _react2.default.createElement(\n          _reactResponsive2.default,\n          { query: \"(max-width: 470px)\" },\n          this.getChildWithProps(true, true)\n        )\n      )\n    );\n  }\n});\nexports.default = DetectDevice;\n\n/***/ }),\n\n/***/ 266:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _refluxCore = __webpack_require__(14);\n\nvar _refluxCore2 = _interopRequireDefault(_refluxCore);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ErrorActions = _refluxCore2.default.createActions([\"registerError\", \"postToServer\"]);\n\nexports.default = ErrorActions;\n\n/***/ }),\n\n/***/ 28:\n/***/ (function(module, exports) {\n\nmodule.exports = {\n\t\"AppTitle\": \"quizMe\",\n\t\"Emboss\": \"rgba(255, 255, 255, 0.0980392) -1px -1px 1px, rgba(0, 0, 0, 0.498039) 1px 1px 1px\",\n\t\"markdownGuideLink\": \"https://guides.github.com/features/mastering-markdown\",\n\t\"DisabledStyle\": {\n\t\t\"opacity\": 0.2\n\t},\n\t\"SupportedLanguages\": {\n\t\t\"English\": \"en-US\",\n\t\t\"हिंदी\": \"hi-IN\"\n\t},\n\t\"SupportedLanguagesCollection\": [\n\t\t\"en-US\",\n\t\t\"hi-IN\"\n\t],\n\t\"SurveyModelDefaults\": {\n\t\t\"SchemaRevision\": 1,\n\t\t\"DataStoreKey\": \"SurveyModel\",\n\t\t\"SurveyCollectionKey\": \"Surveys\",\n\t\t\"MaxSurveyTitleLength\": 100,\n\t\t\"MaxSurveySubTitleLength\": 1000,\n\t\t\"MaxPageTitleLength\": 100,\n\t\t\"MaxPageSubTitleLength\": 1000\n\t},\n\t\"OAuth\": {\n\t\t\"Google\": {\n\t\t\t\"name\": \"google\"\n\t\t},\n\t\t\"Facebook\": {\n\t\t\t\"name\": \"facebook\"\n\t\t}\n\t},\n\t\"CouchDbUrl\": \"http://localhost:5984/\",\n\t\"siteURL\": \"https://survey.bitpod.io\",\n\t\"Notifications\": {\n\t\t\"INFO\": {\n\t\t\t\"lable\": \"info\",\n\t\t\t\"timespan\": 3000\n\t\t},\n\t\t\"SUCCESS\": {\n\t\t\t\"lable\": \"success\",\n\t\t\t\"timespan\": 3000\n\t\t},\n\t\t\"WARNING\": {\n\t\t\t\"lable\": \"warning\",\n\t\t\t\"timespan\": 4000\n\t\t},\n\t\t\"ERROR\": {\n\t\t\t\"lable\": \"error\",\n\t\t\t\"timespan\": 4000\n\t\t},\n\t\t\"LONGINFO\": {\n\t\t\t\"lable\": \"info\",\n\t\t\t\"timespan\": 10000\n\t\t}\n\t},\n\t\"userDb\": \"survey\",\n\t\"clientConfig\": {\n\t\t\"baseUrl\": \"/auth/\",\n\t\t\"endpoints\": [],\n\t\t\"noDefaultEndpoint\": false,\n\t\t\"storage\": \"local\",\n\t\t\"providers\": [\n\t\t\t\"facebook\",\n\t\t\t\"google\"\n\t\t],\n\t\t\"checkExpired\": \"stateChange\",\n\t\t\"refreshThreshold\": 0.5\n\t},\n\t\"tag\": {\n\t\t\"delimiters\": \",|;\",\n\t\t\"actions\": {\n\t\t\t\"add\": \"add\",\n\t\t\t\"remove\": \"remove\"\n\t\t}\n\t},\n\t\"contactView\": {\n\t\t\"navigation\": {\n\t\t\t\"pageSize\": 5\n\t\t}\n\t},\n\t\"allowedImageFileType\": \"image/jpeg, image/png\",\n\t\"fonts\": {\n\t\t\"xxx_small\": \"20%\",\n\t\t\"xx_small\": \"30%\",\n\t\t\"x_small\": \"50%\",\n\t\t\"smaller\": \"70%\",\n\t\t\"small\": \"80%\",\n\t\t\"medium\": \"110%\",\n\t\t\"normal\": \"100%\",\n\t\t\"large\": \"120%\",\n\t\t\"larger\": \"130%\",\n\t\t\"x_large\": \"150%\",\n\t\t\"xx_large\": \"170%\",\n\t\t\"xxx_large\": \"190%\",\n\t\t\"xxxx_large\": \"200%\"\n\t},\n\t\"Placeholders\": {\n\t\t\"text\": \"Section Title\",\n\t\t\"image\": \"Image\",\n\t\t\"question\": \"Question title\"\n\t},\n\t\"distributionTypes\": {\n\t\t\"commonlink\": \"commonlink\",\n\t\t\"yourcontacts\": \"yourcontacts\"\n\t},\n\t\"shortUrl\": {\n\t\t\"apiKey\": \"AIzaSyBKAL6miYV8VMMDsooQTefxrfxkrvzqwCQ\"\n\t},\n\t\"googleMap\": {\n\t\t\"apiKey\": \"AIzaSyBJGXlxHBAbNnPk65friDQKqbqLqwnvwog\"\n\t},\n\t\"mapIcons\": {\n\t\t\"grayIcon\": \"../../grey-dot.png\",\n\t\t\"greenIcon\": \"../../green-dot.png\",\n\t\t\"redIcon\": \"../../maroon-dot.png\",\n\t\t\"blueIcon\": \"../../blue-dot.png\",\n\t\t\"selectedUserLocationIcon\": \"../../selectedUserLocation.png\",\n\t\t\"addUserLocationIcon\": \"../../addUserLocation.png\"\n\t},\n\t\"locationRange\": {\n\t\t\"min\": 10,\n\t\t\"max\": 50\n\t},\n\t\"locationSelecteionLimit\": 5,\n\t\"defaultMapCenter\": {\n\t\t\"latitude\": 40.7127837,\n\t\t\"longitude\": -74.00594130000002\n\t},\n\t\"locationDifferenceLimit\": 10,\n\t\"providerLinks\": {\n\t\t\"google\": {\n\t\t\t\"label\": \"www.google.com\",\n\t\t\t\"link\": \"https://www.google.com\"\n\t\t},\n\t\t\"facebook\": {\n\t\t\t\"label\": \"www.facebook.com\",\n\t\t\t\"link\": \"https://www.facebook.com\"\n\t\t}\n\t},\n\t\"mediaAPIEndpoint\": \"/media\",\n\t\"sharedPath\": \"message/shared\",\n\t\"skipSignOutRoutes\": [\n\t\t\"run\",\n\t\t\"message\"\n\t]\n};\n\n/***/ }),\n\n/***/ 30:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _refluxCore = __webpack_require__(14);\n\nvar _refluxCore2 = _interopRequireDefault(_refluxCore);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar AuthActions = _refluxCore2.default.createActions([\"login\", \"logout\", \"userChanged\", \"onBeforeLogout\", \"onAfterLogout\"]);\n\nexports.default = AuthActions;\n\n/***/ }),\n\n/***/ 314:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _findIndex2 = __webpack_require__(241);\n\nvar _findIndex3 = _interopRequireDefault(_findIndex2);\n\nvar _merge2 = __webpack_require__(15);\n\nvar _merge3 = _interopRequireDefault(_merge2);\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _abstractdataprovider = __webpack_require__(33);\n\nvar _abstractdataprovider2 = _interopRequireDefault(_abstractdataprovider);\n\nvar _logger = __webpack_require__(6);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar PaginatorProvider = function (_AbstractDataProvider) {\n  _inherits(PaginatorProvider, _AbstractDataProvider);\n\n  function PaginatorProvider(container) {\n    _classCallCheck(this, PaginatorProvider);\n\n    return _possibleConstructorReturn(this, (PaginatorProvider.__proto__ || Object.getPrototypeOf(PaginatorProvider)).call(this, container));\n  }\n\n  _createClass(PaginatorProvider, [{\n    key: \"registerListener\",\n    value: function registerListener(filterFunction, callback) {\n      return this.getUserContext().then(function (userContext) {\n        return userContext.registerListener(filterFunction, callback);\n      });\n    }\n  }, {\n    key: \"unregisterListener\",\n    value: function unregisterListener(filterFunction, callback) {\n      return this.getUserContext().then(function (userContext) {\n        return userContext.unregisterListener(filterFunction, callback);\n      });\n    }\n  }, {\n    key: \"_find\",\n    value: function _find(selector) {\n      return this.getUserContext().then(function (userContext) {\n        return userContext.DB.find(selector);\n      });\n    }\n  }, {\n    key: \"get\",\n    value: function get(selector, skip, limit) {\n      selector = (0, _merge3.default)(selector, { skip: skip, limit: limit });\n      return this._find(selector).then(function (result) {\n        return result.docs;\n      });\n    }\n  }, {\n    key: \"filter\",\n    value: function filter(selector, skip, limit) {\n      selector = (0, _merge3.default)(selector, { skip: skip, limit: limit });\n      return this._find(selector).then(function (result) {\n        return result.docs;\n      });\n    }\n  }, {\n    key: \"getIndex\",\n    value: function getIndex(selector, doc, isEqual) {\n      return this._find(selector).then(function (result) {\n        var docs = result.docs;\n\n        return (0, _findIndex3.default)(docs, function (lDoc) {\n          return isEqual(lDoc, doc);\n        });\n      });\n    }\n  }, {\n    key: \"getQueryCount\",\n    value: function getQueryCount(selector) {\n      return this._find(selector).then(function (result) {\n        return result.docs.length;\n      });\n    }\n  }, {\n    key: \"getFilterCount\",\n    value: function getFilterCount(selector) {\n      return this._find(selector).then(function (result) {\n        return result.docs.length;\n      });\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      _logger2.default.log(\"Logged off\");\n    }\n  }, {\n    key: \"initialSyncCompleted\",\n    value: function initialSyncCompleted() {\n      _logger2.default.debug(\"[SurveyDataProvider]: initialSyncCompleted\");\n    }\n  }, {\n    key: \"deltaSyncCompleted\",\n    value: function deltaSyncCompleted() {\n      _logger2.default.debug(\"[SurveyDataProvider]: deltaSyncCompleted\");\n    }\n  }, {\n    key: \"initialSyncFailed\",\n    value: function initialSyncFailed() {\n      _logger2.default.debug(\"[SurveyDataProvider]: initialSyncFailed\");\n    }\n  }, {\n    key: \"deltaSyncFailed\",\n    value: function deltaSyncFailed() {\n      _logger2.default.debug(\"[SurveyDataProvider]: deltaSyncFailed\");\n    }\n  }]);\n\n  return PaginatorProvider;\n}(_abstractdataprovider2.default);\n\nexports.default = PaginatorProvider;\n\n/***/ }),\n\n/***/ 315:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _compact2 = __webpack_require__(248);\n\nvar _compact3 = _interopRequireDefault(_compact2);\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _abstractdataprovider = __webpack_require__(33);\n\nvar _abstractdataprovider2 = _interopRequireDefault(_abstractdataprovider);\n\nvar _logger = __webpack_require__(6);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _bluebird = __webpack_require__(32);\n\nvar _bluebird2 = _interopRequireDefault(_bluebird);\n\nvar _settleAll = __webpack_require__(72);\n\nvar _settleAll2 = _interopRequireDefault(_settleAll);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar GroupsPaginatorProvider = function (_AbstractDataProvider) {\n  _inherits(GroupsPaginatorProvider, _AbstractDataProvider);\n\n  function GroupsPaginatorProvider(container) {\n    _classCallCheck(this, GroupsPaginatorProvider);\n\n    return _possibleConstructorReturn(this, (GroupsPaginatorProvider.__proto__ || Object.getPrototypeOf(GroupsPaginatorProvider)).call(this, container));\n  }\n\n  _createClass(GroupsPaginatorProvider, [{\n    key: \"registerListener\",\n    value: function registerListener(filterFunction, callback) {\n      return this.getUserContext().then(function (userContext) {\n        return userContext.registerListener(filterFunction, callback);\n      });\n    }\n  }, {\n    key: \"unregisterListener\",\n    value: function unregisterListener(filterFunction, callback) {\n      return this.getUserContext().then(function (userContext) {\n        return userContext.unregisterListener(filterFunction, callback);\n      });\n    }\n  }, {\n    key: \"_find\",\n    value: function _find(selector) {}\n  }, {\n    key: \"_fetchGroups\",\n    value: function _fetchGroups() {\n      return this.getUserContext().then(function (userContext) {\n        return userContext.DB.find({\n          selector: {\n            _id: \"groups\"\n          },\n          fields: [\"groups\"]\n        });\n      }).then(function (result) {\n        return result.docs[0] && result.docs[0].groups || [];\n      });\n    }\n  }, {\n    key: \"get\",\n    value: function get(selector, skip, limit) {\n      var _this2 = this;\n\n      return this._fetchGroups().then(function (groups) {\n        return (0, _settleAll2.default)(groups.map(function (group) {\n          return _bluebird2.default.try(function () {\n            return _this2.getGroupWithContactsCount(group);\n          });\n        })).then(function (outputs) {\n          return (0, _compact3.default)(outputs.map(function (output) {\n            return !output.isRejected() && output.value();\n          }));\n        });\n      });\n    }\n  }, {\n    key: \"getGroupWithContactsCount\",\n    value: function getGroupWithContactsCount(group) {\n      return this.getRecipientsByGroup(group).then(function (result) {\n        return _defineProperty({}, group, result.docs.length);\n      });\n    }\n  }, {\n    key: \"getRecipientsByGroup\",\n    value: function getRecipientsByGroup(group) {\n      return this.getUserContext().then(function (userContext) {\n        return userContext.DB.find({\n          selector: {\n            docType: \"contact\",\n            groups: { $elemMatch: { $eq: group } }\n          },\n          fields: [\"_id\"]\n        });\n      });\n    }\n  }, {\n    key: \"filter\",\n    value: function filter(selector, skip, limit) {}\n  }, {\n    key: \"getIndex\",\n    value: function getIndex(selector, doc, isEqual) {}\n  }, {\n    key: \"getQueryCount\",\n    value: function getQueryCount(selector) {\n      return _bluebird2.default.resolve(0);\n    }\n  }, {\n    key: \"getFilterCount\",\n    value: function getFilterCount(selector) {}\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      _logger2.default.log(\"Logged off\");\n    }\n  }, {\n    key: \"initialSyncCompleted\",\n    value: function initialSyncCompleted() {\n      _logger2.default.debug(\"[SurveyDataProvider]: initialSyncCompleted\");\n    }\n  }, {\n    key: \"deltaSyncCompleted\",\n    value: function deltaSyncCompleted() {\n      _logger2.default.debug(\"[SurveyDataProvider]: deltaSyncCompleted\");\n    }\n  }, {\n    key: \"initialSyncFailed\",\n    value: function initialSyncFailed() {\n      _logger2.default.debug(\"[SurveyDataProvider]: initialSyncFailed\");\n    }\n  }, {\n    key: \"deltaSyncFailed\",\n    value: function deltaSyncFailed() {\n      _logger2.default.debug(\"[SurveyDataProvider]: deltaSyncFailed\");\n    }\n  }]);\n\n  return GroupsPaginatorProvider;\n}(_abstractdataprovider2.default);\n\nexports.default = GroupsPaginatorProvider;\n\n/***/ }),\n\n/***/ 316:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _abstractdataprovider = __webpack_require__(33);\n\nvar _abstractdataprovider2 = _interopRequireDefault(_abstractdataprovider);\n\nvar _logger = __webpack_require__(6);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _bluebird = __webpack_require__(32);\n\nvar _bluebird2 = _interopRequireDefault(_bluebird);\n\nvar _settleAll = __webpack_require__(72);\n\nvar _settleAll2 = _interopRequireDefault(_settleAll);\n\nvar _immutable = __webpack_require__(9);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _publishedsurveymodelprovider = __webpack_require__(130);\n\nvar _publishedsurveymodelprovider2 = _interopRequireDefault(_publishedsurveymodelprovider);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ResponsesPaginatorProvider = function (_AbstractDataProvider) {\n  _inherits(ResponsesPaginatorProvider, _AbstractDataProvider);\n\n  function ResponsesPaginatorProvider(container) {\n    _classCallCheck(this, ResponsesPaginatorProvider);\n\n    var _this = _possibleConstructorReturn(this, (ResponsesPaginatorProvider.__proto__ || Object.getPrototypeOf(ResponsesPaginatorProvider)).call(this, container));\n\n    _this._publidhedSurveys = _immutable2.default.Map();\n    _this._publishedSurveyModelProvider = (0, _publishedsurveymodelprovider2.default)();\n    return _this;\n  }\n\n  _createClass(ResponsesPaginatorProvider, [{\n    key: \"registerListener\",\n    value: function registerListener(filterFunction, callback) {\n      return this.getUserContext().then(function (userContext) {\n        return userContext.registerListener(filterFunction, callback);\n      });\n    }\n  }, {\n    key: \"unregisterListener\",\n    value: function unregisterListener(filterFunction, callback) {\n      return this.getUserContext().then(function (userContext) {\n        return userContext.unregisterListener(filterFunction, callback);\n      });\n    }\n  }, {\n    key: \"_find\",\n    value: function _find(selector) {}\n  }, {\n    key: \"_fetchPublishedSurvey\",\n    value: function _fetchPublishedSurvey(id) {\n      var _this2 = this;\n\n      return this.getUserContext().then(function (userContext) {\n        return userContext.DB.allDocs({\n          key: id,\n          include_docs: true\n        });\n      }).then(function (result) {\n        return result.rows[0] && _this2._publishedSurveyModelProvider.fromModel(result.rows[0].doc);\n      });\n    }\n  }, {\n    key: \"getResponses\",\n    value: function getResponses(id) {\n      var responses = this._publidhedSurveys.get(id) && this._publidhedSurveys.get(id).getContacts().sortBy(function (contact) {\n        return contact.obtainedMarks || 0;\n      });\n      return responses && responses.reverse();\n    }\n  }, {\n    key: \"get\",\n    value: function get(id, skip, limit) {\n      var responses = this.getResponses(id) || _immutable2.default.Map();\n      return _bluebird2.default.resolve(responses.skip(skip).take(limit).toArray());\n    }\n  }, {\n    key: \"filter\",\n    value: function filter(selector, skip, limit) {}\n  }, {\n    key: \"getIndex\",\n    value: function getIndex(selector, doc, isEqual) {}\n  }, {\n    key: \"getQueryCount\",\n    value: function getQueryCount(id) {\n      var _this3 = this;\n\n      return this._fetchPublishedSurvey(id).then(function (publishedSurvey) {\n        _this3._publidhedSurveys = _this3._publidhedSurveys.set(id, publishedSurvey);\n        return publishedSurvey.getContacts().size;\n      });\n    }\n  }, {\n    key: \"getFilterCount\",\n    value: function getFilterCount(selector) {}\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      _logger2.default.log(\"Logged off\");\n    }\n  }, {\n    key: \"initialSyncCompleted\",\n    value: function initialSyncCompleted() {\n      _logger2.default.debug(\"[SurveyDataProvider]: initialSyncCompleted\");\n    }\n  }, {\n    key: \"deltaSyncCompleted\",\n    value: function deltaSyncCompleted() {\n      _logger2.default.debug(\"[SurveyDataProvider]: deltaSyncCompleted\");\n    }\n  }, {\n    key: \"initialSyncFailed\",\n    value: function initialSyncFailed() {\n      _logger2.default.debug(\"[SurveyDataProvider]: initialSyncFailed\");\n    }\n  }, {\n    key: \"deltaSyncFailed\",\n    value: function deltaSyncFailed() {\n      _logger2.default.debug(\"[SurveyDataProvider]: deltaSyncFailed\");\n    }\n  }]);\n\n  return ResponsesPaginatorProvider;\n}(_abstractdataprovider2.default);\n\nexports.default = ResponsesPaginatorProvider;\n\n/***/ }),\n\n/***/ 322:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _bsonObjectid = __webpack_require__(17);\n\nvar _bsonObjectid2 = _interopRequireDefault(_bsonObjectid);\n\nvar _abstractdataprovider = __webpack_require__(33);\n\nvar _abstractdataprovider2 = _interopRequireDefault(_abstractdataprovider);\n\nvar _logger = __webpack_require__(6);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar defaultPreferences = { language: \"en-US\", questionMode: false };\n\nvar ErrorProvider = function (_AbstractDataProvider) {\n  _inherits(ErrorProvider, _AbstractDataProvider);\n\n  function ErrorProvider(container) {\n    _classCallCheck(this, ErrorProvider);\n\n    return _possibleConstructorReturn(this, (ErrorProvider.__proto__ || Object.getPrototypeOf(ErrorProvider)).call(this, container));\n  }\n\n  _createClass(ErrorProvider, [{\n    key: \"reportErrors\",\n    value: function reportErrors(errors) {\n      return this.getUserContext().then(function (userContext) {\n        return userContext.saveDocs(errors);\n      });\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      _logger2.default.debug(\"[ErrorProvider]: destroy\");\n    }\n  }, {\n    key: \"initialSyncCompleted\",\n    value: function initialSyncCompleted() {\n      _logger2.default.debug(\"[ErrorProvider]: initialSyncCompleted\");\n    }\n  }, {\n    key: \"deltaSyncCompleted\",\n    value: function deltaSyncCompleted() {\n      _logger2.default.debug(\"[ErrorProvider]: deltaSyncCompleted\");\n    }\n  }, {\n    key: \"initialSyncFailed\",\n    value: function initialSyncFailed() {\n      _logger2.default.debug(\"[ErrorProvider]: initialSyncFailed\");\n    }\n  }, {\n    key: \"deltaSyncFailed\",\n    value: function deltaSyncFailed() {\n      _logger2.default.debug(\"[ErrorProvider]: deltaSyncFailed\");\n    }\n  }]);\n\n  return ErrorProvider;\n}(_abstractdataprovider2.default);\n\nexports.default = ErrorProvider;\n\n/***/ }),\n\n/***/ 328:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _usercontext = __webpack_require__(329);\n\nvar _usercontext2 = _interopRequireDefault(_usercontext);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ContextProvider = {\n    \"userContexts\": {},\n    \"getUserContext\": function getUserContext(userProfile) {\n        var _this = this;\n\n        if (this.userContexts[userProfile._id]) {\n            return this.userContexts[userProfile._id].then(function (uc) {\n                return uc.isValid() ? uc : _this.userContexts[userProfile._id] = new _usercontext2.default(userProfile)._initialize();\n            });\n        }\n        return this.userContexts[userProfile._id] = new _usercontext2.default(userProfile)._initialize();\n    }\n};\n\nexports.default = ContextProvider;\n\n/***/ }),\n\n/***/ 329:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _merge2 = __webpack_require__(15);\n\nvar _merge3 = _interopRequireDefault(_merge2);\n\nvar _forIn2 = __webpack_require__(24);\n\nvar _forIn3 = _interopRequireDefault(_forIn2);\n\nvar _forEach2 = __webpack_require__(250);\n\nvar _forEach3 = _interopRequireDefault(_forEach2);\n\nvar _remove2 = __webpack_require__(160);\n\nvar _remove3 = _interopRequireDefault(_remove2);\n\nvar _concat2 = __webpack_require__(249);\n\nvar _concat3 = _interopRequireDefault(_concat2);\n\nvar _flattenDeep2 = __webpack_require__(677);\n\nvar _flattenDeep3 = _interopRequireDefault(_flattenDeep2);\n\nvar _uniq2 = __webpack_require__(324);\n\nvar _uniq3 = _interopRequireDefault(_uniq2);\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _events = __webpack_require__(90);\n\nvar _events2 = _interopRequireDefault(_events);\n\nvar _pouchdbCore = __webpack_require__(87);\n\nvar _pouchdbCore2 = _interopRequireDefault(_pouchdbCore);\n\nvar _pouchmirrorlocalfirst = __webpack_require__(692);\n\nvar _pouchmirrorlocalfirst2 = _interopRequireDefault(_pouchmirrorlocalfirst);\n\nvar _pouchdbSeedDesign = __webpack_require__(693);\n\nvar _pouchdbSeedDesign2 = _interopRequireDefault(_pouchdbSeedDesign);\n\nvar _designs = __webpack_require__(700);\n\nvar _designs2 = _interopRequireDefault(_designs);\n\nvar _views = __webpack_require__(701);\n\nvar _views2 = _interopRequireDefault(_views);\n\nvar _indexes = __webpack_require__(702);\n\nvar _indexes2 = _interopRequireDefault(_indexes);\n\nvar _settleAll = __webpack_require__(72);\n\nvar _settleAll2 = _interopRequireDefault(_settleAll);\n\nvar _logger = __webpack_require__(6);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _axios = __webpack_require__(41);\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nvar _bluebird = __webpack_require__(32);\n\nvar _bluebird2 = _interopRequireDefault(_bluebird);\n\nvar _pouchdbAdapterHttp = __webpack_require__(721);\n\nvar _pouchdbAdapterHttp2 = _interopRequireDefault(_pouchdbAdapterHttp);\n\nvar _pouchdbMapreduce = __webpack_require__(724);\n\nvar _pouchdbMapreduce2 = _interopRequireDefault(_pouchdbMapreduce);\n\nvar _pouchdbReplication = __webpack_require__(730);\n\nvar _pouchdbReplication2 = _interopRequireDefault(_pouchdbReplication);\n\nvar _pouchdbFind = __webpack_require__(741);\n\nvar _pouchdbFind2 = _interopRequireDefault(_pouchdbFind);\n\nvar _pouchdbAdapterIdb = __webpack_require__(759);\n\nvar _pouchdbAdapterIdb2 = _interopRequireDefault(_pouchdbAdapterIdb);\n\nvar _pouchdbAdapterWebsql = __webpack_require__(763);\n\nvar _pouchdbAdapterWebsql2 = _interopRequireDefault(_pouchdbAdapterWebsql);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n_pouchdbCore2.default.plugin(_pouchdbAdapterHttp2.default).plugin(_pouchdbMapreduce2.default).plugin(_pouchdbReplication2.default).plugin(_pouchdbFind2.default).plugin(_pouchdbAdapterIdb2.default).plugin(_pouchdbAdapterWebsql2.default);\n\nif (true) {\n  _pouchdbCore2.default.debug.disable();\n}\n\nvar Assertions = {\n  AssertContextValid: function AssertContextValid(valid) {\n    if (!valid) {\n      throw TypeError(\"This context has already been destroyed.\");\n    }\n  },\n  AssertDBInitialized: function AssertDBInitialized(initialized) {\n    if (!initialized) {\n      throw TypeError(\"Database is not initialized yet!\");\n    }\n  }\n};\n\nvar UserContext = function (_EventEmitter) {\n  _inherits(UserContext, _EventEmitter);\n\n  function UserContext(userProfile) {\n    _classCallCheck(this, UserContext);\n\n    var _this = _possibleConstructorReturn(this, (UserContext.__proto__ || Object.getPrototypeOf(UserContext)).call(this));\n\n    _this._userId = userProfile._id;\n    _this._userProfile = userProfile;\n    _this._initialized = false;\n    _this._db = null;\n    _this._listeners = new Map();\n    return _this;\n  }\n\n  _createClass(UserContext, [{\n    key: \"registerListener\",\n    value: function registerListener(filterFunction, callback) {\n      this._listeners.set(filterFunction, (0, _uniq3.default)((0, _flattenDeep3.default)((0, _concat3.default)(this._listeners[filterFunction] || [], callback))));\n    }\n  }, {\n    key: \"unregisterListener\",\n    value: function unregisterListener(filterFunction, callback) {\n      this._listeners.set(filterFunction, (0, _remove3.default)(this._listeners.get(filterFunction), function (iCallback) {\n        return callback != iCallback;\n      }));\n    }\n  }, {\n    key: \"_seedDesigns\",\n    value: function _seedDesigns(userProfile) {\n      var _this2 = this;\n\n      var localDB = new _pouchdbCore2.default(userProfile._id);\n      _logger2.default.log(\"Adapter used: \" + localDB.adapter);\n      return (0, _pouchdbSeedDesign2.default)(localDB, _views2.default).then(function (result) {\n        _logger2.default.debug(\"Views created.\", result);\n        if (userProfile.isGuest) {\n          _this2._db = localDB;\n          return localDB;\n        } else {\n          return (0, _pouchdbSeedDesign2.default)(localDB, _designs2.default).then(function (results) {\n            _logger2.default.debug(\"Filter created\", results);\n            _this2._db = new _pouchmirrorlocalfirst2.default(localDB, new _pouchdbCore2.default(userProfile.userDbUrl));\n            return _this2.addEventListener(_this2._db);\n          });\n        }\n      });\n    }\n  }, {\n    key: \"syncCompleted\",\n    value: function syncCompleted() {\n      Assertions.AssertContextValid(this.isValid());\n      if (this.isPublished) {\n        this.isPublished = false;\n        (0, _axios2.default)({\n          url: \"/trigger/invitation\",\n          method: \"POST\",\n          data: { userId: this._userId }\n        });\n      }\n    }\n  }, {\n    key: \"triggerListener\",\n    value: function triggerListener(doc, action) {\n      var _this3 = this;\n\n      var listeners = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this._listeners;\n\n      listeners.forEach(function (callbacks, filterFunction) {\n        filterFunction(doc) && _this3.invokeCallbacks(doc, action, callbacks);\n      });\n    }\n  }, {\n    key: \"invokeCallbacks\",\n    value: function invokeCallbacks(doc, action, callbacks) {\n      callbacks = (0, _uniq3.default)(callbacks);\n      (0, _forEach3.default)(callbacks, function (callback) {\n        return callback(doc, action);\n      });\n    }\n  }, {\n    key: \"triggerChanges\",\n    value: function triggerChanges(change) {\n      var _this4 = this;\n\n      var docs = change.change.docs;\n\n      (0, _forEach3.default)(docs, function (doc) {\n        _this4.triggerListener(doc, doc._deleted ? \"delete\" : \"addorupdate\");\n      });\n    }\n  }, {\n    key: \"changesFound\",\n    value: function changesFound(change) {\n      var _this5 = this;\n\n      //this.triggerChanges(change);\n      if (change.direction == \"pull\") {\n        this.triggerChanges(change);\n      }\n      if (change.direction == \"push\") {\n        var docs = change.change.docs;\n\n        (0, _forEach3.default)(docs, function (doc) {\n          if (doc.docType == \"publishedsurvey\") {\n            _this5.isPublished = true;\n          }\n        });\n      }\n    }\n  }, {\n    key: \"addEventListener\",\n    value: function addEventListener(db) {\n      var _this6 = this;\n\n      return db.on(\"delta-sync-completed\", function () {\n        _this6.syncCompleted();\n        _this6.emit(\"delta-sync-completed\");\n      }).on(\"delta-sync-started\", function () {\n        _logger2.default.debug(\"Delta sync started.\");\n      }).on(\"delta-sync-changes-detected\", function (change) {\n        _this6.changesFound(change);\n        _logger2.default.debug(\"delta-sync-changes-detected.\");\n      }).on(\"delta-sync-failed\", function () {\n        _this6.emit(\"delta-sync-failed\");\n      }).on(\"initial-sync-changes-detected\", function () {\n        _logger2.default.debug(\"initial-sync-changes-detected.\");\n      }).on(\"initial-sync-started\", function () {\n        _logger2.default.debug(\"initial-sync-started.\");\n      }).on(\"initial-sync-failed\", function () {\n        _this6.emit(\"initial-sync-failed\");\n      }).on(\"initial-sync-completed\", function () {\n        _this6.emit(\"initial-sync-completed\");\n      });\n    }\n  }, {\n    key: \"_initialize\",\n    value: function _initialize() {\n      var _this7 = this;\n\n      //PouchDB.debug.enable('*');\n      return this._seedDesigns(this._userProfile).then(function (db) {\n        var promises = [];\n        (0, _forIn3.default)(_indexes2.default, function (value, key) {\n          promises.push(_bluebird2.default.try(function () {\n            return db.createIndex(value);\n          }));\n        });\n        return (0, _settleAll2.default)(promises);\n      }).then(function (result) {\n        _this7._initialized = true;\n        _this7._isValid = true;\n        _logger2.default.debug(\"Index created\", result);\n        return _this7;\n      });\n    }\n  }, {\n    key: \"off\",\n    value: function off(eventName, callback) {\n      Assertions.AssertDBInitialized(this._initialized);\n      this.removeListener(eventName, callback);\n    }\n  }, {\n    key: \"find\",\n    value: function find(query) {\n      Assertions.AssertDBInitialized(this._initialized);\n      Assertions.AssertContextValid(this.isValid());\n      //PouchDB.debug.enable('*');\n      return this._db.find(query);\n    }\n  }, {\n    key: \"save\",\n    value: function save(docType, docs) {\n      Assertions.AssertDBInitialized(this._initialized);\n      Assertions.AssertContextValid(this.isValid());\n      var object = (0, _merge3.default)(docs, { docType: docType });\n      //PouchDB.debug.enable('*');\n      return this._db.put(object);\n    }\n  }, {\n    key: \"saveDocs\",\n    value: function saveDocs(docs) {\n      Assertions.AssertDBInitialized(this._initialized);\n      Assertions.AssertContextValid(this.isValid());\n      return this._db.bulkDocs(docs);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      Assertions.AssertDBInitialized(this._initialized);\n      Assertions.AssertContextValid(this.isValid());\n      this.emit(\"destroy\");\n      this.removeAllListeners();\n      this._isValid = false;\n      return this._db.destroy();\n    }\n  }, {\n    key: \"isValid\",\n    value: function isValid() {\n      return this._isValid;\n    }\n  }, {\n    key: \"ID\",\n    get: function get() {\n      Assertions.AssertDBInitialized(this._initialized);\n      Assertions.AssertContextValid(this.isValid());\n      return this._userId;\n    }\n  }, {\n    key: \"DB\",\n    get: function get() {\n      Assertions.AssertContextValid(this.isValid());\n      return this._db;\n    }\n  }]);\n\n  return UserContext;\n}(_events2.default);\n\nexports.default = UserContext;\n\n/***/ }),\n\n/***/ 33:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar AbstractDataProvider = function AbstractDataProvider(container) {\n    _classCallCheck(this, AbstractDataProvider);\n\n    this.getUserContext = function () {\n        return container.get(\"UserContext\").then(function (uc) {\n            return uc;\n        });\n    };\n};\n\nexports.default = AbstractDataProvider;\n\n/***/ }),\n\n/***/ 352:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _map2 = __webpack_require__(56);\n\nvar _map3 = _interopRequireDefault(_map2);\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _abstractdataprovider = __webpack_require__(33);\n\nvar _abstractdataprovider2 = _interopRequireDefault(_abstractdataprovider);\n\nvar _logger = __webpack_require__(6);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _couchdbsurveyadapter = __webpack_require__(353);\n\nvar _couchdbsurveyadapter2 = _interopRequireDefault(_couchdbsurveyadapter);\n\nvar _axios = __webpack_require__(41);\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar PublishedSurveyProvider = function (_AbstractDataProvider) {\n  _inherits(PublishedSurveyProvider, _AbstractDataProvider);\n\n  function PublishedSurveyProvider(container, PublishedSurveyModelProvider) {\n    _classCallCheck(this, PublishedSurveyProvider);\n\n    var _this = _possibleConstructorReturn(this, (PublishedSurveyProvider.__proto__ || Object.getPrototypeOf(PublishedSurveyProvider)).call(this, container));\n\n    _this.PublishedSurveyModelProvider = PublishedSurveyModelProvider;\n    return _this;\n  }\n\n  _createClass(PublishedSurveyProvider, [{\n    key: \"getUserPublishedSurveys\",\n    value: function getUserPublishedSurveys() {\n      var _this2 = this;\n\n      return this.getUserContext().then(function (userContext) {\n        return userContext.DB.query(\"getByDocType/typed\", {\n          key: \"publishedsurvey\",\n          include_docs: true\n        });\n      }).then(function (result) {\n        var publishedsurveys = {};\n        (0, _map3.default)(result.rows, function (row) {\n          if (!row.doc) return;\n          publishedsurveys[row.id] = _this2.PublishedSurveyModelProvider.fromModel(row.doc);\n        });\n        return publishedsurveys;\n      });\n    }\n  }, {\n    key: \"getUserPublishedSurvey\",\n    value: function getUserPublishedSurvey(publishedSurveyId) {\n      var _this3 = this;\n\n      return this.getUserContext().then(function (userContext) {\n        return userContext.DB.allDocs({\n          key: publishedSurveyId,\n          include_docs: true\n        });\n      }).then(function (result) {\n        var _result$rows = _slicedToArray(result.rows, 1),\n            survey = _result$rows[0];\n\n        return _this3.PublishedSurveyModelProvider.getPublishedSurveyModel(survey.doc);\n      });\n    }\n  }, {\n    key: \"addUserPublishedSurvey\",\n    value: function addUserPublishedSurvey(newPublishedSurvey) {\n      var _this4 = this;\n\n      newPublishedSurvey = this.PublishedSurveyModelProvider.getPublishedSurveyModel(newPublishedSurvey).toJS();\n      _logger2.default.debug(newPublishedSurvey);\n      var userContext = null,\n          data = {\n        survey: newPublishedSurvey.survey,\n        modified: newPublishedSurvey._id\n      };\n      return (0, _axios2.default)({\n        url: \"/thumbnail\",\n        method: \"POST\",\n        data: data\n      }).then(function (response) {\n        var data = response.data;\n\n        newPublishedSurvey.thumbnail = data.data;\n        return _this4.getUserContext();\n      }).then(function (uc) {\n        userContext = uc;\n        return userContext.save(\"publishedsurvey\", newPublishedSurvey);\n      }).then(function (result) {\n        return userContext.DB.allDocs({\n          key: result.id,\n          include_docs: true\n        });\n      }).then(function (docs) {\n        var _docs$rows = _slicedToArray(docs.rows, 1),\n            publishedsurvey = _docs$rows[0];\n\n        userContext.triggerListener(publishedsurvey, \"add\");\n        return _this4.PublishedSurveyModelProvider.fromModel(publishedsurvey.doc);\n      });\n    }\n  }, {\n    key: \"updateUserPublishedSurvey\",\n    value: function updateUserPublishedSurvey(updatedPublishedSurvey) {\n      var _this5 = this;\n\n      updatedPublishedSurvey = updatedPublishedSurvey.toJS();\n      _logger2.default.debug(updatedPublishedSurvey);\n      var userContext = null,\n          data = {\n        survey: updatedPublishedSurvey.survey,\n        modified: updatedPublishedSurvey._rev\n      };\n      return (0, _axios2.default)({\n        url: \"/thumbnail\",\n        method: \"POST\",\n        data: data\n      }).then(function (response) {\n        var data = response.data;\n\n        updatedPublishedSurvey.thumbnail = data.data;\n        return _this5.getUserContext();\n      }).then(function (uc) {\n        userContext = uc;\n        return userContext.save(\"publishedsurvey\", updatedPublishedSurvey);\n      }).then(function (result) {\n        return userContext.DB.allDocs({\n          key: result.id,\n          include_docs: true\n        });\n      }).then(function (docs) {\n        var _docs$rows2 = _slicedToArray(docs.rows, 1),\n            publishedsurvey = _docs$rows2[0];\n\n        userContext.triggerListener(publishedsurvey, \"update\");\n        return _this5.PublishedSurveyModelProvider.fromModel(publishedsurvey.doc);\n      });\n    }\n  }, {\n    key: \"undoUserPublishedSurveys\",\n    value: function undoUserPublishedSurveys(undoAppliedSurveys) {\n      var _this6 = this;\n\n      undoAppliedSurveys = (0, _map3.default)(undoAppliedSurveys, function (undoAppliedSurvey) {\n        undoAppliedSurvey = undoAppliedSurvey.toJS();\n        return undoAppliedSurvey;\n      });\n      return this.getUserContext().then(function (userContext) {\n        return userContext.DB.bulkDocs(undoAppliedSurveys);\n      }).then(function (result) {\n        _logger2.default.debug(\"undo surveys\", result);\n        return _this6.getUserSurveys();\n      });\n    }\n  }, {\n    key: \"deleteUserPublishedSurvey\",\n    value: function deleteUserPublishedSurvey(publishedSurvey) {\n      publishedSurvey = publishedSurvey.toJS();\n      publishedSurvey[\"_deleted\"] = true;\n      var userContext = null;\n      return this.getUserContext().then(function (uc) {\n        userContext = uc;\n        return userContext.save(\"publishedsurvey\", publishedSurvey);\n      }).then(function (result) {\n        publishedSurvey._rev = result.rev;\n        userContext.triggerListener(publishedSurvey, \"delete\");\n        return result;\n      });\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      _logger2.default.log(\"Logged off\");\n    }\n  }, {\n    key: \"initialSyncCompleted\",\n    value: function initialSyncCompleted() {\n      _logger2.default.debug(\"[SurveyDataProvider]: initialSyncCompleted\");\n    }\n  }, {\n    key: \"deltaSyncCompleted\",\n    value: function deltaSyncCompleted() {\n      _logger2.default.debug(\"[SurveyDataProvider]: deltaSyncCompleted\");\n    }\n  }, {\n    key: \"initialSyncFailed\",\n    value: function initialSyncFailed() {\n      _logger2.default.debug(\"[SurveyDataProvider]: initialSyncFailed\");\n    }\n  }, {\n    key: \"deltaSyncFailed\",\n    value: function deltaSyncFailed() {\n      _logger2.default.debug(\"[SurveyDataProvider]: deltaSyncFailed\");\n    }\n  }]);\n\n  return PublishedSurveyProvider;\n}(_abstractdataprovider2.default);\n\nexports.default = PublishedSurveyProvider;\n\n/***/ }),\n\n/***/ 353:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar CouchDBSurveyAdapter = function () {\n    function CouchDBSurveyAdapter(surveyModelBuilder) {\n        _classCallCheck(this, CouchDBSurveyAdapter);\n\n        this.SurveyModelBuilder = surveyModelBuilder;\n    }\n\n    _createClass(CouchDBSurveyAdapter, [{\n        key: \"fromSurveyModel\",\n        value: function fromSurveyModel(surveyModelInstance) {\n            var docJSON = surveyModelInstance.toJS();\n            if (docJSON.hasOwnProperty('_ensureDefaults')) {\n                docJSON[\"ensureDefaults\"] = docJSON[\"_ensureDefaults\"];\n                delete docJSON[\"_ensureDefaults\"];\n            }\n            if (docJSON.hasOwnProperty('_schemaVersion')) {\n                docJSON[\"schemaVersion\"] = docJSON[\"_schemaVersion\"];\n                delete docJSON[\"_schemaVersion\"];\n            }\n            if (docJSON[\"_isDeleted\"] == false) {\n                delete docJSON[\"_isDeleted\"];\n            }\n            docJSON[\"docType\"] = 'surveytemplate';\n            return docJSON;\n        }\n    }, {\n        key: \"toSurveyModel\",\n        value: function toSurveyModel(docJSON) {\n            if (!docJSON) {\n                return this.SurveyModelBuilder.createDefaultModel();\n            }\n            if (docJSON.hasOwnProperty('ensureDefaults')) {\n                docJSON[\"_ensureDefaults\"] = docJSON[\"ensureDefaults\"];\n                delete docJSON[\"ensureDefaults\"];\n            }\n            if (docJSON.hasOwnProperty('schemaVersion')) {\n                docJSON[\"_schemaVersion\"] = docJSON[\"schemaVersion\"];\n                delete docJSON[\"schemaVersion\"];\n            }\n            return this.SurveyModelBuilder.fromModel(docJSON);\n        }\n    }]);\n\n    return CouchDBSurveyAdapter;\n}();\n\nexports.default = CouchDBSurveyAdapter;\n\n/***/ }),\n\n/***/ 354:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(Buffer) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _merge2 = __webpack_require__(15);\n\nvar _merge3 = _interopRequireDefault(_merge2);\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _abstractdataprovider = __webpack_require__(33);\n\nvar _abstractdataprovider2 = _interopRequireDefault(_abstractdataprovider);\n\nvar _logger = __webpack_require__(6);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ImageProvider = function (_AbstractDataProvider) {\n    _inherits(ImageProvider, _AbstractDataProvider);\n\n    function ImageProvider(container) {\n        _classCallCheck(this, ImageProvider);\n\n        return _possibleConstructorReturn(this, (ImageProvider.__proto__ || Object.getPrototypeOf(ImageProvider)).call(this, container));\n    }\n\n    _createClass(ImageProvider, [{\n        key: 'getImages',\n        value: function getImages() {\n            return this.getUserContext().then(function (userContext) {\n                return userContext.DB.query('getByDocType/typed', {\n                    key: 'image',\n                    include_docs: true,\n                    attachments: true\n                });\n            }).then(function (result) {\n                return result;\n            });\n        }\n    }, {\n        key: 'getImage',\n        value: function getImage(id) {\n            return this.getUserContext().then(function (userContext) {\n                return userContext.DB.allDocs({\n                    key: id,\n                    include_docs: true,\n                    attachments: true\n                });\n            }).then(function (imageDoc) {\n                return imageDoc;\n            });\n        }\n    }, {\n        key: 'addImages',\n        value: function addImages(newImages) {\n            var _this2 = this;\n\n            var keys = [];\n            newImages = newImages.map(function (newImage) {\n                newImage._attachments.image.data = new Blob([new Buffer(newImage._attachments.image.data)], { type: newImage.mimeType });\n                //Logger.debug(newImage);\n                return (0, _merge3.default)(newImage, { \"docType\": 'image' });\n            });\n            return this.getUserContext().then(function (userContext) {\n                return userContext.saveDocs(newImages);\n            }).then(function (results) {\n                results.forEach(function (result) {\n                    keys.push(result.id);\n                });\n                return _this2.getUserContext();\n            }).then(function (userContext) {\n                return userContext.DB.allDocs({\n                    keys: keys,\n                    include_docs: true,\n                    attachments: true\n                });\n            }).then(function (imageDoc) {\n                return imageDoc;\n            });\n        }\n    }, {\n        key: 'deleteImage',\n        value: function deleteImage(image) {\n            image[\"_deleted\"] = true;\n            return this.getUserContext().then(function (userContext) {\n                return userContext.save('image', image);\n            });\n        }\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            _logger2.default.log(\"Logged off\");\n        }\n    }, {\n        key: 'initialSyncCompleted',\n        value: function initialSyncCompleted() {\n            _logger2.default.debug(\"[ImageProvider]: initialSyncCompleted\");\n        }\n    }, {\n        key: 'deltaSyncCompleted',\n        value: function deltaSyncCompleted() {\n            _logger2.default.debug(\"[ImageProvider]: deltaSyncCompleted\");\n        }\n    }, {\n        key: 'initialSyncFailed',\n        value: function initialSyncFailed() {\n            _logger2.default.debug(\"[ImageProvider]: initialSyncFailed\");\n        }\n    }, {\n        key: 'deltaSyncFailed',\n        value: function deltaSyncFailed() {\n            _logger2.default.debug(\"[ImageProvider]: deltaSyncFailed\");\n        }\n    }]);\n\n    return ImageProvider;\n}(_abstractdataprovider2.default);\n\nexports.default = ImageProvider;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(385).Buffer))\n\n/***/ }),\n\n/***/ 355:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _map2 = __webpack_require__(56);\n\nvar _map3 = _interopRequireDefault(_map2);\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _immutable = __webpack_require__(9);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _abstractdataprovider = __webpack_require__(33);\n\nvar _abstractdataprovider2 = _interopRequireDefault(_abstractdataprovider);\n\nvar _logger = __webpack_require__(6);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _i18n = __webpack_require__(8);\n\nvar _i18n2 = _interopRequireDefault(_i18n);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar PublishedSurveyResponseProvider = function (_AbstractDataProvider) {\n    _inherits(PublishedSurveyResponseProvider, _AbstractDataProvider);\n\n    function PublishedSurveyResponseProvider(container) {\n        _classCallCheck(this, PublishedSurveyResponseProvider);\n\n        return _possibleConstructorReturn(this, (PublishedSurveyResponseProvider.__proto__ || Object.getPrototypeOf(PublishedSurveyResponseProvider)).call(this, container));\n    }\n\n    _createClass(PublishedSurveyResponseProvider, [{\n        key: 'getResponse',\n        value: function getResponse(responseId) {\n            return this.getUserContext().then(function (userContext) {\n                return userContext.DB.allDocs({\n                    key: responseId,\n                    include_docs: true\n                });\n            }).then(function (result) {\n                var _result$rows = _slicedToArray(result.rows, 1),\n                    responseDoc = _result$rows[0];\n\n                return responseDoc && responseDoc.doc;\n            });\n        }\n    }, {\n        key: 'getResponsesByKey',\n        value: function getResponsesByKey(keys) {\n            return this.getUserContext().then(function (userContext) {\n                return userContext.DB.allDocs({\n                    keys: keys,\n                    include_docs: true\n                });\n            }).then(function (result) {\n                var respondedSurveys = {};\n                (0, _map3.default)(result.rows, function (row) {\n                    respondedSurveys[row.id] = row.doc;\n                });\n                return respondedSurveys;\n            });\n        }\n    }, {\n        key: 'setResponse',\n        value: function setResponse(responseDoc) {\n            return this.getUserContext().then(function (userContext) {\n                return userContext.save('surveyresponse', responseDoc);\n            });\n        }\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            _logger2.default.debug(\"[GroupsAndRecipientsProvider]: destroy\");\n        }\n    }, {\n        key: 'initialSyncCompleted',\n        value: function initialSyncCompleted() {\n            _logger2.default.debug(\"[GroupsAndRecipientsProvider]: initialSyncCompleted\");\n        }\n    }, {\n        key: 'deltaSyncCompleted',\n        value: function deltaSyncCompleted() {\n            _logger2.default.debug(\"[GroupsAndRecipientsProvider]: deltaSyncCompleted\");\n        }\n    }, {\n        key: 'initialSyncFailed',\n        value: function initialSyncFailed() {\n            _logger2.default.debug(\"[GroupsAndRecipientsProvider]: initialSyncFailed\");\n        }\n    }, {\n        key: 'deltaSyncFailed',\n        value: function deltaSyncFailed() {\n            _logger2.default.debug(\"[GroupsAndRecipientsProvider]: deltaSyncFailed\");\n        }\n    }]);\n\n    return PublishedSurveyResponseProvider;\n}(_abstractdataprovider2.default);\n\nexports.default = PublishedSurveyResponseProvider;\n\n/***/ }),\n\n/***/ 356:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n        value: true\n});\nexports.default = {\n        \"name\": \"Anonymous\",\n        \"_id\": \"guest\",\n        \"providerId\": null,\n        \"email\": null,\n        \"thumbnail\": null,\n        \"language\": null,\n        \"isGuest\": true\n};\n\n/***/ }),\n\n/***/ 365:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactAddonsPureRenderMixin = __webpack_require__(27);\n\nvar _reactAddonsPureRenderMixin2 = _interopRequireDefault(_reactAddonsPureRenderMixin);\n\nvar _i18n = __webpack_require__(8);\n\nvar _i18n2 = _interopRequireDefault(_i18n);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar HelpPage = _react2.default.createClass({\n    displayName: 'HelpPage',\n\n    mixins: [_reactAddonsPureRenderMixin2.default],\n    render: function render() {\n        return _react2.default.createElement(\n            'div',\n            { className: 'row around-xs' },\n            _react2.default.createElement(\n                'div',\n                { className: 'col-xs-11 col-sm-10' },\n                _react2.default.createElement(\n                    'div',\n                    { className: 'box' },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'row' },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'col-xs-12' },\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'box' },\n                                _react2.default.createElement(\n                                    'h1',\n                                    null,\n                                    _i18n2.default.t(\"Help\")\n                                )\n                            )\n                        )\n                    )\n                )\n            )\n        );\n    }\n});\n\nexports.default = HelpPage;\n\n/***/ }),\n\n/***/ 366:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.convertColorToString = convertColorToString;\nexports.convertHexToRGB = convertHexToRGB;\nexports.decomposeColor = decomposeColor;\nexports.getContrastRatio = getContrastRatio;\nexports.getLuminance = getLuminance;\nexports.emphasize = emphasize;\nexports.fade = fade;\nexports.darken = darken;\nexports.lighten = lighten;\n/**\r\n * Returns a number whose value is limited to the given range.\r\n *\r\n * @param {number} value The value to be clamped\r\n * @param {number} min The lower boundary of the output range\r\n * @param {number} max The upper boundary of the output range\r\n * @returns {number} A number in the range [min, max]\r\n */\nfunction clamp(value, min, max) {\n  if (value < min) {\n    return min;\n  }\n  if (value > max) {\n    return max;\n  }\n  return value;\n}\n\n/**\r\n * Converts a color object with type and values to a string.\r\n *\r\n * @param {object} color - Decomposed color\r\n * @param {string} color.type - One of, 'rgb', 'rgba', 'hsl', 'hsla'\r\n * @param {array} color.values - [n,n,n] or [n,n,n,n]\r\n * @returns {string} A CSS color string\r\n */\nfunction convertColorToString(color) {\n  var type = color.type,\n      values = color.values;\n\n\n  if (type.indexOf('rgb') > -1) {\n    // Only convert the first 3 values to int (i.e. not alpha)\n    for (var i = 0; i < 3; i++) {\n      values[i] = parseInt(values[i]);\n    }\n  }\n\n  var colorString = void 0;\n\n  if (type.indexOf('hsl') > -1) {\n    colorString = color.type + '(' + values[0] + ', ' + values[1] + '%, ' + values[2] + '%';\n  } else {\n    colorString = color.type + '(' + values[0] + ', ' + values[1] + ', ' + values[2];\n  }\n\n  if (values.length === 4) {\n    colorString += ', ' + color.values[3] + ')';\n  } else {\n    colorString += ')';\n  }\n\n  return colorString;\n}\n\n/**\r\n * Converts a color from CSS hex format to CSS rgb format.\r\n *\r\n *  @param {string} color - Hex color, i.e. #nnn or #nnnnnn\r\n *  @returns {string} A CSS rgb color string\r\n */\nfunction convertHexToRGB(color) {\n  if (color.length === 4) {\n    var extendedColor = '#';\n    for (var i = 1; i < color.length; i++) {\n      extendedColor += color.charAt(i) + color.charAt(i);\n    }\n    color = extendedColor;\n  }\n\n  var values = {\n    r: parseInt(color.substr(1, 2), 16),\n    g: parseInt(color.substr(3, 2), 16),\n    b: parseInt(color.substr(5, 2), 16)\n  };\n\n  return 'rgb(' + values.r + ', ' + values.g + ', ' + values.b + ')';\n}\n\n/**\r\n * Returns an object with the type and values of a color.\r\n *\r\n * Note: Does not support rgb % values.\r\n *\r\n * @param {string} color - CSS color, i.e. one of: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla()\r\n * @returns {{type: string, values: number[]}} A MUI color object\r\n */\nfunction decomposeColor(color) {\n  if (color.charAt(0) === '#') {\n    return decomposeColor(convertHexToRGB(color));\n  }\n\n  var marker = color.indexOf('(');\n  var type = color.substring(0, marker);\n  var values = color.substring(marker + 1, color.length - 1).split(',');\n  values = values.map(function (value) {\n    return parseFloat(value);\n  });\n\n  return { type: type, values: values };\n}\n\n/**\r\n * Calculates the contrast ratio between two colors.\r\n *\r\n * Formula: http://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef\r\n *\r\n * @param {string} foreground - CSS color, i.e. one of: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla()\r\n * @param {string} background - CSS color, i.e. one of: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla()\r\n * @returns {number} A contrast ratio value in the range 0 - 21 with 2 digit precision.\r\n */\nfunction getContrastRatio(foreground, background) {\n  var lumA = getLuminance(foreground);\n  var lumB = getLuminance(background);\n  var contrastRatio = (Math.max(lumA, lumB) + 0.05) / (Math.min(lumA, lumB) + 0.05);\n\n  return Number(contrastRatio.toFixed(2)); // Truncate at two digits\n}\n\n/**\r\n * The relative brightness of any point in a color space,\r\n * normalized to 0 for darkest black and 1 for lightest white.\r\n *\r\n * Formula: https://www.w3.org/WAI/GL/wiki/Relative_luminance\r\n *\r\n * @param {string} color - CSS color, i.e. one of: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla()\r\n * @returns {number} The relative brightness of the color in the range 0 - 1\r\n */\nfunction getLuminance(color) {\n  color = decomposeColor(color);\n\n  if (color.type.indexOf('rgb') > -1) {\n    var rgb = color.values.map(function (val) {\n      val /= 255; // normalized\n      return val <= 0.03928 ? val / 12.92 : Math.pow((val + 0.055) / 1.055, 2.4);\n    });\n    return Number((0.2126 * rgb[0] + 0.7152 * rgb[1] + 0.0722 * rgb[2]).toFixed(3)); // Truncate at 3 digits\n  } else if (color.type.indexOf('hsl') > -1) {\n    return color.values[2] / 100;\n  }\n}\n\n/**\r\n * Darken or lighten a colour, depending on its luminance.\r\n * Light colors are darkened, dark colors are lightened.\r\n *\r\n * @param {string} color - CSS color, i.e. one of: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla()\r\n * @param {number} coefficient=0.15 - multiplier in the range 0 - 1\r\n * @returns {string} A CSS color string. Hex input values are returned as rgb\r\n */\nfunction emphasize(color) {\n  var coefficient = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0.15;\n\n  return getLuminance(color) > 0.5 ? darken(color, coefficient) : lighten(color, coefficient);\n}\n\n/**\r\n * Set the absolute transparency of a color.\r\n * Any existing alpha values are overwritten.\r\n *\r\n * @param {string} color - CSS color, i.e. one of: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla()\r\n * @param {number} value - value to set the alpha channel to in the range 0 -1\r\n * @returns {string} A CSS color string. Hex input values are returned as rgb\r\n */\nfunction fade(color, value) {\n  color = decomposeColor(color);\n  value = clamp(value, 0, 1);\n\n  if (color.type === 'rgb' || color.type === 'hsl') {\n    color.type += 'a';\n  }\n  color.values[3] = value;\n\n  return convertColorToString(color);\n}\n\n/**\r\n * Darkens a color.\r\n *\r\n * @param {string} color - CSS color, i.e. one of: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla()\r\n * @param {number} coefficient - multiplier in the range 0 - 1\r\n * @returns {string} A CSS color string. Hex input values are returned as rgb\r\n */\nfunction darken(color, coefficient) {\n  color = decomposeColor(color);\n  coefficient = clamp(coefficient, 0, 1);\n\n  if (color.type.indexOf('hsl') > -1) {\n    color.values[2] *= 1 - coefficient;\n  } else if (color.type.indexOf('rgb') > -1) {\n    for (var i = 0; i < 3; i++) {\n      color.values[i] *= 1 - coefficient;\n    }\n  }\n  return convertColorToString(color);\n}\n\n/**\r\n * Lightens a color.\r\n *\r\n * @param {string} color - CSS color, i.e. one of: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla()\r\n * @param {number} coefficient - multiplier in the range 0 - 1\r\n * @returns {string} A CSS color string. Hex input values are returned as rgb\r\n */\nfunction lighten(color, coefficient) {\n  color = decomposeColor(color);\n  coefficient = clamp(coefficient, 0, 1);\n\n  if (color.type.indexOf('hsl') > -1) {\n    color.values[2] += (100 - color.values[2]) * coefficient;\n  } else if (color.type.indexOf('rgb') > -1) {\n    for (var i = 0; i < 3; i++) {\n      color.values[i] += (255 - color.values[i]) * coefficient;\n    }\n  }\n\n  return convertColorToString(color);\n}\n\n/***/ }),\n\n/***/ 376:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _connect = __webpack_require__(63);\n\nvar _connect2 = _interopRequireDefault(_connect);\n\nvar _AppBar = __webpack_require__(233);\n\nvar _AppBar2 = _interopRequireDefault(_AppBar);\n\nvar _ToolbarGroup = __webpack_require__(147);\n\nvar _ToolbarGroup2 = _interopRequireDefault(_ToolbarGroup);\n\nvar _reactTapEventPlugin = __webpack_require__(164);\n\nvar _reactTapEventPlugin2 = _interopRequireDefault(_reactTapEventPlugin);\n\nvar _reactAddonsPureRenderMixin = __webpack_require__(27);\n\nvar _reactAddonsPureRenderMixin2 = _interopRequireDefault(_reactAddonsPureRenderMixin);\n\nvar _getMuiTheme = __webpack_require__(91);\n\nvar _getMuiTheme2 = _interopRequireDefault(_getMuiTheme);\n\nvar _MuiThemeProvider = __webpack_require__(107);\n\nvar _MuiThemeProvider2 = _interopRequireDefault(_MuiThemeProvider);\n\nvar _i18n = __webpack_require__(8);\n\nvar _i18n2 = _interopRequireDefault(_i18n);\n\nvar _customthemeprovider = __webpack_require__(252);\n\nvar _customthemeprovider2 = _interopRequireDefault(_customthemeprovider);\n\nvar _authstore = __webpack_require__(231);\n\nvar _authstore2 = _interopRequireDefault(_authstore);\n\nvar _timetrackerstore = __webpack_require__(932);\n\nvar _timetrackerstore2 = _interopRequireDefault(_timetrackerstore);\n\nvar _getcustomtheme = __webpack_require__(168);\n\nvar _getcustomtheme2 = _interopRequireDefault(_getcustomtheme);\n\nvar _userprofile = __webpack_require__(157);\n\nvar _userprofile2 = _interopRequireDefault(_userprofile);\n\nvar _timetracker = __webpack_require__(403);\n\nvar _timetracker2 = _interopRequireDefault(_timetracker);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar zIndex = {\n  zIndex: {\n    tooltip: 5000\n  }\n},\n    RunAppBar = _react2.default.createClass({\n  displayName: \"RunAppBar\",\n  render: function render() {\n    return _react2.default.createElement(\n      _AppBar2.default,\n      {\n        title: _i18n2.default.t(\"quizMe\"),\n        titleStyle: _extends({}, this.context.customTheme.siteHeader),\n        showMenuIconButton: false,\n        style: { position: \"fixed\", top: 0 }\n      },\n      this.props.renderToolbar && _react2.default.createElement(\n        _ToolbarGroup2.default,\n        { style: { right: -12, top: 13 } },\n        _react2.default.createElement(_userprofile2.default, null)\n      )\n    );\n  }\n}),\n    RunApp = _react2.default.createClass({\n  displayName: \"RunApp\",\n\n  mixins: [_reactAddonsPureRenderMixin2.default, (0, _connect2.default)(_authstore2.default, \"Auth\")],\n  childContextTypes: {\n    location: _react2.default.PropTypes.object,\n    history: _react2.default.PropTypes.object\n  },\n  getChildContext: function getChildContext() {\n    return { location: this.props.location, history: this.props.history };\n  },\n  render: function render() {\n    var self = this,\n        childrenWithProps = _react2.default.Children.map(this.props.children, function (child) {\n      return _react2.default.cloneElement(child, {\n        isMobile: self.props.isMobile\n      });\n    }),\n        _state$Auth$toJSON = this.state.Auth.toJSON(),\n        authState = _state$Auth$toJSON.authState,\n        AuthStates = _state$Auth$toJSON.AuthStates,\n        error = _state$Auth$toJSON.error,\n        userProfile = _state$Auth$toJSON.userProfile,\n        isMobile = this.props.isMobile;\n\n    return _react2.default.createElement(\n      _MuiThemeProvider2.default,\n      { muiTheme: (0, _getMuiTheme2.default)({}, zIndex) },\n      _react2.default.createElement(\n        _customthemeprovider2.default,\n        { customTheme: (0, _getcustomtheme2.default)({}, isMobile) },\n        _react2.default.createElement(\n          \"div\",\n          { className: \"runWr copyPrevent\" },\n          _react2.default.createElement(RunAppBar, { renderToolbar: authState == AuthStates.SIGNED_IN }),\n          _react2.default.createElement(\n            \"div\",\n            { className: \"row around-xs\", style: { marginTop: 64 } },\n            _react2.default.createElement(\n              \"div\",\n              {\n                style: { paddingTop: 40, paddingBottom: 20, width: \"100%\" }\n              },\n              childrenWithProps\n            )\n          )\n        )\n      )\n    );\n  }\n});\n\n//injectTapEventPlugin();\nRunApp.contextTypes = {\n  customTheme: _react2.default.PropTypes.object\n};\nRunAppBar.contextTypes = {\n  customTheme: _react2.default.PropTypes.object\n};\n\nexports.default = (0, _timetracker2.default)(RunApp);\n\n/***/ }),\n\n/***/ 378:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n});\n\nvar _refluxCore = __webpack_require__(14);\n\nvar _refluxCore2 = _interopRequireDefault(_refluxCore);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar AddActions = _refluxCore2.default.createActions([\"addQuestionDone\", \"addPageDone\", \"addSurveyDone\", \"dialogOpen\", \"dialogClose\", \"setIndex\", \"close\", \"addDecoratorDone\"]);\n\nexports.default = AddActions;\n\n/***/ }),\n\n/***/ 383:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _isNumber2 = __webpack_require__(239);\n\nvar _isNumber3 = _interopRequireDefault(_isNumber2);\n\nvar _forIn2 = __webpack_require__(24);\n\nvar _forIn3 = _interopRequireDefault(_forIn2);\n\nvar _trim2 = __webpack_require__(149);\n\nvar _trim3 = _interopRequireDefault(_trim2);\n\nvar _get2 = __webpack_require__(430);\n\nvar _get3 = _interopRequireDefault(_get2);\n\nvar _merge2 = __webpack_require__(15);\n\nvar _merge3 = _interopRequireDefault(_merge2);\n\nvar _shuffle2 = __webpack_require__(769);\n\nvar _shuffle3 = _interopRequireDefault(_shuffle2);\n\nvar _createStore = __webpack_require__(22);\n\nvar _createStore2 = _interopRequireDefault(_createStore);\n\nvar _surveymodelbuilder = __webpack_require__(54);\n\nvar _surveymodelbuilder2 = _interopRequireDefault(_surveymodelbuilder);\n\nvar _bsonObjectid = __webpack_require__(17);\n\nvar _bsonObjectid2 = _interopRequireDefault(_bsonObjectid);\n\nvar _createHashHistory = __webpack_require__(39);\n\nvar _createHashHistory2 = _interopRequireDefault(_createHashHistory);\n\nvar _immutable = __webpack_require__(9);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _addactions = __webpack_require__(378);\n\nvar _addactions2 = _interopRequireDefault(_addactions);\n\nvar _surveysactions = __webpack_require__(141);\n\nvar _surveysactions2 = _interopRequireDefault(_surveysactions);\n\nvar _surveyrunneractions = __webpack_require__(245);\n\nvar _surveyrunneractions2 = _interopRequireDefault(_surveyrunneractions);\n\nvar _datastorageactions = __webpack_require__(772);\n\nvar _appsettings = __webpack_require__(28);\n\nvar _notificationactions = __webpack_require__(64);\n\nvar _notificationactions2 = _interopRequireDefault(_notificationactions);\n\nvar _settingdefinitionbuilder = __webpack_require__(167);\n\nvar _settingdefinitionbuilder2 = _interopRequireDefault(_settingdefinitionbuilder);\n\nvar _settingsactions = __webpack_require__(153);\n\nvar _settingsactions2 = _interopRequireDefault(_settingsactions);\n\nvar _i18n = __webpack_require__(8);\n\nvar _i18n2 = _interopRequireDefault(_i18n);\n\nvar _authactions = __webpack_require__(30);\n\nvar _authactions2 = _interopRequireDefault(_authactions);\n\nvar _appactions = __webpack_require__(100);\n\nvar _appactions2 = _interopRequireDefault(_appactions);\n\nvar _surveydataprovider = __webpack_require__(166);\n\nvar _surveydataprovider2 = _interopRequireDefault(_surveydataprovider);\n\nvar _diservice = __webpack_require__(40);\n\nvar _diservice2 = _interopRequireDefault(_diservice);\n\nvar _logger = __webpack_require__(6);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _axios = __webpack_require__(41);\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nvar _fileSaver = __webpack_require__(773);\n\nvar _fileSaver2 = _interopRequireDefault(_fileSaver);\n\nvar _pouchdbCore = __webpack_require__(87);\n\nvar _pouchdbCore2 = _interopRequireDefault(_pouchdbCore);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar SurveyModelBuilder = (0, _surveymodelbuilder2.default)(),\n    SurveysStore = (0, _createStore2.default)({\n  listenables: [_surveysactions2.default, _authactions2.default],\n  lastState: null,\n  currentSurvey: null,\n  _currentProfile: null,\n  _surveyProvider: null,\n  _delAttributes: [\"_ensureDefaults\", \"_id\", \"_isDeleted\", \"_rev\", \"_schemaVersion\"],\n  init: function init() {\n    this.state = _immutable2.default.Map({\n      userSurveys: _immutable2.default.Map(),\n      showLoader: false,\n      currentSurvey: null\n    });\n  },\n  getInitialState: function getInitialState() {\n    return this.state;\n  },\n  userChanged: function userChanged(prevProfile, newProfile) {\n    this._currentProfile = newProfile;\n    this._surveyProvider = _diservice2.default.get(\"SurveyDataProvider\");\n  },\n  getUserSurvey: function getUserSurvey(id) {\n    var _this = this;\n\n    var survey = this.state.getIn([\"userSurveys\", id]);\n    if (survey) {\n      return Promise.resolve(survey);\n    }\n    return this._surveyProvider.getUserSurvey(id).then(function (survey) {\n      _this.updateState(_this.state.setIn([\"userSurveys\", id], survey), true);\n      return survey;\n    });\n  },\n  updateSurveyState: function updateSurveyState(newSurveyState, suppressTrigger) {\n    var _this2 = this;\n\n    if (!newSurveyState && newSurveyState.equals(this.currentSurvey)) {\n      return Promise.resolve(null);\n    }\n    return this._surveyProvider.updateUserSurvey(newSurveyState, this._currentProfile ? this._currentProfile.isGuest : true).then(function (result) {\n      newSurveyState = newSurveyState.setRevision(result.rev);\n      _this2.currentSurvey = newSurveyState;\n      _this2.updateState(_this2.state.setIn([\"userSurveys\", _this2.currentSurvey.getId()], _this2.currentSurvey).set(\"currentSurvey\", _this2.currentSurvey));\n      return result;\n    }).catch(function (err) {\n      if (err.status == 409) {\n        return _this2.getUserSurvey(_this2.currentSurvey.getId()).then(function (survey) {\n          return _this2.currentSurvey = survey;\n        });\n      }\n      throw err;\n    });\n  },\n  updateState: function updateState(newState, suppressTrigger) {\n    if (this.state.equals(newState)) {\n      return;\n    }\n    if (newState) {\n      this.state = newState;\n    }\n\n    if (!suppressTrigger) {\n      this.trigger(this.state);\n    }\n  },\n  addNewSurvey: function addNewSurvey() {\n    var _this3 = this;\n\n    this._surveyProvider.addUserSurvey(null, this._currentProfile ? this._currentProfile.isGuest : true).then(function (newSurvey) {\n      _logger2.default.debug(\"survey added.\");\n      _this3.currentSurvey = newSurvey;\n      var surveyId = newSurvey.getId();\n      _this3.updateState(_this3.state.setIn([\"userSurveys\", surveyId], newSurvey), true);\n      _this3.routeToSurvey(surveyId);\n    });\n  },\n  exportToJSON: function exportToJSON(id) {\n    var _this4 = this;\n\n    this.getUserSurvey(id).then(function (surveyToExport) {\n      var surveyTitle = surveyToExport.getTitle(),\n          surveyJSON = surveyToExport.toJS();\n      _this4._delAttributes.forEach(function (key) {\n        delete surveyJSON[key];\n      });\n      surveyJSON = _this4.validateSurveyIds(surveyJSON);\n      var blob = new Blob([JSON.stringify(surveyJSON)], {\n        type: \"JSON\"\n      });\n      _fileSaver2.default.saveAs(blob, surveyTitle + \".json\");\n    });\n  },\n  uploadSurvey: function uploadSurvey(acceptedFiles) {\n    this.updateState(this.state.setIn([\"showLoader\"], true));\n    var self = this;\n    if (acceptedFiles) {\n      var file = acceptedFiles[0],\n          reader = new FileReader(),\n          fileName = file.name;\n      reader.onload = function (event) {\n        self.validateJSONFile(event.target.result).then(function (result) {\n          self._delAttributes.forEach(function (key) {\n            if (result.hasOwnProperty(key)) delete result[key];\n          });\n          return result;\n        }).then(function (result) {\n          self.importSurvey(result);\n        }).catch(function (err) {\n          self.state = self.state.setIn([\"showLoader\"], false);\n          self.updateState(self.state);\n          _notificationactions2.default.notify(_appsettings.Notifications.ERROR, _i18n2.default.t(\"File \" + fileName + \" contains syntactically invalid JSON data.\"));\n        });\n      };\n      reader.readAsText(file);\n    }\n  },\n  validateJSONFile: function validateJSONFile(surveyJson) {\n    return new Promise(function (resolve, reject) {\n      try {\n        surveyJson = JSON.parse(surveyJson);\n        resolve(surveyJson);\n      } catch (err) {\n        reject();\n      }\n    });\n  },\n  importSurvey: function importSurvey(surveyJson) {\n    var _this5 = this;\n\n    surveyJson = (0, _merge3.default)(surveyJson, {\n      _id: (0, _bsonObjectid2.default)().str,\n      _rev: null,\n      _ensureDefaults: true\n    });\n    surveyJson = this.validateSurveyIds(surveyJson);\n    surveyJson = SurveyModelBuilder.fromModel(surveyJson);\n    var surveyName = surveyJson.getTitle();\n    this._surveyProvider.addUserSurvey(surveyJson, this._currentProfile ? this._currentProfile.isGuest : true).then(function (newSurvey) {\n      _this5.currentSurvey = newSurvey;\n      var surveyId = newSurvey.getId();\n      _this5.updateState(_this5.state.setIn([\"userSurveys\", surveyId], newSurvey));\n      _this5.updateState(_this5.state.setIn([\"showLoader\"], false), true);\n      _this5.routeToSurvey(surveyId);\n      _notificationactions2.default.notify(_appsettings.Notifications.INFO, _i18n2.default.t(\"The Survey \" + surveyName + \" has been imported successfully\"));\n    });\n  },\n  validateSurveyIds: function validateSurveyIds(surveyJson) {\n    var pages = (0, _get3.default)(surveyJson, \"pages\"),\n        pageItems = (0, _get3.default)(surveyJson, \"pageItems\"),\n        newPages = [],\n        newPageItems = {};\n\n    pages.forEach(function (page, index) {\n      var newPageId = (0, _bsonObjectid2.default)().str,\n          oldPageItemRefs = (0, _get3.default)(page, \"pageItemRefs\"),\n          newPageItemRefs = [];\n      page._id = newPageId;\n      oldPageItemRefs.forEach(function (pageItemRef, index) {\n        var pageItem = (0, _get3.default)(pageItems, pageItemRef);\n        pageItem._id = (0, _bsonObjectid2.default)().str;\n        pageItem.parentPageId = newPageId;\n        newPageItems[pageItem._id] = pageItem;\n        newPageItemRefs.push(pageItem._id);\n      });\n      page.pageItemRefs = newPageItemRefs;\n      newPages.push(page);\n    });\n    surveyJson._id = (0, _bsonObjectid2.default)().str;\n    surveyJson.pages = newPages;\n    surveyJson.pageItems = newPageItems;\n    return surveyJson;\n  },\n\n  cloneSurvey: function cloneSurvey(surveyId) {\n    var _this6 = this;\n\n    this.getUserSurvey(surveyId).then(function (survey) {\n      var cloned = survey.clone().setTitle(\"Copy of \" + survey.getTitle());\n      cloned = cloned.setRevision(null);\n      cloned = _this6.validateSurveyIds(cloned.toJS());\n      cloned = SurveyModelBuilder.fromModel(cloned);\n      return _this6._surveyProvider.addUserSurvey(cloned, _this6._currentProfile ? _this6._currentProfile.isGuest : true);\n    }).then(function (newSurvey) {\n      _logger2.default.debug(\"survey clonned.\");\n      _this6.currentSurvey = newSurvey;\n      var surveyId = newSurvey.getId();\n      _this6.updateState(_this6.state.setIn([\"userSurveys\", surveyId], newSurvey).set(\"currentSurvey\", _this6.currentSurvey), true);\n      _this6.routeToSurvey(surveyId);\n    });\n  },\n  deleteSurvey: function deleteSurvey(id) {\n    var _this7 = this;\n\n    var survey = null;\n    this.getUserSurvey(id).then(function (doc) {\n      survey = doc;\n      return _this7._surveyProvider.deleteUserSurvey(survey);\n    }).then(function (result) {\n      var surveyName = survey.getTitle();\n      _logger2.default.debug(\"survey deleted.\", result);\n      _this7.updateState(_this7.state.deleteIn([\"userSurveys\", id]), true);\n      survey = survey.setRevision(result.rev);\n      _notificationactions2.default.notify(_appsettings.Notifications.INFO, _i18n2.default.t(\"The Survey \" + surveyName + \" has been deleted\"), _i18n2.default.t(\"undo\"), _surveysactions2.default.undoSurvey.bind(null, survey));\n    });\n  },\n  undoSurvey: function undoSurvey(survey) {\n    var _this8 = this;\n\n    this._surveyProvider.undoSurvey(survey).then(function (result) {\n      survey = survey.setRevision(result.rev);\n      _this8.updateState(_this8.state.setIn([\"userSurveys\", survey.getId()], survey));\n    });\n  },\n  getSurvey: function getSurvey(collectionState, id) {\n    return collectionState.getIn([\"userSurveys\", id]);\n  },\n  dialogOpen: function dialogOpen(index, refIndex, type) {\n    _addactions2.default.dialogOpen(index, refIndex, type);\n  },\n  undo: function undo() {\n    var _this9 = this;\n\n    var undoModifiedSurveys = [];\n    this.lastState.get(\"userSurveys\").map(function (survey) {\n      var latestSurvey = _this9.state.getIn([\"userSurveys\", survey.getId()]);\n      if (survey != latestSurvey) {\n        survey = survey.setRevision(latestSurvey.getRevision());\n        undoModifiedSurveys.push(survey);\n      }\n    });\n    this._surveyProvider.undoUserSurveys(undoModifiedSurveys).then(function (surveys) {\n      var id = _this9.currentSurvey.getId();\n      if (_this9.currentSurvey && surveys[id]) {\n        _this9.currentSurvey = surveys[id];\n      }\n      _this9.updateState(_this9.state.set(\"userSurveys\", _this9.state.get(\"userSurveys\").merge(_immutable2.default.fromJS(surveys))).set(\"currentSurvey\", _this9.currentSurvey));\n    });\n  },\n  routeToSurvey: function routeToSurvey(id) {\n    var history = (0, _createHashHistory2.default)({\n      queryKey: false\n    }),\n        location = history.createLocation(\"/surveys/design/edit/\" + id);\n    history.push(location);\n  },\n  routeToSurveys: function routeToSurveys() {\n    var history = (0, _createHashHistory2.default)({\n      queryKey: false\n    }),\n        location = history.createLocation(\"/surveys\");\n    history.push(location);\n  },\n  reset: function reset() {\n    this.updateState(this.state.set(\"currentSurvey\", null));\n  },\n  loadSurvey: function loadSurvey(id) {\n    var _this10 = this;\n\n    this.getUserSurvey(id).then(function (survey) {\n      _this10.currentSurvey = survey;\n      _this10.updateState(_this10.state.set(\"currentSurvey\", survey));\n    });\n  },\n  _getSurveyById: function _getSurveyById(id) {\n    var currentReference = this;\n    return new Promise(function (resolve, reject) {\n      currentReference._surveyProvider = _diservice2.default.get(\"SurveyDataProvider\", {\n        SurveyModelBuilder: SurveyModelBuilder\n      });\n      currentReference._surveyProvider.getUserSurvey(id).then(function (survey) {\n        return resolve(survey);\n      });\n    });\n  },\n  optionsSurveyHeaderOpen: function optionsSurveyHeaderOpen(options) {\n    var settingsDef = (0, _settingdefinitionbuilder2.default)(),\n        settingsValues = {\n      showHeader: this.currentSurvey.getShowHeader(),\n      title: this.currentSurvey.getTitle(),\n      description: this.currentSurvey.getDescription(),\n      questionDisplay: this.currentSurvey.getQuestionDisplay(),\n      minimumMarks: this.currentSurvey.getMinimumMarks() || 0\n    };\n    settingsDef.addSettingsGroup(_i18n2.default.t(\"General\")).addSetting(\"showHeader\", \"bool\", _i18n2.default.t(\"Show survey header?\")).addSetting(\"logo\", \"imagepicker\", _i18n2.default.t(\"Logo\")).addSetting(\"title\", \"string\", _i18n2.default.t(\"Survey title\"), {\n      required: true,\n      maxLength: _appsettings.SurveyModelDefaults.MaxSurveyTitleLength\n    }).addSetting(\"description\", \"string\", _i18n2.default.t(\"Survey description\"), {\n      multiLine: true,\n      rows: 1,\n      rowsMax: 5,\n      maxLength: _appsettings.SurveyModelDefaults.MaxSurveySubTitleLength\n    }).addSetting(\"questionDisplay\", \"choice\", _i18n2.default.t(\"Question display\"), {\n      choice: {\n        question: _i18n2.default.t(\"One question at a time\"),\n        page: _i18n2.default.t(\"One page at a time\"),\n        all: _i18n2.default.t(\"Show all questions in one screen\")\n      }\n    }).addSetting(\"minimumMarks\", \"string\", _i18n2.default.t(\"Minimum marks\"), {\n      type: \"number\"\n    });\n    _settingsactions2.default.open(settingsDef.getSettingsDefinition(), settingsValues, _surveysactions2.default.optionsSurveyHeaderDone, null, options);\n  },\n  optionsSurveyHeaderDone: function optionsSurveyHeaderDone(values) {\n    if (!this.currentSurvey) return;\n    var title = values.title,\n        questionDisplay = values.questionDisplay,\n        minimumMarks = values.minimumMarks,\n        timer = values.timer,\n        timeout = values.timeout,\n        startFrom = values.startFrom,\n        showMarksRunMode = values.showMarksRunMode,\n        restrictPrevious = values.restrictPrevious;\n\n    title = (0, _trim3.default)(title);\n    this.updateSurveyState(this.currentSurvey.setTitle(title).setQuestionDisplay(questionDisplay).setMinimumMarks(minimumMarks).setIsTimer(timer).setTimeout(timeout).setStartFrom(startFrom).setShowMarksRunMode(showMarksRunMode).setRestrictPrevious(restrictPrevious));\n  },\n  setQuestionDisplay: function setQuestionDisplay(questionDisplay) {\n    this.updateSurveyState(this.currentSurvey.setQuestionDisplay(questionDisplay));\n  },\n  setSurveyTitle: function setSurveyTitle(title) {\n    if (title != this.currentSurvey.getTitle()) this.updateSurveyState(this.currentSurvey.setTitle(title));\n  },\n  setSectionTitleDescription: function setSectionTitleDescription(sectionTitle, sectionDescription, pageNo) {\n    var title = (0, _trim3.default)(sectionTitle);\n    var description = (0, _trim3.default)(sectionDescription);\n    if (pageNo != -1) {\n      var page = this.currentSurvey.getPage(pageNo);\n      page = page.setTitle(title).setDescription(description);\n\n      this.updateSurveyState(this.currentSurvey.updatePage(pageNo, page));\n    }\n  },\n\n  optionPageOpen: function optionPageOpen(pageNumber, options) {\n    var settingsDef = (0, _settingdefinitionbuilder2.default)(),\n        page = this.currentSurvey.getPage(pageNumber),\n        settingsValues = {\n      showHeader: page.getShowHeader(),\n      title: page.getTitle(),\n      description: page.getDescription(),\n      randomizeQuestions: page.getRandomizeQuestions(),\n      logic: page.getLogic(),\n      skipTo: page.getSkipTo()\n    };\n    settingsDef.addSettingsGroup(\"Advance settings\").addSetting(\"showHeader\", \"bool\", _i18n2.default.t(\"Show page header?\"), {\n      isPrimary: true\n    }).addSetting(\"randomizeQuestions\", \"bool\", _i18n2.default.t(\"Randomize questions?\"), {\n      isPrimary: true\n    }).addSetting(\"logic\", \"bool\", _i18n2.default.t(\"Use Logic?\"), {\n      isPrimary: true\n    }).addSetting(\"skipTo\", \"choice\", _i18n2.default.t(\"Skip to\"), {\n      choice: this.getChoice(pageNumber)\n    });\n    _settingsactions2.default.open(settingsDef.getSettingsDefinition(), settingsValues, _surveysactions2.default.optionPageDone.bind(_surveysactions2.default, pageNumber), null, options);\n  },\n  getChoice: function getChoice(pageNumber) {\n    var pageLength = this.currentSurvey.getPagesSize(),\n        choice = {};\n    for (var i = pageNumber + 1; i < pageLength; i++) {\n      choice[i] = \"Section \" + (i + 1);\n    }\n    choice[\"eos\"] = _i18n2.default.t(\"End of Survey\");\n    return choice;\n  },\n  optionPageDone: function optionPageDone(pageNumber, values) {\n    if (!this.currentSurvey) return;\n    var title = values.title,\n        description = values.description,\n        logic = values.logic,\n        skipTo = values.skipTo,\n        maxPageItemsAllowed = values.maxPageItemsAllowed;\n\n    title = (0, _trim3.default)(title);\n    description = (0, _trim3.default)(description);\n    if (pageNumber != -1) {\n      var page = this.currentSurvey.getPage(pageNumber);\n      page = page.setTitle(title).setDescription(description).setMaxPageItemsAllowed(maxPageItemsAllowed).setLogic(logic);\n      if (logic) {\n        page = page.setSkipTo(skipTo);\n      }\n      this.updateSurveyState(this.currentSurvey.updatePage(pageNumber, page));\n    }\n  },\n  randomizePageItems: function randomizePageItems(pageNo, randomize) {\n    var page = this.currentSurvey.getPage(pageNo);\n    page = page.setRandomizeQuestions(randomize);\n    this.updateSurveyState(this.currentSurvey.updatePage(pageNo, page));\n  },\n  validateCode: function validateCode(code) {\n    return (0, _axios2.default)({\n      url: \"/validate/code\",\n      method: \"POST\",\n      data: { code: code }\n    }).then(function (response) {\n      if (response.data.status) {\n        return Promise.reject(response.data.error);\n      }\n      return Promise.resolve();\n    }).catch(function (err) {\n      throw err;\n    });\n  },\n  optionsPageItemOpen: function optionsPageItemOpen(pageItemNumber, options) {\n    var settingsDef = (0, _settingdefinitionbuilder2.default)(),\n        pageItem = this.currentSurvey.getPageItem(pageItemNumber);\n    if (!pageItem) {\n      return;\n    }\n    if (pageItem.getType() == \"question\") {\n      var settingsValues = {\n        title: pageItem.getTitle(),\n        required: pageItem.getSubType() != \"yesno\" && pageItem.getSubType() != \"code\" && pageItem.getRequired(),\n        quizMode: (pageItem.getSubType() == \"yesno\" || pageItem.getSubType() == \"multivalue\") && pageItem.getQuizMode(),\n        options: pageItem.getSubType() == \"multivalue\" && pageItem.getOptions(),\n        questionDisplayType: pageItem.getSubType() == \"multivalue\" && pageItem.getDisplayType(),\n        answer: (pageItem.getSubType() == \"yesno\" || pageItem.getSubType() == \"multivalue\") && pageItem.getAnswer(),\n        codeValidator: pageItem.getSubType() == \"code\" && pageItem.getCodeValidator(),\n        marks: (pageItem.getSubType() == \"yesno\" || pageItem.getSubType() == \"multivalue\") && pageItem.getMarks(),\n        logic: (pageItem.getSubType() == \"yesno\" || pageItem.getSubType() == \"multivalue\") && pageItem.getLogic(),\n        skipTo: (pageItem.getSubType() == \"yesno\" || pageItem.getSubType() == \"multivalue\") && this.getModifiedValue(pageItem.getSkipTo().toJS()),\n        markdown: (pageItem.getSubType() == \"multivalue\" || pageItem.getSubType() == \"code\") && pageItem.getMarkdown(),\n        defaultTemplate: pageItem.getSubType() == \"code\" && pageItem.getDefaultTemplate(),\n        language: pageItem.getSubType() == \"code\" && pageItem.getLanguage(),\n        questionTimeOut: pageItem.getQuestionTimeOut()\n      };\n\n      if (pageItem[\"subType\"] == \"code\") {\n        settingsDef.addSettingsGroup(\"General\").addSetting(\"title\", \"string\", _i18n2.default.t(\"Question title\"), {\n          required: true,\n          multiLine: true,\n          focusFirst: true\n        }).addSetting(\"markdown\", \"bool\", _i18n2.default.t(\"markdown\"), {\n          isPrimary: true,\n          icon: \"icon-embed2\"\n        }).addSetting(\"questionTimeOut\", \"string\", _i18n2.default.t(\"Question timeout (minutes)\"), {\n          type: \"number\",\n          textOnly: true\n        });\n\n        settingsDef.addSettingsGroup(\"Code\").addSetting(\"defaultTemplate\", \"code\", _i18n2.default.t(\"Sample code\")).addSetting(\"language\", \"choice\", _i18n2.default.t(\"Select language\"), {\n          choice: {\n            javascript: _i18n2.default.t(\"Javascript\"),\n            c: _i18n2.default.t(\"C\"),\n            cpp: _i18n2.default.t(\"C++\"),\n            csharp: _i18n2.default.t(\"C#\"),\n            java: _i18n2.default.t(\"Java\"),\n            html: _i18n2.default.t(\"HTML\")\n          },\n          isOtherHeader: true\n        });\n\n        settingsDef.addSettingsGroup(\"Code validation\").addSetting(\"codeValidator\", \"code\", _i18n2.default.t(\"Code validation test\"), {\n          customValidation: this.validateCode\n        }).addSetting(\"validator\", \"codeValidator\");\n      }\n      if (pageItem[\"subType\"] == \"singletext\" || pageItem[\"subType\"] == \"datepicker\") {\n        settingsDef.addSettingsGroup(\"General\").addSetting(\"title\", \"string\", _i18n2.default.t(\"Question title\"), {\n          required: true,\n          maxLength: _appsettings.SurveyModelDefaults.MaxPageTitleLength,\n          focusFirst: true\n        }).addSetting(\"required\", \"bool\", _i18n2.default.t(\"Required\"), {\n          isPrimary: true,\n          icon: \"icon-asterisk\"\n        }).addSetting(\"questionTimeOut\", \"string\", _i18n2.default.t(\"Question timeout (minutes)\"), {\n          type: \"number\",\n          textOnly: true\n        });\n      }\n      if (pageItem[\"subType\"] == \"yesno\") {\n        settingsDef.addSettingsGroup(\"General\").addSetting(\"title\", \"string\", _i18n2.default.t(\"Question title\"), {\n          required: true,\n          maxLength: _appsettings.SurveyModelDefaults.MaxPageTitleLength,\n          focusFirst: true\n        }).addSetting(\"quizMode\", \"bool\", _i18n2.default.t(\"Quiz\"), {\n          isPrimary: true,\n          icon: \"icon-quiz_Q_A\"\n        }).addSetting(\"answer\", \"answer\", _i18n2.default.t(\"Correct answer\")).addSetting(\"marks\", \"string\", _i18n2.default.t(\"Marks\"), {\n          type: \"number\",\n          textOnly: true\n        }).addSetting(\"markdown\", \"bool\", _i18n2.default.t(\"markdown\"), {\n          isPrimary: true,\n          icon: \"icon-embed2\"\n        }).addSetting(\"questionTimeOut\", \"string\", _i18n2.default.t(\"Question timeout (minutes)\"), {\n          type: \"number\",\n          textOnly: true\n        });\n      }\n      if (pageItem[\"subType\"] == \"multivalue\") {\n        settingsDef.addSettingsGroup(\"General\").addSetting(\"title\", \"string\", _i18n2.default.t(\"Question title\"), {\n          required: true,\n          focusFirst: true,\n          multiLine: true\n        }).addSetting(\"questionDisplayType\", \"choice\", _i18n2.default.t(\"Display choices as\"), {\n          choice: {\n            dropdown: _i18n2.default.t(\"Dropdown\"),\n            radio: _i18n2.default.t(\"Radio\"),\n            checkbox: _i18n2.default.t(\"Checkbox\")\n          },\n          isOtherHeader: true\n        }).addSetting(\"required\", \"bool\", _i18n2.default.t(\"Required\"), {\n          isPrimary: true,\n          icon: \"icon-asterisk\"\n        }).addSetting(\"quizMode\", \"bool\", _i18n2.default.t(\"Quiz\"), {\n          isPrimary: true,\n          icon: \"icon-quiz_Q_A\"\n        }).addSetting(\"options\", \"array\", _i18n2.default.t(\"Options\"), {\n          options: pageItem[\"options\"],\n          answer: pageItem.getAnswer()\n        }).addSetting(\"marks\", \"string\", _i18n2.default.t(\"Marks\"), {\n          type: \"number\",\n          textOnly: true\n        }).addSetting(\"logic\", \"bool\", _i18n2.default.t(\"Logic\"), {\n          isPrimary: true,\n          icon: \"icon-bulb\"\n        }).addSetting(\"skipTo\", \"linkedchoice\", _i18n2.default.t(\"Skip to\"), {\n          linkedchoice: this.getLinkedChoice(pageItemNumber),\n          options: pageItem[\"options\"].toArray()\n        }).addSetting(\"markdown\", \"bool\", _i18n2.default.t(\"markdown\"), {\n          isPrimary: true,\n          icon: \"icon-embed2\"\n        }).addSetting(\"questionTimeOut\", \"string\", _i18n2.default.t(\"Question timeout (minutes)\"), {\n          type: \"number\",\n          textOnly: true\n        });\n      }\n      _settingsactions2.default.open(settingsDef.getSettingsDefinition(), settingsValues, _surveysactions2.default.optionsPageItemDone.bind(_surveysactions2.default, pageItemNumber), null, options);\n    } else {\n      var _settingsValues = {};\n      if (pageItem.getSubType() == \"text\") {\n        _settingsValues = {\n          title: pageItem.getTitle(),\n          description: pageItem.getDescription()\n        };\n        settingsDef.addSettingsGroup().addSetting(\"title\", \"string\", _i18n2.default.t(\"Section title\"), {\n          maxLength: _appsettings.SurveyModelDefaults.MaxPageTitleLength,\n          focusFirst: true\n        }).addSetting(\"description\", \"string\", _i18n2.default.t(\"Section description\"), {\n          multiLine: true,\n          rows: 1,\n          rowsMax: 5,\n          maxLength: _appsettings.SurveyModelDefaults.MaxPageSubTitleLength\n        });\n      }\n\n      _settingsactions2.default.open(settingsDef.getSettingsDefinition(), _settingsValues, _surveysactions2.default.optionsPageItemDone.bind(_surveysactions2.default, pageItemNumber), null, options);\n    }\n  },\n  getModifiedValue: function getModifiedValue(skipTo) {\n    var modifiedValue = {};\n    (0, _forIn3.default)(skipTo, function (value, key) {\n      modifiedValue[key] = {\n        title: value.pageNo,\n        linked: value.questionNo\n      };\n    });\n    return modifiedValue;\n  },\n  getLinkedChoice: function getLinkedChoice(id) {\n    var pageLength = this.currentSurvey.getPagesSize(),\n        flag = false,\n        found = false,\n        choice = {};\n    for (var i = 0; i < pageLength; i++) {\n      //choice[i] = `Page ${i + 1}`\n      var page = this.currentSurvey.getPage(i),\n          refIndex = page.getPageItemRefIndex(id);\n      if (found) {\n        flag = true;\n      }\n      if (refIndex != -1) {\n        if (refIndex != page.getPageItemRefsSize() - 1) flag = true;\n        found = true;\n      }\n      if (flag) {\n        var linked = this.getQuestionChoice(page.getPageItemRefs().toArray(), refIndex);\n        choice[i] = {\n          title: \"Section \" + (i + 1),\n          linked: linked\n        };\n      }\n    }\n    choice[\"eos\"] = {\n      title: _i18n2.default.t(\"End of Survey\")\n    };\n    return choice;\n  },\n  getQuestionChoice: function getQuestionChoice(refs, refIndex) {\n    var choice = {},\n        count = 0;\n    for (var i = 0; i < refs.length; i++) {\n      var pageItem = this.currentSurvey.getPageItem(refs[i]);\n      if (pageItem.isQuestion) {\n        ++count;\n        if (refIndex >= i) {\n          continue;\n        }\n        choice[count] = \"Question \" + count;\n      }\n    }\n    return choice;\n  },\n  optionsPageItemDone: function optionsPageItemDone(pageItemNumber, values) {\n    var _this11 = this;\n\n    if (!this.currentSurvey) return;\n    var title = values.title,\n        description = values.description,\n        required = values.required,\n        quizMode = values.quizMode,\n        answer = values.answer,\n        marks = values.marks,\n        questionDisplayType = values.questionDisplayType,\n        logic = values.logic,\n        skipTo = values.skipTo,\n        markdown = values.markdown,\n        codeValidator = values.codeValidator,\n        defaultTemplate = values.defaultTemplate,\n        language = values.language,\n        questionTimeOut = values.questionTimeOut;\n\n    title = (0, _trim3.default)(title);\n    description = (0, _trim3.default)(description);\n    codeValidator = (0, _trim3.default)(codeValidator);\n    defaultTemplate = (0, _trim3.default)(defaultTemplate);\n    language = (0, _trim3.default)(language);\n    var pageItem = this.currentSurvey.getPageItem(pageItemNumber);\n    pageItem = pageItem.setTitle(title);\n    //Logger.debug(pageItem.getSubType());\n    if (!pageItem) {\n      return;\n    }\n    if (pageItem.getType() == \"question\") {\n      pageItem = pageItem.setQuestionTimeOut(questionTimeOut);\n      if (pageItem.getSubType() != \"yesno\" && pageItem.getSubType() != \"code\") {\n        pageItem = pageItem.setRequired(required);\n      }\n      if (pageItem.getSubType() == \"code\") {\n        pageItem = pageItem.setCodeValidator(codeValidator).setDefaultTemplate(defaultTemplate).setMarkdown(markdown).setLanguage(language);\n      }\n      if (pageItem.getSubType() == \"yesno\") {\n        pageItem = pageItem.setQuizMode(quizMode).setAnswer(answer).setMarks(marks).setLogic(logic);\n        pageItem = this.setSkipTo(pageItem, skipTo);\n      }\n      if (pageItem.getSubType() == \"multivalue\") {\n        pageItem = pageItem.setOptions(values.options).setQuizMode(quizMode).setAnswer(answer).setMarks(marks).setDisplayType(questionDisplayType).setLogic(logic).setMarkdown(markdown);\n        pageItem = this.setSkipTo(pageItem, skipTo);\n      }\n      this.updateSurveyState(this.currentSurvey.updatePageItem(pageItem)).then(function () {\n        return _this11.calculateSectionMarks();\n      });\n    } else {\n      pageItem = pageItem.setDescription(description);\n      this.updateSurveyState(this.currentSurvey.updatePageItem(pageItem)).then(function () {\n        return _this11.calculateSectionMarks();\n      });\n    }\n  },\n  calculateSectionMarks: function calculateSectionMarks() {\n    var currentSurvey = this.currentSurvey,\n        pages = this.currentSurvey.getPages(),\n        surveyMarks = 0;\n    pages.forEach(function (page, i) {\n      var pageItemRefs = page.getPageItemRefs(),\n          totalSectionMarks = 0,\n          pageItem = void 0;\n      pageItemRefs.forEach(function (pageItemRef) {\n        pageItem = currentSurvey.getPageItem(pageItemRef);\n        var pageItemType = pageItem.getSubType(),\n            quizMode = void 0,\n            marks = void 0;\n        if (pageItemType == \"multivalue\" || pageItemType == \"yesno\") {\n          quizMode = pageItem.getQuizMode();\n          marks = pageItem.getMarks();\n        }\n        if (quizMode) totalSectionMarks += parseInt(marks);\n      });\n      surveyMarks += totalSectionMarks;\n      page = page.setPageMarksTotal(totalSectionMarks);\n      currentSurvey = currentSurvey.updatePage(i, page);\n    });\n    return this.updateSurveyState(currentSurvey.setSurveyMarksTotal(surveyMarks));\n  },\n  setSkipTo: function setSkipTo(pageItem, skipTo) {\n    (0, _forIn3.default)(skipTo, function (value, key) {\n      var skipObj = {\n        pageNo: value.title,\n        questionNo: value.linked\n      };\n      pageItem = pageItem.setSkipTo(key, skipObj);\n    });\n    return pageItem;\n  },\n  setUpdatedSurvey: function setUpdatedSurvey(surveyId) {\n    var _this12 = this;\n\n    this._surveyProvider.getUserSurvey(surveyId).then(function (updatedSurvey) {\n      _this12.updateState(_this12.state.setIn([\"userSurveys\", updatedSurvey.getId()], updatedSurvey).set(\"currentSurvey\", updatedSurvey));\n    });\n  },\n  addQuestionDone: function addQuestionDone(value, pageNumber, refIndex) {\n    var page = this.currentSurvey.getPage((0, _isNumber3.default)(pageNumber) ? pageNumber : this.currentSurvey.getPagesSize() - 1),\n        pageItem = SurveyModelBuilder.PageItemFactory.question(SurveyModelBuilder.PageItemFactory.QuestionTypes[value.subType]);\n    if (refIndex + 1 < page.getPageItemRefsSize() && (0, _isNumber3.default)(pageNumber)) {\n      this.updateSurveyState(this.currentSurvey.addPageItemToPageAndSurvey(page, pageItem, refIndex + 1));\n    } else {\n      this.updateSurveyState(this.currentSurvey.addPageItemToPageAndSurvey(page, pageItem));\n    }\n  },\n  addDecoratorDone: function addDecoratorDone(value, pageNumber, refIndex) {\n    var page = this.currentSurvey.getPage((0, _isNumber3.default)(pageNumber) ? pageNumber : this.currentSurvey.getPagesSize() - 1);\n    var pageItem = SurveyModelBuilder.PageItemFactory.decorator(SurveyModelBuilder.PageItemFactory.DecoratorTypes[value.subType], value);\n    pageItem = value.title || value.description ? pageItem.setTitle(value.title).setDescription(value.description) : pageItem;\n    if (refIndex + 1 < page.getPageItemRefsSize() && (0, _isNumber3.default)(pageNumber)) {\n      this.updateSurveyState(this.currentSurvey.addPageItemToPageAndSurvey(page, pageItem, refIndex + 1));\n    } else {\n      this.updateSurveyState(this.currentSurvey.addPageItemToPageAndSurvey(page, pageItem));\n    }\n  },\n  addPageDone: function addPageDone(index) {\n    var page = SurveyModelBuilder.PageFactory._createDefaultPage();\n    if (index < this.currentSurvey.getPagesSize()) {\n      this.updateSurveyState(this.currentSurvey.insertPage(index, page));\n    } else {\n      this.updateSurveyState(this.currentSurvey.pushPage(page));\n    }\n  },\n  deleteQuestion: function deleteQuestion(pageNumber, id) {\n    this.storeLastState();\n    this.updateSurveyState(this.currentSurvey.removePageItem(id)).then(function (result) {\n      if (result) {\n        _logger2.default.debug(\"survey deleted.\", result);\n        _settingsactions2.default.close();\n        _notificationactions2.default.notify(_appsettings.Notifications.INFO, _i18n2.default.t(\"The Question has been deleted\"), _i18n2.default.t(\"undo\"), _surveysactions2.default.undo);\n      }\n    });\n  },\n  changeQuestion: function changeQuestion(pageNumber, id, index, subType) {\n    var oldPageItem = this.currentSurvey.getPageItem(id),\n        newPageItem = SurveyModelBuilder.PageItemFactory.question(SurveyModelBuilder.PageItemFactory.QuestionTypes[subType]);\n    if (oldPageItem.getSubType() == subType) return;\n    var title = oldPageItem.getTitle(),\n        required = oldPageItem.getSubType() != \"yesno\" && oldPageItem.getSubType() != \"code\" && oldPageItem.getRequired();\n    newPageItem = newPageItem.setTitle(title);\n    if (newPageItem.getSubType() != \"yesno\" && newPageItem.getSubType() != \"code\") newPageItem = newPageItem.setRequired(required);\n    var page = this.currentSurvey.getPage(pageNumber);\n    this.currentSurvey = this.currentSurvey.addPageItemToPageAndSurvey(page, newPageItem, index);\n    this.currentSurvey = this.currentSurvey.removePageItem(id);\n    this.updateSurveyState(this.currentSurvey);\n  },\n  deletePage: function deletePage(pageNumber) {\n    this.storeLastState();\n    this.updateSurveyState(this.currentSurvey.removePage(pageNumber)).then(function (result) {\n      if (result) {\n        _logger2.default.debug(\"survey deleted.\", result);\n        _notificationactions2.default.notify(_appsettings.Notifications.INFO, _i18n2.default.t(\"The Page has been deleted\"), _i18n2.default.t(\"undo\"), _surveysactions2.default.undo);\n      }\n    });\n  },\n  movePageItem: function movePageItem(id, newPageIndex, newQuestionIndex, oldPageIndex, oldQuestionIndex) {\n    var page = this.currentSurvey.getPage(newPageIndex);\n    if (newPageIndex === oldPageIndex) {\n      this.updateSurveyState(this.currentSurvey.updatePage(newPageIndex, page.movePageItemRef(oldQuestionIndex, newQuestionIndex)));\n    } else {\n      var survey = this.currentSurvey,\n          pageItem = survey.getPageItem(id);\n      survey = survey.removePageItem(pageItem);\n      survey = survey.addPageItemToPageAndSurvey(page, pageItem, newQuestionIndex);\n\n      this.updateSurveyState(survey);\n    }\n  },\n  moveQuestion: function moveQuestion(moveTo, pageIndex, questionId, questionIndex) {\n    var page = this.currentSurvey.getPage(pageIndex);\n    if (questionId) {\n      var survey = this.currentSurvey,\n          destPage = survey.getPage(moveTo),\n          pageItem = survey.getPageItem(questionId);\n      survey = survey.removePageItem(pageItem);\n\n      if (moveTo < pageIndex) {\n        survey = survey.addPageItemToPageAndSurvey(destPage, pageItem);\n      } else {\n        survey = survey.addPageItemToPageAndSurvey(destPage, pageItem, 0);\n      }\n\n      this.updateSurveyState(survey);\n    } else {\n      this.updateSurveyState(this.currentSurvey.updatePage(this.currentSurvey.getPageIndex(page), page.movePageItemRef(questionIndex, moveTo)));\n    }\n  },\n  movePage: function movePage(oldIndex, newIndex) {\n    this.updateSurveyState(this.currentSurvey.movePage(oldIndex, newIndex));\n  },\n  storeLastState: function storeLastState() {\n    this.lastState = this.state;\n  },\n  shuffleQuestions: function shuffleQuestions(pageIndex) {\n    var page = this.currentSurvey.getPage(pageIndex),\n        pageItemRefs = page.getPageItemRefs(),\n        pageItemRefsSize = page.getPageItemRefsSize(),\n        shuffledArray = (0, _shuffle3.default)(pageItemRefs.toArray());\n    for (var i = 0; i < pageItemRefsSize; i++) {\n      page = page.removePageItemRef(0);\n    }\n    for (var _i = 0; _i < pageItemRefsSize; _i++) {\n      page = page.addPageItemRef(shuffledArray[_i]);\n    }\n    this.updateSurveyState(this.currentSurvey.updatePage(pageIndex, page));\n  },\n  startTest: function startTest(id) {\n    var surveyStoreObject = this;\n    if (this.currentSurvey) {\n      _surveyrunneractions2.default.startTest(this.currentSurvey);\n    } else {\n      this._getSurveyById(id).then(function (survey) {\n        surveyStoreObject.currentSurvey = survey;\n        _surveyrunneractions2.default.startTest(survey);\n      });\n    }\n  },\n  stopTest: function stopTest(surveyRunnerModel) {\n    var _this13 = this;\n\n    var db = new _pouchdbCore2.default(\"test\");\n    db.close().then(function () {\n      var id = _this13.currentSurvey.getId();\n      _this13.routeToSurvey(id);\n    });\n  }\n});\n\nexports.default = SurveysStore;\n\n/***/ }),\n\n/***/ 386:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _map2 = __webpack_require__(56);\n\nvar _map3 = _interopRequireDefault(_map2);\n\nvar _isUndefined2 = __webpack_require__(320);\n\nvar _isUndefined3 = _interopRequireDefault(_isUndefined2);\n\nvar _isNaN2 = __webpack_require__(434);\n\nvar _isNaN3 = _interopRequireDefault(_isNaN2);\n\nvar _isNull2 = __webpack_require__(791);\n\nvar _isNull3 = _interopRequireDefault(_isNull2);\n\nvar _omit2 = __webpack_require__(412);\n\nvar _omit3 = _interopRequireDefault(_omit2);\n\nvar _forIn2 = __webpack_require__(24);\n\nvar _forIn3 = _interopRequireDefault(_forIn2);\n\nvar _createStore = __webpack_require__(22);\n\nvar _createStore2 = _interopRequireDefault(_createStore);\n\nvar _surveymodelbuilder = __webpack_require__(54);\n\nvar _surveymodelbuilder2 = _interopRequireDefault(_surveymodelbuilder);\n\nvar _contactbuilder = __webpack_require__(165);\n\nvar _contactbuilder2 = _interopRequireDefault(_contactbuilder);\n\nvar _settleAll = __webpack_require__(72);\n\nvar _settleAll2 = _interopRequireDefault(_settleAll);\n\nvar _bsonObjectid = __webpack_require__(17);\n\nvar _bsonObjectid2 = _interopRequireDefault(_bsonObjectid);\n\nvar _immutable = __webpack_require__(9);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _createHashHistory = __webpack_require__(39);\n\nvar _createHashHistory2 = _interopRequireDefault(_createHashHistory);\n\nvar _notificationactions = __webpack_require__(64);\n\nvar _notificationactions2 = _interopRequireDefault(_notificationactions);\n\nvar _appsettings = __webpack_require__(28);\n\nvar _i18n = __webpack_require__(8);\n\nvar _i18n2 = _interopRequireDefault(_i18n);\n\nvar _diservice = __webpack_require__(40);\n\nvar _diservice2 = _interopRequireDefault(_diservice);\n\nvar _publishsurveyactions = __webpack_require__(143);\n\nvar _publishsurveyactions2 = _interopRequireDefault(_publishsurveyactions);\n\nvar _authactions = __webpack_require__(30);\n\nvar _authactions2 = _interopRequireDefault(_authactions);\n\nvar _logger = __webpack_require__(6);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _axios = __webpack_require__(41);\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nvar _bluebird = __webpack_require__(32);\n\nvar _bluebird2 = _interopRequireDefault(_bluebird);\n\nvar _clientsurveyresponsemodelprovider = __webpack_require__(155);\n\nvar _clientsurveyresponsemodelprovider2 = _interopRequireDefault(_clientsurveyresponsemodelprovider);\n\nvar _settingdefinitionbuilder = __webpack_require__(167);\n\nvar _settingdefinitionbuilder2 = _interopRequireDefault(_settingdefinitionbuilder);\n\nvar _settingsactions = __webpack_require__(153);\n\nvar _settingsactions2 = _interopRequireDefault(_settingsactions);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar surveyModelBuilder = (0, _surveymodelbuilder2.default)(),\n    contactBuilder = (0, _contactbuilder2.default)(),\n    PublishSurveyStore = (0, _createStore2.default)({\n  listenables: [_publishsurveyactions2.default, _authactions2.default],\n  limit: _appsettings.contactView.navigation.pageSize,\n  skip: 0,\n  key: \"\",\n  totalRows: null,\n  allSelectedContacts: _immutable2.default.Map(),\n  _allResponses: _immutable2.default.Map(),\n  getProviders: function getProviders() {\n    var providers = [];\n    (0, _forIn3.default)(_appsettings.OAuth, function (provider, key) {\n      providers.push(key);\n    });\n    return providers;\n  },\n  init: function init() {\n    this.state = _immutable2.default.fromJS({\n      //publishedSurveys\n      publishedSurveys: _immutable2.default.Map(),\n      currentPublishedSurveysPage: null,\n      totalPublishedSurveysPage: 0,\n      //other\n      isAuthorizedUser: false,\n      selectedSurveyId: null,\n      surveys: _immutable2.default.Set(),\n      stepIndex: null,\n      //selected Contacts\n      selectedContacts: _immutable2.default.Map(),\n      currentSelectedContactsPage: null,\n      totalSelectedContactsPage: 0,\n      allSelectedContactsIds: _immutable2.default.Map(),\n      //selected provider info\n      selectedProviders: _immutable2.default.Set(this.getProviders()),\n      //location settings\n      askLocation: false,\n      locationRestrict: false,\n      locationRequired: false,\n      currentLocation: {},\n      errorMessage: null,\n      //survey Valid Timespan details\n      isSurveyAvailabilitySet: false,\n      surveyStartDateTime: null,\n      surveyEndDateTime: null,\n      //setting Locations while survey design\n      myLocation: { latitude: null, longitude: null },\n      selectedLocations: _immutable2.default.Set(),\n      mapCenterLocation: {},\n      currentFocusedLocation: {},\n      zoomLevel: null,\n      blink: false,\n      //selected for notification\n      selectedForNotification: _immutable2.default.Set(),\n      userProfile: {},\n      //currentPublishedSurveys\n      currentPublishedSurvey: null,\n      //currentresponses\n      totalResponsePage: 0,\n      currentResponsePage: 0,\n      currentResponses: _immutable2.default.Map()\n    });\n  },\n  getInitialState: function getInitialState() {\n    return this.state;\n  },\n  updateState: function updateState(newState, suppress) {\n    if (this.state.equals(newState)) return;\n    this.state = newState;\n    if (!suppress) {\n      this.trigger(this.state);\n    }\n  },\n  getPublishedSurvey: function getPublishedSurvey(id) {\n    var publishedSurvey = this.state.getIn([\"publishedSurveys\", id]);\n    if (publishedSurvey) {\n      return _bluebird2.default.resolve(publishedSurvey);\n    }\n    return this._publishedSurveyProvider.getUserPublishedSurvey(id);\n  },\n  initCurrentPublishedSurvey: function initCurrentPublishedSurvey(id) {\n    var _this = this;\n\n    this.getPublishedSurvey(id).then(function (publishedSurvey) {\n      _this.updateState(_this.state.set(\"currentPublishedSurvey\", publishedSurvey).set(\"askLocation\", publishedSurvey.getAskLocation()).set(\"locationRequired\", publishedSurvey.getLocationRequired()).set(\"locationRestrict\", publishedSurvey.getLocationRestrict()).set(\"selectedLocations\", _immutable2.default.Set(publishedSurvey.getSelectedLocations())).setIn([\"publishedSurveys\", id], publishedSurvey).set(\"isSurveyAvailabilitySet\", publishedSurvey.getIsSurveyAvailabilitySet()).set(\"surveyEndDateTime\", new Date(publishedSurvey.getSurveyEndDateTime())).set(\"surveyStartDateTime\", new Date(publishedSurvey.getSurveyStartDateTime())));\n    });\n  },\n  enableNotifications: function enableNotifications(value) {\n    this.updateState(this.state.set(\"currentPublishedSurvey\", this.state.getIn([\"currentPublishedSurvey\"]).setNotification(value)));\n  },\n  setRecipientsForNotifications: function setRecipientsForNotifications(recipients) {\n    this.updateState(this.state.set(\"currentPublishedSurvey\", this.state.getIn([\"currentPublishedSurvey\"]).setRecipientsForNotification(recipients)));\n  },\n  setLocationSettings: function setLocationSettings(currentPublishedSurvey) {\n    return currentPublishedSurvey.set(\"askLocation\", this.state.get(\"askLocation\")).set(\"locationRequired\", this.state.get(\"locationRequired\")).set(\"locationRestrict\", this.state.get(\"locationRestrict\")).set(\"selectedLocations\", this.state.get(\"selectedLocations\").toJS());\n  },\n  setSurveyAvailibilitySettings: function setSurveyAvailibilitySettings(currentPublishedSurvey) {\n    return currentPublishedSurvey.set(\"isSurveyAvailabilitySet\", this.state.get(\"isSurveyAvailabilitySet\")).set(\"surveyStartDateTime\", this.state.get(\"surveyStartDateTime\")).set(\"surveyEndDateTime\", this.state.get(\"surveyEndDateTime\"));\n  },\n  updateCurrentPublishedSurvey: function updateCurrentPublishedSurvey() {\n    var _this2 = this;\n\n    if (this.updating) {\n      return;\n    }\n    this.updating = true;\n    var currentPublishedSurvey = this.state.getIn([\"currentPublishedSurvey\"]);\n    currentPublishedSurvey = this.setLocationSettings(currentPublishedSurvey);\n    currentPublishedSurvey = this.setSurveyAvailibilitySettings(currentPublishedSurvey);\n    this._publishedSurveyProvider.updateUserPublishedSurvey(currentPublishedSurvey).then(function (publishedSurvey) {\n      _this2.updateState(_this2.state.set(\"currentPublishedSurvey\", publishedSurvey).setIn([\"publishedSurveys\", publishedSurvey.getId()], publishedSurvey).set(\"askLocation\", publishedSurvey.getAskLocation()).set(\"locationRequired\", publishedSurvey.getLocationRequired()).set(\"locationRestrict\", publishedSurvey.getLocationRestrict()).set(\"isSurveyAvailabilitySet\", publishedSurvey.getIsSurveyAvailabilitySet()).set(\"surveyStartDateTime\", publishedSurvey.getSurveyStartDateTime()).set(\"surveyEndDateTime\", publishedSurvey.getSurveyEndDateTime()).set(\"selectedLocations\", _immutable2.default.Set(publishedSurvey.getSelectedLocations())));\n      _this2.updating = false;\n      _notificationactions2.default.notify(_appsettings.Notifications.INFO, _i18n2.default.t(\"Published survey updated\"));\n    });\n  },\n  userChanged: function userChanged(prevProfile, newProfile) {\n    this._userProfile = newProfile;\n    this._surveyProvider = _diservice2.default.get(\"SurveyDataProvider\", {\n      SurveyModelBuilder: surveyModelBuilder\n    });\n    this._groupsAndRecipientsProvider = _diservice2.default.get(\"GroupsAndRecipientsProvider\", { ContactBuilder: contactBuilder });\n    this._publishedSurveyProvider = _diservice2.default.get(\"PublishedSurveyProvider\");\n    this.updateState(this.state.set(\"isAuthorizedUser\", !newProfile.isGuest).set(\"userProfile\", newProfile));\n  },\n  setSurveyId: function setSurveyId(surveyId) {\n    //Logger.log(surveyId);\n    if (surveyId) {\n      this.updateState(this.state.set(\"selectedSurveyId\", surveyId), true);\n    }\n  },\n  addContact: function addContact(contact) {\n    this.allSelectedContacts = this.allSelectedContacts.setIn([contact._id], contact);\n    this.updateNavigationAndSelectedContactsState(this.state.get(\"currentSelectedContactsPage\"));\n    this.configureSelectedIds();\n  },\n  optionsInvitationOpen: function optionsInvitationOpen(link, options) {\n    var settingsDef = (0, _settingdefinitionbuilder2.default)(),\n        settingsValues = {\n      to: [],\n      cc: [],\n      bcc: [],\n      subject: \"\",\n      link: link,\n      html: \"\"\n    };\n    settingsDef.addSettingsGroup(_i18n2.default.t(\"Invite people\")).addSetting(\"to\", \"groups\", _i18n2.default.t(\"Send invitation to\"), {\n      required: true,\n      requiredText: _i18n2.default.t(\"At least one email id is required\"),\n      hintText: \"someone@domain.com\",\n      showRequiredStatus: true\n    }).addSetting(\"cc\", \"groups\", _i18n2.default.t(\"CC\"), {\n      hintText: \"someone@domain.com\",\n      showRequiredStatus: false\n    }).addSetting(\"bcc\", \"groups\", _i18n2.default.t(\"BCC\"), {\n      hintText: \"someone@domain.com\",\n      showRequiredStatus: false\n    }).addSetting(\"subject\", \"string\", _i18n2.default.t(\"Subject\"), {\n      required: true,\n      hintText: _i18n2.default.t(\"A short subject for the invite mail\"),\n      showRequiredStatus: true\n    }).addSetting(\"link\", \"copy\", _i18n2.default.t(\"Survey link\"), {\n      required: true,\n      disabled: true\n    }).addSetting(\"html\", \"richText\", _i18n2.default.t(\"Message\"), {\n      required: true,\n      showRequiredStatus: true,\n      rteDefault: \"<p>Hi,</p><p>Please click here to start exam <a href=\\\"\" + link + \"\\\">\" + link + \"</a></p><p>Thanks and regards,</p>\",\n      textDefault: \"Hi,\\n          Please click here to start exam \" + link + \"\\n          Thanks and regards,\"\n    });\n    _settingsactions2.default.open(settingsDef.getSettingsDefinition(), settingsValues, _publishsurveyactions2.default.optionsInvitationDone, null, options);\n  },\n  optionsInvitationDone: function optionsInvitationDone(invitation) {\n    var _invitation = invitation,\n        to = _invitation.to;\n\n    if (to.length) {\n      invitation = (0, _omit3.default)(invitation, \"link\");\n      (0, _axios2.default)({\n        url: \"/invite\",\n        method: \"POST\",\n        data: {\n          invitation: invitation\n        }\n      }).then(function () {\n        _notificationactions2.default.notify(_appsettings.Notifications.INFO, _i18n2.default.t(\"Invitation completed\"));\n      });\n    }\n  },\n  addContactsByGroup: function addContactsByGroup(groupName) {\n    var _this3 = this;\n\n    this._groupsAndRecipientsProvider.getRecipientsByGroup(groupName, true).then(function (result) {\n      (0, _forIn3.default)(result.docs, function (contact) {\n        _this3.allSelectedContacts = _this3.allSelectedContacts.setIn([contact._id], contact);\n      });\n      _this3.configureSelectedIds();\n      _this3.updateNavigationAndSelectedContactsState(_this3.state.get(\"currentSelectedContactsPage\"));\n    });\n  },\n  removeContact: function removeContact(contactId) {\n    this.allSelectedContacts = this.allSelectedContacts.deleteIn([contactId]);\n    this.configureSelectedIds();\n    this.updateNavigationAndSelectedContactsState(this.state.get(\"currentSelectedContactsPage\"));\n  },\n  configureSelectedIds: function configureSelectedIds() {\n    var ids = this.allSelectedContacts.map(function (contact) {\n      return contact._id;\n    });\n    this.updateState(this.state.set(\"allSelectedContactsIds\", ids));\n  },\n  startPublish: function startPublish(surveyId) {\n    var _this4 = this;\n\n    if (this.state.get(\"isAuthorizedUser\")) {\n      return this._surveyProvider.getUserSurveysIdWithTitle().then(function (surveys) {\n        _this4.updateState(_this4.state.set(\"surveys\", _immutable2.default.Set(surveys)));\n        if (!surveyId) {\n          _this4.updateState(_this4.state.set(\"selectedSurveyId\", surveyId));\n          _this4.routeToPublish();\n          return;\n        }\n        _this4.setSurveyId(surveyId);\n        //this.routeToPublish();\n        _this4.next();\n      });\n    }\n    _notificationactions2.default.notify(_appsettings.Notifications.INFO, _i18n2.default.t(\"You can publish your surveys after you login\"));\n  },\n  routeToPublish: function routeToPublish(step) {\n    if ((0, _isNull3.default)(step) || (0, _isNaN3.default)(step) || (0, _isUndefined3.default)(step)) {\n      step = 0;\n    }\n    this.updateState(this.state.set(\"stepIndex\", step));\n    var history = (0, _createHashHistory2.default)({\n      queryKey: false\n    }),\n        location = history.createLocation(\"/surveys/publish/step\" + (step + 1));\n    history.push(location);\n  },\n  routeToSurveys: function routeToSurveys() {\n    var history = (0, _createHashHistory2.default)({\n      queryKey: false\n    }),\n        location = history.createLocation(\"/surveys\");\n    history.push(location);\n  },\n  next: function next() {\n    if (!this.state.get(\"selectedSurveyId\")) {\n      _notificationactions2.default.notify(_appsettings.Notifications.WARNING, _i18n2.default.t(\"You must select survey.\"));\n      return;\n    }\n    if (this.allSelectedContacts.size) {\n      this.updateState(this.state.set(\"currentSelectedContactsPage\", null).set(\"totalSelectedContactsPage\", 0));\n      this.updateNavigationAndSelectedContactsState();\n    }\n    this.routeToPublish(this.state.get(\"stepIndex\") + 1);\n  },\n  prev: function prev() {\n    if (this.allSelectedContacts.size) {\n      this.updateState(this.state.set(\"currentSelectedContactsPage\", null).set(\"totalSelectedContactsPage\", 0));\n      this.updateNavigationAndSelectedContactsState();\n    }\n    this.routeToPublish(this.state.get(\"stepIndex\") - 1);\n  },\n  reset: function reset() {\n    this.allSelectedContacts = _immutable2.default.Map();\n    this.updateState(this.state.set(\"stepIndex\", 0).set(\"selectedSurveyId\", null).set(\"allSelectedContactsIds\", _immutable2.default.Map()).set(\"selectedContacts\", _immutable2.default.Map()).set(\"currentPublishedSurvey\", null).set(\"askLocation\", null).set(\"locationRequired\", null).set(\"locationRestrict\", null).set(\"isSurveyAvailabilitySet\", null).set(\"surveyStartDateTime\", null).set(\"surveyEndDateTime\", null).set(\"selectedLocations\", _immutable2.default.Set()));\n  },\n  cancel: function cancel() {\n    this.reset();\n    this.routeToSurveys();\n  },\n  getPublishSurvey: function getPublishSurvey(survey, selectedDistibutionType) {\n    var publishedSurvey = {};\n    publishedSurvey[\"surveyId\"] = survey.getId();\n    publishedSurvey[\"survey\"] = survey.toJS();\n    if (selectedDistibutionType != _appsettings.distributionTypes.commonlink) {\n      if (!this.state.get(\"selectedContacts\").size) {\n        _notificationactions2.default.notify(_appsettings.Notifications.WARNING, _i18n2.default.t(\"You must select contacts\"));\n        return;\n      }\n      publishedSurvey[\"contacts\"] = this.state.get(\"selectedContacts\").map(function (contact) {\n        return {\n          email: contact.email,\n          name: contact.fullName,\n          responseId: (0, _bsonObjectid2.default)().str\n        };\n      }).toJS();\n    } else {\n      publishedSurvey[\"contacts\"] = _immutable2.default.Map();\n    }\n    publishedSurvey[\"providers\"] = this.state.get(\"selectedProviders\").toArray();\n    var recipients = this.state.get(\"selectedForNotification\").toArray();\n    publishedSurvey[\"askLocation\"] = this.state.get(\"askLocation\");\n    publishedSurvey[\"locationRequired\"] = this.state.get(\"locationRequired\");\n    publishedSurvey[\"locationRestrict\"] = this.state.get(\"locationRestrict\");\n    publishedSurvey[\"isSurveyAvailabilitySet\"] = this.state.get(\"isSurveyAvailabilitySet\");\n    publishedSurvey[\"surveyStartDateTime\"] = this.state.get(\"surveyStartDateTime\") && this.state.get(\"surveyStartDateTime\").toISOString();\n    publishedSurvey[\"surveyEndDateTime\"] = this.state.get(\"surveyEndDateTime\") && this.state.get(\"surveyEndDateTime\").toISOString();\n    publishedSurvey[\"selectedLocations\"] = this.state.get(\"selectedLocations\").toJS();\n    publishedSurvey[\"notification\"] = !!recipients.length;\n    publishedSurvey[\"recipientsForNotification\"] = recipients;\n    return publishedSurvey;\n  },\n  setMailsForNotification: function setMailsForNotification(mails) {\n    this.updateState(this.state.set(\"selectedForNotification\", _immutable2.default.Set(mails)));\n  },\n  finish: function finish(selectedDistibutionType) {\n    var _this5 = this;\n\n    if (!selectedDistibutionType) {\n      this.routeToPublish(1);\n      return;\n    }\n    if (!this.state.get(\"selectedSurveyId\")) {\n      _notificationactions2.default.notify(_appsettings.Notifications.WARNING, _i18n2.default.t(\"You must select survey.\"));\n      return;\n    }\n    this._surveyProvider.getUserSurvey(this.state.get(\"selectedSurveyId\")).then(function (survey) {\n      var publishedSurvey = _this5.getPublishSurvey(survey, selectedDistibutionType);\n      return _this5._publishedSurveyProvider.addUserPublishedSurvey(publishedSurvey);\n    }).then(function (publishedSurvey) {\n      _this5.updateState(_this5.state.setIn([\"publishedSurveys\", publishedSurvey.getId()], publishedSurvey), true);\n      _this5.reset();\n      _this5.routeToSurveys();\n    });\n  },\n  removeSharedLinks: function removeSharedLinks(contacts) {\n    var _this6 = this;\n\n    this._publishedSurveyResponseProvider = _diservice2.default.get(\"PublishedSurveyResponeseProvider\");\n    var promises = contacts.map(function (contact) {\n      return _bluebird2.default.try(function () {\n        if (!contact.completed) {\n          return _bluebird2.default.try(function () {\n            return _bluebird2.default.resolve();\n          });\n        }\n        return _this6._publishedSurveyResponseProvider.getResponse(contact.responseId).then(function (doc) {\n          if (!doc) {\n            return _bluebird2.default.try(function () {\n              return _bluebird2.default.reject({ error: (0, _i18n2.default)(\"Document not found\") });\n            });\n          }\n          if (!doc.sharedInformation) {\n            return _bluebird2.default.try(function () {\n              return _bluebird2.default.reject({\n                error: (0, _i18n2.default)(\"No shared information contain\")\n              });\n            });\n          }\n          var id = doc.sharedInformation.id;\n\n          if (!id) {\n            return _bluebird2.default.try(function () {\n              return _bluebird2.default.reject({\n                error: (0, _i18n2.default)(\"No shared information contain\")\n              });\n            });\n          }\n          return _bluebird2.default.try(function () {\n            return (0, _axios2.default)({\n              url: \"/sharedContent/\" + id,\n              method: \"DELETE\"\n            }).then(function () {\n              doc[\"sharedInformation\"] = { link: \"\", id: \"\" };\n              return _this6._publishedSurveyResponseProvider.setResponse(doc);\n            });\n          });\n        });\n      });\n    }).toArray();\n    return (0, _settleAll2.default)(promises);\n  },\n  deletePublishedSurvey: function deletePublishedSurvey(id) {\n    var _this7 = this;\n\n    var publishedSurvey = null;\n    this.getPublishedSurvey(id).then(function (pSurvey) {\n      publishedSurvey = pSurvey;\n      return _this7.removeSharedLinks(publishedSurvey.getContacts());\n    }).then(function () {\n      return _this7._publishedSurveyProvider.deleteUserPublishedSurvey(publishedSurvey);\n    }).then(function () {\n      _this7.updateState(_this7.state.deleteIn([\"publishedSurveys\", id]), true);\n      _notificationactions2.default.notify(_appsettings.Notifications.INFO, _i18n2.default.t(\"Published survey has been deleted\"));\n    });\n  },\n  tabChanged: function tabChanged() {\n    this.reset();\n  },\n  nextSelectedContactsPage: function nextSelectedContactsPage() {\n    var newPageNo = this.state.get(\"currentSelectedContactsPage\") + 1;\n    this.updateNavigationAndSelectedContactsState(newPageNo);\n  },\n  prevSelectedContactsPage: function prevSelectedContactsPage() {\n    var newPageNo = this.state.get(\"currentSelectedContactsPage\") - 1;\n    this.updateNavigationAndSelectedContactsState(newPageNo);\n  },\n  jumpToSelectedContactsPage: function jumpToSelectedContactsPage(newPageNo) {\n    this.updateNavigationAndSelectedContactsState(newPageNo);\n  },\n  updateNavigationAndSelectedContactsState: function updateNavigationAndSelectedContactsState(pageNo) {\n    var totalPage = Math.ceil(this.allSelectedContacts.size / this.limit),\n        sortedContacts = this.allSelectedContacts.sortBy(function (contact) {\n      return contact.fullName.toLowerCase();\n    }),\n        currentContactsPage = pageNo || totalPage && 0;\n    if (currentContactsPage + 1 > totalPage) {\n      currentContactsPage = totalPage - 1;\n    }\n    this.updateState(this.state.set(\"totalSelectedContactsPage\", totalPage).set(\"currentSelectedContactsPage\", currentContactsPage).set(\"selectedContacts\", sortedContacts.skip(Math.floor(currentContactsPage * this.limit)).take(this.limit)));\n  },\n  updateProviders: function updateProviders(provider, isAdd) {\n    var selectedProviders = this.state.get(\"selectedProviders\");\n    if (isAdd && !selectedProviders.has(provider)) {\n      selectedProviders = selectedProviders.add(provider);\n    }\n    if (!isAdd && selectedProviders.has(provider)) {\n      selectedProviders = selectedProviders.remove(provider);\n    }\n    if (selectedProviders.size == 0) {\n      _notificationactions2.default.notify(_appsettings.Notifications.WARNING, _i18n2.default.t(\"At least one provider is require\"));\n      return;\n    }\n    this.updateState(this.state.set(\"selectedProviders\", selectedProviders));\n  },\n  updateAskLocation: function updateAskLocation() {\n    var locationRequired = this.state.get(\"locationRequired\"),\n        locationRestrict = this.state.get(\"locationRestrict\"),\n        askLocation = this.state.get(\"askLocation\");\n\n    if (locationRequired || locationRestrict) {\n      this.updateState(this.state.set(\"askLocation\", true));\n    } else {\n      this.updateState(this.state.set(\"askLocation\", !askLocation));\n    }\n  },\n  updateSurveyAvailability: function updateSurveyAvailability() {\n    var isSurveyAvailabilitySet = this.state.get(\"isSurveyAvailabilitySet\");\n    this.updateState(this.state.set(\"isSurveyAvailabilitySet\", !isSurveyAvailabilitySet));\n  },\n  updateLocationRequired: function updateLocationRequired() {\n    var locationRequired = this.state.get(\"locationRequired\"),\n        locationRestrict = this.state.get(\"locationRestrict\");\n    if (!locationRequired) {\n      this.updateState(this.state.set(\"askLocation\", true).set(\"locationRequired\", !locationRequired));\n    } else {\n      if (locationRestrict) return;\n      this.updateState(this.state.set(\"locationRequired\", !locationRequired));\n    }\n  },\n  updateSurveyStartDateTime: function updateSurveyStartDateTime(surveyStartDateTime) {\n    this.updateState(this.state.set(\"surveyStartDateTime\", surveyStartDateTime));\n  },\n  updateSurveyEndDateTime: function updateSurveyEndDateTime(surveyEndDateTime) {\n    this.updateState(this.state.set(\"surveyEndDateTime\", surveyEndDateTime));\n  },\n  updateLocationRestrict: function updateLocationRestrict() {\n    var locationRestrict = this.state.get(\"locationRestrict\");\n    if (!locationRestrict) {\n      this.updateState(this.state.set(\"askLocation\", true).set(\"locationRequired\", true).set(\"locationRestrict\", true));\n    } else {\n      this.updateState(this.state.set(\"locationRestrict\", !locationRestrict));\n    }\n  },\n  jumpToResponses: function jumpToResponses(pageNo) {\n    this.updateState(this.state.set(\"currentResponsePage\", pageNo), true);\n    this.updateCurrentResponses();\n  },\n  nextResponses: function nextResponses() {\n    var pageNo = this.state.get(\"currentResponsePage\"),\n        totalPage = this.state.get(\"totalResponsePage\");\n    this.updateState(this.state.set(\"currentResponsePage\", Math.min(pageNo + 1, totalPage)), true);\n    this.updateCurrentResponses();\n  },\n  previousResponses: function previousResponses() {\n    var pageNo = this.state.get(\"currentResponsePage\");\n    this.updateState(this.state.set(\"currentResponsePage\", Math.max(pageNo - 1, 0)), true);\n    this.updateCurrentResponses();\n  },\n  updateCurrentResponses: function updateCurrentResponses() {\n    var pageNo = this.state.get(\"currentResponsePage\"),\n        skip = this.limit * pageNo;\n    this.updateState(this.state.set(\"currentResponses\", this._allResponses.skip(skip).take(this.limit)));\n  },\n  initializeSurveysResponses: function initializeSurveysResponses(id) {\n    var _this8 = this;\n\n    this.ensurePublishedSurvey().then(function () {\n      var publishedSurvey = _this8.state.getIn([\"publishedSurveys\", id]);\n      if (!publishedSurvey) {\n        return;\n      }\n      _this8._allResponses = publishedSurvey.getContacts().sortBy(function (contact) {\n        return contact.obtainedMarks || 0;\n      });\n      _this8._allResponses = _this8._allResponses.reverse();\n      _this8.updateState(_this8.state.set(\"totalResponsePage\", Math.ceil(_this8._allResponses.size / _this8.limit)), true);\n      _this8.updateCurrentResponses();\n    });\n  },\n  resetResponses: function resetResponses() {\n    this._allResponses = _immutable2.default.Map();\n    this.updateState(this.state.set(\"currentResponsePage\", 0).set(\"totalResponsePage\", 0).set(\"currentResponses\", _immutable2.default.Map()));\n  },\n  //location based APIs\n  setCurrentLocation: function setCurrentLocation(currentLocation, supressTrigger) {\n    this.updateState(this.state.set(\"currentLocation\", _immutable2.default.Map(currentLocation)), supressTrigger);\n  },\n  setSelectedLocations: function setSelectedLocations(selectedLocations, supressTrigger, mapFocusLocation) {\n    this.updateState(this.state.set(\"selectedLocations\", _immutable2.default.Set(selectedLocations)), supressTrigger);\n    if (mapFocusLocation) this.setMapCenterLocation(mapFocusLocation);\n  },\n  setMapCenterLocation: function setMapCenterLocation(centerLocation) {\n    var latitude = centerLocation.latitude,\n        longitude = centerLocation.longitude;\n\n    this.updateState(this.state.set(\"mapCenterLocation\", _immutable2.default.Map({ latitude: latitude, longitude: longitude })).set(\"zoomLevel\", 16));\n  },\n  setCurrentFocusedLocation: function setCurrentFocusedLocation(focusLocation, supressTrigger) {\n    var latitude = focusLocation.latitude,\n        longitude = focusLocation.longitude;\n\n    this.updateState(this.state.set(\"currentFocusedLocation\", _immutable2.default.Map({ latitude: latitude, longitude: longitude })), supressTrigger);\n  },\n  getCurrentLocation: function getCurrentLocation() {\n    if (navigator.geolocation) {\n      this.updateState(this.state.set(\"blink\", true));\n      navigator.geolocation.getCurrentPosition(this.currentPosition, this.handleLocationError);\n    } else {\n      this.updateState(this.state.set(\"errorMessage\", _i18n2.default.t(\"Geolocation is not supported by this browser\")));\n    }\n  },\n  handleLocationError: function handleLocationError(err) {\n    var errorMessage = this.decideErrorMessage(err);\n    this.updateState(this.state.set(\"errorMessage\", errorMessage).set(\"blink\", false));\n    _notificationactions2.default.notify(_appsettings.Notifications.LONGINFO, errorMessage);\n  },\n  currentPosition: function currentPosition(position) {\n    var _position$coords = position.coords,\n        latitude = _position$coords.latitude,\n        longitude = _position$coords.longitude;\n\n    this.setCurrentLocation({\n      latitude: latitude,\n      longitude: longitude\n    }, true);\n    this.setMapCenterLocation({\n      latitude: latitude,\n      longitude: longitude\n    }, true);\n    this.updateState(this.state.set(\"blink\", false));\n  },\n  decideErrorMessage: function decideErrorMessage(error) {\n    var code = error.code,\n        errorMessage = void 0;\n\n    switch (code) {\n      case error.PERMISSION_DENIED:\n        errorMessage = _i18n2.default.t(\"Sharing your location is mandatory to proceed, please allow it in your browser settings and then try again\");\n        break;\n      case error.POSITION_UNAVAILABLE:\n        errorMessage = _i18n2.default.t(\"Location details are not available at this moment\");\n        break;\n      case error.TIMEOUT:\n        errorMessage = _i18n2.default.t(\"Location-timeout occured\");\n        break;\n      case error.UNKNOWN_ERROR:\n        errorMessage = _i18n2.default.t(\"Something went wrong\");\n        break;\n    }\n    return errorMessage;\n  },\n  getAddressOfLocation: function getAddressOfLocation(location) {\n    var latitude = location.latitude,\n        longitude = location.longitude;\n\n    return new _bluebird2.default(function (resolve, reject) {\n      _axios2.default.get(\"https://maps.googleapis.com/maps/api/geocode/json?latlng=\" + latitude + \",\" + longitude + \"&key=\" + _appsettings.googleMap.apiKey).then(function (response) {\n        resolve(response);\n      }).catch(function (error) {\n        reject(error);\n      });\n    });\n  },\n  onDistanceChange: function onDistanceChange(locationWithUpdatedDistance) {\n    var selectedLocations = this.state.get(\"selectedLocations\").toJS();\n    var latitude = locationWithUpdatedDistance.latitude,\n        longitude = locationWithUpdatedDistance.longitude,\n        distance = locationWithUpdatedDistance.distance,\n        address = locationWithUpdatedDistance.address;\n\n    selectedLocations = (0, _map3.default)(selectedLocations, function (inst) {\n      return inst.latitude == latitude && inst.longitude == longitude ? {\n        latitude: Number(latitude),\n        longitude: Number(longitude),\n        distance: Number(distance),\n        address: address\n      } : inst;\n    });\n    this.setCurrentFocusedLocation({\n      latitude: locationWithUpdatedDistance.latitude,\n      longitude: locationWithUpdatedDistance.longitude\n    }, true);\n    this.setSelectedLocations(selectedLocations, false, locationWithUpdatedDistance);\n  },\n  onSuggestSelect: function onSuggestSelect(suggestedArea) {\n    var _suggestedArea$locati = suggestedArea.location,\n        latitude = _suggestedArea$locati.lat,\n        longitude = _suggestedArea$locati.lng;\n\n    this.setCurrentLocation({\n      latitude: latitude,\n      longitude: longitude\n    }, true);\n    this.setMapCenterLocation({\n      latitude: latitude,\n      longitude: longitude\n    });\n  },\n  onLocationCardClick: function onLocationCardClick(locToFocus) {\n    this.setCurrentFocusedLocation({\n      latitude: locToFocus.latitude,\n      longitude: locToFocus.longitude\n    }, true);\n    this.setMapCenterLocation({\n      latitude: locToFocus.latitude,\n      longitude: locToFocus.longitude\n    });\n  },\n  oncurrentLocationDragEnd: function oncurrentLocationDragEnd(e) {\n    var latLng = e.latLng;\n\n    this.setCurrentLocation({\n      latitude: latLng.lat(),\n      longitude: latLng.lng()\n    });\n  },\n  onSelectedMarkerDelete: function onSelectedMarkerDelete(location) {\n    var latitude = location.latitude,\n        longitude = location.longitude,\n        selectedLocations = this.state.get(\"selectedLocations\").toJS(),\n        locToRemove = { latitude: latitude, longitude: longitude },\n        updatedSelectedLocations = [];\n\n    selectedLocations.forEach(function (location) {\n      !(location.latitude == locToRemove.latitude && location.longitude == locToRemove.longitude) && updatedSelectedLocations.push(location);\n    });\n    this.setSelectedLocations(updatedSelectedLocations);\n  },\n  onSelectedLocMarkerClick: function onSelectedLocMarkerClick(e) {\n    var latLng = e.latLng,\n        locToFocus = { latitude: latLng.lat(), longitude: latLng.lng() };\n\n    this.setCurrentFocusedLocation({\n      latitude: locToFocus.latitude,\n      longitude: locToFocus.longitude\n    });\n  },\n  onCurrentLocMarkerClick: function onCurrentLocMarkerClick(e) {\n    var _this9 = this;\n\n    var latLng = e.latLng,\n        locToAdd = { latitude: latLng.lat(), longitude: latLng.lng() },\n        selectedLocations = this.state.get(\"selectedLocations\").toJS();\n\n    if (selectedLocations.length == _appsettings.locationSelecteionLimit) {\n      _notificationactions2.default.notify(_appsettings.Notifications.WARNING, _i18n2.default.t(\"Only \" + _appsettings.locationSelecteionLimit + \" locations are allowed.\"));\n      return;\n    }\n    this.getAddressOfLocation(locToAdd).then(function (response) {\n      var results = response.data.results;\n\n      var address = results[0].formatted_address;\n      selectedLocations.push({\n        latitude: locToAdd.latitude,\n        longitude: locToAdd.longitude,\n        address: address,\n        distance: 50\n      });\n      _this9.setSelectedLocations(selectedLocations, true);\n      _this9.setCurrentFocusedLocation(locToAdd, true);\n      _this9.setCurrentLocation({});\n    });\n  }\n});\n\nexports.default = PublishSurveyStore;\n\n/***/ }),\n\n/***/ 388:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = getTimeDifference;\n\nvar _difference_in_minutes = __webpack_require__(809);\n\nvar _difference_in_minutes2 = _interopRequireDefault(_difference_in_minutes);\n\nvar _difference_in_hours = __webpack_require__(812);\n\nvar _difference_in_hours2 = _interopRequireDefault(_difference_in_hours);\n\nvar _difference_in_seconds = __webpack_require__(813);\n\nvar _difference_in_seconds2 = _interopRequireDefault(_difference_in_seconds);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction getTimeDifference(startTime, EndTime) {\n    var Hdiff = (0, _difference_in_hours2.default)(EndTime, startTime),\n        Mdiff = (0, _difference_in_minutes2.default)(EndTime, startTime),\n        Sdiff = (0, _difference_in_seconds2.default)(EndTime, startTime),\n        hours = Hdiff,\n        minutes = Mdiff - Hdiff * 60,\n        seconds = Sdiff - Mdiff * 60;\n    return { hours: hours, minutes: minutes, seconds: seconds };\n}\n\n/***/ }),\n\n/***/ 394:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _refluxCore = __webpack_require__(14);\n\nvar _refluxCore2 = _interopRequireDefault(_refluxCore);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar RecipientsActions = _refluxCore2.default.createActions([\"addRecipient\", \"deleteRecipient\", \"updateRecipient\", \"optionsContactOpen\", \"optionsContactDone\", \"removeGroup\", \"undo\", \"undoRecipent\"]);\n\nexports.default = RecipientsActions;\n\n/***/ }),\n\n/***/ 396:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _merge2 = __webpack_require__(15);\n\nvar _merge3 = _interopRequireDefault(_merge2);\n\nvar _isEqual2 = __webpack_require__(240);\n\nvar _isEqual3 = _interopRequireDefault(_isEqual2);\n\nvar _takeWhile2 = __webpack_require__(359);\n\nvar _takeWhile3 = _interopRequireDefault(_takeWhile2);\n\nvar _cloneDeep2 = __webpack_require__(325);\n\nvar _cloneDeep3 = _interopRequireDefault(_cloneDeep2);\n\nvar _indexOf2 = __webpack_require__(105);\n\nvar _indexOf3 = _interopRequireDefault(_indexOf2);\n\nvar _remove2 = __webpack_require__(160);\n\nvar _remove3 = _interopRequireDefault(_remove2);\n\nvar _forIn2 = __webpack_require__(24);\n\nvar _forIn3 = _interopRequireDefault(_forIn2);\n\nvar _clone2 = __webpack_require__(251);\n\nvar _clone3 = _interopRequireDefault(_clone2);\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createStore = __webpack_require__(22);\n\nvar _createStore2 = _interopRequireDefault(_createStore);\n\nvar _bsonObjectid = __webpack_require__(17);\n\nvar _bsonObjectid2 = _interopRequireDefault(_bsonObjectid);\n\nvar _createHashHistory = __webpack_require__(39);\n\nvar _createHashHistory2 = _interopRequireDefault(_createHashHistory);\n\nvar _useQueries = __webpack_require__(52);\n\nvar _useQueries2 = _interopRequireDefault(_useQueries);\n\nvar _pouchdbCore = __webpack_require__(87);\n\nvar _pouchdbCore2 = _interopRequireDefault(_pouchdbCore);\n\nvar _immutable = __webpack_require__(9);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _notificationactions = __webpack_require__(64);\n\nvar _notificationactions2 = _interopRequireDefault(_notificationactions);\n\nvar _appsettings = __webpack_require__(28);\n\nvar _axios = __webpack_require__(41);\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nvar _platform = __webpack_require__(246);\n\nvar _platform2 = _interopRequireDefault(_platform);\n\nvar _fingerprintjs = __webpack_require__(360);\n\nvar _fingerprintjs2 = _interopRequireDefault(_fingerprintjs);\n\nvar _clientsurveyresponsemodelprovider = __webpack_require__(155);\n\nvar _clientsurveyresponsemodelprovider2 = _interopRequireDefault(_clientsurveyresponsemodelprovider);\n\nvar _i18n = __webpack_require__(8);\n\nvar _i18n2 = _interopRequireDefault(_i18n);\n\nvar _logger = __webpack_require__(6);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _clientsurveyactions = __webpack_require__(397);\n\nvar _clientsurveyactions2 = _interopRequireDefault(_clientsurveyactions);\n\nvar _authactions = __webpack_require__(30);\n\nvar _authactions2 = _interopRequireDefault(_authactions);\n\nvar _surveysactions = __webpack_require__(141);\n\nvar _surveysactions2 = _interopRequireDefault(_surveysactions);\n\nvar _timedifference = __webpack_require__(388);\n\nvar _timedifference2 = _interopRequireDefault(_timedifference);\n\nvar _timetrackeractions = __webpack_require__(163);\n\nvar _timetrackeractions2 = _interopRequireDefault(_timetrackeractions);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar clientSurveyResponseModelProvider = (0, _clientsurveyresponsemodelprovider2.default)(),\n    defaultDB = {\n  _id: null,\n  survey: null,\n  responses: {},\n  currentPageKey: null,\n  nextPageKey: null,\n  prevPageKey: null,\n  currentQuestionKey: null,\n  nextQuestionKey: null,\n  prevQuestionKey: null,\n  callStack: [],\n  jumpToStack: [],\n  ignoredKeys: [],\n  serverStartTime: \"\",\n  timeTrackers: {},\n  clientTime: \"\",\n  surveyStartTime: \"\",\n  completed: false,\n  isCommonLink: false,\n  userProfile: {}\n},\n    defaultTimeTracker = {\n  timeTrail: [],\n  switchTrail: [],\n  finalResponseTime: \"\"\n},\n    ClientSurveyStore = (0, _createStore2.default)({\n  listenables: [_clientsurveyactions2.default, _authactions2.default],\n  currentPageKey: null,\n  nextPageKey: null,\n  prevPageKey: null,\n  currentQuestionKey: null,\n  nextQuestionKey: null,\n  prevQuestionKey: null,\n  _clientSurvey: null,\n  _allPages: _immutable2.default.Map(),\n  _callStack: [],\n  _pageSkipInfo: {},\n  _questionSkipInfo: {},\n  _ignoredKeys: [],\n  _db: null,\n  _jumpToStack: [],\n  //timers\n  timeTrackers: {},\n  clientTime: \"\",\n  surveyStartTime: \"\",\n  _totalSurveyQuestions: null,\n  _isSurveyTimeValid: false,\n  questionTimer: {},\n  init: function init() {\n    this.state = _immutable2.default.Map({\n      pages: _immutable2.default.Map(),\n      responses: _immutable2.default.Map(),\n      startTime: \"\",\n      showNext: false,\n      showPrev: false,\n      showFinish: false,\n      header: {},\n      disabled: _immutable2.default.Map(),\n      percentSurveyCompleted: 0,\n      timeRemain: {},\n      questionTimeRemain: {},\n      showQuestionTimer: false,\n      surveyStarted: false,\n      current: {},\n      last: {},\n      showLoader: true,\n      showMarks: false,\n      attempted: [],\n      totalQuestionCount: null,\n      isTimerEnabled: null,\n      userProfile: null,\n      providers: _immutable2.default.Set(),\n      onSubmission: false,\n      isQuestionTimer: false\n    });\n  },\n  getInitialState: function getInitialState() {\n    return this.state;\n  },\n  processLoggedUser: function processLoggedUser(profile, migrate) {\n    var _this = this;\n\n    this._currentProfile = profile;\n    this._isCommonLink = true;\n    this._migrate = migrate;\n    this._db.allDocs({\n      include_docs: true,\n      key: profile.email\n    }).then(function (result) {\n      if (result.rows.length && result.rows[0].doc) {\n        var doc = result.rows[0].doc;\n\n        _this._URL = doc.URL;\n        _this.routeTo(_this._URL);\n        return null;\n      }\n      _this._URL = \"/run/\" + _this._instanceId + \"/\" + (0, _bsonObjectid2.default)().str;\n      return _this._db.put({\n        _id: profile.email,\n        URL: _this._URL\n      });\n    }).then(function (result) {\n      if (result) {\n        _this.routeTo(_this._URL);\n      }\n    });\n  },\n  userChanged: function userChanged(prevProfile, newProfile, alreadyLogged) {\n    if (!newProfile.isGuest) {\n      _timetrackeractions2.default.recordTime(\"Login Successful\");\n    }\n    this.updateState(this.state.set(\"userProfile\", newProfile.isGuest ? null : newProfile));\n    if (!newProfile.isGuest && this._instanceId && !this._responseId) {\n      this._currentProfile = newProfile;\n      this._isCommonLink = true;\n      //this.routeTo(`/run/${this._instanceId}/${newProfile.email}`);\n      if (!alreadyLogged) {\n        this.processLoggedUser(newProfile);\n      }\n    }\n    //this.loadPublishedSurvey(this._instanceId, this._responseId, newProfile.email);\n  },\n  updateState: function updateState(newState, suppress) {\n    this.state = newState;\n    if (!suppress) {\n      this.trigger(this.state);\n    }\n  },\n  prepareState: function prepareState(isPrev) {\n    if (this._questionDisplay == \"page\") {\n      this.nextPageController();\n    }\n    if (this._questionDisplay == \"question\") {\n      this.nextQuestionController(isPrev);\n    }\n  },\n  nextPageController: function nextPageController() {\n    var _this2 = this;\n\n    //question skip logic\n    var lastKey = this._callStack[this._callStack.length - 1],\n        flag = false;\n    if (lastKey) {\n      var _page = this._allPages.get(lastKey.pageKey);\n      for (var i = 0; i < _page.get(\"count\"); i++) {\n        flag = this.skipQuestion({\n          pageKey: lastKey.pageKey,\n          questionKey: i + 1\n        });\n        if (flag) {\n          break;\n        }\n      }\n    }\n    /***************** ******************/\n    if (this.prevPageKey + 1 != this.currentPageKey) {\n      this.setIgnoreKeys(this.prevPageKey, this.currentPageKey);\n    }\n    if (this._clientSurvey.getSurvey().getRestrictPrevious()) {\n      this.updateState(this.state.set(\"showPrev\", false), true);\n    } else {\n      if (this.currentPageKey != 0) {\n        this.updateState(this.state.set(\"showPrev\", true), true);\n      } else {\n        this.updateState(this.state.set(\"showPrev\", false), true);\n      }\n    }\n    var page = this._allPages.get(this.currentPageKey);\n    if (this._totalPage > this.currentPageKey + 1) {\n      var showNext = true,\n          nextKey = this.currentPageKey + 1;\n      //page skip logic\n      if (page.get(\"page\").getLogic()) {\n        nextKey = page.get(\"page\").getSkipTo();\n        if (nextKey == \"eos\") {\n          showNext = false;\n          this.updateState(this.state.set(\"showFinish\", true), true);\n        } else {\n          nextKey = parseInt(nextKey);\n        }\n      }\n      /***************** ******************/\n      this.nextPageKey = nextKey;\n      this.updateState(this.state.set(\"showNext\", showNext), true);\n    } else {\n      this.updateState(this.state.set(\"showNext\", false).set(\"showFinish\", true), true);\n    }\n    var currentPage = (0, _clone3.default)(this._allPages.get(this.currentPageKey));\n    if (flag) {\n      var newPage = {};\n      for (var _i = 1; _i <= currentPage.get(\"count\"); _i++) {\n        if (_i >= this.currentQuestionKey) {\n          newPage[_i - (this.currentQuestionKey - 1)] = currentPage.getIn([\"questions\", _i]);\n          newPage[_i - (this.currentQuestionKey - 1)].index = _i - (this.currentQuestionKey - 1);\n        } else {\n          var id = currentPage.getIn([\"questions\", _i]).pageItem.getId();\n          this.updateState(this.state.setIn([\"responses\", id], \"\"));\n        }\n      }\n      currentPage = currentPage.delete(\"questions\");\n      (0, _forIn3.default)(newPage, function (value, key) {\n        currentPage = currentPage.setIn([\"questions\", key], value);\n      });\n      currentPage = currentPage.set(\"count\", currentPage.get(\"count\") - (this.currentQuestionKey - 1));\n    }\n    this.updateState(this.state.setIn([\"pages\", \"current\"], currentPage));\n    this.updateLast();\n    this.updateCurrent();\n    this.updateDBSurvey();\n    this.putDBSurvey().then(function (result) {\n      _this2.navigate(_this2._clientSurvey.getSurvey().getId(), {\n        page: page.getIn([\"page\"]).getId()\n      });\n    });\n  },\n  //calculate total questions attempted by user\n  _getSurveyStatus: function _getSurveyStatus() {\n    var currentPageIndex = this.currentPageKey,\n        currentQuestionIndex = this.currentQuestionKey,\n        totalAtteptedQuestions = 0;\n\n    if (!currentPageIndex) {\n      totalAtteptedQuestions = currentQuestionIndex;\n    } else {\n      var index = 0;\n      while (index < currentPageIndex) {\n        totalAtteptedQuestions += this._clientSurvey.getSurvey().getPage(index).getPageItemRefsSize();\n        index++;\n      }\n      totalAtteptedQuestions += currentQuestionIndex;\n    }\n    this._setSurveyProgressPercentages(totalAtteptedQuestions);\n    this.updateState(this.state.set(\"totalQuestionCount\", this._totalSurveyQuestions));\n    this.updateState(this.state.set(\"isTimerEnabled\", this._clientSurvey.getSurvey().getIsTimer()));\n  },\n  //calculate total questions attempted percentage value against total survey questions\n  _setSurveyProgressPercentages: function _setSurveyProgressPercentages(totalAtteptedQuestions) {\n    var percentSurveyCompleted = Math.ceil(totalAtteptedQuestions / this._totalSurveyQuestions * 100);\n    this.updateState(this.state.set(\"percentSurveyCompleted\", percentSurveyCompleted));\n  },\n  nextQuestionController: function nextQuestionController(isPrev) {\n    var _this3 = this;\n\n    //question skip logic\n    var lastKey = this._callStack[this._callStack.length - 1];\n    if (lastKey) {\n      this.skipQuestion(lastKey);\n    }\n    /***************** ******************/\n    var page = this._allPages.get(this.currentPageKey);\n    if (this._clientSurvey.getSurvey().getRestrictPrevious()) {\n      this.updateState(this.state.set(\"showPrev\", false), true);\n    } else {\n      if (this.currentPageKey == 0 && this.currentQuestionKey == 1) {\n        this.updateState(this.state.set(\"showPrev\", false), true);\n      } else {\n        this.updateState(this.state.set(\"showPrev\", true), true);\n      }\n    }\n\n    page = page.setIn([\"questions\"], _immutable2.default.Map()).setIn([\"questions\", \"current\"], this._allPages.getIn([this.currentPageKey, \"questions\", this.currentQuestionKey]));\n    if (this._totalPage > this.currentPageKey + 1) {\n      if (page.get(\"count\") != this.currentQuestionKey) {\n        this.nextPageKey = this.currentPageKey;\n        this.nextQuestionKey = this.currentQuestionKey + 1;\n        this.updateState(this.state.set(\"showNext\", true).set(\"showFinish\", false), true);\n      } else {\n        var _page2 = this._allPages.get(this.currentPageKey),\n            showNext = true,\n            showFinish = false,\n            nextPageKey = this.currentPageKey + 1;\n        //page skip logic\n        if (_page2.get(\"page\").getLogic()) {\n          nextPageKey = _page2.get(\"page\").getSkipTo();\n          if (nextPageKey == \"eos\") {\n            showNext = false;\n            showFinish = true;\n          } else {\n            nextPageKey = parseInt(nextPageKey);\n          }\n        }\n        /***************** ******************/\n        this.nextPageKey = nextPageKey;\n        this.nextQuestionKey = 1;\n        this.updateState(this.state.set(\"showNext\", showNext).set(\"showFinish\", showFinish), true);\n      }\n    } else {\n      if (page.get(\"count\") == this.currentQuestionKey) {\n        this.updateState(this.state.set(\"showNext\", false).set(\"showFinish\", true), true);\n      } else {\n        this.nextPageKey = this.currentPageKey;\n        this.nextQuestionKey = this.currentQuestionKey + 1;\n        this.updateState(this.state.set(\"showNext\", true).set(\"showFinish\", false), true);\n      }\n    }\n    this.updateState(this.state.setIn([\"pages\", 0], page));\n\n    if (!this.surveyStartTime) {\n      var startFrom = this._clientSurvey.getSurvey().getStartFrom();\n      if (startFrom == this.currentPageKey && this._clientSurvey.getSurvey().getIsTimer()) {\n        this.surveyStartTime = new Date().toISOString();\n      }\n    }\n    this.updateTracker(isPrev);\n    this.setQuestionTimer();\n    //To check progress of a candidate\n    this._getSurveyStatus();\n    !isPrev && this.updateLast();\n    this.updateCurrent();\n    this.updateDBSurvey();\n    this.putDBSurvey().then(function (result) {\n      _this3.navigate({\n        question: page.getIn([\"questions\", \"current\"]).pageItem.getId()\n      });\n    });\n  },\n  //skip question for page mode API\n  skipQuestion: function skipQuestion(lastKey) {\n    var _this4 = this;\n\n    var queCount = this._allPages.getIn([lastKey.pageKey, \"count\"]),\n        flag = false,\n        index = this._ignoredKeys.pop();\n    if (this._questionDisplay == \"page\") {\n      for (var i = index || 1; i <= queCount; i++) {\n        var lastPageItem = this._allPages.getIn([lastKey.pageKey, \"questions\", i]).pageItem;\n        if ((lastPageItem.getSubType() == \"yesno\" || lastPageItem.getSubType() == \"multivalue\") && lastPageItem.getLogic()) {\n          var skipToObj = lastPageItem.getSkipTo(),\n              response = this.state.getIn([\"responses\", lastPageItem.getId()]),\n              skipTo = skipToObj.get(response);\n          if (skipTo) {\n            if (!(skipTo.pageNo == \"eos\")) {\n              var _ret = function () {\n                var skipToPage = parseInt(skipTo.pageNo),\n                    skipToQuestion = parseInt(skipTo.questionNo),\n                    pageItem = _this4._allPages.getIn([skipToPage, \"questions\", skipToQuestion]);\n                if (skipToQuestion != pageItem.index) {\n                  _this4._allPages.getIn([skipToPage, \"questions\"]).forEach(function (question, index) {\n                    if (question.index == skipToQuestion) {\n                      skipToQuestion = index;\n                      return false;\n                    }\n                  });\n                }\n                _this4.currentPageKey = skipToPage;\n                _this4.currentQuestionKey = skipToQuestion;\n                flag = true;\n                return \"break\";\n              }();\n\n              if (_ret === \"break\") break;\n            }\n          } else {\n            this.currentQuestionKey = 1;\n          }\n        }\n      }\n    }\n    if (this._questionDisplay == \"question\") {\n      var _lastPageItem = this._allPages.getIn([lastKey.pageKey, \"questions\", lastKey.questionKey]).pageItem;\n      if ((_lastPageItem.getSubType() == \"yesno\" || _lastPageItem.getSubType() == \"multivalue\") && _lastPageItem.getLogic()) {\n        var _skipToObj = _lastPageItem.getSkipTo(),\n            _response = this.state.getIn([\"responses\", _lastPageItem.getId()]),\n            _skipTo = _skipToObj.get(_response);\n        if (_skipTo) {\n          if (!(_skipTo.pageNo == \"eos\")) {\n            var skipToPage = parseInt(_skipTo.pageNo),\n                skipToQuestion = parseInt(_skipTo.questionNo),\n                pageItem = this._allPages.getIn([skipToPage, \"questions\", skipToQuestion]);\n            if (skipToQuestion != pageItem.index) {\n              this._allPages.getIn([skipToPage, \"questions\"]).forEach(function (question, index) {\n                if (question.index == skipToQuestion) {\n                  skipToQuestion = index;\n                  return false;\n                }\n              });\n            }\n            this.currentPageKey = skipToPage;\n            this.currentQuestionKey = skipToQuestion;\n            //this._ignoredKeys.push(parseInt(skipTo.questionNo));\n            flag = true;\n          }\n        }\n      }\n    }\n    return flag;\n  },\n  updateDBSurvey: function updateDBSurvey() {\n    this._dbSurvey.responses = this.state.get(\"responses\").toJS();\n    this._dbSurvey.currentPageKey = this.currentPageKey;\n    this._dbSurvey.nextPageKey = this.nextPageKey;\n    this._dbSurvey.prevPageKey = this.prevPageKey;\n    this._dbSurvey.currentQuestionKey = this.currentQuestionKey;\n    this._dbSurvey.nextQuestionKey = this.nextQuestionKey;\n    this._dbSurvey.prevQuestionKey = this.prevQuestionKey;\n    this._dbSurvey.callStack = this._callStack;\n    this._dbSurvey.jumpToStack = this._jumpToStack;\n    this._dbSurvey.ignoredKeys = this._ignoredKeys;\n    this._dbSurvey.timeTrackers = this.timeTrackers;\n    this._dbSurvey.surveyStartTime = this.surveyStartTime;\n    this._dbSurvey.questionTimer = this.questionTimer;\n  },\n  ignoringQuestionKeys: function ignoringQuestionKeys() {\n    var survey = this._clientSurvey.getSurvey(),\n        pageSize = survey.getPagesSize(),\n        pageSkipper = null,\n        questionSkipper = null;\n    this._ignoredKeys = [];\n    for (var i = 0; i < pageSize; i++) {\n      var _page3 = survey.getPage(i),\n          pageItemRefs = _page3.getPageItemRefs().toArray();\n      for (var j = 0; j < pageItemRefs.length; j++) {\n        var pageItem = survey.getPageItem(pageItemRefs[j]);\n        if (!pageItem.isQuestion) {\n          this._ignoredKeys.push(pageItem.getId());\n          continue;\n        }\n        if (i == pageSkipper) {\n          if (j < questionSkipper) {\n            this._ignoredKeys.push(pageItem.getId());\n          }\n          continue;\n        }\n        if (i < pageSkipper) {\n          this._ignoredKeys.push(pageItem.getId());\n          continue;\n        }\n        if ((pageItem.getSubType() == \"yesno\" || pageItem.getSubType() == \"multivalue\") && pageItem.getLogic()) {\n          var skipToObj = pageItem.getSkipTo(),\n              response = this.state.getIn([\"responses\", pageItem.getId()]),\n              skipTo = skipToObj.get(response);\n          if (skipTo) {\n            pageSkipper = parseInt(skipTo.pageNo);\n            questionSkipper = parseInt(skipTo.questionNo) - 1;\n          }\n        }\n      }\n    }\n  },\n  _getQuestionKeys: function _getQuestionKeys() {\n    var _this5 = this;\n\n    var survey = this._clientSurvey.getSurvey();\n    if (this._questionDisplay == \"all\") {\n      this.ignoringQuestionKeys();\n      var keys = survey.getPageItemsKeys().toArray();\n      if (this._ignoredKeys.length) {\n        (0, _remove3.default)(keys, function (key) {\n          return (0, _indexOf3.default)(_this5._ignoredKeys, key) != -1;\n        });\n      }\n      return keys;\n    }\n    if (this._questionDisplay == \"page\") {\n      var _keys = survey.getPage(this.currentPageKey).getPageItemRefs().toArray();\n      if (this._ignoredKeys.length) {\n        var ignoredKeysIds = [];\n        this._ignoredKeys.forEach(function (index) {\n          ignoredKeysIds.push(_keys[index - 1]);\n        });\n        (0, _remove3.default)(_keys, function (key) {\n          return (0, _indexOf3.default)(ignoredKeysIds, key) != -1;\n        });\n      }\n      return _keys;\n    }\n    if (this._questionDisplay == \"question\") {\n      var pageItem = this._allPages.getIn([this.currentPageKey, \"questions\", this.currentQuestionKey]).pageItem;\n      if (!pageItem.isQuestion) {\n        return [];\n      }\n      return [pageItem.getId()];\n    }\n  },\n  navigate: function navigate(query) {\n    var history = (0, _useQueries2.default)(_createHashHistory2.default)({\n      queryKey: false\n    });\n    history.push({\n      pathname: \"run/\" + this._instanceId + \"/\" + this._responseId,\n      query: query\n    });\n  },\n  next: function next() {\n    var _this6 = this;\n\n    var questionKeys = this._getQuestionKeys();\n    this._clientSurvey.validateSurvey(questionKeys, this.state.get(\"responses\").toJS()).then(function (result) {\n      _this6.updateTracker();\n      _this6._callStack.push({\n        pageKey: _this6.currentPageKey,\n        questionKey: _this6.currentQuestionKey,\n        id: _this6.getIds()\n      });\n      _this6.updateAttempted();\n      _this6.prevPageKey = _this6.currentPageKey;\n      _this6.currentPageKey = _this6.nextPageKey;\n      if (_this6._questionDisplay == \"question\") {\n        _this6.prevQuestionKey = _this6.currentQuestionKey;\n        _this6.currentQuestionKey = _this6.nextQuestionKey;\n      }\n      _this6.prepareState();\n    }).catch(function (err) {\n      if (err) {\n        _notificationactions2.default.notify(_appsettings.Notifications.WARNING, _i18n2.default.t(\"Please fix the errors shown on this page and try again\"));\n      }\n    });\n  },\n  getIds: function getIds() {\n    if (this._questionDisplay == \"page\") {\n      return this._clientSurvey.getSurvey().getPageItemRefs(this.currentPageKey).toArray();\n    }\n    if (this._questionDisplay == \"question\") {\n      return [this._allPages.getIn([this.currentPageKey, \"questions\", this.currentQuestionKey]).pageItem.getId()];\n    }\n  },\n  previous: function previous() {\n    this.updateTracker();\n    var prevKey = this._callStack.pop();\n    this.currentPageKey = prevKey.pageKey;\n    if (this._questionDisplay == \"question\") {\n      this.currentQuestionKey = prevKey.questionKey;\n    }\n    this.prepareState(true);\n  },\n  jumpTo: function jumpTo(obj) {\n    if (!this._clientSurvey.getSurvey().getRestrictPrevious()) {\n      if (!obj) return;\n      if (this._jumpToStack.length < this._callStack.length) {\n        this._jumpToStack = (0, _cloneDeep3.default)(this._callStack);\n      }\n      this._callStack = (0, _takeWhile3.default)(this._jumpToStack, function (element) {\n        return !(0, _isEqual3.default)(element, obj);\n      });\n      this.updateDBSurvey();\n      this.updateTracker();\n      this.updateAttempted();\n      this.currentPageKey = obj.pageKey;\n      if (this._questionDisplay == \"question\") {\n        this.currentQuestionKey = obj.questionKey;\n      }\n      this.prepareState(true);\n    }\n  },\n  updateAttempted: function updateAttempted(supress) {\n    if (this._jumpToStack.length < this._callStack.length) {\n      this._jumpToStack = (0, _cloneDeep3.default)(this._callStack);\n    }\n    this.updateState(this.state.set(\"attempted\", this._jumpToStack), supress);\n  },\n  updateLast: function updateLast() {\n    var last = this.state.get(\"last\");\n    if (last.pageKey > this.currentPageKey) {\n      return;\n    }\n    if (last.pageKey == this.currentPageKey && last.questionKey > this.currentQuestionKey) {\n      return;\n    }\n    this.updateState(this.state.set(\"last\", {\n      pageKey: this.currentPageKey,\n      questionKey: this.currentQuestionKey,\n      id: this.getIds()\n    }));\n  },\n  updateCurrent: function updateCurrent() {\n    this.updateState(this.state.set(\"current\", {\n      pageKey: this.currentPageKey,\n      questionKey: this.currentQuestionKey,\n      id: this.getIds()\n    }));\n  },\n  setIgnoreKeys: function setIgnoreKeys(prevPageKey, currentPageKey) {\n    var _this7 = this;\n\n    for (var i = prevPageKey + 1; i < currentPageKey; i++) {\n      var _page4 = this._allPages.getIn([i, \"page\"]),\n          pageItemRefs = _page4.getPageItemRefs().toArray();\n      (0, _forIn3.default)(pageItemRefs, function (key) {\n        _this7.updateState(_this7.state.setIn([\"responses\", key], \"\"));\n      });\n    }\n  },\n  getDataFromServer: function getDataFromServer() {\n    return (0, _axios2.default)({\n      url: \"/survey\",\n      method: \"POST\",\n      data: {\n        responseId: this._responseId,\n        isCommonLink: this._isCommonLink,\n        instanceId: this._instanceId,\n        userProfile: this._currentProfile,\n        migrate: this._migrate\n      }\n    });\n  },\n  getProfileDetails: function getProfileDetails() {\n    if (!this._currentProfile) {\n      return Promise.resolve({ isProfileAbsent: true });\n    }\n    return this._db.allDocs({\n      include_docs: true,\n      key: this._currentProfile.email\n    });\n  },\n  validateUserTimeWithSurveyTime: function validateUserTimeWithSurveyTime(instanceId, responseId) {\n    var _this8 = this;\n\n    var userRequestDateTime = new Date().toISOString(),\n        invitationLink = responseId ? responseId : instanceId;\n    if (responseId) {\n      return this.getProfileDetails().then(function (result) {\n        if (!result.isProfileAbsent && result.rows.length) {\n          var _result$rows = _slicedToArray(result.rows, 1),\n              doc = _result$rows[0].doc,\n              urlArray = doc.URL.split(\"/\"),\n              resID = urlArray[urlArray.length - 1];\n\n          if (resID == responseId) {\n            return Promise.resolve({ isSurveyAvailable: true });\n          }\n        }\n        return _this8._db.allDocs({\n          include_docs: true,\n          key: responseId\n        });\n      }).then(function (result) {\n        if (result.isSurveyAvailable) {\n          return Promise.resolve();\n        }\n        if (result.rows.length && result.rows[0].doc) {\n          return Promise.resolve();\n        }\n        return (0, _axios2.default)({\n          url: \"/validatesurveytime\",\n          method: \"POST\",\n          data: {\n            responseId: responseId,\n            invitationLink: invitationLink,\n            instanceId: instanceId,\n            userRequestDateTime: userRequestDateTime\n          }\n        });\n      });\n    }\n    //call to server\n    return (0, _axios2.default)({\n      url: \"/validatesurveytime\",\n      method: \"POST\",\n      data: {\n        responseId: responseId,\n        invitationLink: invitationLink,\n        instanceId: instanceId,\n        userRequestDateTime: userRequestDateTime\n      }\n    });\n  },\n  loadPublishedSurvey: function loadPublishedSurvey(instanceId, responseId) {\n    var _this9 = this;\n\n    this._db = new _pouchdbCore2.default(instanceId);\n    this._responseId = responseId;\n    this._instanceId = instanceId;\n    return this.validateUserTimeWithSurveyTime(instanceId, responseId).then(function (response) {\n      var data = response && response.data || {},\n          error = data.error,\n          isBefore = data.isBefore,\n          surveyStartDateTime = data.surveyStartDateTime,\n          surveyEndDateTime = data.surveyEndDateTime,\n          isQuiz = data.isQuiz,\n          surveyTitle = data.surveyTitle;\n\n      if (error) {\n        return _this9._db.allDocs({ key: \"surveyavaililitymessage\", include_docs: true }).then(function (result) {\n          var doc = result.rows[0] ? result.rows[0].doc : {};\n          doc = (0, _merge3.default)(doc, {\n            _id: \"surveyavaililitymessage\",\n            isBefore: isBefore,\n            surveyStartDateTime: surveyStartDateTime,\n            surveyEndDateTime: surveyEndDateTime,\n            isQuiz: isQuiz,\n            surveyTitle: surveyTitle\n          });\n          return _this9._db.put(doc);\n        }).then(function () {\n          _this9.routeTo(\"surveyavailibility/\" + _this9._instanceId);\n          return Promise.reject({ skip: true });\n        }).catch();\n      }\n      if (!_this9._responseId && _this9._instanceId) {\n        _this9.routeTo(\"message/login/\" + _this9._instanceId);\n        return Promise.reject({ skip: true });\n      }\n      return _this9._db.allDocs({\n        include_docs: true,\n        key: _this9._responseId\n      });\n    }).then(function (result) {\n      if (result.rows.length && result.rows[0].doc) {\n        _this9._dbSurvey = result.rows[0].doc;\n        if (_this9._dbSurvey.completed) {\n          return Promise.reject({ completed: true });\n        }\n        if (_this9._dbSurvey.migrated) {\n          return Promise.reject({ migrated: true });\n        }\n        _notificationactions2.default.notify(_appsettings.Notifications.INFO, _i18n2.default.t(\"We have restored your previous session\"), _i18n2.default.t(\"Got it\"), null);\n        return { data: result.rows[0].doc.survey, isLocal: true };\n      }\n      return _this9.getDataFromServer();\n    }).then(function (response) {\n      if (!response.isLocal) {\n        var data = response.data;\n\n        if (data.error) {\n          return Promise.reject(data);\n        }\n        _this9._dbSurvey = (0, _merge3.default)(defaultDB, {\n          _id: _this9._responseId,\n          survey: data.survey,\n          serverStartTime: data.startTime,\n          clientTime: new Date().toISOString(),\n          isCommonLink: _this9._isCommonLink,\n          userProfile: _this9._currentProfile,\n          otherDetails: data.otherDetails\n        });\n        return _this9.putDBSurvey();\n      }\n      return {};\n    }).then(function (result) {\n      var askLocation = void 0,\n          locationRequired = void 0,\n          isGeolocationAvailable = _this9._dbSurvey.isGeolocationAvailable;\n      if (_this9._dbSurvey.otherDetails) {\n        askLocation = _this9._dbSurvey.otherDetails.askLocation;\n        locationRequired = _this9._dbSurvey.otherDetails.locationRequired;\n      }\n      _this9._clientSurvey = clientSurveyResponseModelProvider.getClientSurveyResponseModel({\n        responseId: _this9._responseId,\n        survey: _this9._dbSurvey.survey\n      });\n      _this9._clientSurvey = _this9._clientSurvey.setSessionStartTime(_this9._dbSurvey.serverStartTime);\n      //get the total survey question count for progress bar calculation\n      _this9._totalSurveyQuestions = _this9._clientSurvey.getSurvey().getPageItemsSize();\n      _this9.updateState(_this9.state.set(\"showLoader\", false).set(\"showMarks\", _this9._dbSurvey.survey.showMarksRunMode));\n      if ((askLocation || locationRequired) && !isGeolocationAvailable) {\n        //route to location detection.\n        _this9.routeTo({\n          pathname: \"geolocation/\" + _this9._instanceId + \"/\" + _this9._responseId\n        });\n        return;\n      }\n      _this9.prepareSurveyStart(!result.rev);\n    }).catch(function (err) {\n      if (err.skip) {\n        return;\n      }\n      if (err.response) {\n        err = err.response.data;\n      }\n      if (err.completed) {\n        _this9.routeToCompleted();\n        return;\n      }\n      if (err.migrated) {\n        _this9.routeTo({ pathname: \"message/migration/failed\" });\n        return;\n      }\n      if (err.status == 208) {\n        _this9.routeTo({ pathname: \"message/migration/\" + _this9._instanceId });\n        return;\n      }\n      throw err;\n    });\n  },\n  setSurveyTimer: function setSurveyTimer() {\n    if (this.surveyStartTime && Object.keys(this.questionTimer).length == 0) {\n      var currentSurvey = this._clientSurvey.getSurvey(),\n          timeSpent = (0, _timedifference2.default)(this.surveyStartTime, new Date().toISOString()),\n          timeRemain = (0, _timedifference2.default)(new Date(0, 0, 0, timeSpent.hours, timeSpent.minutes, timeSpent.seconds).toISOString(), new Date(0, 0, 0, 0, currentSurvey.getTimeout(), 0).toISOString());\n      this.updateState(this.state.set(\"timeRemain\", timeRemain).set(\"surveyStarted\", true));\n    } else {\n      this.updateQuestionTimer();\n    }\n  },\n  timeConverterFromSeconds: function timeConverterFromSeconds(sec) {\n    var hours = Math.floor(sec / (60 * 60)),\n        minutes = Math.floor(sec / 60) - 60 * hours,\n        seconds = sec - (hours * 60 * 60 + minutes * 60);\n    return { hours: hours, minutes: minutes, seconds: seconds };\n  },\n  setQuestionTimer: function setQuestionTimer() {\n    var page = this._allPages.get(this.currentPageKey);\n    if (!page) {\n      return;\n    }\n    var id = page.getIn([\"questions\", this.currentQuestionKey]).pageItem.getId();\n    if (this.questionTimer[id]) {\n      this.updateState(this.state.set(\"questionTimeRemain\", this.questionTimer[id].remaining).set(\"isQuestionTimer\", true));\n    }\n  },\n  decreseTimeToSec: function decreseTimeToSec(time) {\n    var hours = time.hours,\n        minutes = time.minutes,\n        seconds = time.seconds;\n\n    if (seconds) {\n      return { hours: hours, minutes: minutes, seconds: seconds - 1 };\n    }\n    if (minutes) {\n      return { hours: hours, minutes: minutes - 1, seconds: 59 };\n    }\n    if (hours) {\n      return { hours: hours - 1, minutes: 59, seconds: 59 };\n    }\n    return { hours: 0, minutes: 0, seconds: 0 };\n  },\n  handleProceed: function handleProceed() {\n    if (this.state.get(\"showFinish\")) {\n      if (!this.state.get(\"onSubmission\")) {\n        this.finish();\n      }\n    } else {\n      this.next();\n    }\n  },\n  updateQuestionTimer: function updateQuestionTimer() {\n    var page = this._allPages.get(this.currentPageKey);\n    if (!page) {\n      return;\n    }\n    var id = page.getIn([\"questions\", this.currentQuestionKey]).pageItem.getId();\n    if (this.questionTimer[id]) {\n      var remaining = this.questionTimer[id].remaining;\n\n      remaining = this.decreseTimeToSec(remaining);\n      this._dbSurvey.questionTimer[id].remaining = remaining;\n      var _remaining = remaining,\n          hours = _remaining.hours,\n          minutes = _remaining.minutes,\n          seconds = _remaining.seconds;\n\n      if (seconds == 0 && minutes == 0 && hours == 0) {\n        this.handleProceed();\n      }\n      this.putDBSurvey();\n      this.updateState(this.state.set(\"questionTimeRemain\", remaining).set(\"showQuestionTimer\", true).set(\"isQuestionTimer\", true));\n    } else {\n      this.updateState(this.state.set(\"showQuestionTimer\", false).set(\"isQuestionTimer\", true));\n    }\n  },\n  stopTest: function stopTest() {\n    this.reset();\n    _surveysactions2.default.stopTest(this._clientSurvey);\n  },\n  addResponseToServer: function addResponseToServer() {\n    return (0, _axios2.default)({\n      url: \"/response\",\n      method: \"POST\",\n      data: {\n        surveyresponse: this._clientSurvey.toJS(),\n        instanceId: this._instanceId,\n        isCommonLink: this._dbSurvey.isCommonLink,\n        userProfile: this._dbSurvey.userProfile\n      }\n    });\n  },\n  putDBSurvey: function putDBSurvey() {\n    var _this10 = this;\n\n    return this._db.put(this._dbSurvey).then(function (result) {\n      _this10._dbSurvey._rev = result.rev;\n      return result;\n    }).catch(function (err) {\n      if (err.status == 409) {\n        return _this10._db.allDocs({\n          include_docs: true,\n          key: _this10._responseId\n        }).then(function (result) {\n          var _result$rows2 = _slicedToArray(result.rows, 1),\n              doc = _result$rows2[0].doc;\n\n          if (doc._rev != _this10._dbSurvey._rev) {\n            _this10._dbSurvey = doc;\n          }\n        });\n      }\n      throw err;\n    });\n  },\n  finish: function finish() {\n    var _this11 = this;\n\n    //console.debug(this._dbSurvey);\n    if (this._dbSurvey.completed) {\n      this.routeToCompleted();\n      return;\n    }\n    if (this._dbSurvey.migrated) {\n      this.routeTo({ pathname: \"message/migration/failed\" });\n      return;\n    }\n    this.updateState(this.state.set(\"onSubmission\", true));\n    var questionKeys = this._getQuestionKeys();\n    this._clientSurvey.validateSurvey(questionKeys, this.state.get(\"responses\").toJS()).then(function (result) {\n      _this11.updateTracker();\n      _logger2.default.log(result);\n      _this11._dbSurvey.responses = _this11.state.get(\"responses\").toJS();\n      _this11.putDBSurvey().then(function (result) {\n        _this11._clientSurvey = _this11._clientSurvey.setPublishedInstanceId(_this11._instanceId).setResponses(_this11.state.get(\"responses\").toJS()).setName(_this11._dbSurvey.userProfile.name).setEmail(_this11._dbSurvey.userProfile.email).setSurveyArriveTime(_this11._dbSurvey.clientTime).setClientTracker(_this11._dbSurvey.timeTrackers).setClientStartTime(_this11.surveyStartTime).setClientEndTime(new Date().toISOString()).setUserLocations(_this11._dbSurvey.userLocations);\n        new _fingerprintjs2.default().get(function (result, components) {\n          _logger2.default.log(result); //a hash, representing your device fingerprint\n          _logger2.default.log(components); // an array of FP components\n          var componentObj = {};\n          (0, _forIn3.default)(components, function (component) {\n            componentObj[component.key] = component.value;\n          });\n          var serverResult = {};\n          _this11._clientSurvey = _this11._clientSurvey.setDeviceId(result).setDeviceScreenResolution(componentObj[\"resolution\"]).setDeviceTimeZoneOffset(componentObj[\"timezone_offset\"]).setOS(_platform2.default.os.toString()).setBrowserName(_platform2.default.name).setBrowserVersion(_platform2.default.version);\n          return _this11.addResponseToServer().then(function (response) {\n            var data = response.data;\n\n            if (data.error) {\n              return Promise.reject(data);\n            }\n            serverResult = data;\n            _this11.reset();\n            _this11._dbSurvey.completed = true;\n            _this11._dbSurvey.surveyResult = serverResult;\n            return _this11.putDBSurvey();\n          }).then(function () {\n            _this11.updateState(_this11.state.set(\"onSubmission\", false));\n            if (_this11._dbSurvey.surveyResult.totalMarks) _this11.routeTo({\n              pathname: \"message/acknowledgement/\" + _this11._instanceId + \"/\" + _this11._responseId\n            });else _this11.routeTo({ pathname: \"message/thankyou\" });\n          }).catch(function (err) {\n            _this11.updateState(_this11.state.set(\"onSubmission\", false));\n            if (err.response) {\n              err = err.response.data;\n            }\n            if (err.status == 409) {\n              _this11._dbSurvey.completed = true;\n              return _this11.putDBSurvey().then(function () {\n                _this11.routeTo({\n                  pathname: \"message/acknowledgement/\" + _this11._instanceId + \"/\" + _this11._responseId\n                });\n              });\n            }\n            if (err.status == 422) {\n              _this11._dbSurvey.migrated = true;\n              return _this11.putDBSurvey().then(function () {\n                _this11.routeTo({ pathname: \"message/migration/failed\" });\n              });\n            }\n            throw err;\n          });\n        });\n      });\n    });\n  },\n  routeToThankYou: function routeToThankYou(result) {\n    var history = (0, _useQueries2.default)(_createHashHistory2.default)({\n      queryKey: false\n    });\n    history.push({\n      pathname: \"/thankyou\",\n      query: {\n        total: result.totalMarks,\n        obtained: result.obtainedMarks,\n        pass: result.pass\n      }\n    });\n  },\n  routeTo: function routeTo(path) {\n    var history = (0, _useQueries2.default)(_createHashHistory2.default)({\n      queryKey: false\n    });\n    history.push(path);\n  },\n  routeToCompleted: function routeToCompleted(result) {\n    var history = (0, _useQueries2.default)(_createHashHistory2.default)({\n      queryKey: false\n    });\n    history.push(\"message/completed\");\n  },\n  initQuestionTimer: function initQuestionTimer(survey, isLocal) {\n    var _this12 = this;\n\n    if (isLocal && this._dbSurvey.questionTimer && Object.keys(this._dbSurvey.questionTimer).length) {\n      this.questionTimer = this._dbSurvey.questionTimer;\n      return;\n    }\n    if (!survey) {\n      return;\n    }\n    var keys = survey.getPageItemsKeys().toArray();\n    keys.forEach(function (pageItemID) {\n      var pageItem = survey.getPageItem(pageItemID);\n      if (pageItem.getType() == \"question\") {\n        var timeout = pageItem.getQuestionTimeOut();\n        if (timeout) {\n          _this12.questionTimer[pageItem.getId()] = {\n            total: timeout,\n            remaining: _this12.timeConverterFromSeconds(timeout * 60)\n          };\n        }\n      }\n    });\n    this._dbSurvey.questionTimer = this.questionTimer;\n  },\n  prepareSurveyStart: function prepareSurveyStart(isLocal) {\n    var _this13 = this;\n\n    _timetrackeractions2.default.updateTimerInformation(isLocal, this.state.get(\"userProfile\"));\n    this.reset(true);\n    var survey = this._clientSurvey.getSurvey();\n    this._questionDisplay = survey.getQuestionDisplay();\n    var title = survey.getTitle(),\n        description = survey.getDescription(),\n        showHeader = survey.getShowHeader(),\n        header = { title: title, description: description, showHeader: showHeader },\n        pageSize = survey.getPagesSize();\n    this.updateState(this.state.set(\"header\", header).set(\"responses\", _immutable2.default.Map(this._dbSurvey.responses)), true);\n    this.initQuestionTimer(survey, isLocal);\n\n    var _loop = function _loop(i) {\n      var page = survey.getPage(i),\n          count = 0,\n          decorator = 0,\n          canSkipIf = [];\n      _this13._allPages = _this13._allPages.setIn([i, \"page\"], page);\n      //page skip info logic\n      if (_this13._questionDisplay == \"all\") {\n        (0, _forIn3.default)(_this13._pageSkipInfo, function (value, key) {\n          if ((0, _indexOf3.default)(value, i) != -1) {\n            canSkipIf.push(parseInt(key) + 1);\n          }\n        });\n        _this13._allPages = _this13._allPages.setIn([i, \"info\"], !!canSkipIf.length && \"You can ignore this page if you attempted questions in page number \" + canSkipIf);\n      }\n      /***************** ******************/\n      //Page logic checker\n      if (page.getLogic()) {\n        _this13._pageSkipInfo[i] = [];\n        var skipTo = page.getSkipTo() == \"eos\" ? pageSize : parseInt(page.getSkipTo());\n        for (var j = i + 1; j < skipTo; j++) {\n          _this13._pageSkipInfo[\"\" + i].push(j);\n        }\n      }\n      /***************** ******************/\n      page.getPageItemRefs().toArray().forEach(function (key, index) {\n        var pageItem = survey.getPageItem(key),\n            canSkipIf = {},\n            disableIf = {};\n        if (pageItem.isQuestion) {\n          count++;\n        } else {\n          decorator++;\n        }\n        //question disable logic\n        (0, _forIn3.default)(_this13._questionSkipInfo, function (value, key) {\n          (0, _forIn3.default)(value, function (value, questionNo) {\n            (0, _forIn3.default)(value.skipTo.toJS(), function (skipObj, choice) {\n              if (skipObj.pageNo != \"eos\") {\n                if (parseInt(key) == i) {\n                  if (parseInt(questionNo) < count + decorator) {\n                    if (parseInt(skipObj.pageNo) == i) {\n                      if (parseInt(skipObj.questionNo) > count) {\n                        disableIf[value.id] = disableIf[value.id] || [];\n                        disableIf[value.id].push(choice);\n                      }\n                    }\n                    if (parseInt(skipObj.pageNo) > i) {\n                      disableIf[value.id] = disableIf[value.id] || [];\n                      disableIf[value.id].push(choice);\n                    }\n                  }\n                }\n                if (parseInt(key) < i) {\n                  if (parseInt(skipObj.pageNo) == i) {\n                    if (parseInt(skipObj.questionNo) > count) {\n                      disableIf[value.id] = disableIf[value.id] || [];\n                      disableIf[value.id].push(choice);\n                    }\n                  }\n                  if (parseInt(skipObj.pageNo) > i) {\n                    disableIf[value.id] = disableIf[value.id] || [];\n                    disableIf[value.id].push(choice);\n                  }\n                }\n              } else {\n                disableIf[value.id] = disableIf[value.id] || [];\n                disableIf[value.id].push(choice);\n              }\n            });\n          });\n        });\n        /***************** ******************/\n        if (pageItem.isQuestion) {\n          _this13._allPages = _this13._allPages.setIn([i, \"questions\", count + decorator], {\n            index: count,\n            pageItem: pageItem,\n            disableIf: disableIf\n          }).setIn([i, \"count\"], count + decorator);\n        } else {\n          _this13._allPages = _this13._allPages.setIn([i, \"questions\", count + decorator], {\n            pageItem: pageItem,\n            disableIf: disableIf\n          }).setIn([i, \"count\"], count + decorator);\n          _this13._ignoredKeys.push(count + decorator);\n        }\n        //Question logic checker\n        if ((pageItem.getSubType() == \"yesno\" || pageItem.getSubType() == \"multivalue\") && pageItem.getLogic()) {\n          _this13._questionSkipInfo[i] = _this13._questionSkipInfo[i] || {};\n          _this13._questionSkipInfo[i][count] = {\n            skipTo: pageItem.getSkipTo(),\n            id: pageItem.getId()\n          };\n        }\n        /***************** ******************/\n      });\n    };\n\n    for (var i = 0; i < pageSize; i++) {\n      _loop(i);\n    }\n    this._totalPage = this._allPages.size;\n    if (this._questionDisplay == \"all\") {\n      this.updateState(this.state.set(\"pages\", this._allPages).set(\"showFinish\", true));\n      this.navigateToAll(survey.getId());\n    }\n    if (this._questionDisplay == \"page\") {\n      this.currentPageKey = this._dbSurvey.currentPageKey || 0;\n      if (this._totalPage > this.currentPageKey + 1) {\n        var _page5 = this._allPages.get(this.currentPageKey),\n            showNext = true,\n            nextKey = this.currentPageKey + 1;\n        //page skip logic\n        if (_page5.get(\"page\").getLogic()) {\n          nextKey = _page5.get(\"page\").getSkipTo();\n          if (nextKey == \"eos\") {\n            showNext = false;\n            this.updateState(this.state.set(\"showFinish\", true), true);\n          } else {\n            nextKey = parseInt(nextKey);\n          }\n        }\n        /***************** ******************/\n        this.nextPageKey = nextKey;\n        this.updateState(this.state.set(\"showNext\", showNext), true);\n      } else {\n        this.updateState(this.state.set(\"showFinish\", true), true);\n      }\n      this.updateState(this.state.setIn([\"pages\", \"current\"], this._allPages.get(this.currentPageKey)).set(\"showPrev\", this._clientSurvey.getSurvey().getRestrictPrevious() ? false : !!this.currentPageKey));\n      if (isLocal) {\n        this.nextPageKey = this._dbSurvey.nextPageKey || this.nextPageKey;\n        this.prevPageKey = this._dbSurvey.prevPageKey || this.prevPageKey;\n        this._callStack = this._dbSurvey.callStack;\n        this._ignoredKeys = this._dbSurvey.ignoredKeys;\n        this.navigate({ page: page.getIn([\"page\"]).getId() });\n      } else {\n        this.navigateToAll(survey.getId());\n      }\n    }\n    if (this._questionDisplay == \"question\") {\n      this.currentPageKey = this._dbSurvey.currentPageKey || 0;\n      this.currentQuestionKey = this._dbSurvey.currentQuestionKey || 1;\n      var _page6 = this._allPages.get(this.currentPageKey);\n      _page6 = _page6.setIn([\"questions\"], _immutable2.default.Map()).setIn([\"questions\", \"current\"], this._allPages.getIn([this.currentPageKey, \"questions\", this.currentQuestionKey]));\n      if (this._totalPage > this.currentPageKey + 1) {\n        if (_page6.get(\"count\") != this.currentQuestionKey) {\n          this.nextPageKey = this.currentPageKey;\n          this.nextQuestionKey = this.currentQuestionKey + 1;\n          this.updateState(this.state.set(\"showNext\", true), true);\n        } else {\n          var _showNext = true,\n              showFinish = false,\n              nextPageKey = this.currentPageKey + 1;\n          //page skip logic\n          if (_page6.get(\"page\").getLogic()) {\n            nextPageKey = _page6.get(\"page\").getSkipTo();\n            if (nextPageKey == \"eos\") {\n              _showNext = false;\n              showFinish = true;\n            } else {\n              nextPageKey = parseInt(nextPageKey);\n            }\n          }\n          /***************** ******************/\n          this.nextPageKey = nextPageKey;\n          this.nextQuestionKey = this.currentQuestionKey + 1;\n          this.updateState(this.state.set(\"showNext\", _showNext).set(\"showFinish\", showFinish), true);\n        }\n      } else {\n        if (_page6.get(\"count\") == this.currentQuestionKey) {\n          this.updateState(this.state.set(\"showFinish\", true), true);\n        } else {\n          this.nextPageKey = this.currentPageKey;\n          this.nextQuestionKey = this.currentQuestionKey + 1;\n          this.updateState(this.state.set(\"showNext\", true), true);\n        }\n      }\n      this.updateState(this.state.setIn([\"pages\", 0], _page6).set(\"showPrev\", this._clientSurvey.getSurvey().getRestrictPrevious() ? false : !!this.currentPageKey || this._dbSurvey.currentQuestionKey && this._dbSurvey.currentQuestionKey != 1));\n      if (isLocal) {\n        this.nextPageKey = this._dbSurvey.nextPageKey || this.nextPageKey;\n        this.prevPageKey = this._dbSurvey.prevPageKey || this.prevPageKey;\n        this.nextQuestionKey = this._dbSurvey.nextQuestionKey || this.nextQuestionKey;\n        this.prevQuestionKey = this._dbSurvey.prevQuestionKey || this.prevQuestionKey;\n        this._callStack = this._dbSurvey.callStack || [];\n        this._jumpToStack = this._dbSurvey.jumpToStack || [];\n        this._ignoredKeys = this._dbSurvey.ignoredKeys;\n        this.timeTrackers = this._dbSurvey.timeTrackers;\n        this.clientTime = this._dbSurvey.clientTime;\n        this.surveyStartTime = this._dbSurvey.surveyStartTime;\n        this.updateAttempted(true);\n        this.updateLast();\n        this.updateCurrent();\n        this._getSurveyStatus();\n        this.setQuestionTimer();\n        this.navigate({\n          question: _page6.getIn([\"questions\", \"current\"]).pageItem.getId()\n        });\n      } else {\n        var startFrom = survey.getStartFrom();\n        if (startFrom == this.currentPageKey && survey.getIsTimer()) {\n          this.surveyStartTime = new Date().toISOString();\n          this.updateTracker();\n        }\n        this._getSurveyStatus();\n        this.updateLast();\n        this.updateCurrent();\n        this.updateDBSurvey();\n        this.setQuestionTimer();\n        this.navigateToAll(this._questionDisplay);\n      }\n    }\n  },\n  updateTracker: function updateTracker(isPrev) {\n    if (!this.surveyStartTime) return;\n    var page = this._allPages.get(this.currentPageKey),\n        id = page.getIn([\"questions\", this.currentQuestionKey]).pageItem.getId();\n    if (isPrev) {\n      if (!this.timeTrackers[id]) return;\n    }\n    if (!this.timeTrackers[id]) this.timeTrackers[id] = {\n      timeTrail: [],\n      switchTrail: [],\n      finalResponseTime: \"\"\n    };\n    this.timeTrackers[id].timeTrail.push(new Date().toISOString());\n  },\n  reset: function reset(supress) {\n    this._allPages = _immutable2.default.Map();\n    this._callStack = [];\n    this._pageSkipInfo = {};\n    this._questionSkipInfo = {};\n    this._ignoredKeys = [];\n    this._allPages = _immutable2.default.Map();\n    this.currentPageKey = null;\n    this.currentQuestionKey = null;\n    this.prevPageKey = null;\n    this.prevQuestionKey = null;\n    this.nextPageKey = null;\n    this.nextQuestionKey = null;\n    this.updateState(this.state.set(\"pages\", _immutable2.default.Map()).set(\"showNext\", false).set(\"showPrev\", false).set(\"showFinish\", false).set(\"header\", {}).set(\"questionTimer\", _immutable2.default.Map()).set(\"responses\", _immutable2.default.Map()), supress);\n  },\n  setResponse: function setResponse(questionId, response) {\n    //this._clientSurvey = this._clientSurvey.setResponse(questionId, response)\n    if (this.timeTrackers[questionId]) {\n      this.timeTrackers[questionId].finalResponseTime = new Date().toISOString();\n    }\n    this.updateState(this.state.setIn([\"responses\", questionId], response));\n    this.checkEOS(questionId);\n  },\n  checkEOS: function checkEOS(questionId) {\n    if (this._questionDisplay == \"all\") {\n      return;\n    }\n    var pageItem = null;\n    if (this._questionDisplay == \"question\") {\n      pageItem = this._allPages.getIn([this.currentPageKey, \"questions\", this.currentQuestionKey]).pageItem;\n    }\n    if (this._questionDisplay == \"page\") {\n      pageItem = this._clientSurvey.getSurvey().getPageItem(questionId);\n    }\n    if (pageItem) {\n      if ((pageItem.getSubType() == \"yesno\" || pageItem.getSubType() == \"multivalue\") && pageItem.getLogic()) {\n        var skipToObj = pageItem.getSkipTo(),\n            response = this.state.getIn([\"responses\", pageItem.getId()]),\n            skipTo = skipToObj.get(response);\n        if (skipTo) {\n          if (skipTo.pageNo == \"eos\") {\n            this.updateState(this.state.set(\"showNext\", false).set(\"showFinish\", true));\n          } else {\n            var showNext = true,\n                showFinish = false;\n            if (this._totalPage == this.currentPageKey + 1) {\n              showNext = false;\n              showFinish = true;\n              if (this._questionDisplay == \"question\") {\n                var _count = this._allPages.getIn([this.currentPageKey, \"count\"]);\n                if (_count > this.currentQuestionKey) {\n                  showNext = true;\n                  showFinish = false;\n                }\n              }\n            }\n            this.updateState(this.state.set(\"showNext\", showNext).set(\"showFinish\", showFinish));\n          }\n        } else {\n          var _showNext2 = true,\n              _showFinish = false;\n          if (this._totalPage == this.currentPageKey + 1) {\n            _showNext2 = false;\n            _showFinish = true;\n            if (this._questionDisplay == \"question\") {\n              var _count2 = this._allPages.getIn([this.currentPageKey, \"count\"]);\n              if (_count2 > this.currentQuestionKey) {\n                _showNext2 = true;\n                _showFinish = false;\n              }\n            }\n          }\n          this.updateState(this.state.set(\"showNext\", _showNext2).set(\"showFinish\", _showFinish));\n        }\n      }\n    }\n  },\n  setDisable: function setDisable(key, disable) {\n    this.updateState(this.state.setIn([\"disabled\", key], disable));\n  },\n  navigateToAll: function navigateToAll() {\n    var history = (0, _useQueries2.default)(_createHashHistory2.default)({\n      queryKey: false\n    });\n    history.push(\"run/\" + this._instanceId + \"/\" + this._responseId);\n  },\n  tabSwitch: function tabSwitch(visibilityStatus) {\n    if (!this._clientSurvey) return;\n    var page = this._allPages.get(this.currentPageKey),\n        id = page.getIn([\"questions\", this.currentQuestionKey]).pageItem.getId();\n    if (this.timeTrackers[id]) this.timeTrackers[id].switchTrail.push(new Date().toISOString());\n  },\n  setInstanceId: function setInstanceId(instanceId) {\n    var _this14 = this;\n\n    if (this._instanceId && this._providers && this._currentProfile) {\n      return;\n    }\n    if (instanceId) {\n      (0, _axios2.default)({\n        url: \"/providers\",\n        method: \"POST\",\n        data: { instanceId: instanceId }\n      }).then(function (response) {\n        _this14._db = new _pouchdbCore2.default(instanceId);\n        _this14._instanceId = instanceId;\n        _this14._providers = response.data.providers;\n        _this14.updateState(_this14.state.set(\"providers\", _immutable2.default.Set(response.data.providers)));\n      });\n    }\n  }\n});\n\nexports.default = ClientSurveyStore;\n\n/***/ }),\n\n/***/ 397:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _refluxCore = __webpack_require__(14);\n\nvar _refluxCore2 = _interopRequireDefault(_refluxCore);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ClientSurveyActions = _refluxCore2.default.createActions([\"loadPublishedSurvey\", \"setResponse\", \"next\", \"previous\", \"finish\", \"setDisable\", \"tabSwitch\", \"setSurveyTimer\", \"setInstanceId\", \"jumpTo\", \"processLoggedUser\"]);\n\nexports.default = ClientSurveyActions;\n\n/***/ }),\n\n/***/ 40:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _dependable = __webpack_require__(647);\n\nvar _dependable2 = _interopRequireDefault(_dependable);\n\nvar _preferenceprovider = __webpack_require__(206);\n\nvar _preferenceprovider2 = _interopRequireDefault(_preferenceprovider);\n\nvar _paginatorprovider = __webpack_require__(314);\n\nvar _paginatorprovider2 = _interopRequireDefault(_paginatorprovider);\n\nvar _groupspaginatorprovider = __webpack_require__(315);\n\nvar _groupspaginatorprovider2 = _interopRequireDefault(_groupspaginatorprovider);\n\nvar _responsespaginatorprovider = __webpack_require__(316);\n\nvar _responsespaginatorprovider2 = _interopRequireDefault(_responsespaginatorprovider);\n\nvar _errorsprovider = __webpack_require__(322);\n\nvar _errorsprovider2 = _interopRequireDefault(_errorsprovider);\n\nvar _timetrackerprovider = __webpack_require__(208);\n\nvar _timetrackerprovider2 = _interopRequireDefault(_timetrackerprovider);\n\nvar _groupsandrecipientsprovider = __webpack_require__(209);\n\nvar _groupsandrecipientsprovider2 = _interopRequireDefault(_groupsandrecipientsprovider);\n\nvar _contextprovider = __webpack_require__(328);\n\nvar _contextprovider2 = _interopRequireDefault(_contextprovider);\n\nvar _contactbuilder = __webpack_require__(165);\n\nvar _contactbuilder2 = _interopRequireDefault(_contactbuilder);\n\nvar _surveymodelbuilder = __webpack_require__(54);\n\nvar _surveymodelbuilder2 = _interopRequireDefault(_surveymodelbuilder);\n\nvar _publishedsurveymodelprovider = __webpack_require__(130);\n\nvar _publishedsurveymodelprovider2 = _interopRequireDefault(_publishedsurveymodelprovider);\n\nvar _publishedsurveyprovider = __webpack_require__(352);\n\nvar _publishedsurveyprovider2 = _interopRequireDefault(_publishedsurveyprovider);\n\nvar _imageprovider = __webpack_require__(354);\n\nvar _imageprovider2 = _interopRequireDefault(_imageprovider);\n\nvar _publishedsurveyresponseprovider = __webpack_require__(355);\n\nvar _publishedsurveyresponseprovider2 = _interopRequireDefault(_publishedsurveyresponseprovider);\n\nvar _surveydataprovider = __webpack_require__(166);\n\nvar _surveydataprovider2 = _interopRequireDefault(_surveydataprovider);\n\nvar _guestprofile = __webpack_require__(356);\n\nvar _guestprofile2 = _interopRequireDefault(_guestprofile);\n\nvar _surveysstore = __webpack_require__(383);\n\nvar _surveysstore2 = _interopRequireDefault(_surveysstore);\n\nvar _surveyrunnerstore = __webpack_require__(411);\n\nvar _surveyrunnerstore2 = _interopRequireDefault(_surveyrunnerstore);\n\nvar _groupsandrecipientsstore = __webpack_require__(432);\n\nvar _groupsandrecipientsstore2 = _interopRequireDefault(_groupsandrecipientsstore);\n\nvar _publishsurveystore = __webpack_require__(386);\n\nvar _publishsurveystore2 = _interopRequireDefault(_publishsurveystore);\n\nvar _appstore = __webpack_require__(129);\n\nvar _appstore2 = _interopRequireDefault(_appstore);\n\nvar _analysisstore = __webpack_require__(436);\n\nvar _analysisstore2 = _interopRequireDefault(_analysisstore);\n\nvar _imagesstore = __webpack_require__(413);\n\nvar _imagesstore2 = _interopRequireDefault(_imagesstore);\n\nvar _clientsurveystore = __webpack_require__(396);\n\nvar _clientsurveystore2 = _interopRequireDefault(_clientsurveystore);\n\nvar _errorstore = __webpack_require__(814);\n\nvar _errorstore2 = _interopRequireDefault(_errorstore);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar contactBuilder = (0, _contactbuilder2.default)(),\n    surveyModelBuilder = (0, _surveymodelbuilder2.default)(),\n    publishedSurveyModelProvider = (0, _publishedsurveymodelprovider2.default)(),\n    DIService = {\n  container: _dependable2.default.container(),\n  initialize: function initialize() {\n    this.container.register(\"UserContext\", _contextprovider2.default.getUserContext(_guestprofile2.default));\n    this.container.register(\"GroupsAndRecipientsProvider\", new _groupsandrecipientsprovider2.default(this.container, contactBuilder));\n    this.container.register(\"SurveyDataProvider\", new _surveydataprovider2.default(this.container, surveyModelBuilder));\n    this.container.register(\"PublishedSurveyProvider\", new _publishedsurveyprovider2.default(this.container, publishedSurveyModelProvider));\n    this.container.register(\"PreferenceProvider\", new _preferenceprovider2.default(this.container));\n    this.container.register(\"ErrorProvider\", new _errorsprovider2.default(this.container));\n    this.container.register(\"TimeTrackerProvider\", new _timetrackerprovider2.default(this.container));\n    this.container.register(\"PublishedSurveyResponeseProvider\", new _publishedsurveyresponseprovider2.default(this.container));\n    this.container.register(\"ImageProvider\", new _imageprovider2.default(this.container));\n    this.container.register(\"DefaultPaginatorProvider\", new _paginatorprovider2.default(this.container));\n    this.container.register(\"GroupsPaginatorProvider\", new _groupspaginatorprovider2.default(this.container));\n    this.container.register(\"ResponsesPaginatorProvider\", new _responsespaginatorprovider2.default(this.container));\n    return this.container;\n  }\n};\n\nexports.default = DIService.initialize();\n\n/***/ }),\n\n/***/ 403:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _timetrackeractions = __webpack_require__(163);\n\nvar _timetrackeractions2 = _interopRequireDefault(_timetrackeractions);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nmodule.exports = function (Component) {\n  return function (_React$Component) {\n    _inherits(Wrapped, _React$Component);\n\n    function Wrapped(props) {\n      _classCallCheck(this, Wrapped);\n\n      var _this = _possibleConstructorReturn(this, (Wrapped.__proto__ || Object.getPrototypeOf(Wrapped)).call(this, props));\n\n      _this.constructor.displayName = \"Tracker_\" + Component.displayName;\n      return _this;\n    }\n\n    _createClass(Wrapped, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        _timetrackeractions2.default.recordTime(Component.displayName);\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        return _react2.default.createElement(Component, this.props);\n      }\n    }]);\n\n    return Wrapped;\n  }(_react2.default.Component);\n};\n\n/***/ }),\n\n/***/ 411:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _merge2 = __webpack_require__(15);\n\nvar _merge3 = _interopRequireDefault(_merge2);\n\nvar _indexOf2 = __webpack_require__(105);\n\nvar _indexOf3 = _interopRequireDefault(_indexOf2);\n\nvar _remove2 = __webpack_require__(160);\n\nvar _remove3 = _interopRequireDefault(_remove2);\n\nvar _forIn2 = __webpack_require__(24);\n\nvar _forIn3 = _interopRequireDefault(_forIn2);\n\nvar _clone2 = __webpack_require__(251);\n\nvar _clone3 = _interopRequireDefault(_clone2);\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createStore = __webpack_require__(22);\n\nvar _createStore2 = _interopRequireDefault(_createStore);\n\nvar _createHashHistory = __webpack_require__(39);\n\nvar _createHashHistory2 = _interopRequireDefault(_createHashHistory);\n\nvar _useQueries = __webpack_require__(52);\n\nvar _useQueries2 = _interopRequireDefault(_useQueries);\n\nvar _reactRouter = __webpack_require__(154);\n\nvar _immutable = __webpack_require__(9);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _i18n = __webpack_require__(8);\n\nvar _i18n2 = _interopRequireDefault(_i18n);\n\nvar _surveyrunnermodelprovider = __webpack_require__(788);\n\nvar _surveyrunnermodelprovider2 = _interopRequireDefault(_surveyrunnermodelprovider);\n\nvar _surveysactions = __webpack_require__(141);\n\nvar _surveysactions2 = _interopRequireDefault(_surveysactions);\n\nvar _surveyrunneractions = __webpack_require__(245);\n\nvar _surveyrunneractions2 = _interopRequireDefault(_surveyrunneractions);\n\nvar _logger = __webpack_require__(6);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _pouchdbCore = __webpack_require__(87);\n\nvar _pouchdbCore2 = _interopRequireDefault(_pouchdbCore);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar surveyRunnerModelProvider = (0, _surveyrunnermodelprovider2.default)(),\n    SurveyRunnerStore = (0, _createStore2.default)({\n  listenables: [_surveyrunneractions2.default],\n  currentPageKey: null,\n  nextPageKey: null,\n  prevPageKey: null,\n  currentQuestionKey: null,\n  nextQuestionKey: null,\n  prevQuestionKey: null,\n  _SurveyRunner: null,\n  _allPages: _immutable2.default.Map(),\n  _callStack: [],\n  _pageSkipInfo: {},\n  _questionSkipInfo: {},\n  _ignoredKeys: [],\n  init: function init() {\n    this.state = _immutable2.default.Map({\n      pages: _immutable2.default.Map(),\n      responses: _immutable2.default.Map(),\n      showNext: false,\n      showPrev: false,\n      showFinish: false,\n      header: {},\n      disabled: _immutable2.default.Map()\n    });\n  },\n  getInitialState: function getInitialState() {\n    return this.state;\n  },\n  updateState: function updateState(newState, suppress) {\n    this.state = newState;\n    if (!suppress) {\n      this.trigger(this.state);\n    }\n  },\n  prepareState: function prepareState() {\n    if (this._questionDisplay == \"page\") {\n      this.nextPageController();\n    }\n    if (this._questionDisplay == \"question\") {\n      this.nextQuestionController();\n    }\n  },\n  nextPageController: function nextPageController() {\n    //question skip logic\n    var lastKey = this._callStack[this._callStack.length - 1],\n        flag = false;\n    //Logger.debug(\"lastKey\", lastKey);\n    if (lastKey) {\n      var _page = this._allPages.get(lastKey.pageKey);\n      for (var i = 0; i < _page.get(\"count\"); i++) {\n        flag = this.skipQuestion({\n          pageKey: lastKey.pageKey,\n          questionKey: i + 1\n        });\n        if (flag) {\n          break;\n        }\n      }\n    }\n    /***************** ******************/\n    if (this.prevPageKey + 1 != this.currentPageKey) {\n      this.setIgnoreKeys(this.prevPageKey, this.currentPageKey);\n    }\n    if (this.currentPageKey != 0) {\n      this.updateState(this.state.set(\"showPrev\", true), true);\n    } else {\n      this.updateState(this.state.set(\"showPrev\", false), true);\n    }\n    var page = this._allPages.get(this.currentPageKey);\n    if (this._totalPage > this.currentPageKey + 1) {\n      var showNext = true,\n          nextKey = this.currentPageKey + 1;\n      //page skip logic\n      if (page.get(\"page\").getLogic()) {\n        nextKey = page.get(\"page\").getSkipTo();\n        if (nextKey == \"eos\") {\n          showNext = false;\n          this.updateState(this.state.set(\"showFinish\", true), true);\n        } else {\n          nextKey = parseInt(nextKey);\n        }\n      }\n      /***************** ******************/\n      this.nextPageKey = nextKey;\n      this.updateState(this.state.set(\"showNext\", showNext), true);\n    } else {\n      this.updateState(this.state.set(\"showNext\", false).set(\"showFinish\", true), true);\n    }\n    var currentPage = (0, _clone3.default)(this._allPages.get(this.currentPageKey));\n    if (flag) {\n      var newPage = {};\n      for (var _i = 1; _i <= currentPage.get(\"count\"); _i++) {\n        if (_i >= this.currentQuestionKey) {\n          newPage[_i - (this.currentQuestionKey - 1)] = currentPage.getIn([\"questions\", _i]);\n          newPage[_i - (this.currentQuestionKey - 1)].index = _i - (this.currentQuestionKey - 1);\n        } else {\n          var id = currentPage.getIn([\"questions\", _i]).pageItem.getId();\n          this.updateState(this.state.setIn([\"responses\", id], \"\"));\n        }\n      }\n      currentPage = currentPage.delete(\"questions\");\n      (0, _forIn3.default)(newPage, function (value, key) {\n        currentPage = currentPage.setIn([\"questions\", key], value);\n      });\n      currentPage = currentPage.set(\"count\", currentPage.get(\"count\") - (this.currentQuestionKey - 1));\n    }\n    this.updateState(this.state.setIn([\"pages\", \"current\"], currentPage));\n    this.navigate(this._SurveyRunner.getSurvey().getId(), {\n      page: page.getIn([\"page\"]).getId()\n    });\n  },\n  nextQuestionController: function nextQuestionController() {\n    //question skip logic\n    var lastKey = this._callStack[this._callStack.length - 1];\n    if (lastKey) {\n      this.skipQuestion(lastKey);\n    }\n    /***************** ******************/\n    var page = this._allPages.get(this.currentPageKey);\n    if (this.currentPageKey == 0 && this.currentQuestionKey == 1) {\n      this.updateState(this.state.set(\"showPrev\", false), true);\n    } else {\n      this.updateState(this.state.set(\"showPrev\", true), true);\n    }\n    page = page.setIn([\"questions\"], _immutable2.default.Map()).setIn([\"questions\", \"current\"], this._allPages.getIn([this.currentPageKey, \"questions\", this.currentQuestionKey]));\n    if (this._totalPage > this.currentPageKey + 1) {\n      if (page.get(\"count\") != this.currentQuestionKey) {\n        this.nextPageKey = this.currentPageKey;\n        this.nextQuestionKey = this.currentQuestionKey + 1;\n        this.updateState(this.state.set(\"showNext\", true).set(\"showFinish\", false), true);\n      } else {\n        var _page2 = this._allPages.get(this.currentPageKey),\n            showNext = true,\n            showFinish = false,\n            nextPageKey = this.currentPageKey + 1;\n        //page skip logic\n        if (_page2.get(\"page\").getLogic()) {\n          nextPageKey = _page2.get(\"page\").getSkipTo();\n          if (nextPageKey == \"eos\") {\n            showNext = false;\n            showFinish = true;\n          } else {\n            nextPageKey = parseInt(nextPageKey);\n          }\n        }\n        /***************** ******************/\n        this.nextPageKey = nextPageKey;\n        this.nextQuestionKey = 1;\n        this.updateState(this.state.set(\"showNext\", showNext).set(\"showFinish\", showFinish), true);\n      }\n    } else {\n      if (page.get(\"count\") == this.currentQuestionKey) {\n        this.updateState(this.state.set(\"showNext\", false).set(\"showFinish\", true), true);\n      } else {\n        this.nextPageKey = this.currentPageKey;\n        this.nextQuestionKey = this.currentQuestionKey + 1;\n        this.updateState(this.state.set(\"showNext\", true).set(\"showFinish\", false), true);\n      }\n    }\n    this.updateState(this.state.setIn([\"pages\", 0], page));\n    this.navigate(this._SurveyRunner.getSurvey().getId(), {\n      question: page.getIn([\"questions\", \"current\"]).pageItem.getId()\n    });\n  },\n  //skip question for page mode API\n  skipQuestion: function skipQuestion(lastKey) {\n    var _this = this;\n\n    var queCount = this._allPages.getIn([lastKey.pageKey, \"count\"]),\n        flag = false,\n        index = this._ignoredKeys.pop();\n    if (this._questionDisplay == \"page\") {\n      for (var i = index || 1; i <= queCount; i++) {\n        var lastPageItem = this._allPages.getIn([lastKey.pageKey, \"questions\", i]).pageItem;\n        if ((lastPageItem.getSubType() == \"yesno\" || lastPageItem.getSubType() == \"multivalue\") && lastPageItem.getLogic()) {\n          var skipToObj = lastPageItem.getSkipTo(),\n              response = this.state.getIn([\"responses\", lastPageItem.getId()]),\n              skipTo = skipToObj.get(response);\n          if (skipTo) {\n            if (!(skipTo.pageNo == \"eos\")) {\n              var _ret = function () {\n                var skipToPage = parseInt(skipTo.pageNo),\n                    skipToQuestion = parseInt(skipTo.questionNo),\n                    pageItem = _this._allPages.getIn([skipToPage, \"questions\", skipToQuestion]);\n                if (skipToQuestion != pageItem.index) {\n                  _this._allPages.getIn([skipToPage, \"questions\"]).forEach(function (question, index) {\n                    if (question.index == skipToQuestion) {\n                      skipToQuestion = index;\n                      return false;\n                    }\n                  });\n                }\n                _this.currentPageKey = skipToPage;\n                _this.currentQuestionKey = skipToQuestion;\n                flag = true;\n                return \"break\";\n              }();\n\n              if (_ret === \"break\") break;\n            }\n          } else {\n            this.currentQuestionKey = 1;\n          }\n        }\n      }\n    }\n    if (this._questionDisplay == \"question\") {\n      var _lastPageItem = this._allPages.getIn([lastKey.pageKey, \"questions\", lastKey.questionKey]).pageItem;\n      if ((_lastPageItem.getSubType() == \"yesno\" || _lastPageItem.getSubType() == \"multivalue\") && _lastPageItem.getLogic()) {\n        var _skipToObj = _lastPageItem.getSkipTo(),\n            _response = this.state.getIn([\"responses\", _lastPageItem.getId()]),\n            _skipTo = _skipToObj.get(_response);\n        if (_skipTo) {\n          if (!(_skipTo.pageNo == \"eos\")) {\n            var skipToPage = parseInt(_skipTo.pageNo),\n                skipToQuestion = parseInt(_skipTo.questionNo),\n                pageItem = this._allPages.getIn([skipToPage, \"questions\", skipToQuestion]);\n            if (skipToQuestion != pageItem.index) {\n              this._allPages.getIn([skipToPage, \"questions\"]).forEach(function (question, index) {\n                if (question.index == skipToQuestion) {\n                  skipToQuestion = index;\n                  return false;\n                }\n              });\n            }\n            this.currentPageKey = skipToPage;\n            this.currentQuestionKey = skipToQuestion;\n            //this._ignoredKeys.push(parseInt(skipTo.questionNo));\n            flag = true;\n          }\n        }\n      }\n    }\n    return flag;\n  },\n  ignoringQuestionKeys: function ignoringQuestionKeys() {\n    var survey = this._SurveyRunner.getSurvey(),\n        pageSize = survey.getPagesSize(),\n        pageSkipper = null,\n        questionSkipper = null;\n    this._ignoredKeys = [];\n    for (var i = 0; i < pageSize; i++) {\n      var page = survey.getPage(i),\n          pageItemRefs = page.getPageItemRefs().toArray();\n      for (var j = 0; j < pageItemRefs.length; j++) {\n        var pageItem = survey.getPageItem(pageItemRefs[j]);\n        if (!pageItem.isQuestion) {\n          this._ignoredKeys.push(pageItem.getId());\n          continue;\n        }\n        if (i == pageSkipper) {\n          if (j < questionSkipper) {\n            this._ignoredKeys.push(pageItem.getId());\n          }\n          continue;\n        }\n        if (i < pageSkipper) {\n          this._ignoredKeys.push(pageItem.getId());\n          continue;\n        }\n        if ((pageItem.getSubType() == \"yesno\" || pageItem.getSubType() == \"multivalue\") && pageItem.getLogic()) {\n          var skipToObj = pageItem.getSkipTo(),\n              response = this.state.getIn([\"responses\", pageItem.getId()]),\n              skipTo = skipToObj.get(response);\n          if (skipTo) {\n            pageSkipper = parseInt(skipTo.pageNo);\n            questionSkipper = parseInt(skipTo.questionNo) - 1;\n          }\n        }\n      }\n    }\n  },\n  _getQuestionKeys: function _getQuestionKeys() {\n    var _this2 = this;\n\n    var survey = this._SurveyRunner.getSurvey();\n    if (this._questionDisplay == \"all\") {\n      this.ignoringQuestionKeys();\n      var keys = survey.getPageItemsKeys().toArray();\n      if (this._ignoredKeys.length) {\n        (0, _remove3.default)(keys, function (key) {\n          return (0, _indexOf3.default)(_this2._ignoredKeys, key) != -1;\n        });\n      }\n      return keys;\n    }\n    if (this._questionDisplay == \"page\") {\n      var _keys = survey.getPage(this.currentPageKey).getPageItemRefs().toArray();\n      if (this._ignoredKeys.length) {\n        var ignoredKeysIds = [];\n        this._ignoredKeys.forEach(function (index) {\n          ignoredKeysIds.push(_keys[index - 1]);\n        });\n        (0, _remove3.default)(_keys, function (key) {\n          return (0, _indexOf3.default)(ignoredKeysIds, key) != -1;\n        });\n      }\n      return _keys;\n    }\n    if (this._questionDisplay == \"question\") {\n      var pageItem = this._allPages.getIn([this.currentPageKey, \"questions\", this.currentQuestionKey]).pageItem;\n      if (!pageItem.isQuestion) {\n        return [];\n      }\n      return [pageItem.getId()];\n    }\n  },\n  navigate: function navigate(surveyId, query) {\n    var history = (0, _useQueries2.default)(_createHashHistory2.default)({\n      queryKey: false\n    });\n    history.push({ pathname: \"/surveys/design/test/\" + surveyId, query: query });\n  },\n  next: function next() {\n    var _this3 = this;\n\n    var questionKeys = this._getQuestionKeys();\n    this._SurveyRunner.validateSurvey(questionKeys).then(function (result) {\n      _this3._callStack.push({\n        pageKey: _this3.currentPageKey,\n        questionKey: _this3.currentQuestionKey\n      });\n      _this3.prevPageKey = _this3.currentPageKey;\n      _this3.currentPageKey = _this3.nextPageKey;\n      if (_this3._questionDisplay == \"question\") {\n        _this3.prevQuestionKey = _this3.currentQuestionKey;\n        _this3.currentQuestionKey = _this3.nextQuestionKey;\n      }\n      _this3.prepareState();\n    });\n  },\n  previous: function previous() {\n    var prevKey = this._callStack.pop();\n    this.currentPageKey = prevKey.pageKey;\n    if (this._questionDisplay == \"question\") {\n      this.currentQuestionKey = prevKey.questionKey;\n    }\n    this.prepareState();\n  },\n  setIgnoreKeys: function setIgnoreKeys(prevPageKey, currentPageKey) {\n    var _this4 = this;\n\n    for (var i = prevPageKey + 1; i < currentPageKey; i++) {\n      var page = this._allPages.getIn([i, \"page\"]),\n          pageItemRefs = page.getPageItemRefs().toArray();\n      (0, _forIn3.default)(pageItemRefs, function (key) {\n        _this4.updateState(_this4.state.setIn([\"responses\", key], \"\"));\n      });\n    }\n  },\n  startTest: function startTest(survey) {\n    this._SurveyRunner = surveyRunnerModelProvider.getSurveyRunnerModel(survey);\n    this.prepareSurveyStart();\n  },\n  stopTest: function stopTest() {\n    this.reset();\n    _surveysactions2.default.stopTest(this._SurveyRunner);\n  },\n  finish: function finish() {\n    var _this5 = this;\n\n    var questionKeys = this._getQuestionKeys();\n    this._SurveyRunner.validateSurvey(questionKeys).then(function (result) {\n      _this5._SurveyRunner = _this5._SurveyRunner.setStatus(\"completed\");\n      _this5._db = new _pouchdbCore2.default(\"test\");\n      _this5._db.allDocs({\n        key: \"data\",\n        include_docs: true\n      }).then(function (result) {\n        var _result$rows = _slicedToArray(result.rows, 1),\n            row = _result$rows[0],\n            doc = row ? row.doc : {},\n            survey = _this5._SurveyRunner.getSurvey();\n\n        doc = (0, _merge3.default)(doc, {\n          _id: \"data\",\n          survey: survey.toJS(),\n          responses: _this5.state.get(\"responses\").toJS(),\n          userProfile: {},\n          isCommonLink: false,\n          isSurvey: survey.getSurveyMarksTotal(),\n          isTestMode: true,\n          completed: true\n        });\n        return _this5._db.put(doc);\n      }).then(function () {\n        _this5._SurveyRunner.getSurvey().getSurveyMarksTotal() ? _this5.routeTo({\n          pathname: \"message/acknowledgement/test/data\"\n        }) : _this5.routeTo({\n          pathname: \"message/thankyou\",\n          query: { testMode: true }\n        });\n      }).catch(function (err) {\n        _logger2.default.log(err);\n        _this5.routeTo({\n          pathname: \"message/thankyou\",\n          query: { testMode: true }\n        });\n      });\n    });\n  },\n  routeTo: function routeTo(path) {\n    var history = (0, _useQueries2.default)(_createHashHistory2.default)({\n      queryKey: false\n    });\n    history.push(path);\n  },\n  prepareSurveyStart: function prepareSurveyStart() {\n    var _this6 = this;\n\n    this.reset(true);\n    var survey = this._SurveyRunner.getSurvey();\n    this._questionDisplay = survey.getQuestionDisplay();\n    var title = survey.getTitle(),\n        description = survey.getDescription(),\n        showHeader = survey.getShowHeader(),\n        header = { title: title, description: description, showHeader: showHeader },\n        pageSize = survey.getPagesSize();\n    this.updateState(this.state.set(\"header\", header), true);\n\n    var _loop = function _loop(i) {\n      var page = survey.getPage(i),\n          count = 0,\n          decorator = 0,\n          canSkipIf = [];\n      _this6._allPages = _this6._allPages.setIn([i, \"page\"], page);\n      //page skip info logic\n      if (_this6._questionDisplay == \"all\") {\n        (0, _forIn3.default)(_this6._pageSkipInfo, function (value, key) {\n          if ((0, _indexOf3.default)(value, i) != -1) {\n            canSkipIf.push(parseInt(key) + 1);\n          }\n        });\n        _this6._allPages = _this6._allPages.setIn([i, \"info\"], !!canSkipIf.length && \"You can ignore this page if you attempted questions in page number \" + canSkipIf);\n      }\n      /***************** ******************/\n      //Page logic checker\n      if (page.getLogic()) {\n        _this6._pageSkipInfo[i] = [];\n        var skipTo = page.getSkipTo() == \"eos\" ? pageSize : parseInt(page.getSkipTo());\n        for (var j = i + 1; j < skipTo; j++) {\n          _this6._pageSkipInfo[\"\" + i].push(j);\n        }\n      }\n      /***************** ******************/\n      page.getPageItemRefs().toArray().forEach(function (key, index) {\n        var pageItem = survey.getPageItem(key),\n            canSkipIf = {},\n            disableIf = {};\n        if (pageItem.isQuestion) {\n          count++;\n        } else {\n          decorator++;\n        }\n        //question disable logic\n        (0, _forIn3.default)(_this6._questionSkipInfo, function (value, key) {\n          (0, _forIn3.default)(value, function (value, questionNo) {\n            (0, _forIn3.default)(value.skipTo.toJS(), function (skipObj, choice) {\n              if (skipObj.pageNo != \"eos\") {\n                if (parseInt(key) == i) {\n                  if (parseInt(questionNo) < count + decorator) {\n                    if (parseInt(skipObj.pageNo) == i) {\n                      if (parseInt(skipObj.questionNo) > count) {\n                        disableIf[value.id] = disableIf[value.id] || [];\n                        disableIf[value.id].push(choice);\n                      }\n                    }\n                    if (parseInt(skipObj.pageNo) > i) {\n                      disableIf[value.id] = disableIf[value.id] || [];\n                      disableIf[value.id].push(choice);\n                    }\n                  }\n                }\n                if (parseInt(key) < i) {\n                  if (parseInt(skipObj.pageNo) == i) {\n                    if (parseInt(skipObj.questionNo) > count) {\n                      disableIf[value.id] = disableIf[value.id] || [];\n                      disableIf[value.id].push(choice);\n                    }\n                  }\n                  if (parseInt(skipObj.pageNo) > i) {\n                    disableIf[value.id] = disableIf[value.id] || [];\n                    disableIf[value.id].push(choice);\n                  }\n                }\n              } else {\n                disableIf[value.id] = disableIf[value.id] || [];\n                disableIf[value.id].push(choice);\n              }\n            });\n          });\n        });\n        /***************** ******************/\n        if (pageItem.isQuestion) {\n          _this6._allPages = _this6._allPages.setIn([i, \"questions\", count + decorator], {\n            index: count,\n            pageItem: pageItem,\n            disableIf: disableIf\n          }).setIn([i, \"count\"], count + decorator);\n        } else {\n          _this6._allPages = _this6._allPages.setIn([i, \"questions\", count + decorator], {\n            pageItem: pageItem,\n            disableIf: disableIf\n          }).setIn([i, \"count\"], count + decorator);\n          _this6._ignoredKeys.push(count + decorator);\n        }\n        //Question logic checker\n        if ((pageItem.getSubType() == \"yesno\" || pageItem.getSubType() == \"multivalue\") && pageItem.getLogic()) {\n          _this6._questionSkipInfo[i] = _this6._questionSkipInfo[i] || {};\n          _this6._questionSkipInfo[i][count] = {\n            skipTo: pageItem.getSkipTo(),\n            id: pageItem.getId()\n          };\n        }\n        /***************** ******************/\n      });\n    };\n\n    for (var i = 0; i < pageSize; i++) {\n      _loop(i);\n    }\n    this._totalPage = this._allPages.size;\n    if (this._questionDisplay == \"all\") {\n      this.updateState(this.state.set(\"pages\", this._allPages).set(\"showFinish\", true));\n      this.navigateToAll(survey.getId());\n    }\n    if (this._questionDisplay == \"page\") {\n      this.currentPageKey = 0;\n      if (this._totalPage > 1) {\n        var _page3 = this._allPages.get(this.currentPageKey),\n            showNext = true,\n            nextKey = this.currentPageKey + 1;\n        //page skip logic\n        if (_page3.get(\"page\").getLogic()) {\n          nextKey = _page3.get(\"page\").getSkipTo();\n          if (nextKey == \"eos\") {\n            showNext = false;\n            this.updateState(this.state.set(\"showFinish\", true), true);\n          } else {\n            nextKey = parseInt(nextKey);\n          }\n        }\n        /***************** ******************/\n        this.nextPageKey = nextKey;\n        this.updateState(this.state.set(\"showNext\", showNext), true);\n      } else {\n        this.updateState(this.state.set(\"showFinish\", true), true);\n      }\n      this.updateState(this.state.setIn([\"pages\", \"current\"], this._allPages.get(this.currentPageKey)));\n      this.navigateToAll(survey.getId());\n    }\n    if (this._questionDisplay == \"question\") {\n      this.currentPageKey = 0;\n      this.currentQuestionKey = 1;\n      var _page4 = this._allPages.get(this.currentPageKey);\n      _page4 = _page4.setIn([\"questions\"], _immutable2.default.Map()).setIn([\"questions\", \"current\"], this._allPages.getIn([this.currentPageKey, \"questions\", this.currentQuestionKey]));\n      if (this._totalPage > 1) {\n        if (_page4.get(\"count\") != this.currentQuestionKey) {\n          this.nextPageKey = this.currentPageKey;\n          this.nextQuestionKey = this.currentQuestionKey + 1;\n          this.updateState(this.state.set(\"showNext\", true), true);\n        } else {\n          var _showNext = true,\n              showFinish = false,\n              nextPageKey = this.currentPageKey + 1;\n          //page skip logic\n          if (_page4.get(\"page\").getLogic()) {\n            nextPageKey = _page4.get(\"page\").getSkipTo();\n            if (nextPageKey == \"eos\") {\n              _showNext = false;\n              showFinish = true;\n            } else {\n              nextPageKey = parseInt(nextPageKey);\n            }\n          }\n          /***************** ******************/\n          this.nextPageKey = nextPageKey;\n          this.nextQuestionKey = 1;\n          this.updateState(this.state.set(\"showNext\", _showNext).set(\"showFinish\", showFinish), true);\n        }\n      } else {\n        if (_page4.get(\"count\") == this.currentQuestionKey) {\n          this.updateState(this.state.set(\"showFinish\", true), true);\n        } else {\n          this.nextPageKey = this.currentPageKey;\n          this.nextQuestionKey = this.currentQuestionKey + 1;\n          this.updateState(this.state.set(\"showNext\", true), true);\n        }\n      }\n      this.updateState(this.state.setIn([\"pages\", 0], _page4));\n      this.navigateToAll(survey.getId(), this._questionDisplay);\n    }\n  },\n  reset: function reset(supress) {\n    this._allPages = _immutable2.default.Map();\n    this._callStack = [];\n    this._pageSkipInfo = {};\n    this._questionSkipInfo = {};\n    this._ignoredKeys = [];\n    this._allPages = _immutable2.default.Map();\n    this.currentPageKey = null;\n    this.currentQuestionKey = null;\n    this.prevPageKey = null;\n    this.prevQuestionKey = null;\n    this.nextPageKey = null;\n    this.nextQuestionKey = null;\n    this.updateState(this.state.set(\"pages\", _immutable2.default.Map()).set(\"showNext\", false).set(\"showPrev\", false).set(\"showFinish\", false).set(\"header\", {}).set(\"responses\", _immutable2.default.Map()), supress);\n  },\n  navigateToAll: function navigateToAll(surveyId) {\n    var history = (0, _useQueries2.default)(_createHashHistory2.default)({\n      queryKey: false\n    });\n    history.push(\"/surveys/design/test/\" + surveyId);\n  },\n  setResponse: function setResponse(questionId, response) {\n    this._SurveyRunner = this._SurveyRunner.setResponse(questionId, response);\n    this.updateState(this.state.setIn([\"responses\", questionId], response));\n    this.checkEOS(questionId);\n  },\n  checkEOS: function checkEOS(questionId) {\n    if (this._questionDisplay == \"all\") {\n      return;\n    }\n    var pageItem = null;\n    if (this._questionDisplay == \"question\") {\n      pageItem = this._allPages.getIn([this.currentPageKey, \"questions\", this.currentQuestionKey]).pageItem;\n    }\n    if (this._questionDisplay == \"page\") {\n      pageItem = this._SurveyRunner.getSurvey().getPageItem(questionId);\n    }\n    if (pageItem) {\n      if ((pageItem.getSubType() == \"yesno\" || pageItem.getSubType() == \"multivalue\") && pageItem.getLogic()) {\n        var skipToObj = pageItem.getSkipTo(),\n            response = this.state.getIn([\"responses\", pageItem.getId()]),\n            skipTo = skipToObj.get(response);\n        if (skipTo) {\n          if (skipTo.pageNo == \"eos\") {\n            this.updateState(this.state.set(\"showNext\", false).set(\"showFinish\", true));\n          } else {\n            var showNext = true,\n                showFinish = false;\n            if (this._totalPage == this.currentPageKey + 1) {\n              showNext = false;\n              showFinish = true;\n              if (this._questionDisplay == \"question\") {\n                var _count = this._allPages.getIn([this.currentPageKey, \"count\"]);\n                if (_count > this.currentQuestionKey) {\n                  showNext = true;\n                  showFinish = false;\n                }\n              }\n            }\n            this.updateState(this.state.set(\"showNext\", showNext).set(\"showFinish\", showFinish));\n          }\n        } else {\n          var _showNext2 = true,\n              _showFinish = false;\n          if (this._totalPage == this.currentPageKey + 1) {\n            _showNext2 = false;\n            _showFinish = true;\n            if (this._questionDisplay == \"question\") {\n              var _count2 = this._allPages.getIn([this.currentPageKey, \"count\"]);\n              if (_count2 > this.currentQuestionKey) {\n                _showNext2 = true;\n                _showFinish = false;\n              }\n            }\n          }\n          this.updateState(this.state.set(\"showNext\", _showNext2).set(\"showFinish\", _showFinish));\n        }\n      }\n    }\n  },\n  setDisable: function setDisable(key, disable) {\n    this.updateState(this.state.setIn([\"disabled\", key], disable));\n  }\n});\n\nexports.default = SurveyRunnerStore;\n\n/***/ }),\n\n/***/ 413:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _startsWith2 = __webpack_require__(395);\n\nvar _startsWith3 = _interopRequireDefault(_startsWith2);\n\nvar _words2 = __webpack_require__(438);\n\nvar _words3 = _interopRequireDefault(_words2);\n\nvar _forIn2 = __webpack_require__(24);\n\nvar _forIn3 = _interopRequireDefault(_forIn2);\n\nvar _createStore = __webpack_require__(22);\n\nvar _createStore2 = _interopRequireDefault(_createStore);\n\nvar _immutable = __webpack_require__(9);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _imagesactions = __webpack_require__(414);\n\nvar _imagesactions2 = _interopRequireDefault(_imagesactions);\n\nvar _diservice = __webpack_require__(40);\n\nvar _diservice2 = _interopRequireDefault(_diservice);\n\nvar _resizeImage = __webpack_require__(798);\n\nvar _resizeImage2 = _interopRequireDefault(_resizeImage);\n\nvar _notificationactions = __webpack_require__(64);\n\nvar _notificationactions2 = _interopRequireDefault(_notificationactions);\n\nvar _appsettings = __webpack_require__(28);\n\nvar _i18n = __webpack_require__(8);\n\nvar _i18n2 = _interopRequireDefault(_i18n);\n\nvar _logger = __webpack_require__(6);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _authactions = __webpack_require__(30);\n\nvar _authactions2 = _interopRequireDefault(_authactions);\n\nvar _readBlob = __webpack_require__(799);\n\nvar _readBlob2 = _interopRequireDefault(_readBlob);\n\nvar _axios = __webpack_require__(41);\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nvar _imagemodelbuilder = __webpack_require__(800);\n\nvar _imagemodelbuilder2 = _interopRequireDefault(_imagemodelbuilder);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar imageModelBuilder = (0, _imagemodelbuilder2.default)(),\n    ImagesStore = (0, _createStore2.default)({\n    listenables: [_imagesactions2.default, _authactions2.default],\n    _images: _immutable2.default.Map(),\n    init: function init() {\n        this.state = _immutable2.default.Map({\n            images: _immutable2.default.Map(),\n            uploading: false,\n            openAddDialog: false\n        });\n    },\n    getInitialState: function getInitialState() {\n        return this.state;\n    },\n    updateState: function updateState(newState, suppressTrigger) {\n        if (newState) {\n            this.state = newState;\n        }\n\n        if (!suppressTrigger) {\n            this.trigger(this.state);\n        }\n    },\n    userChanged: function userChanged(prevProfile, newProfile) {\n        var _this = this;\n\n        this._currentProfile = newProfile;\n        this._imageProvider = _diservice2.default.get(\"ImageProvider\");\n        return this._imageProvider.getImages().then(function (imageDocs) {\n            _this.reset();\n            (0, _forIn3.default)(imageDocs.rows, function (imageDoc) {\n                if (!imageDoc.doc) return;\n                var imageModel = imageModelBuilder.fromModel(imageDoc.doc);\n                _this._images = _this._images.set(imageModel.getId(), imageModel);\n            });\n            _this.prepaireImages(_this._images);\n        });\n    },\n    reset: function reset() {\n        this.updateState(this.state.set(\"images\", _immutable2.default.Map()));\n    },\n    openAddDialog: function openAddDialog() {\n        this.updateState(this.state.set(\"openAddDialog\", true));\n    },\n    closeAddDialog: function closeAddDialog() {\n        this.updateState(this.state.set(\"openAddDialog\", false));\n    },\n    addImages: function addImages(imageFiles) {\n        var _this2 = this;\n\n        this.updateState(this.state.set(\"uploading\", true));\n        imageFiles.forEach(function (imageFile) {\n            var doc = {\n                name: imageFile.name,\n                mimeType: imageFile.file.type,\n                tags: imageFile.tags\n            },\n                newImageModel = imageModelBuilder.createImage(doc),\n                data = new FormData();\n            data.append(\"file\", imageFile.file);\n            data.append(\"userId\", _this2._currentProfile._id);\n            data.append(\"id\", newImageModel.getId());\n            (0, _axios2.default)({\n                url: '/media',\n                method: 'post',\n                data: data,\n                headers: { 'content-type': 'multipart/form-data' }\n            }).then(function (response) {\n                _logger2.default.log(response);\n                var data = response.data;\n                newImageModel = newImageModel.setHeight(data.height).setWidth(data.width).setThumbnail(data.thumbnail).setThumbnailInfo(data.thumbnailInfo).setVibrant(data.vibrant).setDarkVibrant(data.darkVibrant);\n                return _this2._imageProvider.addImages([newImageModel.toJS()]);\n            }).then(function (imageDocs) {\n                _this2.updateState(_this2.state.set(\"uploading\", false).set(\"openAddDialog\", false));\n                (0, _forIn3.default)(imageDocs.rows, function (imageDoc) {\n                    var imageModel = imageModelBuilder.fromModel(imageDoc.doc);\n                    _this2._images = _this2._images.set(imageModel.getId(), imageModel);\n                    _this2.prepaireImages(_this2._images);\n                });\n            }).catch(function (error) {\n                _this2.updateState(_this2.state.set(\"uploading\", false).set(\"openAddDialog\", false));\n                _logger2.default.error(error);\n            });\n        });\n    },\n    removeImage: function removeImage(id) {},\n    onDropReject: function onDropReject(file) {\n        _notificationactions2.default.notify(_appsettings.Notifications.ERROR, _i18n2.default.t(\"File size limit(200kb) exceeded.\"));\n    },\n    search: function search(value) {\n        if (!value) {\n            this.prepaireImages(this._images);\n        } else {\n            var filterImages = this._images.filter(function (file) {\n                var words = (0, _words3.default)(file.getName()),\n                    tags = file.getTags().toArray(),\n                    add = false;\n                (0, _forIn3.default)(words, function (word) {\n                    if ((0, _startsWith3.default)(word.toLowerCase(), value.toLowerCase())) {\n                        add = true;\n                        return false;\n                    }\n                });\n                (0, _forIn3.default)(tags, function (tag) {\n                    if ((0, _startsWith3.default)(tag.toLowerCase(), value.toLowerCase())) {\n                        add = true;\n                        return false;\n                    }\n                });\n                return add;\n            });\n            this.prepaireImages(filterImages);\n        }\n    },\n    prepaireImages: function prepaireImages(imageModels) {\n        imageModels = imageModels.sortBy(function (file) {\n            return file.getDate();\n        }).reverse();\n        this.updateState(this.state.set(\"images\", imageModels));\n    }\n});\n\nexports.default = ImagesStore;\n\n/***/ }),\n\n/***/ 414:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _refluxCore = __webpack_require__(14);\n\nvar _refluxCore2 = _interopRequireDefault(_refluxCore);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ImagesActions = _refluxCore2.default.createActions([\"addImages\", \"deleteImage\", \"search\", \"onDropReject\", \"openAddDialog\", \"closeAddDialog\"]);\n\nexports.default = ImagesActions;\n\n/***/ }),\n\n/***/ 432:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _trim2 = __webpack_require__(149);\n\nvar _trim3 = _interopRequireDefault(_trim2);\n\nvar _createStore = __webpack_require__(22);\n\nvar _createStore2 = _interopRequireDefault(_createStore);\n\nvar _immutable = __webpack_require__(9);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _authactions = __webpack_require__(30);\n\nvar _authactions2 = _interopRequireDefault(_authactions);\n\nvar _recipientsactions = __webpack_require__(394);\n\nvar _recipientsactions2 = _interopRequireDefault(_recipientsactions);\n\nvar _groupsactions = __webpack_require__(433);\n\nvar _groupsactions2 = _interopRequireDefault(_groupsactions);\n\nvar _notificationactions = __webpack_require__(64);\n\nvar _notificationactions2 = _interopRequireDefault(_notificationactions);\n\nvar _appsettings = __webpack_require__(28);\n\nvar _i18n = __webpack_require__(8);\n\nvar _i18n2 = _interopRequireDefault(_i18n);\n\nvar _diservice = __webpack_require__(40);\n\nvar _diservice2 = _interopRequireDefault(_diservice);\n\nvar _groupsandrecipientsprovider = __webpack_require__(209);\n\nvar _groupsandrecipientsprovider2 = _interopRequireDefault(_groupsandrecipientsprovider);\n\nvar _settingdefinitionbuilder = __webpack_require__(167);\n\nvar _settingdefinitionbuilder2 = _interopRequireDefault(_settingdefinitionbuilder);\n\nvar _settingsactions = __webpack_require__(153);\n\nvar _settingsactions2 = _interopRequireDefault(_settingsactions);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar GroupsAndRecipientsStore = (0, _createStore2.default)({\n  listenables: [_recipientsactions2.default, _groupsactions2.default, _authactions2.default],\n  contactBeingEdited: null,\n  groups: _immutable2.default.Set(),\n  init: function init() {\n    this.state = _immutable2.default.fromJS({\n      isAuthorizedUser: false\n    });\n  },\n  getInitialState: function getInitialState() {\n    return this.state;\n  },\n  userChanged: function userChanged(prevProfile, newProfile) {\n    this.updateState(this.state.set(\"isAuthorizedUser\", !newProfile.isGuest));\n    if (!newProfile.isGuest) {\n      this.updateState(this.state.set(\"isAuthorizedUser\", true));\n      this._currentProfile = newProfile;\n      this._groupsAndRecipientsProvider = _diservice2.default.get(\"GroupsAndRecipientsProvider\");\n      return this.updateGroups();\n    }\n  },\n  updateState: function updateState(newState, suppress) {\n    this.state = newState;\n    if (!suppress) {\n      this.trigger(this.state);\n    }\n  },\n  updateGroups: function updateGroups() {\n    var _this = this;\n\n    return this._groupsAndRecipientsProvider.get().then(function (groups) {\n      return _this.groups = _immutable2.default.Set(groups);\n    });\n  },\n  addRecipient: function addRecipient(model) {\n    var _this2 = this;\n\n    this._groupsAndRecipientsProvider.addRecipient(model).then(function () {\n      _this2.updateGroups();\n      _notificationactions2.default.notify(_appsettings.Notifications.INFO, _i18n2.default.t(\"Contact added successfully\"));\n    });\n  },\n  deleteRecipient: function deleteRecipient(id) {\n    var _this3 = this;\n\n    this._groupsAndRecipientsProvider.deleteRecipient(id).then(function (result) {\n      _this3.updateGroups();\n      _notificationactions2.default.notify(_appsettings.Notifications.INFO, _i18n2.default.t(\"The contact has been deleted\"), _i18n2.default.t(\"undo\"), _recipientsactions2.default.undoRecipent.bind(null, result));\n    });\n  },\n  undo: function undo(doc) {\n    this._groupsAndRecipientsProvider.undo(doc);\n  },\n  storeLastState: function storeLastState() {\n    this.lastState = _immutable2.default.fromJS({\n      recipients: this.state.get(\"recipients\"),\n      groups: this.groups\n    });\n  },\n  getAllGroups: function getAllGroups() {\n    return this.groups.toArray();\n  },\n  //updated by find\n  ensureEmail: function ensureEmail(value) {\n    if (this.contactBeingEdited) {\n      return Promise.resolve();\n    }\n    return this._groupsAndRecipientsProvider.ensureEmail(value);\n  },\n  /*** */\n  getRecipientDoc: function getRecipientDoc(id) {\n    if (!id) {\n      return Promise.resolve();\n    }\n    return this._groupsAndRecipientsProvider.getRecipient(id);\n  },\n  optionsContactOpen: function optionsContactOpen(id, options) {\n    var _this4 = this;\n\n    this.getRecipientDoc(id).then(function (doc) {\n      _this4.contactBeingEdited = doc;\n      _this4.contactSettingToolbar(id, options);\n    });\n  },\n  contactSettingToolbar: function contactSettingToolbar(id, options) {\n    var settingsDef = (0, _settingdefinitionbuilder2.default)(),\n        settingsValues = {\n      fullName: id ? this.contactBeingEdited.getFullName() : \"\",\n      email: id ? this.contactBeingEdited.getEmail() : \"\",\n      groups: id ? this.contactBeingEdited.getGroups().toArray() : []\n    },\n        groupTitle = id ? _i18n2.default.t(\"Manage contact\") : _i18n2.default.t(\"Add contact\");\n    settingsDef.addSettingsGroup(groupTitle).addSetting(\"fullName\", \"string\", _i18n2.default.t(\"Full Name\"), {\n      required: true\n    }).addSetting(\"email\", \"string\", _i18n2.default.t(\"Email\"), {\n      required: true,\n      type: \"email\",\n      customValidation: this.ensureEmail\n    }).addSetting(\"groups\", \"groups\", _i18n2.default.t(\"Groups\"), {\n      dataSource: this.getAllGroups,\n      settingFor: _i18n2.default.t(\"Group\")\n    });\n    _settingsactions2.default.open(settingsDef.getSettingsDefinition(), settingsValues, _recipientsactions2.default.optionsContactDone, null, options);\n  },\n  optionsContactDone: function optionsContactDone(values) {\n    var _this5 = this;\n\n    var fullName = values.fullName,\n        email = values.email,\n        groups = values.groups;\n\n    fullName = (0, _trim3.default)(fullName);\n    email = (0, _trim3.default)(email);\n    if (this.contactBeingEdited) {\n      this.contactBeingEdited = this.contactBeingEdited.setFullName(fullName).setEmail(email).setGroups(groups);\n      this._groupsAndRecipientsProvider.updateRecipient(this.contactBeingEdited).then(function (result) {\n        _this5.updateGroups();\n        _this5.contactBeingEdited = null;\n        _notificationactions2.default.notify(_appsettings.Notifications.INFO, _i18n2.default.t(\"Contact edited successfully\"));\n      }).catch(function (err) {\n        if (err.status === 409) {\n          _this5.contactBeingEdited = null;\n        }\n      });\n    } else {\n      this.addRecipient(values);\n    }\n  },\n  optionsEditGroupOpen: function optionsEditGroupOpen(groupName, options) {\n    var settingsDef = (0, _settingdefinitionbuilder2.default)(),\n        settingsValues = {\n      oldName: groupName,\n      newName: \"\"\n    };\n    settingsDef.addSettingsGroup().addSetting(\"oldName\", \"string\", _i18n2.default.t(\"Old Name\"), {\n      disabled: true\n    }).addSetting(\"newName\", \"string\", _i18n2.default.t(\"New Name\"), {\n      required: true\n    });\n    _settingsactions2.default.open(settingsDef.getSettingsDefinition(), settingsValues, _groupsactions2.default.optionsEditGroupDone, null, options);\n  },\n  optionsEditGroupDone: function optionsEditGroupDone(values) {\n    var _this6 = this;\n\n    var oldName = values.oldName,\n        newName = values.newName;\n\n    newName = (0, _trim3.default)(newName);\n    this._groupsAndRecipientsProvider.renameGroup(oldName, newName).then(function (groups) {\n      _this6.groups = groups;\n    }).catch(function (err) {\n      throw err;\n    });\n  },\n  undoRecipients: function undoRecipients() {\n    var _this7 = this;\n\n    var undoModifiedRecipients = [];\n    this.lastState.get(\"recipients\").map(function (recipient) {\n      var latestRecipients = _this7.state.getIn([\"recipients\", recipient.getId()]);\n      if (recipient != latestRecipients) {\n        recipient = recipient.setRev(latestRecipients.getRev());\n        undoModifiedRecipients.push(recipient);\n      }\n    });\n    this._groupsAndRecipientsProvider.undoRecipients(undoModifiedRecipients);\n  },\n  undoGroups: function undoGroups() {\n    var _this8 = this;\n\n    this._groupsAndRecipientsProvider.undoGroups(this.lastState.get(\"groups\").toArray()).then(function (groups) {\n      _this8.groups = groups;\n    });\n  },\n  removeGroup: function removeGroup(group) {\n    var _this9 = this;\n\n    this._groupsAndRecipientsProvider.removeGroup(group).then(function () {\n      return _this9.updateGroups();\n    }).catch(function (err) {\n      throw err;\n    });\n  },\n  add: function add(values) {\n    var _this10 = this;\n\n    this._groupsAndRecipientsProvider.add(values).then(function (groups) {\n      _this10.groups = groups;\n    });\n  },\n  remove: function remove(groupName) {\n    var _this11 = this;\n\n    this.storeLastState();\n    this._groupsAndRecipientsProvider.remove(groupName).then(function (groups) {\n      _this11.groups = groups;\n      _notificationactions2.default.notify(_appsettings.Notifications.INFO, _i18n2.default.t(\"The group has been deleted\"), _i18n2.default.t(\"undo\"), _groupsactions2.default.undoGroups);\n    }).catch(function (err) {\n      throw err;\n    });\n  }\n});\n\nexports.default = GroupsAndRecipientsStore;\n\n/***/ }),\n\n/***/ 433:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _refluxCore = __webpack_require__(14);\n\nvar _refluxCore2 = _interopRequireDefault(_refluxCore);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar GroupsActions = _refluxCore2.default.createActions([\"add\", \"remove\", \"undoGroups\", \"optionsEditGroupOpen\", \"optionsEditGroupDone\"]);\n\nexports.default = GroupsActions;\n\n/***/ }),\n\n/***/ 436:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _forIn2 = __webpack_require__(24);\n\nvar _forIn3 = _interopRequireDefault(_forIn2);\n\nvar _createStore = __webpack_require__(22);\n\nvar _createStore2 = _interopRequireDefault(_createStore);\n\nvar _createHashHistory = __webpack_require__(39);\n\nvar _createHashHistory2 = _interopRequireDefault(_createHashHistory);\n\nvar _useQueries = __webpack_require__(52);\n\nvar _useQueries2 = _interopRequireDefault(_useQueries);\n\nvar _reactRouter = __webpack_require__(154);\n\nvar _immutable = __webpack_require__(9);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _bluebird = __webpack_require__(32);\n\nvar _bluebird2 = _interopRequireDefault(_bluebird);\n\nvar _authactions = __webpack_require__(30);\n\nvar _authactions2 = _interopRequireDefault(_authactions);\n\nvar _diservice = __webpack_require__(40);\n\nvar _diservice2 = _interopRequireDefault(_diservice);\n\nvar _clientsurveyresponsemodelprovider = __webpack_require__(155);\n\nvar _clientsurveyresponsemodelprovider2 = _interopRequireDefault(_clientsurveyresponsemodelprovider);\n\nvar _publishedsurveymodelprovider = __webpack_require__(130);\n\nvar _publishedsurveymodelprovider2 = _interopRequireDefault(_publishedsurveymodelprovider);\n\nvar _i18n = __webpack_require__(8);\n\nvar _i18n2 = _interopRequireDefault(_i18n);\n\nvar _logger = __webpack_require__(6);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _analysisactions = __webpack_require__(437);\n\nvar _analysisactions2 = _interopRequireDefault(_analysisactions);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar clientSurveyResponseModelProvider = (0, _clientsurveyresponsemodelprovider2.default)(),\n    publishedSurveyModelProvider = (0, _publishedsurveymodelprovider2.default)(),\n    AnalysisStore = (0, _createStore2.default)({\n  listenables: [_analysisactions2.default, _authactions2.default],\n  _publishedSurvey: null,\n  init: function init() {\n    this.state = _immutable2.default.Map({\n      survey: null,\n      surveyResponses: _immutable2.default.Map(),\n      info: _immutable2.default.Map()\n    });\n  },\n  getInitialState: function getInitialState() {\n    return this.state;\n  },\n  userChanged: function userChanged(prevProfile, newProfile) {\n    this._publishedSurveyProvider = _diservice2.default.get(\"PublishedSurveyProvider\", {\n      PublishedSurveyModelProvider: publishedSurveyModelProvider\n    });\n    this._publishedSurveyResponseProvider = _diservice2.default.get(\"PublishedSurveyResponeseProvider\");\n  },\n  updateState: function updateState(newState, suppress) {\n    if (this.state.equals(newState)) {\n      return;\n    }\n    this.state = newState;\n    _logger2.default.log(\"AnalysisStore:updateState\", newState.toJS());\n    if (!suppress) {\n      this.trigger(this.state);\n    }\n  },\n  initializeAnalysis: function initializeAnalysis(id) {\n    var _this = this;\n\n    if (id) {\n      this._publishedSurveyProvider.getUserPublishedSurvey(id).then(function (publishedSurvey) {\n        _this._publishedSurvey = publishedSurvey;\n        if (!_this._publishedSurvey.getContacts().size) {\n          _this.updateState(_this.state.set(\"survey\", _this._publishedSurvey.getSurvey()));\n          return;\n        }\n        _this.updateState(_this.state.set(\"survey\", _this._publishedSurvey.getSurvey()), true);\n        var promises = _this._publishedSurvey.getContacts().map(function (contact, cId) {\n          if (contact.completed) {\n            return _bluebird2.default.try(function () {\n              return _this._publishedSurveyResponseProvider.getResponse(contact.responseId).then(function (response) {\n                return {\n                  id: contact.responseId,\n                  name: contact.name,\n                  email: contact.email,\n                  completed: true,\n                  response: clientSurveyResponseModelProvider.fromModel(response)\n                };\n              });\n            });\n          } else {\n            return _bluebird2.default.try(function () {\n              return _bluebird2.default.resolve({\n                id: contact.responseId,\n                name: contact.name,\n                email: contact.email\n              });\n            });\n          }\n        }).toArray();\n        _this.settleAll(promises).then(function (results) {\n          var surveyResponses = _immutable2.default.Map();\n          (0, _forIn3.default)(results, function (result) {\n            if (!result.isRejected()) {\n              var value = result.value();\n              surveyResponses = surveyResponses.set(value.id, value);\n            }\n          });\n          _this.updateState(_this.state.set(\"surveyResponses\", surveyResponses));\n        });\n      });\n    }\n  },\n  setInfo: function setInfo(id, option) {\n    if (option) {\n      var info = _immutable2.default.Map(_defineProperty({}, id, _immutable2.default.Set()));\n      this.state.get(\"surveyResponses\").map(function (responseObj) {\n        if (responseObj.completed) {\n          if (responseObj.response.getResponse(id) && responseObj.response.getResponse(id).toLowerCase() == (option && option.toLowerCase())) {\n            var objInfo = {\n              name: responseObj.name,\n              email: responseObj.email,\n              os: responseObj.response.getOS(),\n              browser: responseObj.response.getBrowserName()\n            };\n            info = info.update(id, function (set) {\n              return set.add(objInfo);\n            });\n          }\n        }\n      });\n      this.updateState(this.state.set(\"info\", this.state.get(\"info\").merge(info)));\n    } else {\n      this.state.setIn([\"info\", id], null);\n    }\n  },\n  reset: function reset(suppress) {\n    this.updateState(this.state.set(\"survey\", null).set(\"surveyResponses\", _immutable2.default.Map()).set(\"info\", _immutable2.default.Map()), suppress);\n  },\n  settleAll: function settleAll(promises) {\n    return _bluebird2.default.all(promises.map(function (promise) {\n      _logger2.default.debug(\"promise\", promise);\n      return promise.reflect();\n    })).each(function (inspection) {\n      _logger2.default.log(inspection);\n      if (inspection.isFulfilled()) {\n        return inspection.value();\n      } else {\n        return inspection.reason();\n      }\n    });\n  }\n});\n\nexports.default = AnalysisStore;\n\n/***/ }),\n\n/***/ 437:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _refluxCore = __webpack_require__(14);\n\nvar _refluxCore2 = _interopRequireDefault(_refluxCore);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar AnalysisActions = _refluxCore2.default.createActions([\"initializeAnalysis\", \"setInfo\", \"reset\"]);\n\nexports.default = AnalysisActions;\n\n/***/ }),\n\n/***/ 445:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n__webpack_require__(446);\n\nvar _reactTapEventPlugin = __webpack_require__(164);\n\nvar _reactTapEventPlugin2 = _interopRequireDefault(_reactTapEventPlugin);\n\nvar _detectdevice = __webpack_require__(255);\n\nvar _detectdevice2 = _interopRequireDefault(_detectdevice);\n\nvar _errorlogger = __webpack_require__(475);\n\nvar _errorlogger2 = _interopRequireDefault(_errorlogger);\n\nvar _approute = __webpack_require__(491);\n\nvar _approute2 = _interopRequireDefault(_approute);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n(0, _reactTapEventPlugin2.default)();\n(0, _approute2.default)();\n\n/***/ }),\n\n/***/ 446:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _fonts = __webpack_require__(447);\n\nvar _fonts2 = _interopRequireDefault(_fonts);\n\nvar _layout = __webpack_require__(448);\n\nvar _layout2 = _interopRequireDefault(_layout);\n\nvar _styles = __webpack_require__(449);\n\nvar _styles2 = _interopRequireDefault(_styles);\n\nvar _default = __webpack_require__(450);\n\nvar _default2 = _interopRequireDefault(_default);\n\nvar _atelierSulphurpoolLight = __webpack_require__(451);\n\nvar _atelierSulphurpoolLight2 = _interopRequireDefault(_atelierSulphurpoolLight);\n\nvar _flipmove = __webpack_require__(452);\n\nvar _flipmove2 = _interopRequireDefault(_flipmove);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n\n/***/ 447:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 448:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 449:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 450:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 451:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 452:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 475:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _endsWith2 = __webpack_require__(476);\n\nvar _endsWith3 = _interopRequireDefault(_endsWith2);\n\nvar _findIndex2 = __webpack_require__(241);\n\nvar _findIndex3 = _interopRequireDefault(_findIndex2);\n\nvar _erroractions = __webpack_require__(266);\n\nvar _erroractions2 = _interopRequireDefault(_erroractions);\n\nvar _errorTojson = __webpack_require__(479);\n\nvar _errorTojson2 = _interopRequireDefault(_errorTojson);\n\nvar _stacktraceJs = __webpack_require__(480);\n\nvar _stacktraceJs2 = _interopRequireDefault(_stacktraceJs);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar registerError = _erroractions2.default.registerError,\n    getError = function getError(reason) {\n  if (!reason) {\n    return Promise.resolve(null);\n  }\n  var errorPromise = reason.toJSON && _stacktraceJs2.default.fromError(reason);\n  if (reason.toJSON) {\n    return errorPromise.then(function (errTrace) {\n      return errTrace.map(function (stackframe) {\n        var fileNameArray = stackframe.getFileName().split(/\\?|\\//),\n            fileName = fileNameArray[(0, _findIndex3.default)(fileNameArray, function (string) {\n          return (0, _endsWith3.default)(string, \".js\");\n        })];\n        stackframe.setFileName(fileName);\n        stackframe.setSource(\"ORIGINAL_STACK_LINE\");\n        return JSON.stringify(stackframe);\n      });\n    });\n  }\n  return Promise.resolve(reason);\n},\n    getErrorMessage = function getErrorMessage(reason) {\n  return reason && (reason.message || reason.name || reason.error);\n},\n    getBlubirdListenerObject = function getBlubirdListenerObject(_ref) {\n  var reason = _ref.reason,\n      type = _ref.type,\n      detail = _ref.detail;\n  return getError(reason || detail.reason).then(function (errTrace) {\n    return {\n      message: getErrorMessage(reason) || getErrorMessage(detail && detail.reason) || \"error unknown\",\n      type: type,\n      error: errTrace\n    };\n  });\n},\n    registerListener = function registerListener(type, mapInputParamsToErrorObject) {\n  window.addEventListener(type, function (details) {\n    return mapInputParamsToErrorObject(details).then(registerError);\n  });\n};\n\nregisterListener(\"error\", function (_ref2) {\n  var message = _ref2.message,\n      lineno = _ref2.lineno,\n      colno = _ref2.colno,\n      error = _ref2.error;\n  return getError(error).then(function (errTrace) {\n    return {\n      message: message,\n      line: lineno,\n      column: colno,\n      type: \"window-error\",\n      error: errTrace\n    };\n  });\n});\n\nregisterListener(\"unhandledrejection\", getBlubirdListenerObject);\n\nregisterListener(\"rejectionhandled\", getBlubirdListenerObject);\n\n/***/ }),\n\n/***/ 491:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = __webpack_require__(16);\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _Router = __webpack_require__(188);\n\nvar _Router2 = _interopRequireDefault(_Router);\n\nvar _Route = __webpack_require__(297);\n\nvar _Route2 = _interopRequireDefault(_Route);\n\nvar _Redirect = __webpack_require__(194);\n\nvar _Redirect2 = _interopRequireDefault(_Redirect);\n\nvar _createHashHistory = __webpack_require__(39);\n\nvar _createHashHistory2 = _interopRequireDefault(_createHashHistory);\n\nvar _useRouterHistory = __webpack_require__(195);\n\nvar _useRouterHistory2 = _interopRequireDefault(_useRouterHistory);\n\nvar _Link = __webpack_require__(196);\n\nvar _Link2 = _interopRequireDefault(_Link);\n\nvar _IndexRoute = __webpack_require__(299);\n\nvar _IndexRoute2 = _interopRequireDefault(_IndexRoute);\n\nvar _i18n = __webpack_require__(8);\n\nvar _i18n2 = _interopRequireDefault(_i18n);\n\nvar _proxyloader = __webpack_require__(589);\n\nvar _proxyloader2 = _interopRequireDefault(_proxyloader);\n\nvar _detectdevice = __webpack_require__(255);\n\nvar _detectdevice2 = _interopRequireDefault(_detectdevice);\n\nvar _designapp = __webpack_require__(646);\n\nvar _designapp2 = _interopRequireDefault(_designapp);\n\nvar _runapp = __webpack_require__(376);\n\nvar _runapp2 = _interopRequireDefault(_runapp);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar RouteHandler = _Router2.default.RouteHandler,\n    history = (0, _useRouterHistory2.default)(_createHashHistory2.default)({\n  queryKey: false\n});\n\nmodule.exports = function () {\n  return _i18n2.default.init().then(function () {\n    _reactDom2.default.render(_react2.default.createElement(\n      _Router2.default,\n      { history: history },\n      _react2.default.createElement(_Redirect2.default, { from: \"/\", to: \"/surveys\" }),\n      _react2.default.createElement(\n        _Route2.default,\n        { path: \"/\", component: _detectdevice2.default },\n        _react2.default.createElement(\n          _Route2.default,\n          { path: \"/\", component: _designapp2.default },\n          _react2.default.createElement(_Route2.default, {\n            path: \"home\",\n            component: (0, _proxyloader2.default)(function () {\n              return __webpack_require__.e/* import() */(0).then(__webpack_require__.bind(null, 933));\n            })\n          }),\n          _react2.default.createElement(\n            _Route2.default,\n            {\n              path: \"surveys\",\n              component: (0, _proxyloader2.default)(function () {\n                return __webpack_require__.e/* import() */(0).then(__webpack_require__.bind(null, 934));\n              })\n            },\n            _react2.default.createElement(_IndexRoute2.default, {\n              component: (0, _proxyloader2.default)(function () {\n                return __webpack_require__.e/* import() */(0).then(__webpack_require__.bind(null, 444));\n              })\n            }),\n            _react2.default.createElement(\n              _Route2.default,\n              { path: \"design\" },\n              _react2.default.createElement(_IndexRoute2.default, {\n                component: (0, _proxyloader2.default)(function () {\n                  return __webpack_require__.e/* import() */(0).then(__webpack_require__.bind(null, 444));\n                })\n              }),\n              _react2.default.createElement(\n                _Route2.default,\n                {\n                  path: \"edit\",\n                  component: (0, _proxyloader2.default)(function () {\n                    return __webpack_require__.e/* import() */(0).then(__webpack_require__.bind(null, 935));\n                  })\n                },\n                _react2.default.createElement(_Route2.default, {\n                  path: \":id\",\n                  component: (0, _proxyloader2.default)(function () {\n                    return __webpack_require__.e/* import() */(0).then(__webpack_require__.bind(null, 69));\n                  })\n                })\n              ),\n              _react2.default.createElement(\n                _Route2.default,\n                {\n                  path: \":mode\",\n                  component: (0, _proxyloader2.default)(function () {\n                    return __webpack_require__.e/* import() */(0).then(__webpack_require__.bind(null, 936));\n                  })\n                },\n                _react2.default.createElement(_Route2.default, {\n                  path: \":id\",\n                  component: (0, _proxyloader2.default)(function () {\n                    return __webpack_require__.e/* import() */(0).then(__webpack_require__.bind(null, 69));\n                  })\n                })\n              )\n            ),\n            _react2.default.createElement(\n              _Route2.default,\n              { path: \"published\" },\n              _react2.default.createElement(\n                _Route2.default,\n                {\n                  path: \":id\",\n                  component: (0, _proxyloader2.default)(function () {\n                    return __webpack_require__.e/* import() */(0).then(__webpack_require__.bind(null, 937));\n                  })\n                },\n                _react2.default.createElement(\n                  _Route2.default,\n                  {\n                    path: \"survey\",\n                    component: (0, _proxyloader2.default)(function () {\n                      return __webpack_require__.e/* import() */(0).then(__webpack_require__.bind(null, 938));\n                    })\n                  },\n                  _react2.default.createElement(_IndexRoute2.default, {\n                    component: (0, _proxyloader2.default)(function () {\n                      return __webpack_require__.e/* import() */(0).then(__webpack_require__.bind(null, 69));\n                    })\n                  })\n                ),\n                _react2.default.createElement(_Route2.default, {\n                  path: \"contacts\",\n                  component: (0, _proxyloader2.default)(function () {\n                    return __webpack_require__.e/* import() */(0).then(__webpack_require__.bind(null, 939));\n                  })\n                }),\n                _react2.default.createElement(\n                  _Route2.default,\n                  {\n                    path: \"contacts/:responseId/:userName\",\n                    component: (0, _proxyloader2.default)(function () {\n                      return __webpack_require__.e/* import() */(0).then(__webpack_require__.bind(null, 940));\n                    })\n                  },\n                  _react2.default.createElement(_IndexRoute2.default, {\n                    component: (0, _proxyloader2.default)(function () {\n                      return __webpack_require__.e/* import() */(0).then(__webpack_require__.bind(null, 69));\n                    })\n                  })\n                ),\n                _react2.default.createElement(_Route2.default, {\n                  path: \"analysis\",\n                  component: (0, _proxyloader2.default)(function () {\n                    return __webpack_require__.e/* import() */(0).then(__webpack_require__.bind(null, 941));\n                  })\n                })\n              )\n            ),\n            _react2.default.createElement(\n              _Route2.default,\n              {\n                path: \"publish\",\n                component: (0, _proxyloader2.default)(function () {\n                  return __webpack_require__.e/* import() */(0).then(__webpack_require__.bind(null, 942));\n                })\n              },\n              _react2.default.createElement(_Route2.default, {\n                path: \"step1\",\n                component: (0, _proxyloader2.default)(function () {\n                  return __webpack_require__.e/* import() */(0).then(__webpack_require__.bind(null, 943));\n                })\n              }),\n              _react2.default.createElement(_Route2.default, {\n                path: \"step2\",\n                component: (0, _proxyloader2.default)(function () {\n                  return __webpack_require__.e/* import() */(0).then(__webpack_require__.bind(null, 944));\n                })\n              }),\n              _react2.default.createElement(_Route2.default, {\n                path: \"step3\",\n                component: (0, _proxyloader2.default)(function () {\n                  return __webpack_require__.e/* import() */(0).then(__webpack_require__.bind(null, 945));\n                })\n              }),\n              _react2.default.createElement(_Route2.default, {\n                path: \"step4\",\n                component: (0, _proxyloader2.default)(function () {\n                  return __webpack_require__.e/* import() */(0).then(__webpack_require__.bind(null, 946));\n                })\n              }),\n              _react2.default.createElement(_Route2.default, {\n                path: \"step5\",\n                component: (0, _proxyloader2.default)(function () {\n                  return __webpack_require__.e/* import() */(0).then(__webpack_require__.bind(null, 947));\n                })\n              })\n            )\n          ),\n          _react2.default.createElement(_Route2.default, {\n            path: \"help\",\n            component: (0, _proxyloader2.default)(function () {\n              return __webpack_require__.e/* import() */(0).then(__webpack_require__.bind(null, 365));\n            })\n          }),\n          _react2.default.createElement(_Route2.default, {\n            path: \"contacts\",\n            component: (0, _proxyloader2.default)(function () {\n              return __webpack_require__.e/* import() */(0).then(__webpack_require__.bind(null, 948));\n            })\n          })\n        ),\n        _react2.default.createElement(\n          _Route2.default,\n          { path: \"/run\", component: _runapp2.default },\n          _react2.default.createElement(\n            _Route2.default,\n            {\n              path: \":instanceId\",\n              component: (0, _proxyloader2.default)(function () {\n                return __webpack_require__.e/* import() */(1).then(__webpack_require__.bind(null, 949));\n              })\n            },\n            _react2.default.createElement(_Route2.default, {\n              path: \":responseId\",\n              component: (0, _proxyloader2.default)(function () {\n                return __webpack_require__.e/* import() */(1).then(__webpack_require__.bind(null, 69));\n              })\n            })\n          )\n        ),\n        _react2.default.createElement(\n          _Route2.default,\n          {\n            path: \"/message\",\n            component: (0, _proxyloader2.default)(function () {\n              return __webpack_require__.e/* import() */(1).then(__webpack_require__.bind(null, 376));\n            })\n          },\n          _react2.default.createElement(\n            _Route2.default,\n            {\n              path: \"acknowledgement\",\n              component: (0, _proxyloader2.default)(function () {\n                return __webpack_require__.e/* import() */(1).then(__webpack_require__.bind(null, 950));\n              })\n            },\n            _react2.default.createElement(_Route2.default, {\n              path: \":instanceId/:responseId\",\n              component: (0, _proxyloader2.default)(function () {\n                return __webpack_require__.e/* import() */(1).then(__webpack_require__.bind(null, 69));\n              })\n            })\n          ),\n          _react2.default.createElement(\n            _Route2.default,\n            { path: \"/surveyavailibility\" },\n            _react2.default.createElement(_Route2.default, {\n              path: \":instanceId\",\n              component: (0, _proxyloader2.default)(function () {\n                return __webpack_require__.e/* import() */(1).then(__webpack_require__.bind(null, 951));\n              })\n            })\n          ),\n          _react2.default.createElement(\n            _Route2.default,\n            { path: \"/geolocation\" },\n            _react2.default.createElement(_Route2.default, {\n              path: \":instanceId/:responseId\",\n              component: (0, _proxyloader2.default)(function () {\n                return __webpack_require__.e/* import() */(1).then(__webpack_require__.bind(null, 952));\n              })\n            })\n          ),\n          _react2.default.createElement(_Route2.default, {\n            path: \"signout/:instanceId/:responseId\",\n            component: (0, _proxyloader2.default)(function () {\n              return __webpack_require__.e/* import() */(1).then(__webpack_require__.bind(null, 953));\n            })\n          }),\n          _react2.default.createElement(_Route2.default, {\n            path: \"login/:id\",\n            component: (0, _proxyloader2.default)(function () {\n              return __webpack_require__.e/* import() */(1).then(__webpack_require__.bind(null, 954));\n            })\n          }),\n          _react2.default.createElement(_Route2.default, {\n            path: \"thankyou\",\n            component: (0, _proxyloader2.default)(function () {\n              return __webpack_require__.e/* import() */(1).then(__webpack_require__.bind(null, 955));\n            })\n          }),\n          _react2.default.createElement(_Route2.default, {\n            path: \"migration/failed\",\n            component: (0, _proxyloader2.default)(function () {\n              return __webpack_require__.e/* import() */(1).then(__webpack_require__.bind(null, 956));\n            })\n          }),\n          _react2.default.createElement(_Route2.default, {\n            path: \"completed\",\n            component: (0, _proxyloader2.default)(function () {\n              return __webpack_require__.e/* import() */(1).then(__webpack_require__.bind(null, 957));\n            })\n          }),\n          _react2.default.createElement(_Route2.default, {\n            path: \"migration/:id\",\n            component: (0, _proxyloader2.default)(function () {\n              return __webpack_require__.e/* import() */(1).then(__webpack_require__.bind(null, 958));\n            })\n          }),\n          _react2.default.createElement(\n            _Route2.default,\n            {\n              path: \"shared\",\n              component: (0, _proxyloader2.default)(function () {\n                return __webpack_require__.e/* import() */(1).then(__webpack_require__.bind(null, 959));\n              })\n            },\n            _react2.default.createElement(_Route2.default, {\n              path: \":id\",\n              component: (0, _proxyloader2.default)(function () {\n                return __webpack_require__.e/* import() */(1).then(__webpack_require__.bind(null, 69));\n              })\n            })\n          )\n        )\n      ),\n      _react2.default.createElement(_Route2.default, {\n        path: \"*\",\n        component: (0, _proxyloader2.default)(function () {\n          return __webpack_require__.e/* import() */(1).then(__webpack_require__.bind(null, 960));\n        })\n      })\n    ), document.getElementById(\"app\"));\n  });\n};\n\n/***/ }),\n\n/***/ 54:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _isPlainObject2 = __webpack_require__(25);\n\nvar _isPlainObject3 = _interopRequireDefault(_isPlainObject2);\n\nvar _isArray2 = __webpack_require__(12);\n\nvar _isArray3 = _interopRequireDefault(_isArray2);\n\nvar _forIn2 = __webpack_require__(24);\n\nvar _forIn3 = _interopRequireDefault(_forIn2);\n\nvar _merge2 = __webpack_require__(15);\n\nvar _merge3 = _interopRequireDefault(_merge2);\n\nvar _isBoolean2 = __webpack_require__(318);\n\nvar _isBoolean3 = _interopRequireDefault(_isBoolean2);\n\nvar _trim2 = __webpack_require__(149);\n\nvar _trim3 = _interopRequireDefault(_trim2);\n\nvar _isString2 = __webpack_require__(393);\n\nvar _isString3 = _interopRequireDefault(_isString2);\n\nvar _isUndefined2 = __webpack_require__(320);\n\nvar _isUndefined3 = _interopRequireDefault(_isUndefined2);\n\nvar _bsonObjectid = __webpack_require__(17);\n\nvar _bsonObjectid2 = _interopRequireDefault(_bsonObjectid);\n\nvar _immutable = __webpack_require__(9);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _i18next = __webpack_require__(300);\n\nvar _i18next2 = _interopRequireDefault(_i18next);\n\nvar _maketypedrecord = __webpack_require__(81);\n\nvar _maketypedrecord2 = _interopRequireDefault(_maketypedrecord);\n\nvar _processrevivers = __webpack_require__(82);\n\nvar _processrevivers2 = _interopRequireDefault(_processrevivers);\n\nvar _assertions = __webpack_require__(654);\n\nvar _assertions2 = _interopRequireDefault(_assertions);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar defaultSchemaVersion = \"1.0\",\n    SurveySchemaBuilders = {\n  \"1.0\": function _() {\n    var _Question, _Decorator;\n\n    var SchemaVersion = \"1.0\",\n        QuestionTypes = {\n      singletext: \"singletext\",\n      yesno: \"yesno\",\n      datepicker: \"datepicker\",\n      multivalue: \"multivalue\",\n      code: \"code\"\n    },\n        DecoratorTypes = {\n      image: \"image\",\n      text: \"text\"\n    },\n        QuestionDisplayTypes = {\n      ALL: \"all\",\n      PAGE: \"page\",\n      QUESTION: \"question\"\n    },\n        CodeValidationStatus = {\n      UNCHECKED: \"unchecked\",\n      SUCCESS: \"success\",\n      FAILED: \"failed\"\n    },\n        Models = {\n      Owner: {\n        schema: {\n          owner: {\n            _id: \"\",\n            name: \"\"\n          }\n        },\n        methods: {\n          revivers: {\n            owner: function owner(model) {\n              var owner = model.owner,\n                  _ref = owner || {\n                _id: \"\",\n                name: \"\"\n              },\n                  _id = _ref._id,\n                  name = _ref.name;\n\n              return this.setOwnerId(_id).setOwnerName(name);\n            }\n          },\n          getOwnerId: function getOwnerId() {\n            return this.getIn([\"owner\", \"_id\"]);\n          },\n          setOwnerId: function setOwnerId(id) {\n            if (!(0, _isUndefined3.default)(id)) {\n              return this.setIn([\"owner\", \"_id\"], id);\n            }\n\n            return this;\n          },\n          getOwnerName: function getOwnerName() {\n            return this.getIn([\"owner\", \"name\"]);\n          },\n          setOwnerName: function setOwnerName(name) {\n            if ((0, _isString3.default)(name)) {\n              name = (0, _trim3.default)(name);\n              if (name.length > 0) {\n                return this.setIn([\"owner\", \"name\"], name);\n              }\n            }\n\n            return this;\n          }\n        }\n      },\n      Id: {\n        schema: {\n          _id: null\n        },\n        methods: {\n          revivers: {\n            _id: function _id(model) {\n              var _id = model._id;\n\n              return this.setId(_id);\n            }\n          },\n          getId: function getId() {\n            return this.get(\"_id\");\n          },\n          setId: function setId(id) {\n            _assertions2.default.IdIsValid(id);\n\n            return this.setIn([\"_id\"], id);\n          }\n        }\n      },\n      Header: {\n        schema: {\n          header: {\n            title: \"\",\n            description: \"\",\n            showHeader: true\n          }\n        },\n        methods: {\n          revivers: {\n            header: function header(model) {\n              var header = model.header,\n                  _ref2 = header || {\n                title: \"\",\n                description: \"\",\n                showHeader: true\n              },\n                  title = _ref2.title,\n                  description = _ref2.description,\n                  showHeader = _ref2.showHeader;\n\n              return this.setTitle(title).setDescription(description).setShowHeader(showHeader);\n            }\n          },\n          getTitle: function getTitle() {\n            return this.getIn([\"header\", \"title\"]);\n          },\n          setTitle: function setTitle(title) {\n            if ((0, _isString3.default)(title)) {\n              title = (0, _trim3.default)(title);\n              var header = this.set(\"header\", _immutable2.default.Map(this.header));\n              return header.setIn([\"header\", \"title\"], title);\n            }\n\n            return this;\n          },\n          getDescription: function getDescription() {\n            return this.getIn([\"header\", \"description\"]);\n          },\n          setDescription: function setDescription(description) {\n            if ((0, _isString3.default)(description)) {\n              description = (0, _trim3.default)(description);\n              var header = this.set(\"header\", _immutable2.default.Map(this.header));\n              return header.setIn([\"header\", \"description\"], description);\n            }\n\n            return this;\n          },\n          getShowHeader: function getShowHeader() {\n            return this.getIn([\"header\", \"showHeader\"]);\n          },\n          setShowHeader: function setShowHeader(show) {\n            if ((0, _isBoolean3.default)(show)) {\n              var header = this.set(\"header\", _immutable2.default.Map(this.header));\n              return header.setIn([\"header\", \"showHeader\"], show);\n            }\n\n            return this;\n          }\n        }\n      }\n    };\n    Models.PageItem = (0, _merge3.default)({\n      schema: {\n        type: \"\",\n        subType: \"\",\n        parentPageId: \"\",\n        questionTimeOut: null\n      },\n      methods: {\n        isPageItem: true,\n        revivers: {\n          pageItem: function pageItem(model) {\n            var parentPageId = model.parentPageId,\n                questionTimeOut = model.questionTimeOut;\n\n            return this.setParentPageId(parentPageId).setQuestionTimeOut(questionTimeOut);\n          }\n        },\n        getType: function getType() {\n          return this.get(\"type\");\n        },\n        getSubType: function getSubType() {\n          return this.get(\"subType\");\n        },\n        getParentPageId: function getParentPageId() {\n          return this.get(\"parentPageId\");\n        },\n        setParentPageId: function setParentPageId(parentPageId) {\n          _assertions2.default.IdIsValid(parentPageId);\n\n          return this.set(\"parentPageId\", parentPageId);\n        },\n        getQuestionTimeOut: function getQuestionTimeOut() {\n          return this.get(\"questionTimeOut\");\n        },\n        setQuestionTimeOut: function setQuestionTimeOut(questionTimeOut) {\n          return this.set(\"questionTimeOut\", questionTimeOut);\n        }\n      }\n    }, Models.Id);\n    Models.Question = {\n      Base: (0, _merge3.default)({}, Models.Header, Models.PageItem, {\n        schema: {\n          type: \"question\",\n          validations: {}\n        },\n        methods: {\n          isQuestion: true,\n          getValidations: function getValidations() {\n            return this.get(\"validations\");\n          },\n          validate: function validate(response) {\n            if (this.validators) {\n              var promises = [],\n                  validatorsKeys = Object.keys(this.validators);\n              for (var i = 0; i < validatorsKeys.length; i++) {\n                var validatorsKey = validatorsKeys[i];\n                promises.push(this.validators[validatorsKey].call(this, response));\n              }\n              return Promise.all(promises);\n            }\n            return Promise.resolve();\n          }\n        }\n      }),\n      Validations: {\n        Required: {\n          schema: {\n            validations: {\n              required: false\n            }\n          },\n          methods: {\n            revivers: {\n              required: function required(model) {\n                var validations = model.validations,\n                    required = validations.required;\n\n                return this.setRequired(required);\n              }\n            },\n            getRequired: function getRequired() {\n              return this.getIn([\"validations\", \"required\"]);\n            },\n            setRequired: function setRequired(required) {\n              if ((0, _isBoolean3.default)(required)) {\n                return this.setIn([\"validations\", \"required\"], required);\n              }\n\n              return this;\n            },\n            validators: {\n              checkRequired: function checkRequired(response) {\n                var _this = this;\n\n                return new Promise(function (resolve, reject) {\n                  var err = null;\n\n                  if (!response) {\n                    if (_this.getRequired()) {\n                      err = _defineProperty({}, _this.getId(), \"This field is required.\");\n                      return reject(err);\n                    }\n                  }\n                  return resolve();\n                });\n              }\n            }\n          }\n        }\n      }\n    };\n    Models.Question[QuestionTypes.singletext] = (0, _merge3.default)({}, Models.Question.Base, {\n      schema: {\n        subType: QuestionTypes.singletext\n      }\n    }, Models.Question.Validations.Required);\n    Models.Question[QuestionTypes.code] = (0, _merge3.default)({}, Models.Question.Base, {\n      schema: {\n        subType: QuestionTypes.code,\n        language: \"javascript\",\n        codeValidator: \"\",\n        quizMode: true,\n        markdown: false,\n        defaultTemplate: \"\",\n        codeValidationStatus: _immutable2.default.Map({\n          status: CodeValidationStatus.UNCHECKED,\n          reason: \"\"\n        })\n      },\n      methods: {\n        revivers: {\n          code: function code(model) {\n            var language = model.language,\n                quizMode = model.quizMode,\n                codeValidator = model.codeValidator,\n                markdown = model.markdown,\n                defaultTemplate = model.defaultTemplate,\n                codeValidationStatus = model.codeValidationStatus;\n\n            return this.setQuizMode(quizMode).setLanguage(language).setCodeValidator(codeValidator).setCodeValidationStatus(codeValidationStatus).setMarkdown(markdown).setDefaultTemplate(defaultTemplate);\n          }\n        },\n        getLanguage: function getLanguage() {\n          return this.get(\"language\");\n        },\n        setLanguage: function setLanguage(language) {\n          return this.set(\"language\", language || \"javascript\");\n        },\n        getQuizMode: function getQuizMode() {\n          return this.get(\"quizMode\");\n        },\n        setQuizMode: function setQuizMode(mode) {\n          return this.set(\"quizMode\", mode);\n        },\n        getCodeValidator: function getCodeValidator() {\n          return this.get(\"codeValidator\");\n        },\n        setCodeValidator: function setCodeValidator(codeValidator) {\n          return this.set(\"codeValidator\", codeValidator);\n        },\n        getMarkdown: function getMarkdown() {\n          return this.get(\"markdown\");\n        },\n        setMarkdown: function setMarkdown(markdown) {\n          return this.set(\"markdown\", markdown);\n        },\n        getDefaultTemplate: function getDefaultTemplate() {\n          return this.get(\"defaultTemplate\");\n        },\n        setDefaultTemplate: function setDefaultTemplate(defaultTemplate) {\n          return this.set(\"defaultTemplate\", defaultTemplate);\n        },\n        getCodeValidationStatus: function getCodeValidationStatus() {\n          return this.getIn([\"codeValidationStatus\", \"status\"]);\n        },\n        getCodeValidationReason: function getCodeValidationReason() {\n          return this.getIn([\"codeValidationStatus\", \"reason\"]);\n        },\n        setCodeValidationStatus: function setCodeValidationStatus(codeValidationStatus) {\n          if (!codeValidationStatus) {\n            return this;\n          }\n          return this.set(\"codeValidationStatus\", _immutable2.default.Map(codeValidationStatus));\n        }\n      }\n    });\n    Models.Question[QuestionTypes.yesno] = (0, _merge3.default)({}, Models.Question.Base, {\n      schema: {\n        subType: QuestionTypes.yesno,\n        quizMode: false,\n        answer: \"\",\n        marks: 1,\n        logic: false,\n        skipTo: _immutable2.default.Map()\n      },\n      methods: {\n        revivers: {\n          yesno: function yesno(model) {\n            var quizMode = model.quizMode,\n                answer = model.answer,\n                marks = model.marks,\n                logic = model.logic,\n                skipTo = model.skipTo,\n                yesno = this;\n\n            yesno = yesno.setQuizMode(quizMode).setAnswer(answer).setMarks(marks).setLogic(logic);\n            (0, _forIn3.default)(skipTo, function (value, key) {\n              yesno = yesno.setSkipTo(key, value);\n            });\n            return yesno;\n          }\n        },\n        getQuizMode: function getQuizMode() {\n          return this.get(\"quizMode\");\n        },\n        setQuizMode: function setQuizMode(mode) {\n          return this.set(\"quizMode\", mode);\n        },\n        getAnswer: function getAnswer() {\n          return this.get(\"answer\");\n        },\n        setAnswer: function setAnswer(answer) {\n          return this.set(\"answer\", answer);\n        },\n        getMarks: function getMarks() {\n          return this.get(\"marks\");\n        },\n        setMarks: function setMarks(marks) {\n          return this.set(\"marks\", marks || 1);\n        },\n        getLogic: function getLogic() {\n          return this.get(\"logic\");\n        },\n        setLogic: function setLogic(logic) {\n          if ((0, _isBoolean3.default)(logic)) {\n            return this.set(\"logic\", logic);\n          }\n\n          return this;\n        },\n        getSkipTo: function getSkipTo(id) {\n          if (!id) {\n            return this.get(\"skipTo\");\n          }\n          return this.getIn([\"skipTo\", id]);\n        },\n        setSkipTo: function setSkipTo(id, skipTo) {\n          if (!id || !skipTo) {\n            return this;\n          }\n          return this.setIn([\"skipTo\", id], skipTo);\n        },\n        removeSkipTo: function removeSkipTo(id) {\n          return this.deleteIn([\"skipTo\", id]);\n        }\n      }\n    });\n    Models.Question[QuestionTypes.datepicker] = (0, _merge3.default)({}, Models.Question.Base, {\n      schema: {\n        subType: QuestionTypes.datepicker\n      }\n    }, Models.Question.Validations.Required);\n    Models.Question[QuestionTypes.multivalue] = (0, _merge3.default)({}, Models.Question.Base, {\n      schema: {\n        subType: QuestionTypes.multivalue,\n        options: [\"one\", \"two\"],\n        quizMode: false,\n        answer: null,\n        marks: 1,\n        displayType: \"dropdown\",\n        logic: false,\n        skipTo: _immutable2.default.Map(),\n        markdown: false\n      },\n      methods: {\n        revivers: {\n          multivalue: function multivalue(model) {\n            var options = model.options,\n                quizMode = model.quizMode,\n                answer = model.answer,\n                marks = model.marks,\n                displayType = model.displayType,\n                logic = model.logic,\n                skipTo = model.skipTo,\n                markdown = model.markdown,\n                multivalue = this;\n\n\n            multivalue = multivalue.setOptions(options).setQuizMode(quizMode).setAnswer(answer).setMarks(marks).setDisplayType(displayType).setLogic(logic).setMarkdown(markdown);\n            (0, _forIn3.default)(skipTo, function (value, key) {\n              multivalue = multivalue.setSkipTo(key, value);\n            });\n            return multivalue;\n          }\n        },\n        getOptions: function getOptions() {\n          return this.get(\"options\").toArray();\n        },\n        setOptions: function setOptions(value) {\n          if ((0, _isArray3.default)(value)) {\n            value = _immutable2.default.List(value);\n          }\n\n          if (_immutable2.default.List.isList(value)) {\n            return this.set(\"options\", value);\n          }\n\n          return this;\n        },\n        getQuizMode: function getQuizMode() {\n          return this.get(\"quizMode\");\n        },\n        setQuizMode: function setQuizMode(mode) {\n          return this.set(\"quizMode\", mode);\n        },\n        getMarkdown: function getMarkdown() {\n          return this.get(\"markdown\");\n        },\n        setMarkdown: function setMarkdown(markdown) {\n          return this.set(\"markdown\", markdown);\n        },\n        getAnswer: function getAnswer() {\n          return this.get(\"answer\");\n        },\n        setAnswer: function setAnswer(answer) {\n          return this.set(\"answer\", answer);\n        },\n        getMarks: function getMarks() {\n          return this.get(\"marks\");\n        },\n        setMarks: function setMarks(marks) {\n          return this.set(\"marks\", marks || 1);\n        },\n        getDisplayType: function getDisplayType() {\n          return this.get(\"displayType\");\n        },\n        setDisplayType: function setDisplayType(displayType) {\n          return this.set(\"displayType\", displayType);\n        },\n        getLogic: function getLogic() {\n          return this.get(\"logic\");\n        },\n        setLogic: function setLogic(logic) {\n          if ((0, _isBoolean3.default)(logic)) {\n            return this.set(\"logic\", logic);\n          }\n\n          return this;\n        },\n        getSkipTo: function getSkipTo(id) {\n          if (!id) {\n            return this.get(\"skipTo\");\n          }\n          return this.getIn([\"skipTo\", id]);\n        },\n        setSkipTo: function setSkipTo(id, skipTo) {\n          if (!id || !skipTo) {\n            return this;\n          }\n          return this.setIn([\"skipTo\", id], skipTo);\n        },\n        removeSkipTo: function removeSkipTo(id) {\n          return this.deleteIn([\"skipTo\", id]);\n        }\n      }\n    }, Models.Question.Validations.Required);\n    Models.Decorator = (0, _merge3.default)({}, Models.PageItem, {\n      schema: {\n        type: \"decorator\"\n      },\n      methods: {\n        isQuestion: false\n      }\n    });\n    Models.Dimensions = {\n      schema: {\n        dimensions: {\n          width: \"\",\n          height: \"\"\n        }\n      },\n      methods: {\n        revivers: {\n          dimensions: function dimensions(model) {\n            var dimensions = model.dimensions;\n\n            return this.setDimensions(dimensions);\n          }\n        },\n        getDimensions: function getDimensions() {\n          return this.get(\"dimensions\");\n        },\n        setDimensions: function setDimensions(dimensions) {\n          if (!dimensions) {\n            return this;\n          }\n          var dimention = this.set(\"dimensions\", _immutable2.default.Map());\n          return dimention.setIn([\"dimensions\", \"width\"], dimensions.width).setIn([\"dimensions\", \"height\"], dimensions.height);\n        },\n        getWidth: function getWidth() {\n          return this.getIn([\"dimensions\", \"width\"]);\n        },\n        setWidth: function setWidth(width) {\n          return this.setIn([\"dimensions\", \"width\"], width);\n        },\n        getHeight: function getHeight() {\n          return this.getIn([\"dimensions\", \"height\"]);\n        },\n        setHeight: function setHeight(height) {\n          return this.setIn([\"dimensions\", \"height\"], height);\n        }\n      }\n    };\n    Models.Decorator[DecoratorTypes.image] = (0, _merge3.default)({}, Models.Decorator, Models.Dimensions, Models.Header, {\n      schema: {\n        subType: DecoratorTypes.image,\n        imageId: null\n      },\n      methods: {\n        revivers: {\n          image: function image(model) {\n            var imageId = model.imageId;\n\n            return this.setImageId(imageId);\n          }\n        },\n        setImageId: function setImageId(imageId) {\n          return this.setIn([\"imageId\"], imageId);\n        },\n        getImageId: function getImageId() {\n          return this.getIn([\"imageId\"]);\n        }\n      }\n    });\n    Models.Decorator[DecoratorTypes.text] = (0, _merge3.default)({}, Models.Decorator, Models.Header, {\n      schema: {\n        subType: DecoratorTypes.text\n      },\n      methods: {\n        revivers: {\n          text: function text(model) {\n            return this;\n          }\n        }\n      }\n    });\n    Models.Page = (0, _merge3.default)({\n      schema: {\n        randomizeQuestions: false,\n        pageItemRefs: [],\n        maxPageItemsAllowed: null,\n        logic: false,\n        skipTo: \"eos\",\n        totalPageMarks: 0\n      },\n      methods: {\n        isPage: true,\n        revivers: {\n          page: function page(model) {\n            var randomizeQuestions = model.randomizeQuestions,\n                pageItemRefs = model.pageItemRefs,\n                maxPageItemsAllowed = model.maxPageItemsAllowed,\n                logic = model.logic,\n                skipTo = model.skipTo,\n                totalPageMarks = model.totalPageMarks,\n                page = this.setRandomizeQuestions(randomizeQuestions).setMaxPageItemsAllowed(maxPageItemsAllowed).setLogic(logic).setSkipTo(skipTo).setPageMarksTotal(totalPageMarks);\n            // Add page item refs\n\n            if ((0, _isArray3.default)(pageItemRefs)) {\n              for (var i = 0; i < pageItemRefs.length; i++) {\n                page = page.addPageItemRef(pageItemRefs[i]);\n              }\n            }\n\n            return page;\n          }\n        },\n        getRandomizeQuestions: function getRandomizeQuestions() {\n          return this.get(\"randomizeQuestions\");\n        },\n        setRandomizeQuestions: function setRandomizeQuestions(randomizeQuestions) {\n          if ((0, _isBoolean3.default)(randomizeQuestions)) {\n            return this.set(\"randomizeQuestions\", randomizeQuestions);\n          }\n\n          return this;\n        },\n        getMaxPageItemsAllowed: function getMaxPageItemsAllowed() {\n          return this.get(\"maxPageItemsAllowed\");\n        },\n        setMaxPageItemsAllowed: function setMaxPageItemsAllowed(maxPageItemsAllowed) {\n          return this.set(\"maxPageItemsAllowed\", maxPageItemsAllowed);\n        },\n        getLogic: function getLogic() {\n          return this.get(\"logic\");\n        },\n        setLogic: function setLogic(logic) {\n          if ((0, _isBoolean3.default)(logic)) {\n            return this.set(\"logic\", logic);\n          }\n\n          return this;\n        },\n        getSkipTo: function getSkipTo() {\n          return this.get(\"skipTo\");\n        },\n        setSkipTo: function setSkipTo(skipTo) {\n          if (!skipTo) {\n            skipTo = \"eos\";\n          }\n          return this.set(\"skipTo\", skipTo);\n        },\n        getPageMarksTotal: function getPageMarksTotal() {\n          return this.get(\"totalPageMarks\");\n        },\n        setPageMarksTotal: function setPageMarksTotal(totalPageMarks) {\n          return this.set(\"totalPageMarks\", totalPageMarks);\n        },\n        getPageItemRefsSize: function getPageItemRefsSize() {\n          return this.get(\"pageItemRefs\").size;\n        },\n        getPageItemRefs: function getPageItemRefs() {\n          return this.get(\"pageItemRefs\").valueSeq();\n        },\n        getPageItemRef: function getPageItemRef(index) {\n          _assertions2.default.IndexIsInBounds(index, this.getPageItemRefsSize());\n\n          return this.getIn([\"pageItemRefs\", index]);\n        },\n        getPageItemRefIndex: function getPageItemRefIndex(ref) {\n          return this.get(\"pageItemRefs\").toArray().indexOf(ref);\n        },\n        addPageItemRef: function addPageItemRef(ref) {\n          var index = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : -1;\n\n          _assertions2.default.IdIsValid(ref);\n\n          var size = this.getPageItemRefsSize();\n          if (index == -1) {\n            index = size;\n          } else {\n            _assertions2.default.IndexIsInBounds(index, size + 1);\n          }\n\n          _assertions2.default.PageItemRefIsNotInPage(this, ref);\n\n          var pageItemRefs = this.get(\"pageItemRefs\");\n          pageItemRefs = pageItemRefs.insert(index, ref);\n\n          return this.setIn([\"pageItemRefs\"], pageItemRefs);\n        },\n        removePageItemRef: function removePageItemRef(indexOrRef) {\n          var index = -1;\n          if (typeof indexOrRef == \"number\") {\n            _assertions2.default.IndexIsInBounds(indexOrRef, this.getPageItemRefsSize());\n            index = indexOrRef;\n          } else {\n            index = this.getPageItemRefIndex(indexOrRef);\n          }\n          if (index == -1) {\n            throw \"The PageItemRef - \" + indexOrRef + \" does not exist in page - \" + this.getId() + \".\";\n          }\n          return this.deleteIn([\"pageItemRefs\", index]);\n        },\n        movePageItemRef: function movePageItemRef(oldIndex, newIndex) {\n          if (newIndex == oldIndex) {\n            return this;\n          }\n\n          if (newIndex == -1) {\n            return this;\n          }\n\n          if (newIndex > this.size) {\n            return this;\n          }\n\n          var value = this.getPageItemRef(oldIndex);\n          return this.removePageItemRef(oldIndex).addPageItemRef(value, newIndex);\n        }\n      }\n    }, Models.Id, Models.Header);\n    Models.Date = {\n      schema: {\n        date: _immutable2.default.Map({\n          created: \"\",\n          updated: \"\"\n        })\n      },\n      methods: {\n        revivers: {\n          date: function date(_ref3) {\n            var _date = _ref3.date;\n\n            var _ref4 = _date || {},\n                created = _ref4.created,\n                updated = _ref4.updated;\n\n            return this.setCreated(created).setUpdated(updated);\n          }\n        },\n        getDate: function getDate() {\n          return this.get(\"date\");\n        },\n        getCreated: function getCreated() {\n          return this.getIn([\"date\", \"created\"]);\n        },\n        setCreated: function setCreated(dateString) {\n          if (!dateString) {\n            return this;\n          }\n          return this.setIn([\"date\", \"created\"], dateString);\n        },\n        getUpdated: function getUpdated() {\n          return this.getIn([\"date\", \"updated\"]);\n        },\n        setUpdated: function setUpdated(dateString) {\n          if (!dateString) {\n            return this;\n          }\n          return this.setIn([\"date\", \"updated\"], dateString);\n        }\n      }\n    };\n\n    Models.Attachments = {\n      schema: {\n        thumbnail: \"\"\n      },\n      methods: {\n        revivers: {\n          attachments: function attachments(model) {\n            var thumbnail = model.thumbnail;\n\n            return this.setThumbnail(thumbnail);\n          }\n        },\n        getThumbnail: function getThumbnail() {\n          return this.getIn([\"thumbnail\"]);\n        },\n        setThumbnail: function setThumbnail(thumbnail) {\n          return this.setIn([\"thumbnail\"], thumbnail);\n        }\n      }\n    };\n    Models.Survey = (0, _merge3.default)({\n      schema: {\n        _rev: null,\n        _schemaVersion: \"1.0\",\n        _isDeleted: false,\n        /**If set to true, the Survey will ensure default Page and Questions are maintained\r\n                 * during Page/Question deletions. \r\n                 */\n        _ensureDefaults: false,\n        isTimer: false,\n        showMarksRunMode: false,\n        timeout: null,\n        questionDisplay: QuestionDisplayTypes.QUESTION,\n        minimumMarks: 0,\n        pages: [],\n        pageItems: {},\n        startFrom: 0,\n        surveyMarksTotal: 0,\n        restrictPrevious: false\n      },\n      methods: {\n        isSurvey: true,\n        revivers: {\n          survey: function survey(model) {\n            var _rev = model._rev,\n                _ensureDefaults = model._ensureDefaults,\n                pages = model.pages,\n                pageItems = model.pageItems,\n                isTimer = model.isTimer,\n                timeout = model.timeout,\n                questionDisplay = model.questionDisplay,\n                minimumMarks = model.minimumMarks,\n                startFrom = model.startFrom,\n                showMarksRunMode = model.showMarksRunMode,\n                surveyMarksTotal = model.surveyMarksTotal,\n                restrictPrevious = model.restrictPrevious,\n                survey = this;\n\n            // Add pages.\n\n            if ((0, _isArray3.default)(pages)) {\n              for (var i = 0; i < pages.length; i++) {\n                var page = PageFactory.fromModel(pages[i]);\n                survey = survey.pushPage(page);\n              }\n            }\n\n            // Add page items\n            if ((0, _isPlainObject3.default)(pageItems)) {\n              var pageItemsKeys = Object.keys(pageItems);\n              for (var _i = 0; _i < pageItemsKeys.length; _i++) {\n                var pageItemKey = pageItemsKeys[_i],\n                    pageItem = PageItemFactory.fromModel(pageItems[pageItemKey]);\n                survey = survey.addPageItem(pageItem);\n              }\n            }\n            // Important to set ensureDefaults in the end, otherwise\n            // Survey.addPage/addPageItem will obey ensureDefaults!\n            return survey.setRevision(_rev)._setEnsureDefaults(_ensureDefaults).setIsTimer(isTimer).setTimeout(timeout).setQuestionDisplay(questionDisplay).setMinimumMarks(minimumMarks).setStartFrom(startFrom).setShowMarksRunMode(showMarksRunMode).setSurveyMarksTotal(surveyMarksTotal).setRestrictPrevious(restrictPrevious);\n          }\n        },\n        clone: function clone() {\n          return this.setId((0, _bsonObjectid2.default)().str);\n        },\n        _getEnsureDefaults: function _getEnsureDefaults() {\n          return this.get(\"_ensureDefaults\");\n        },\n        _setEnsureDefaults: function _setEnsureDefaults(ensureDefaults) {\n          if ((0, _isBoolean3.default)(ensureDefaults)) {\n            return this.set(\"_ensureDefaults\", ensureDefaults);\n          }\n\n          return this;\n        },\n        getPages: function getPages() {\n          return this.get(\"pages\");\n        },\n        getIsTimer: function getIsTimer() {\n          return this.get(\"isTimer\");\n        },\n        setIsTimer: function setIsTimer(isTimer) {\n          if ((0, _isBoolean3.default)(isTimer)) {\n            return this.set(\"isTimer\", isTimer);\n          }\n\n          return this;\n        },\n        getShowMarksRunMode: function getShowMarksRunMode() {\n          return this.get(\"showMarksRunMode\");\n        },\n        setShowMarksRunMode: function setShowMarksRunMode(showMarksRunMode) {\n          if ((0, _isBoolean3.default)(showMarksRunMode)) {\n            return this.set(\"showMarksRunMode\", showMarksRunMode);\n          }\n\n          return this;\n        },\n        getSurveyMarksTotal: function getSurveyMarksTotal() {\n          return this.get(\"surveyMarksTotal\");\n        },\n        setSurveyMarksTotal: function setSurveyMarksTotal(surveyMarksTotal) {\n          return this.set(\"surveyMarksTotal\", surveyMarksTotal);\n        },\n        getRestrictPrevious: function getRestrictPrevious() {\n          return this.get(\"restrictPrevious\");\n        },\n        setRestrictPrevious: function setRestrictPrevious(restrictPrevious) {\n          return this.set(\"restrictPrevious\", restrictPrevious);\n        },\n        getTimeout: function getTimeout() {\n          return this.get(\"timeout\");\n        },\n        setTimeout: function setTimeout(timeout) {\n          return this.set(\"timeout\", timeout);\n        },\n        getStartFrom: function getStartFrom() {\n          return this.get(\"startFrom\");\n        },\n        setStartFrom: function setStartFrom(startFrom) {\n          return this.set(\"startFrom\", startFrom);\n        },\n        getQuestionDisplay: function getQuestionDisplay() {\n          return this.get(\"questionDisplay\");\n        },\n        setQuestionDisplay: function setQuestionDisplay(style) {\n          if (!style) {\n            return this;\n          }\n          if (!QuestionDisplayTypes[style.toUpperCase()]) {\n            return this;\n          }\n          return this.set(\"questionDisplay\", style);\n        },\n        getMinimumMarks: function getMinimumMarks() {\n          return parseInt(this.get(\"minimumMarks\"));\n        },\n        setMinimumMarks: function setMinimumMarks(marks) {\n          return this.set(\"minimumMarks\", parseInt(marks));\n        },\n        getIsDeleted: function getIsDeleted() {\n          return this.get(\"_isDeleted\");\n        },\n        setIsDeleted: function setIsDeleted(isDeleted) {\n          if ((0, _isBoolean3.default)(isDeleted)) {\n            return this.set(\"_isDeleted\", isDeleted);\n          }\n\n          return this;\n        },\n        _ensureDefaultsPageItems: function _ensureDefaultsPageItems(page) {\n          // If ensure defaults is not set, return the survey model unchanged.\n          if (!this._getEnsureDefaults()) {\n            return this;\n          }\n\n          // If the page is empty, add a default question.\n          if (page.getPageItemRefsSize() == 0) {\n            var question = PageItemFactory._createDefaultQuestion();\n            return this.addPageItemToPageAndSurvey(page, question);\n          }\n\n          return this;\n        },\n        _ensureDefaultPage: function _ensureDefaultPage() {\n          // If ensure defaults is not set, return the survey model unchanged.\n          if (!this._getEnsureDefaults()) {\n            return this;\n          }\n\n          // If no pages are present, add a default page.\n          if (this.getPagesSize() == 0) {\n            var page = PageFactory._createDefaultPage();\n            return this.pushPage(page);\n          }\n\n          return this;\n        },\n        getRevision: function getRevision() {\n          return this.get(\"_rev\");\n        },\n        setRevision: function setRevision(revision) {\n          if (!(0, _isUndefined3.default)(revision)) {\n            return this.setIn([\"_rev\"], revision);\n          }\n\n          return this;\n        },\n        getPageItemsSize: function getPageItemsSize() {\n          return this.get(\"pageItems\").count();\n        },\n        getPageItemsKeys: function getPageItemsKeys() {\n          return this.get(\"pageItems\").keySeq();\n        },\n        getPageItemBySubtype: function getPageItemBySubtype(subType) {\n          return this.get(\"pageItems\").filter(function (obj) {\n            return obj.getSubType() == subType;\n          });\n        },\n        getPageItem: function getPageItem(key) {\n          _assertions2.default.IdIsValid(key);\n\n          return this.getIn([\"pageItems\", key]);\n        },\n        addPageItem: function addPageItem(newPageItem) {\n          _assertions2.default.ItemIsPageItem(newPageItem);\n\n          return this.setIn([\"pageItems\", newPageItem.getId()], newPageItem);\n        },\n        /** Adds an existing PageItem to and existing Page in this Survey.\r\n                 *  Both the PageItem and Page must be present in this Survey.\r\n                 * @param  {any} pageOrPageId\r\n                 * @param  {any} pageItemOrPageItemId\r\n                 * @param  {any} pageItemRefPositon\r\n                 */\n        addPageItemToPage: function addPageItemToPage(pageOrPageId, pageItemOrPageItemId, pageItemRefPositon) {\n          // The page must be valid and existing in this survey.\n          // This assertion will be performed inside updatePage.\n          var page = pageOrPageId.isPage ? pageOrPageId : this.getPage(pageOrPageId);\n\n          // The page item must be valid and existing in this survey.\n          var pageItem = pageItemOrPageItemId.isPageItem ? pageItemOrPageItemId : this.getPageItem(pageItemOrPageItemId);\n          _assertions2.default.ItemIsPageItem(pageItemOrPageItemId);\n          _assertions2.default.PageItemIsPresentInSurvey(this, pageItemOrPageItemId);\n\n          // The item ref must not already exist in the page\n          // This assertion is handled in the Page.addPageItemRef\n          // Assertions.PageItemRefIsNotInPage(page, pageItem.getId());\n\n          // Find the existing index of this page\n          var pageIndex = this.getPageIndex(page);\n\n          // Get the new page with item added\n          page = page.addPageItemRef(pageItem.getId(), pageItemRefPositon);\n\n          // Set the pageItem's parentPageId to this Page.\n          pageItem = pageItem.setParentPageId(page.getId());\n\n          // Set the new page into this survey and update the PageItem too.\n          return this.updatePage(pageIndex, page).updatePageItem(pageItem);\n        },\n        /** Adds a new PageItem to an existing page in this Survey.\r\n                 *  This function in a convenience method over addPageItem and addPageItemToPage.\r\n                 *  The PageItem must NOT be present in this Survey.\r\n                 *  The Page must exist in this Survey.\r\n                 * @param  {any} pageOrPageId\r\n                 * @param  {any} pageItemOrPageItemId\r\n                 * @param  {any} pageItemRefPositon\r\n                 */\n        addPageItemToPageAndSurvey: function addPageItemToPageAndSurvey(pageOrPageId, newPageItemOrPageItemId, pageItemRefPositon) {\n          _assertions2.default.PageItemIsNotPresentInSurvey(this, newPageItemOrPageItemId);\n\n          return this.addPageItem(newPageItemOrPageItemId).addPageItemToPage(pageOrPageId, newPageItemOrPageItemId, pageItemRefPositon);\n        },\n        updatePageItem: function updatePageItem(pageItem) {\n          _assertions2.default.ItemIsPageItem(pageItem);\n          _assertions2.default.PageItemIsPresentInSurvey(this, pageItem);\n\n          return this.setIn([\"pageItems\", pageItem.getId()], pageItem);\n        },\n        removePageItem: function removePageItem(pageItemOrPageItemId) {\n          var pageItemId = pageItemOrPageItemId.isPageItem ? pageItemOrPageItemId.getId() : pageItemOrPageItemId;\n          _assertions2.default.PageItemIsPresentInSurvey(this, pageItemId);\n          // Remove PageItem references from its parent page.\n          var parentPageId = pageItemOrPageItemId.isPageItem ? pageItemOrPageItemId.getParentPageId() : this.getPageItem(pageItemOrPageItemId).getParentPageId(),\n              page = parentPageId ? this.getPage(this.getPageIndex(parentPageId)) : null;\n\n          var result = this.deleteIn([\"pageItems\", pageItemId]);\n\n          if (page) {\n            page = page.removePageItemRef(pageItemId);\n            result = result.updatePage(this.getPageIndex(page), page);\n          }\n\n          return result._ensureDefaultsPageItems(page);\n        },\n        getPagesSize: function getPagesSize() {\n          return this.get(\"pages\").size;\n        },\n        getPageIndex: function getPageIndex(pageOrPageId) {\n          var pages = this.get(\"pages\"),\n              pageId = pageOrPageId.isPage ? pageOrPageId.getId() : pageOrPageId,\n              queryResults = pages.findEntry(function (page, index) {\n            return page.getId() == pageId;\n          });\n\n          return queryResults ? queryResults[0] : -1;\n        },\n        getPage: function getPage(index) {\n          _assertions2.default.IndexIsInBounds(index, this.getPagesSize());\n\n          return this.getIn([\"pages\", index]);\n        },\n        updatePage: function updatePage(index, page) {\n          _assertions2.default.ItemIsPage(page);\n          _assertions2.default.PageIsPresentInSurvey(this, page);\n          _assertions2.default.IndexIsInBounds(index, this.getPagesSize());\n\n          return this.setIn([\"pages\", index], page);\n        },\n        insertPage: function insertPage(index, page) {\n          _assertions2.default.ItemIsPage(page);\n          _assertions2.default.IndexIsInBounds(index, this.getPagesSize());\n\n          var pages = this.get(\"pages\").insert(index, page);\n\n          return this.set(\"pages\", pages)._ensureDefaultsPageItems(page);\n        },\n        pushPage: function pushPage(page) {\n          _assertions2.default.ItemIsPage(page);\n\n          var pages = this.get(\"pages\").push(page);\n\n          // Ensure an empty page has default items.\n          return this.set(\"pages\", pages)._ensureDefaultsPageItems(page);\n        },\n        removePage: function removePage(index) {\n          _assertions2.default.IndexIsInBounds(index, this.getPagesSize());\n\n          var page = this.getPage(index),\n              pageItemRefsToRemove = page.getPageItemRefs(),\n              result = this;\n\n          // Remove all PageItems of this Page.\n          var _iteratorNormalCompletion = true;\n          var _didIteratorError = false;\n          var _iteratorError = undefined;\n\n          try {\n            for (var _iterator = pageItemRefsToRemove[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n              var pageItemRef = _step.value;\n\n              result = result.removePageItem(pageItemRef);\n            }\n\n            // Remove the Page\n          } catch (err) {\n            _didIteratorError = true;\n            _iteratorError = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion && _iterator.return) {\n                _iterator.return();\n              }\n            } finally {\n              if (_didIteratorError) {\n                throw _iteratorError;\n              }\n            }\n          }\n\n          return result.deleteIn([\"pages\", index])._ensureDefaultPage();\n        },\n        movePage: function movePage(oldIndex, newIndex) {\n          if (newIndex == oldIndex) {\n            return this;\n          }\n\n          if (newIndex == -1) {\n            return this;\n          }\n\n          if (newIndex > this.getPagesSize()) {\n            return this;\n          }\n\n          var pageToMove = this.getIn([\"pages\", oldIndex]),\n              result = this.deleteIn([\"pages\", oldIndex]),\n              pages = result.get(\"pages\").insert(newIndex, pageToMove);\n\n          return result.set(\"pages\", pages);\n        }\n      }\n    }, Models.Id, Models.Owner, Models.Header, Models.Date, Models.Attachments);\n    var Types = {\n      Page: (0, _maketypedrecord2.default)(Models.Page),\n      Question: (_Question = {}, _defineProperty(_Question, QuestionTypes.singletext, (0, _maketypedrecord2.default)(Models.Question.singletext)), _defineProperty(_Question, QuestionTypes.yesno, (0, _maketypedrecord2.default)(Models.Question.yesno)), _defineProperty(_Question, QuestionTypes.datepicker, (0, _maketypedrecord2.default)(Models.Question.datepicker)), _defineProperty(_Question, QuestionTypes.multivalue, (0, _maketypedrecord2.default)(Models.Question.multivalue)), _defineProperty(_Question, QuestionTypes.code, (0, _maketypedrecord2.default)(Models.Question.code)), _Question),\n      Decorator: (_Decorator = {}, _defineProperty(_Decorator, DecoratorTypes.image, (0, _maketypedrecord2.default)(Models.Decorator.image)), _defineProperty(_Decorator, DecoratorTypes.text, (0, _maketypedrecord2.default)(Models.Decorator.text)), _Decorator),\n      Survey: (0, _maketypedrecord2.default)(Models.Survey)\n    },\n        PageFactory = {\n      _createDefaultPage: function _createDefaultPage() {\n        var page = this.create();\n        return page;\n      },\n      create: function create() {\n        var item = {\n          _id: (0, _bsonObjectid2.default)().str\n        };\n\n        return this.fromModel(item);\n      },\n      fromModel: function fromModel(model) {\n        var page = new Types.Page();\n        return (0, _processrevivers2.default)(page, model);\n      }\n    },\n        PageItemFactory = {\n      QuestionTypes: QuestionTypes,\n      DecoratorTypes: DecoratorTypes,\n      decorator: function decorator(subType, model) {\n        //throw \"Not implemented.\";\n        if (!DecoratorTypes[subType]) {\n          throw \"Unsupported subType \" + subType + \".\";\n        }\n\n        if (!model) {\n          throw \"Default is unavailable.\";\n        }\n        if (!model._id) {\n          model._id = (0, _bsonObjectid2.default)().str;\n        }\n        model.subType = subType;\n        return new Types.Decorator[subType](model);\n      },\n      _createDefaultQuestion: function _createDefaultQuestion() {\n        var question = this.question(QuestionTypes.singletext);\n        return question;\n      },\n      _createDefaultDecorator: function _createDefaultDecorator() {\n        var decorator = this.decorator(DecoratorTypes.text, {});\n        return decorator;\n      },\n      question: function question(subType, model) {\n        if (!QuestionTypes[subType]) {\n          throw \"Unsupported subType \" + subType + \".\";\n        }\n\n        if (!model) {\n          model = {\n            _id: (0, _bsonObjectid2.default)().str,\n            subType: subType\n          };\n        }\n        return new Types.Question[subType](model);\n      },\n      fromModel: function fromModel(model) {\n        var type = model.type,\n            subType = model.subType;\n\n\n        if (type !== \"question\" && type !== \"decorator\") {\n          throw \"Invalid model type - \" + type;\n        }\n        var pageItem = null;\n        if (type == \"question\") {\n          pageItem = this.question(subType);\n        }\n        if (type == \"decorator\") {\n          pageItem = this.decorator(subType, model);\n        }\n        return (0, _processrevivers2.default)(pageItem, model);\n      }\n    },\n        reviveSurvey = function reviveSurvey(model) {\n      var survey = new Types.Survey();\n      return (0, _processrevivers2.default)(survey, model);\n    },\n        createSurveyModel = function createSurveyModel(model) {\n      if (!model) {\n        model = {\n          _id: (0, _bsonObjectid2.default)().str\n        };\n\n        return new Types.Survey(model);\n      }\n\n      return reviveSurvey(model);\n    };\n\n    // Concrete SurveyModelBuilder object.\n    return {\n      PageFactory: PageFactory,\n      PageItemFactory: PageItemFactory,\n      fromModel: function fromModel(model) {\n        return createSurveyModel(model);\n      },\n      createEmptyModel: function createEmptyModel() {\n        return createSurveyModel();\n      },\n      createDefaultModel: function createDefaultModel() {\n        // Create empty model and set ensureDefaults to true.\n        var model = this.createEmptyModel()._setEnsureDefaults(true),\n            page = PageFactory._createDefaultPage();\n\n        model = model.setShowHeader(true);\n        // pushPage will add the defaul page items.\n        model = model.pushPage(page);\n\n        return model;\n      }\n    };\n  }\n},\n    SurveyModelBuilder = function SurveyModelBuilder() {\n  var schemaVersion = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultSchemaVersion;\n\n  return SurveySchemaBuilders[schemaVersion]();\n};\n\nexports.default = SurveyModelBuilder;\n\n/***/ }),\n\n/***/ 589:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _defaultloader = __webpack_require__(590);\n\nvar _defaultloader2 = _interopRequireDefault(_defaultloader);\n\nvar _reactLoadable = __webpack_require__(643);\n\nvar _reactLoadable2 = _interopRequireDefault(_reactLoadable);\n\nvar _errorloadercomponent = __webpack_require__(644);\n\nvar _errorloadercomponent2 = _interopRequireDefault(_errorloadercomponent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ProxyLoader = function ProxyLoader(moduleToImport, customLoadingComponent) {\n  var customDelay = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  return (0, _reactLoadable2.default)({\n    loader: moduleToImport,\n    LoadingComponent: getLoadingComponent(customLoadingComponent),\n    delay: 1\n  });\n};\nvar getLoadingComponent = function getLoadingComponent(customLoadingComponent) {\n  var LoadingComponent = customLoadingComponent || _defaultloader2.default;\n  return function (_ref) {\n    var isLoading = _ref.isLoading,\n        error = _ref.error,\n        pastDelay = _ref.pastDelay;\n\n    if (isLoading) {\n      return pastDelay ? _react2.default.createElement(LoadingComponent, null) : null; // Don't flash \"Loading...\" when we don't need to.\n    }\n    if (error) {\n      console.error(error);\n      return _react2.default.createElement(_errorloadercomponent2.default, null);\n    }\n    return null;\n  };\n};\n\nexports.default = ProxyLoader;\n\n/***/ }),\n\n/***/ 590:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _getMuiTheme = __webpack_require__(91);\n\nvar _getMuiTheme2 = _interopRequireDefault(_getMuiTheme);\n\nvar _MuiThemeProvider = __webpack_require__(107);\n\nvar _MuiThemeProvider2 = _interopRequireDefault(_MuiThemeProvider);\n\nvar _i18n = __webpack_require__(8);\n\nvar _i18n2 = _interopRequireDefault(_i18n);\n\nvar _RefreshIndicator = __webpack_require__(229);\n\nvar _RefreshIndicator2 = _interopRequireDefault(_RefreshIndicator);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar zIndex = {\n    zIndex: {\n        tooltip: 5000\n    }\n},\n    DefaultLoader = _react2.default.createClass({\n    displayName: 'DefaultLoader',\n\n    render: function render() {\n        return _react2.default.createElement(\n            _MuiThemeProvider2.default,\n            { muiTheme: (0, _getMuiTheme2.default)({}, zIndex) },\n            _react2.default.createElement(\n                'div',\n                { className: 'row center-xs' },\n                _react2.default.createElement(\n                    'div',\n                    { className: 'col-xs-8', style: { padding: '2%' } },\n                    _react2.default.createElement(_RefreshIndicator2.default, {\n                        size: 40,\n                        left: 0,\n                        top: 0,\n                        status: 'loading',\n                        style: {\n                            display: 'inline-block',\n                            position: 'relative'\n                        }\n                    })\n                )\n            )\n        );\n    }\n});\n\nexports.default = DefaultLoader;\n\n/***/ }),\n\n/***/ 6:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar Logger =  true ? {\n  log: function log() {},\n  info: function info() {},\n  debug: function debug() {},\n  warn: function warn() {},\n  error: function error() {}\n} : {\n  log: console.log.bind(console),\n  info: console.info.bind(console),\n  debug: console.debug.bind(console),\n  warn: console.warn.bind(console),\n  error: console.error.bind(console)\n};\nexports.default = Logger;\n\n/***/ }),\n\n/***/ 64:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _refluxCore = __webpack_require__(14);\n\nvar _refluxCore2 = _interopRequireDefault(_refluxCore);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar NotificationActions = _refluxCore2.default.createActions([\"notify\"]);\n\nexports.default = NotificationActions;\n\n/***/ }),\n\n/***/ 644:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _getMuiTheme = __webpack_require__(91);\n\nvar _getMuiTheme2 = _interopRequireDefault(_getMuiTheme);\n\nvar _MuiThemeProvider = __webpack_require__(107);\n\nvar _MuiThemeProvider2 = _interopRequireDefault(_MuiThemeProvider);\n\nvar _i18n = __webpack_require__(8);\n\nvar _i18n2 = _interopRequireDefault(_i18n);\n\nvar _RefreshIndicator = __webpack_require__(229);\n\nvar _RefreshIndicator2 = _interopRequireDefault(_RefreshIndicator);\n\nvar _FontIcon = __webpack_require__(102);\n\nvar _FontIcon2 = _interopRequireDefault(_FontIcon);\n\nvar _colors = __webpack_require__(48);\n\nvar Colors = _interopRequireWildcard(_colors);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar zIndex = {\n    zIndex: {\n        tooltip: 5000\n    }\n},\n    ErrorLoader = _react2.default.createClass({\n    displayName: 'ErrorLoader',\n\n    render: function render() {\n        return _react2.default.createElement(\n            _MuiThemeProvider2.default,\n            { muiTheme: (0, _getMuiTheme2.default)({}, zIndex) },\n            _react2.default.createElement(\n                'div',\n                { className: 'row center-xs' },\n                _react2.default.createElement(\n                    'div',\n                    { className: 'col-xs-8', style: { padding: '2%', color: Colors.red500 } },\n                    _react2.default.createElement(\n                        'div',\n                        null,\n                        _react2.default.createElement(\n                            _FontIcon2.default,\n                            { className: 'material-icons', color: Colors.red500 },\n                            'error'\n                        )\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        null,\n                        'Component failed to load'\n                    )\n                )\n            )\n        );\n    }\n});\n\nexports.default = ErrorLoader;\n\n/***/ }),\n\n/***/ 646:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _connect = __webpack_require__(63);\n\nvar _connect2 = _interopRequireDefault(_connect);\n\nvar _reactAddonsPureRenderMixin = __webpack_require__(27);\n\nvar _reactAddonsPureRenderMixin2 = _interopRequireDefault(_reactAddonsPureRenderMixin);\n\nvar _reactTapEventPlugin = __webpack_require__(164);\n\nvar _reactTapEventPlugin2 = _interopRequireDefault(_reactTapEventPlugin);\n\nvar _getMuiTheme = __webpack_require__(91);\n\nvar _getMuiTheme2 = _interopRequireDefault(_getMuiTheme);\n\nvar _MuiThemeProvider = __webpack_require__(107);\n\nvar _MuiThemeProvider2 = _interopRequireDefault(_MuiThemeProvider);\n\nvar _appstore = __webpack_require__(129);\n\nvar _appstore2 = _interopRequireDefault(_appstore);\n\nvar _siteheader = __webpack_require__(816);\n\nvar _siteheader2 = _interopRequireDefault(_siteheader);\n\nvar _helppage = __webpack_require__(365);\n\nvar _helppage2 = _interopRequireDefault(_helppage);\n\nvar _i18n = __webpack_require__(8);\n\nvar _i18n2 = _interopRequireDefault(_i18n);\n\nvar _customthemeprovider = __webpack_require__(252);\n\nvar _customthemeprovider2 = _interopRequireDefault(_customthemeprovider);\n\nvar _getcustomtheme = __webpack_require__(168);\n\nvar _getcustomtheme2 = _interopRequireDefault(_getcustomtheme);\n\nvar _reactdndtouchbackend = __webpack_require__(890);\n\nvar _reactdndtouchbackend2 = _interopRequireDefault(_reactdndtouchbackend);\n\nvar _reactDnd = __webpack_require__(401);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar zIndex = {\n  zIndex: {\n    tooltip: 5000\n  }\n},\n    App = _react2.default.createClass({\n  displayName: \"App\",\n\n  mixins: [_reactAddonsPureRenderMixin2.default, (0, _connect2.default)(_appstore2.default, \"AppState\")],\n  childContextTypes: {\n    location: _react2.default.PropTypes.object,\n    history: _react2.default.PropTypes.object\n  },\n\n  getChildContext: function getChildContext() {\n    return { location: this.props.location, history: this.props.history };\n  },\n  render: function render() {\n    var self = this,\n        childrenWithProps = _react2.default.Children.map(this.props.children, function (child) {\n      return _react2.default.cloneElement(child, {\n        isMobile: self.props.isMobile,\n        isShort: self.props.isShort\n      });\n    }),\n        isMobile = this.props.isMobile;\n\n    return _react2.default.createElement(\n      _MuiThemeProvider2.default,\n      { muiTheme: (0, _getMuiTheme2.default)({}, zIndex) },\n      _react2.default.createElement(\n        _customthemeprovider2.default,\n        { customTheme: (0, _getcustomtheme2.default)({}, isMobile) },\n        _react2.default.createElement(\n          \"div\",\n          {\n            key: this.state.AppState.get(\"language\"),\n            style: { height: \"100%\", overflow: \"auto\" }\n          },\n          _react2.default.createElement(\n            \"div\",\n            null,\n            _react2.default.createElement(_siteheader2.default, {\n              isMobile: this.props.isMobile,\n              questionMode: this.state.AppState.get(\"questionMode\")\n            }),\n            _react2.default.createElement(\n              \"div\",\n              { className: \"wr\", style: { height: \"100%\" } },\n              _react2.default.createElement(\n                \"div\",\n                { className: \"Demo\" },\n                childrenWithProps\n              )\n            )\n          )\n        )\n      )\n    );\n  }\n});\n\n//injectTapEventPlugin();\nexports.default = (0, _reactDnd.DragDropContext)((0, _reactdndtouchbackend2.default)({ enableMouseEvents: true }))(App);\n\n/***/ }),\n\n/***/ 647:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n// Generated by CoffeeScript 1.3.3\n(function () {\n  module.exports.container = function () {\n    var argList, container, factories, _get, haveVisited, notEmpty, register, registerOne, resolve, toFactory;\n    factories = {};\n    register = function register(name, func) {\n      var hash, _results;\n      if (name === Object(name)) {\n        hash = name;\n        _results = [];\n        for (name in hash) {\n          func = hash[name];\n          _results.push(registerOne(name, func));\n        }\n        return _results;\n      } else {\n        return registerOne(name, func);\n      }\n    };\n    registerOne = function registerOne(name, func) {\n      if (!(func != null)) {\n        throw new Error(\"cannot register null function\");\n      }\n      return factories[name] = toFactory(func);\n    };\n    toFactory = function toFactory(_func) {\n      if (typeof _func === \"function\") {\n        return {\n          func: _func,\n          required: argList(_func)\n        };\n      } else {\n        return {\n          func: function func() {\n            return _func;\n          },\n          required: []\n        };\n      }\n    };\n    argList = function argList(func) {\n      var match, required;\n      match = func.toString().match(/function.*?\\(([\\s\\S]*?)\\)/);\n      if (!(match != null)) {\n        throw new Error(\"could not parse function arguments: \" + (func != null ? func.toString() : void 0));\n      }\n      required = match[1].split(\",\").filter(notEmpty).map(function (str) {\n        return str.trim();\n      });\n      return required;\n    };\n    notEmpty = function notEmpty(a) {\n      return a;\n    };\n    _get = function get(name, overrides, visited) {\n      var dependencies, factory, instance, isOverridden;\n      if (visited == null) {\n        visited = [];\n      }\n      isOverridden = overrides != null;\n      if (haveVisited(visited, name)) {\n        throw new Error(\"circular dependency with '\" + name + \"'\");\n      }\n      visited = visited.concat(name);\n      factory = factories[name];\n      if (!(factory != null)) {\n        throw new Error(\"dependency '\" + name + \"' was not registered\");\n      }\n      if (factory.instance != null && !isOverridden) {\n        return factory.instance;\n      }\n      dependencies = factory.required.map(function (name) {\n        if ((overrides != null ? overrides[name] : void 0) != null) {\n          return overrides != null ? overrides[name] : void 0;\n        } else {\n          return _get(name, overrides, visited);\n        }\n      });\n      instance = factory.func.apply(factory, dependencies);\n      if (!isOverridden) {\n        factory.instance = instance;\n      }\n      return instance;\n    };\n    haveVisited = function haveVisited(visited, name) {\n      var isName;\n      isName = function isName(n) {\n        return n === name;\n      };\n      return visited.filter(isName).length;\n    };\n    resolve = function resolve(overrides, func) {\n      if (!func) {\n        func = overrides;\n        overrides = null;\n      }\n      register(\"__temp\", func);\n      return _get(\"__temp\", overrides);\n    };\n    container = {\n      get: _get,\n      resolve: resolve,\n      register: register\n    };\n    container.register(\"_container\", container);\n    return container;\n  };\n}).call(undefined);\n\n/***/ }),\n\n/***/ 654:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _bsonObjectid = __webpack_require__(17);\n\nvar _bsonObjectid2 = _interopRequireDefault(_bsonObjectid);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Assertions = {\n    \"ItemIsDefined\": function ItemIsDefined(item) {\n        if (typeof item == \"undefined\") {\n            throw 'Undefined value specified.';\n        }\n    },\n    \"IdIsValid\": function IdIsValid(id) {\n        if (!_bsonObjectid2.default.isValid(id)) {\n            throw \"Invalid id - \" + id;\n        }\n    },\n    \"IndexIsInBounds\": function IndexIsInBounds(index, size) {\n        if (typeof index !== \"number\") {\n            throw index + \" is an invalid index value.\";\n        }\n        if (index < 0 || index >= size) {\n            throw index + \" is out of bounds.\";\n        }\n    },\n    \"ItemIsSurvey\": function ItemIsSurvey(item) {\n        this.ItemIsDefined(item);\n\n        if (!item.isSurvey) {\n            throw \"The object is not a valid survey.\";\n        }\n    },\n    \"ItemIsPage\": function ItemIsPage(item) {\n        this.ItemIsDefined(item);\n\n        if (!item.isPage) {\n            throw \"The object is not a valid page.\";\n        }\n    },\n    \"ItemIsPageItem\": function ItemIsPageItem(item) {\n        this.ItemIsDefined(item);\n\n        if (!item.isPageItem) {\n            throw \"The object is not a valid page item.\";\n        }\n    },\n    \"isQuestion\": function isQuestion(item) {\n        this.ItemIsDefined(item);\n\n        if (!item.isQuestion) {\n            throw \"The object is not a valid question.\";\n        }\n    },\n    \"PageIsPresentInSurvey\": function PageIsPresentInSurvey(survey, pageOrPageId) {\n        var pageId = pageOrPageId.isPage ? pageOrPageId.getId() : pageOrPageId;\n\n        if (survey.getPageIndex(pageId) == -1) {\n            throw \"The page - \" + pageId + \" does not exist in the survey - \" + survey.getId();\n        }\n    },\n    \"PageItemIsPresentInSurvey\": function PageItemIsPresentInSurvey(survey, pageItemOrPageItemId) {\n        var pageItemId = pageItemOrPageItemId.isPageItem ? pageItemOrPageItemId.getId() : pageItemOrPageItemId;\n\n        if (!survey.getPageItem(pageItemId)) {\n            throw \"The page item - \" + pageItemId + \" does not exist in the survey - \" + survey.getId();\n        }\n    },\n    \"PageItemIsNotPresentInSurvey\": function PageItemIsNotPresentInSurvey(survey, pageItemOrPageItemId) {\n        var pageItemId = pageItemOrPageItemId.isPageItem ? pageItemOrPageItemId.getId() : pageItemOrPageItemId;\n\n        if (survey.getPageItem(pageItemId)) {\n            throw \"The page item - \" + pageItemId + \" already exists in the survey - \" + survey.getId();\n        }\n    },\n    \"PageItemRefIsNotInPage\": function PageItemRefIsNotInPage(page, pageItemId) {\n        var pageItemRefs = page.getPageItemRefs(),\n            error = \"The item - \" + pageItemId + \" already exists in the page - \" + page.getId();\n\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n            for (var _iterator = pageItemRefs[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                var pageItemRef = _step.value;\n\n                if (pageItemRef == pageItemId) {\n                    throw error;\n                }\n            }\n        } catch (err) {\n            _didIteratorError = true;\n            _iteratorError = err;\n        } finally {\n            try {\n                if (!_iteratorNormalCompletion && _iterator.return) {\n                    _iterator.return();\n                }\n            } finally {\n                if (_didIteratorError) {\n                    throw _iteratorError;\n                }\n            }\n        }\n    }\n};\n\nexports.default = Assertions;\n\n/***/ }),\n\n/***/ 655:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _bsonObjectid = __webpack_require__(17);\n\nvar _bsonObjectid2 = _interopRequireDefault(_bsonObjectid);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Assertions = {};\n\nexports.default = Assertions;\n\n/***/ }),\n\n/***/ 672:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar CouchDBRecipientAdapter = function () {\n    function CouchDBRecipientAdapter(contactBuilder) {\n        _classCallCheck(this, CouchDBRecipientAdapter);\n\n        this.ContactBuilder = contactBuilder;\n    }\n\n    _createClass(CouchDBRecipientAdapter, [{\n        key: \"fromRecipientModel\",\n        value: function fromRecipientModel(recipientModelInstance) {\n            var docJSON = recipientModelInstance.toJS();\n            if (docJSON[\"_deleted\"] == false) {\n                delete docJSON[\"_deleted\"];\n            }\n            docJSON[\"docType\"] = 'contact';\n            return docJSON;\n        }\n    }, {\n        key: \"toRecipientModel\",\n        value: function toRecipientModel(docJSON) {\n            if (!docJSON._id) {\n                return this.ContactBuilder.createContact(docJSON);\n            }\n            return this.ContactBuilder.fromModel(docJSON);\n        }\n    }]);\n\n    return CouchDBRecipientAdapter;\n}();\n\nexports.default = CouchDBRecipientAdapter;\n\n/***/ }),\n\n/***/ 692:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _events = __webpack_require__(90);\n\nvar _events2 = _interopRequireDefault(_events);\n\nvar _logger = __webpack_require__(6);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar pouchMirrorLocalFirst = function pouchMirrorLocalFirst(localDB, remoteDB) {\n  var self = this;\n  this.isSynchronized = false;\n\n  this.remoteDB = remoteDB;\n  this.localDB = localDB;\n  // Use RemoteDB till the initial sync is finished.\n  this.DB = this.remoteDB;\n\n  // Tracks the destroy pending promise when\n  // destroy detects an ongoing sync.\n  this.pendingDestroy = null;\n\n  // This method listens to changes in the LocalDB and calls\n  // replication within 3 sec if changes detected.\n  // It also reschedules replication if another change\n  // is detected within this time-frame.\n  function listenChanges(db) {\n    self.changes = db.changes({\n      since: \"now\",\n      live: true,\n      conflicts: true\n    }).on(\"change\", function (change) {\n      _logger2.default.debug(\"changes\", change);\n      if (self.replicationHandle) {\n        clearTimeout(self.replicationHandle);\n        self.replicationHandle = null;\n        _logger2.default.debug(\"previous sync call is aborted.\");\n      }\n      self.replicationHandle = setTimeout(replicateDataToRemote.bind(self), 300);\n    }).on(\"complete\", function (info) {\n      _logger2.default.debug(\"Changes are done.\");\n    }).on(\"error\", function (err) {\n      _logger2.default.error(err);\n    });\n  }\n\n  // This API synchronizes changes between local and remote.\n  function replicateDataToRemote() {\n    if (self.DB == self.localDB) {\n      self.emit(\"delta-sync-started\");\n      self.DB.sync(remoteDB, {\n        filter: \"documents/typed\"\n      }).on(\"change\", function (change) {\n        self.emit(\"delta-sync-changes-detected\", change);\n        _logger2.default.debug(\"changes\", change);\n      }).on(\"denied\", function (err) {\n        self.emit(\"delta-sync-failed\", err);\n        _logger2.default.error(err);\n      }).on(\"complete\", function (info) {\n        self.replicationHandle = null;\n        _logger2.default.debug(\"Changes are synchronized\");\n        self.emit(\"delta-sync-completed\", info);\n        if (self.pendingDestroy) {\n          _logger2.default.debug(\"Pending destroy detected, invoking it.\");\n          self.destroy().then(function () {\n            self.pendingDestroy();\n            self.pendingDestroy = null;\n          });\n        }\n      }).on(\"error\", function (err) {\n        self.emit(\"delta-sync-failed\", err);\n        _logger2.default.error(err);\n      });\n    }\n  }\n\n  // Start the initial synchronization between Local and Remote.\n  self.emit(\"initial-sync-started\");\n  this.localDB.sync(remoteDB, {\n    filter: \"documents/typed\"\n  }).on(\"change\", function (change) {\n    self.emit(\"initial-sync-changes-detected\", change);\n    _logger2.default.debug(\"Initial sync > changes detected\", change);\n  }).on(\"denied\", function (err) {\n    self.DB = self.localDB;\n    self.emit(\"initial-sync-failed\", err);\n    _logger2.default.error(err);\n  }).on(\"complete\", function (info) {\n    _logger2.default.debug(\"Initial sync completed.\");\n    self.DB = self.localDB;\n    self.emit(\"initial-sync-completed\", info);\n    listenChanges(self.DB);\n  }).on(\"error\", function (err) {\n    self.DB = self.localDB;\n    self.emit(\"initial-sync-failed\", err);\n    _logger2.default.error(err);\n  });\n\n  this.remoteDB.changes({\n    since: \"now\",\n    live: true,\n    include_docs: true\n  }).on(\"change\", function (change) {\n    _logger2.default.debug(\"delta-remote-changes-detected: \", change);\n    var doc = change.doc;\n\n    if (doc.docType === \"surveyresponse\" || doc.docType === \"publishedsurvey\") replicateDataToRemote();\n  }).on(\"error\", function (err) {\n    _logger2.default.error(\"delta-remote-error-detected: \" + err);\n    self.emit(\"delta-remote-error-detected\", err);\n  });\n};\n\nexports.default = pouchMirrorLocalFirst;\n\n\npouchMirrorLocalFirst.prototype = Object.create(_events2.default.prototype);\n\npouchMirrorLocalFirst.prototype.createIndex = function (obj) {\n  return this.localDB.createIndex(obj);\n};\n\npouchMirrorLocalFirst.prototype.destroy = function (obj) {\n  var _this = this;\n\n  if (this.replicationHandle) {\n    _logger2.default.debug(\"Destroy > Detected pending sync. Pooled the destroy.\");\n\n    return new Promise(function (resolve, reject) {\n      // This resolve will be invoked in replicateDataToRemote.\n      _this.pendingDestroy = resolve;\n    });\n  }\n  this.cancelChanges();\n  return this.localDB.destroy(obj);\n};\n\npouchMirrorLocalFirst.prototype.find = function (obj) {\n  return this.DB.find(obj);\n};\n\npouchMirrorLocalFirst.prototype.getIndexes = function () {\n  return this.DB.getIndexes();\n};\n\npouchMirrorLocalFirst.prototype.deleteIndex = function (obj) {\n  return this.DB.deleteIndex.apply(obj);\n};\n\npouchMirrorLocalFirst.prototype.get = function () {\n  return this.DB.get.apply(this.DB, arguments);\n};\n\npouchMirrorLocalFirst.prototype.allDocs = function () {\n  return this.DB.allDocs.apply(this.DB, arguments);\n};\n\npouchMirrorLocalFirst.prototype.put = function () {\n  return this.DB.put.apply(this.DB, arguments);\n};\n\npouchMirrorLocalFirst.prototype.post = function () {\n  return this.DB.post.apply(this.DB, arguments);\n};\n\npouchMirrorLocalFirst.prototype.bulkDocs = function () {\n  return this.DB.bulkDocs.apply(this.DB, arguments);\n};\n\npouchMirrorLocalFirst.prototype.remove = function () {\n  return this.DB.remove.apply(this.DB, arguments);\n};\n\npouchMirrorLocalFirst.prototype.changes = function () {\n  return this.DB.changes.apply(this.DB, arguments);\n};\n\npouchMirrorLocalFirst.prototype.replicate = function () {\n  return this.DB.replicate.apply(this.DB, arguments);\n};\n\npouchMirrorLocalFirst.prototype.sync = function () {\n  return this.DB.sync.apply(this.DB, arguments);\n};\n\npouchMirrorLocalFirst.prototype.putAttachment = function () {\n  return this.DB.putAttachment.apply(this.DB, arguments);\n};\n\npouchMirrorLocalFirst.prototype.getAttachment = function () {\n  return this.DB.getAttachment.apply(this.DB, arguments);\n};\n\npouchMirrorLocalFirst.prototype.removeAttachment = function () {\n  return this.DB.removeAttachment.apply(this.DB, arguments);\n};\n\npouchMirrorLocalFirst.prototype.query = function () {\n  return this.DB.query.apply(this.DB, arguments);\n};\n\npouchMirrorLocalFirst.prototype.info = function () {};\n\npouchMirrorLocalFirst.prototype.cancelChanges = function () {\n  if (this.changes.cancel) this.changes.cancel();\n};\n\n/***/ }),\n\n/***/ 700:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  \"documents\": {\n    _id: '_design/documents',\n    filters: {\n      typed: function typed(doc, req) {\n        var type = req && req.query && req.query.type ? req.query.type : false;\n        if (type) {\n          return doc.docType === type;\n        }\n\n        return \"docType\" in doc;\n      }\n    }\n  }\n};\n\n/***/ }),\n\n/***/ 701:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = {\n    \"getByDocType\": {\n        _id: '_design/getByDocType',\n        views: {\n            typed: {\n                map: function map(doc) {\n                    if (doc.docType) {\n                        emit(doc.docType);\n                    }\n                }\n            }\n        },\n        language: \"javascript\"\n    },\n    \"custom\": {\n        _id: '_design/custom',\n        views: {\n            surveyIdAndTitle: {\n                map: function map(doc) {\n                    if (doc.docType) {\n                        if (doc.header) {\n                            emit(doc.docType, { id: doc._id, title: doc.header.title });\n                        }\n                    }\n                }\n            },\n            passedCandidate: {\n                map: function map(doc) {\n                    if (doc.docType == 'surveyresponse') {\n                        if (doc.obtainedMarks >= doc.survey.minimumMarks) emit(doc._id, { minimumMarks: doc.survey.minimumMarks, obtainedMarks: doc.obtainedMarks });\n                    }\n                }\n            }\n        },\n        language: \"javascript\"\n    },\n    \"search\": {\n        _id: '_design/search',\n        views: {\n            recipientsByFullName: {\n                map: function map(doc) {\n                    if (doc.fullName && doc.docType == 'contact') {\n                        emit(doc.fullName.toLowerCase());\n                    }\n                }\n            },\n            recipientsByEmail: {\n                map: function map(doc) {\n                    if (doc.email && doc.docType == 'contact') {\n                        emit(doc.email);\n                    }\n                }\n            },\n            recipientsByGroups: {\n                map: function map(doc) {\n                    if (doc.groups && doc.docType == 'contact') {\n                        for (var i = 0; i < doc.groups.length; i++) {\n                            if (doc.groups[i]) {\n                                emit(doc.groups[i]);\n                            }\n                        }\n                    }\n                }\n            },\n            recipientsByKey: {\n                map: function map(doc) {\n                    if (doc.fullName && doc.docType == 'contact') {\n                        emit(doc.fullName.toLowerCase());\n                    }\n                    if (doc.email && doc.docType == 'contact') {\n                        emit(doc.email);\n                    }\n                    if (doc.groups && doc.docType == 'contact') {\n                        for (var i = 0; i < doc.groups.length; i++) {\n                            if (doc.groups[i]) {\n                                emit(doc.groups[i]);\n                            }\n                        }\n                    }\n                }\n            }\n        },\n        language: \"javascript\"\n    }\n};\n\n/***/ }),\n\n/***/ 702:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = {\n  docType: {\n    index: {\n      fields: [\"docType\"]\n    },\n    name: \"docType\",\n    ddoc: \"doctype\"\n  },\n  groups: {\n    index: {\n      fields: [\"docType\", \"groups\"]\n    },\n    name: \"groups\",\n    ddoc: \"groups\"\n  },\n  publishedSurveys: {\n    index: {\n      fields: [\"docType\", \"date.updated\"]\n    },\n    name: \"publishedsurveys\",\n    ddoc: \"publishedsurveys\"\n  },\n  date: {\n    index: {\n      fields: [\"date.updated\"]\n    },\n    name: \"date\",\n    ddoc: \"date\"\n  },\n  contact: {\n    index: {\n      fields: [\"docType\", \"fullName\", \"email\", \"groups\"]\n    },\n    name: \"contact\",\n    ddoc: \"contact\"\n  }\n};\n\n/***/ }),\n\n/***/ 72:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar Promise = __webpack_require__(32);\nmodule.exports = function (promises) {\n    //console.log(promises);\n    return Promise.all(promises.map(function (promise) {\n        //console.log(promise);\n        return promise.reflect();\n    })).each(function (inspection) {\n        //console.log(inspection);\n        if (inspection.isFulfilled()) {\n            return inspection.value();\n        } else {\n            return inspection.reason();\n        }\n    });\n};\n\n/***/ }),\n\n/***/ 742:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 752:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 765:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _regex = __webpack_require__(156);\n\nvar _regex2 = _interopRequireDefault(_regex);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Assertions = {\n    \"validEmail\": function validEmail(email) {\n        if (!email) {\n            throw TypeError(\"Email is required.\");\n        }\n        if (!_regex2.default[\"email\"].test(email)) {\n            throw TypeError(\"Email is not valid.\");\n        }\n    },\n    \"validFullName\": function validFullName(fullName) {\n        if (!fullName) {\n            throw TypeError(\"Name is required.\");\n        }\n    }\n};\n\nexports.default = Assertions;\n\n/***/ }),\n\n/***/ 772:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _refluxCore = __webpack_require__(14);\n\nvar _refluxCore2 = _interopRequireDefault(_refluxCore);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar DataStorageClientActions = _refluxCore2.default.createActions([\"dataLoaded\", \"dataStored\"]),\n    DataStorageActions = _refluxCore2.default.createActions([\"loadData\", \"storeData\"]);\n\nexports.default = {\n  \"DataStorageClientActions\": DataStorageClientActions,\n  \"DataStorageActions\": DataStorageActions\n};\n\n/***/ }),\n\n/***/ 788:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _bsonObjectid = __webpack_require__(17);\n\nvar _bsonObjectid2 = _interopRequireDefault(_bsonObjectid);\n\nvar _immutable = __webpack_require__(9);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _surveymodelbuilder = __webpack_require__(54);\n\nvar _surveymodelbuilder2 = _interopRequireDefault(_surveymodelbuilder);\n\nvar _maketypedrecord = __webpack_require__(81);\n\nvar _maketypedrecord2 = _interopRequireDefault(_maketypedrecord);\n\nvar _processrevivers = __webpack_require__(82);\n\nvar _processrevivers2 = _interopRequireDefault(_processrevivers);\n\nvar _assertions = __webpack_require__(789);\n\nvar _assertions2 = _interopRequireDefault(_assertions);\n\nvar _makevalid = __webpack_require__(790);\n\nvar _makevalid2 = _interopRequireDefault(_makevalid);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar defaultSchemaVersion = \"1.0\",\n    SurveyRunnerSchemaProvider = function SurveyRunnerSchemaProvider() {\n    var version = [\"1.0\"];\n    version[\"1.0\"] = function (surveyOrModel) {\n        var SchemaVersion = \"1.0\",\n            Model = {\n            \"schema\": {\n                \"_id\": \"\",\n                \"survey\": {},\n                \"_schemaVersion\": \"1.0\",\n                \"docType\": \"surveyresponse\",\n                \"status\": \"pending\",\n                \"responses\": _immutable2.default.Map(),\n                \"participantDetails\": {}\n            },\n            \"methods\": {\n                \"validateSurvey\": function validateSurvey(questionKeys) {\n                    var survey = this.getSurvey(),\n                        promises = [];\n                    for (var i = 0; i < questionKeys.length; i++) {\n                        promises.push(survey.getPageItem(questionKeys[i]).validate(this.getResponse(questionKeys[i])));\n                    }\n                    return Promise.all(promises);\n                },\n                \"revivers\": {\n                    \"surveyRunner\": function surveyRunner(model) {\n                        var _id = model._id,\n                            survey = model.survey,\n                            responses = model.responses,\n                            status = model.status,\n                            participantDetails = model.participantDetails,\n                            surveyRunner = this,\n                            SurveyModelBuilder = (0, _surveymodelbuilder2.default)(survey._schemaVersion);\n\n                        survey = SurveyModelBuilder.fromModel(survey);\n                        return surveyRunner.setId(_id).setSurvey(survey).setStatus(status).setResponses(_immutable2.default.Map(responses)).setParticipantDetails(participantDetails);\n                    }\n                },\n                \"getId\": function getId() {\n                    return this.get(\"_id\");\n                },\n                \"setId\": function setId(id) {\n                    return this.setIn([\"_id\"], id);\n                },\n                \"getSurvey\": function getSurvey() {\n                    return this.get(\"survey\");\n                },\n                \"setSurvey\": function setSurvey(survey) {\n                    return this.setIn([\"survey\"], survey);\n                },\n                \"getStatus\": function getStatus() {\n                    return this.get(\"status\");\n                },\n                \"setStatus\": function setStatus(status) {\n                    return this.setIn([\"status\"], status);\n                },\n                \"getResponses\": function getResponses() {\n                    return this.get(\"responses\");\n                },\n                \"setResponses\": function setResponses(responses) {\n                    return this.setIn([\"responses\"], responses);\n                },\n                \"getResponse\": function getResponse(key) {\n                    return this.getIn([\"responses\", key]);\n                },\n                \"setResponse\": function setResponse(id, response) {\n                    var obj = _makevalid2.default.responseObj(id, response);\n                    return this.setIn([\"responses\", id], obj[id]);\n                },\n                \"getParticipantDetails\": function getParticipantDetails() {\n                    return this.get(\"participantDetails\");\n                },\n                \"setParticipantDetails\": function setParticipantDetails(obj) {\n                    return this.setIn([\"participantDetails\"], obj);\n                }\n            }\n        },\n            Types = {\n            \"SurveyRunner\": (0, _maketypedrecord2.default)(Model)\n        },\n            reviveSurveyRunnerModel = function reviveSurveyRunnerModel(model) {\n            var surveyRunner = new Types.SurveyRunner();\n            return (0, _processrevivers2.default)(surveyRunner, model);\n        },\n            getSurveyRunnerModel = function getSurveyRunnerModel(surveyOrModel) {\n            surveyOrModel = _makevalid2.default.surveyOrModel(surveyOrModel);\n            if (!surveyOrModel.docType) {\n                var SurveyModelBuilder = (0, _surveymodelbuilder2.default)(surveyOrModel._schemaVersion),\n                    model = {\n                    \"_id\": (0, _bsonObjectid2.default)().str,\n                    \"survey\": SurveyModelBuilder.fromModel(surveyOrModel)\n                };\n                return new Types.SurveyRunner(model);\n            }\n            return reviveSurveyRunnerModel(surveyOrModel);\n        };\n\n        return getSurveyRunnerModel(surveyOrModel);\n    };\n    return {\n        \"getSurveyRunnerModel\": function getSurveyRunnerModel(survey) {\n            var _schemaVersion = defaultSchemaVersion;\n            if (survey._schemaVersion) {\n                _schemaVersion = survey._schemaVersion;\n            }\n            return version[_schemaVersion](survey);\n        },\n        \"fromModel\": function fromModel(model) {\n            var _schemaVersion = defaultSchemaVersion;\n            if (model._schemaVersion) {\n                _schemaVersion = model.survey._schemaVersion;\n            }\n            return version[_schemaVersion](model);\n        }\n    };\n},\n    SurveyRunnerModelProvider = function SurveyRunnerModelProvider() {\n    var schemaVersion = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultSchemaVersion;\n\n    return SurveyRunnerSchemaProvider();\n};\n\nexports.default = SurveyRunnerModelProvider;\n\n/***/ }),\n\n/***/ 789:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/***/ }),\n\n/***/ 790:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _isPlainObject2 = __webpack_require__(25);\n\nvar _isPlainObject3 = _interopRequireDefault(_isPlainObject2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar MakeValid = {\n    \"responseObj\": function responseObj(id, response) {\n        if (typeof response === 'string') {\n            if (response == \"\") {\n                response = null;\n            }\n        } else {\n            if (response && !response.length) {\n                response = null;\n            }\n        }\n\n        return _defineProperty({}, id, response);\n    },\n    \"surveyOrModel\": function surveyOrModel(_surveyOrModel) {\n        if ((0, _isPlainObject3.default)(_surveyOrModel)) {\n            return _surveyOrModel;\n        }\n\n        return _surveyOrModel.toJSON();\n    }\n};\n\nexports.default = MakeValid;\n\n/***/ }),\n\n/***/ 794:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _bsonObjectid = __webpack_require__(17);\n\nvar _bsonObjectid2 = _interopRequireDefault(_bsonObjectid);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Assertions = {};\n\nexports.default = Assertions;\n\n/***/ }),\n\n/***/ 8:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _indexOf2 = __webpack_require__(105);\n\nvar _indexOf3 = _interopRequireDefault(_indexOf2);\n\nvar _i18next = __webpack_require__(300);\n\nvar _i18next2 = _interopRequireDefault(_i18next);\n\nvar _i18nextXhrBackend = __webpack_require__(302);\n\nvar _i18nextXhrBackend2 = _interopRequireDefault(_i18nextXhrBackend);\n\nvar _bluebird = __webpack_require__(32);\n\nvar _bluebird2 = _interopRequireDefault(_bluebird);\n\nvar _i18nextIntervalpluralPostprocessor = __webpack_require__(587);\n\nvar _i18nextIntervalpluralPostprocessor2 = _interopRequireDefault(_i18nextIntervalpluralPostprocessor);\n\nvar _logger = __webpack_require__(6);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _appsettings = __webpack_require__(28);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar lng = window.navigator.userLanguage || window.navigator.language || \"en-US\";\nif ((0, _indexOf3.default)(_appsettings.SupportedLanguagesCollection, lng) == -1) {\n  lng = \"en-US\";\n}\nvar i18nOptions = {\n  debug: !true,\n  lng: lng,\n  load: \"currentOnly\",\n  returnObjects: false,\n  postProcess: false,\n  pluralSeparator: \"_\",\n  contextSeparator: \"_\",\n  interpolation: {\n    escapeValue: true,\n    prefix: \"{{\",\n    suffix: \"}}\",\n    formatSeparator: \",\",\n    unescapePrefix: \"-\",\n    nestingPrefix: \"$t(\",\n    nestingSuffix: \")\"\n  },\n  fallbackLng: \"en-US\",\n  backend: {\n    loadPath: \"/locale/{{lng}}/translation.json\"\n  }\n};\n\nexports.default = {\n  _i18n: null,\n  init: function init() {\n    var _this = this;\n\n    this._i18n = _i18next2.default.use(_i18nextXhrBackend2.default).use(_i18nextIntervalpluralPostprocessor2.default);\n    var promise = new _bluebird2.default(function (res, rej) {\n      _this._i18n.init(i18nOptions, function (err, t) {\n        if (err) {\n          return rej(err);\n        }\n        return res(t);\n      });\n    });\n    return promise.then(function (t) {\n      _this.t = _this._i18n.t.bind(_this._i18n);\n    }).catch(function (err) {\n      _logger2.default.error(\"Error initializing i18n...\");\n      _logger2.default.error(err);\n\n      throw err;\n    });\n  },\n  setLanguage: function setLanguage(language) {\n    i18nOptions.lng = language;\n    return this.init();\n  },\n  t: function t() {\n    // this method is recreated on successful initialization of i18n.\n    throw 'i18n not initialized yet. Please invoke \"init\" method first.';\n  }\n};\n\n/***/ }),\n\n/***/ 800:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _merge2 = __webpack_require__(15);\n\nvar _merge3 = _interopRequireDefault(_merge2);\n\nvar _bsonObjectid = __webpack_require__(17);\n\nvar _bsonObjectid2 = _interopRequireDefault(_bsonObjectid);\n\nvar _bluebird = __webpack_require__(32);\n\nvar _bluebird2 = _interopRequireDefault(_bluebird);\n\nvar _immutable = __webpack_require__(9);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _regex = __webpack_require__(156);\n\nvar _regex2 = _interopRequireDefault(_regex);\n\nvar _maketypedrecord = __webpack_require__(81);\n\nvar _maketypedrecord2 = _interopRequireDefault(_maketypedrecord);\n\nvar _processrevivers = __webpack_require__(82);\n\nvar _processrevivers2 = _interopRequireDefault(_processrevivers);\n\nvar _assertions = __webpack_require__(801);\n\nvar _assertions2 = _interopRequireDefault(_assertions);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ImageBuilder = function ImageBuilder() {\n    var image = function image(model) {\n        var Model = {\n            \"schema\": {\n                \"_id\": \"\",\n                \"_rev\": \"\",\n                \"mimeType\": \"\",\n                \"name\": \"\",\n                \"uri\": \"\",\n                \"tags\": _immutable2.default.Set(),\n                \"vibrant\": null,\n                \"darkVibrant\": null,\n                \"description\": \"\",\n                \"date\": new Date()\n            },\n            \"methods\": {\n                \"revivers\": {\n                    \"image\": function image(model) {\n                        var _id = model._id,\n                            _rev = model._rev,\n                            mimeType = model.mimeType,\n                            name = model.name,\n                            uri = model.uri,\n                            description = model.description,\n                            date = model.date,\n                            vibrant = model.vibrant,\n                            darkVibrant = model.darkVibrant,\n                            tags = model.tags,\n                            image = this;\n\n                        return image.setId(_id).setRev(_rev).setMimeType(mimeType).setName(name).setURI(uri).setTags(tags).setVibrant(vibrant).setDarkVibrant(darkVibrant).setDescription(description).setDate(date);\n                    }\n                },\n                \"getId\": function getId() {\n                    return this.get(\"_id\");\n                },\n                \"setId\": function setId(id) {\n                    return this.set(\"_id\", id);\n                },\n                \"getRev\": function getRev() {\n                    return this.get(\"_rev\");\n                },\n                \"setRev\": function setRev(rev) {\n                    return this.set(\"_rev\", rev);\n                },\n                \"getMimeType\": function getMimeType() {\n                    return this.get(\"mimeType\");\n                },\n                \"setMimeType\": function setMimeType(mimeType) {\n                    return this.set(\"mimeType\", mimeType);\n                },\n                \"getName\": function getName() {\n                    return this.get(\"name\");\n                },\n                \"setName\": function setName(name) {\n                    return this.set(\"name\", name);\n                },\n                \"getVibrant\": function getVibrant() {\n                    return this.get(\"vibrant\");\n                },\n                \"getVibrantColor\": function getVibrantColor() {\n                    var vibrant = this.get(\"vibrant\"),\n                        vibrantColor = vibrant && 'rgb(' + vibrant[0] + ', ' + vibrant[1] + ', ' + vibrant[2] + ')';\n                    return vibrantColor;\n                },\n                \"setVibrant\": function setVibrant(vibrant) {\n                    return this.set(\"vibrant\", vibrant);\n                },\n                \"getDarkVibrant\": function getDarkVibrant() {\n                    return this.get(\"darkVibrant\");\n                },\n                \"getDarkVibrantColor\": function getDarkVibrantColor() {\n                    var darkVibrant = this.get(\"darkVibrant\"),\n                        darkVibrantColor = darkVibrant && 'rgb(' + darkVibrant[0] + ', ' + darkVibrant[1] + ', ' + darkVibrant[2] + ')';\n                    return darkVibrantColor;\n                },\n                \"setDarkVibrant\": function setDarkVibrant(darkVibrant) {\n                    return this.set(\"darkVibrant\", darkVibrant);\n                },\n                \"getURI\": function getURI() {\n                    return this.get(\"uri\");\n                },\n                \"setURI\": function setURI(uri) {\n                    return this.set(\"uri\", uri);\n                },\n                \"getTags\": function getTags() {\n                    return this.get(\"tags\").toSeq();\n                },\n                \"setTag\": function setTag(tag) {\n                    return this.set(\"tags\", this.get(\"tags\").add(tag));\n                },\n                \"setTags\": function setTags(tags) {\n                    tags = _immutable2.default.Set(tags);\n                    return this.set(\"tags\", tags);\n                },\n                \"getDescription\": function getDescription() {\n                    return this.get(\"description\");\n                },\n                \"setDescription\": function setDescription(description) {\n                    return this.set(\"description\", description);\n                },\n                \"getDate\": function getDate() {\n                    return this.getIn([\"date\"]);\n                },\n                \"setDate\": function setDate(dateString) {\n                    if (!dateString) {\n                        return this;\n                    }\n                    var date = new Date(dateString);\n                    return this.setIn([\"date\"], date);\n                }\n            }\n\n        };\n        Model.Dimensions = {\n            \"schema\": {\n                \"dimensions\": {\n                    \"width\": \"\",\n                    \"height\": \"\"\n                }\n            },\n            \"methods\": {\n                \"revivers\": {\n                    \"dimensions\": function dimensions(model) {\n                        var dimensions = model.dimensions;\n\n                        return this.setDimensions(dimensions);\n                    }\n                },\n                \"getDimensions\": function getDimensions() {\n                    return this.get(\"dimensions\");\n                },\n                \"setDimensions\": function setDimensions(dimensions) {\n                    if (!dimensions) {\n                        return this;\n                    }\n                    return this.setIn([\"dimensions\", \"width\"], dimensions.width).setIn([\"dimensions\", \"height\"], dimensions.height);\n                },\n                \"getWidth\": function getWidth() {\n                    return this.getIn([\"dimensions\", \"width\"]);\n                },\n                \"setWidth\": function setWidth(width) {\n                    return this.setIn([\"dimensions\", \"width\"], width);\n                },\n                \"getHeight\": function getHeight() {\n                    return this.getIn([\"dimensions\", \"height\"]);\n                },\n                \"setHeight\": function setHeight(height) {\n                    return this.setIn([\"dimensions\", \"height\"], height);\n                }\n            }\n        };\n        Model.Attachments = {\n            \"schema\": {\n                \"_attachments\": {\n                    \"image\": \"\"\n                }\n            },\n            \"methods\": {\n                \"revivers\": {\n                    \"attachments\": function attachments(model) {\n                        var _attachments = model._attachments;\n\n                        return this.setThumbnail(_attachments);\n                    }\n                },\n                \"getThumbnail\": function getThumbnail() {\n                    var base64 = this.getIn([\"_attachments\", \"image\"]).data,\n                        dataURL = 'data:' + this.getMimeType() + ';base64,' + base64;\n                    return dataURL;\n                },\n                \"setThumbnail\": function setThumbnail(attachments) {\n                    if (!attachments) {\n                        return this;\n                    }\n                    return this.setIn([\"_attachments\", \"image\"], attachments.image);\n                }\n            }\n        };\n        Model.Thumbnail = {\n            \"schema\": {\n                \"thumbnail\": {\n                    \"height\": \"\",\n                    \"width\": \"\",\n                    \"orignal\": \"\"\n                }\n            },\n            \"methods\": {\n                \"revivers\": {\n                    \"thumbnail\": function thumbnail(model) {\n                        var thumbnail = model.thumbnail;\n\n                        return this.setThumbnailInfo(thumbnail);\n                    }\n                },\n                \"setThumbnailInfo\": function setThumbnailInfo(thumbnail) {\n                    if (!thumbnail) {\n                        return this;\n                    }\n                    return this.setIn([\"thumbnail\"], _immutable2.default.Map(thumbnail));\n                },\n                \"getThumbnailHeight\": function getThumbnailHeight() {\n                    return this.getIn([\"thumbnail\", \"height\"]);\n                },\n                \"setThumbnailHeight\": function setThumbnailHeight(height) {\n                    return this.setIn([\"thumbnail\", \"height\"], height);\n                },\n                \"getThumbnailWidth\": function getThumbnailWidth() {\n                    return this.getIn([\"thumbnail\", \"width\"]);\n                },\n                \"setThumbnailWidth\": function setThumbnailWidth(width) {\n                    return this.setIn([\"thumbnail\", \"width\"], width);\n                },\n                \"isThumbnailOrignal\": function isThumbnailOrignal() {\n                    return this.getIn([\"thumbnail\", \"orignal\"]);\n                }\n            }\n        };\n        Model.Image = (0, _merge3.default)(Model, Model.Dimensions, Model.Attachments, Model.Thumbnail);\n        var Types = {\n            \"Image\": (0, _maketypedrecord2.default)(Model.Image)\n        },\n            reviveImageModel = function reviveImageModel(model) {\n            var imageModel = new Types.Image();\n            return (0, _processrevivers2.default)(imageModel, model);\n        },\n            getImageModel = function getImageModel(model) {\n            if (!model._id) {\n                var model = {\n                    \"_id\": (0, _bsonObjectid2.default)().str,\n                    \"name\": model.name,\n                    \"description\": model.description,\n                    \"mimeType\": model.mimeType,\n                    \"tags\": model.tags\n                };\n                return new Types.Image(model);\n            }\n            return reviveImageModel(model);\n        };\n\n        return getImageModel(model);\n    };\n\n    return {\n        \"createImage\": function createImage(img) {\n            return image(img);\n        },\n        \"fromModel\": function fromModel(model) {\n            return image(model);\n        }\n    };\n};\n\nexports.default = ImageBuilder;\n\n/***/ }),\n\n/***/ 801:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _bsonObjectid = __webpack_require__(17);\n\nvar _bsonObjectid2 = _interopRequireDefault(_bsonObjectid);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Assertions = {};\n\nexports.default = Assertions;\n\n/***/ }),\n\n/***/ 81:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _forOwn2 = __webpack_require__(409);\n\nvar _forOwn3 = _interopRequireDefault(_forOwn2);\n\nvar _isEmpty2 = __webpack_require__(652);\n\nvar _isEmpty3 = _interopRequireDefault(_isEmpty2);\n\nvar _isArray2 = __webpack_require__(12);\n\nvar _isArray3 = _interopRequireDefault(_isArray2);\n\nvar _isPlainObject2 = __webpack_require__(25);\n\nvar _isPlainObject3 = _interopRequireDefault(_isPlainObject2);\n\nvar _immutable = __webpack_require__(9);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (typeInfo) {\n    var deepConvertToImmutable = function deepConvertToImmutable(item, goingDeep) {\n        if (!(0, _isPlainObject3.default)(item) && !(0, _isArray3.default)(item)) {\n            return item;\n        }\n\n        if ((0, _isPlainObject3.default)(item)) {\n            if ((0, _isEmpty3.default)(item)) {\n                return _immutable2.default.Map();\n            }\n\n            (0, _forOwn3.default)(item, function (member, key, object) {\n                // Deeply convert all members.\n                object[key] = deepConvertToImmutable(member, true);\n            });\n\n            // Create a new Record of this object schema.\n            return goingDeep ? new (_immutable2.default.Record(item))() : _immutable2.default.Record(item);\n        }\n\n        if ((0, _isArray3.default)(item)) {\n            return _immutable2.default.List(item);\n        }\n    },\n        type = deepConvertToImmutable(typeInfo.schema);\n    Object.assign(type.prototype, typeInfo.methods);\n    return type;\n}; // Creates a Record object extended with the given type.\n\n/***/ }),\n\n/***/ 814:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _merge2 = __webpack_require__(15);\n\nvar _merge3 = _interopRequireDefault(_merge2);\n\nvar _forEach2 = __webpack_require__(250);\n\nvar _forEach3 = _interopRequireDefault(_forEach2);\n\nvar _isEqual2 = __webpack_require__(240);\n\nvar _isEqual3 = _interopRequireDefault(_isEqual2);\n\nvar _uniqWith2 = __webpack_require__(815);\n\nvar _uniqWith3 = _interopRequireDefault(_uniqWith2);\n\nvar _createStore = __webpack_require__(22);\n\nvar _createStore2 = _interopRequireDefault(_createStore);\n\nvar _immutable = __webpack_require__(9);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _erroractions = __webpack_require__(266);\n\nvar _erroractions2 = _interopRequireDefault(_erroractions);\n\nvar _axios = __webpack_require__(41);\n\nvar _axios2 = _interopRequireDefault(_axios);\n\nvar _bsonObjectid = __webpack_require__(17);\n\nvar _bsonObjectid2 = _interopRequireDefault(_bsonObjectid);\n\nvar _diservice = __webpack_require__(40);\n\nvar _diservice2 = _interopRequireDefault(_diservice);\n\nvar _logger = __webpack_require__(6);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _authactions = __webpack_require__(30);\n\nvar _authactions2 = _interopRequireDefault(_authactions);\n\nvar _Router = __webpack_require__(188);\n\nvar _Router2 = _interopRequireDefault(_Router);\n\nvar _platform = __webpack_require__(246);\n\nvar _platform2 = _interopRequireDefault(_platform);\n\nvar _fingerprintjs = __webpack_require__(360);\n\nvar _fingerprintjs2 = _interopRequireDefault(_fingerprintjs);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ErrorStore = (0, _createStore2.default)({\n  listenables: [_erroractions2.default, _authactions2.default],\n  _errors: [],\n  _userProfile: {},\n  userChanged: function userChanged(prevProfile, newProfile) {\n    this._userProfile = newProfile;\n  },\n  registerError: function registerError(message) {\n    var _this = this;\n\n    var self = this;\n    clearTimeout(this.callRegisterErrors);\n    self._errors.push(message);\n    this.callRegisterErrors = setTimeout(function () {\n      self._errors = (0, _uniqWith3.default)(self._errors, _isEqual3.default);\n      _this.postToServer(self._errors);\n    }, 3000);\n  },\n  postToServer: function postToServer(errorsToPost) {\n    var userInfo = this._getUserInfo();\n    (0, _forEach3.default)(errorsToPost, function (errordoc) {\n      errordoc = (0, _merge3.default)(errordoc, userInfo, {\n        docType: \"client-error\",\n        _id: (0, _bsonObjectid2.default)().str\n      });\n    });\n    this._errorProvider = _diservice2.default.get(\"ErrorProvider\");\n    this._errorProvider.reportErrors(errorsToPost).then(function (response) {\n      _logger2.default.log(\"ErrorDocs synched in localDB\");\n      _logger2.default.log(response);\n    }).catch(function (err) {\n      _logger2.default.log(err);\n    });\n  },\n  _getUserInfo: function _getUserInfo() {\n    var _userProfile = this._userProfile,\n        name = _userProfile.name,\n        email = _userProfile.email,\n        userDbUrl = _userProfile.userDbUrl,\n        route = window.location.href,\n        operatingSystem = _platform2.default.os.toString(),\n        browser = _platform2.default.name,\n        description = _platform2.default.description,\n        userAgent = _platform2.default.ua;\n\n    return {\n      userInfo: {\n        name: name,\n        email: email,\n        userDbUrl: userDbUrl,\n        route: route,\n        operatingSystem: operatingSystem,\n        browser: browser,\n        description: description,\n        userAgent: userAgent\n      }\n    };\n  }\n});\n\nexports.default = ErrorStore;\n\n/***/ }),\n\n/***/ 816:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactAddonsPureRenderMixin = __webpack_require__(27);\n\nvar _reactAddonsPureRenderMixin2 = _interopRequireDefault(_reactAddonsPureRenderMixin);\n\nvar _Drawer = __webpack_require__(817);\n\nvar _Drawer2 = _interopRequireDefault(_Drawer);\n\nvar _AppBar = __webpack_require__(233);\n\nvar _AppBar2 = _interopRequireDefault(_AppBar);\n\nvar _footermobile = __webpack_require__(835);\n\nvar _footermobile2 = _interopRequireDefault(_footermobile);\n\nvar _i18n = __webpack_require__(8);\n\nvar _i18n2 = _interopRequireDefault(_i18n);\n\nvar _headertabs = __webpack_require__(836);\n\nvar _headertabs2 = _interopRequireDefault(_headertabs);\n\nvar _mobilemenu = __webpack_require__(870);\n\nvar _mobilemenu2 = _interopRequireDefault(_mobilemenu);\n\nvar _userprofile = __webpack_require__(157);\n\nvar _userprofile2 = _interopRequireDefault(_userprofile);\n\nvar _ToolbarGroup = __webpack_require__(147);\n\nvar _ToolbarGroup2 = _interopRequireDefault(_ToolbarGroup);\n\nvar _navIcon = __webpack_require__(881);\n\nvar _navIcon2 = _interopRequireDefault(_navIcon);\n\nvar _reactRouter = __webpack_require__(154);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar SiteHeader = _react2.default.createClass({\n  displayName: \"SiteHeader\",\n\n  mixins: [_reactAddonsPureRenderMixin2.default],\n  getInitialState: function getInitialState() {\n    return {\n      open: false\n    };\n  },\n\n  handleToggle: function handleToggle() {\n    this.setState({ open: !this.state.open });\n  },\n  closeMenu: function closeMenu() {\n    this.setState({ open: false });\n  },\n  gotoHome: function gotoHome() {\n    var router = this.context.router,\n        location = router.createLocation(\"/\");\n    router.push(location);\n  },\n  getSiteHeader: function getSiteHeader() {\n    var _this = this;\n\n    if (this.props.isMobile) {\n      return _react2.default.createElement(\n        \"div\",\n        null,\n        _react2.default.createElement(\n          _AppBar2.default,\n          {\n            title: _react2.default.createElement(\n              \"div\",\n              {\n                style: { cursor: \"pointer\", width: \"20%\" },\n                onClick: this.gotoHome\n              },\n              _i18n2.default.t(\"quizMe\")\n            ),\n            titleStyle: _extends({}, this.context.customTheme.siteHeader),\n            style: { position: \"fixed\", zIndex: 1200 },\n            iconClassNameRight: \"muidocs-icon-navigation-expand-more\",\n            onLeftIconButtonTouchTap: this.handleToggle\n          },\n          _react2.default.createElement(\n            _ToolbarGroup2.default,\n            { style: { right: -12, top: 13 } },\n            _react2.default.createElement(_userprofile2.default, null)\n          )\n        ),\n        _react2.default.createElement(\n          _Drawer2.default,\n          {\n            width: 285,\n            docked: false,\n            open: this.state.open,\n            onRequestChange: function onRequestChange(open) {\n              return _this.setState({ open: open });\n            },\n            containerStyle: { overflow: \"hidden !important\" }\n          },\n          _react2.default.createElement(_AppBar2.default, {\n            title: _react2.default.createElement(\n              \"div\",\n              { style: this.context.customTheme.smallText },\n              _i18n2.default.t(\"quizMe\")\n            ),\n            iconElementLeft: _react2.default.createElement(\"img\", {\n              src: \"../../images/navIcon.png\",\n              alt: \"navImg\",\n              style: {\n                height: 32,\n                padding: 7\n              }\n            })\n          }),\n          _react2.default.createElement(_mobilemenu2.default, { closeMenu: this.closeMenu }),\n          _react2.default.createElement(\n            \"footer\",\n            { className: \"center-xs ft\" },\n            _react2.default.createElement(_footermobile2.default, null)\n          )\n        )\n      );\n    }\n    var headerTabs = _react2.default.createElement(_headertabs2.default, this.props);\n    return _react2.default.createElement(_AppBar2.default, {\n      title: _react2.default.createElement(\n        \"div\",\n        {\n          style: { cursor: \"pointer\", width: \"20%\" },\n          onClick: this.gotoHome\n        },\n        _i18n2.default.t(\"quizMe\")\n      ),\n      titleStyle: _extends({}, this.context.customTheme.siteHeader),\n      showMenuIconButton: false,\n      iconElementRight: headerTabs,\n      iconStyleRight: { flex: 1.5, marginRight: 4 }\n    });\n  },\n  render: function render() {\n    return _react2.default.createElement(\n      \"div\",\n      null,\n      this.getSiteHeader()\n    );\n  }\n});\nSiteHeader.contextTypes = {\n  customTheme: _react2.default.PropTypes.object,\n  router: _react2.default.PropTypes.object\n};\nexports.default = SiteHeader;\n\n/***/ }),\n\n/***/ 82:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _forIn2 = __webpack_require__(24);\n\nvar _forIn3 = _interopRequireDefault(_forIn2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (item, model) {\n    var revivers = item.revivers,\n        reviverKeys = Object.keys(revivers);\n    (0, _forIn3.default)(reviverKeys, function (reviverKey) {\n        item = revivers[reviverKey].call(item, model);\n    });\n\n    return item;\n};\n\n/***/ }),\n\n/***/ 835:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactAddonsPureRenderMixin = __webpack_require__(27);\n\nvar _reactAddonsPureRenderMixin2 = _interopRequireDefault(_reactAddonsPureRenderMixin);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Footer = _react2.default.createClass({\n    displayName: 'Footer',\n\n    mixins: [_reactAddonsPureRenderMixin2.default],\n    render: function render() {\n        return _react2.default.createElement(\n            'div',\n            { style: { padding: 10 } },\n            _react2.default.createElement(\n                'div',\n                null,\n                'Copyright \\xA9 Paragyte'\n            )\n        );\n    }\n});\n\nexports.default = Footer;\n\n/***/ }),\n\n/***/ 836:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = __webpack_require__(16);\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _reactAddonsPureRenderMixin = __webpack_require__(27);\n\nvar _reactAddonsPureRenderMixin2 = _interopRequireDefault(_reactAddonsPureRenderMixin);\n\nvar _Tabs = __webpack_require__(235);\n\nvar _Tabs2 = _interopRequireDefault(_Tabs);\n\nvar _Tab = __webpack_require__(236);\n\nvar _Tab2 = _interopRequireDefault(_Tab);\n\nvar _Toolbar = __webpack_require__(380);\n\nvar _Toolbar2 = _interopRequireDefault(_Toolbar);\n\nvar _ToolbarGroup = __webpack_require__(147);\n\nvar _ToolbarGroup2 = _interopRequireDefault(_ToolbarGroup);\n\nvar _withRouter = __webpack_require__(161);\n\nvar _withRouter2 = _interopRequireDefault(_withRouter);\n\nvar _reactResponsive = __webpack_require__(227);\n\nvar _reactResponsive2 = _interopRequireDefault(_reactResponsive);\n\nvar _i18n = __webpack_require__(8);\n\nvar _i18n2 = _interopRequireDefault(_i18n);\n\nvar _languagemenu = __webpack_require__(839);\n\nvar _languagemenu2 = _interopRequireDefault(_languagemenu);\n\nvar _userprofile = __webpack_require__(157);\n\nvar _userprofile2 = _interopRequireDefault(_userprofile);\n\nvar _publishsurveyactions = __webpack_require__(143);\n\nvar _publishsurveyactions2 = _interopRequireDefault(_publishsurveyactions);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//import { AppDrawer } from \"p10platformbarshellreact\";\nvar TabsModel = [{ title: \"Surveys\", path: \"/surveys\" }, { title: \"Contacts\", path: \"/contacts\" }],\n    HeaderTabs = _react2.default.createClass({\n  displayName: \"HeaderTabs\",\n\n  mixins: [_reactAddonsPureRenderMixin2.default],\n  contextTypes: {\n    history: _react2.default.PropTypes.object.isRequired,\n    location: _react2.default.PropTypes.object.isRequired,\n    customTheme: _react2.default.PropTypes.object\n  },\n  _handleActive: function _handleActive(tab) {\n    if (tab.props.value == \"/surveys\") {\n      _publishsurveyactions2.default.tabChanged();\n    }\n    var router = this.props.router,\n        location = router.createLocation(tab.props.value);\n    router.push(location);\n  },\n  getTabIndexFromPath: function getTabIndexFromPath(path) {\n    var result = TabsModel.findIndex(function (tab) {\n      return tab.path == path;\n    });\n    if (result < 0) {\n      result = 0;\n    }\n    if (path.split(\"/\")[1] == \"surveys\") {\n      result = 0;\n    }\n    return result;\n  },\n  componentWillMount: function componentWillMount() {\n    if (!window.React) {\n      window.React = _react2.default;\n      window.ReactDOM = _reactDom2.default;\n    }\n  },\n  renderTabs: function renderTabs() {\n    var _this = this;\n\n    return TabsModel.map(function (tab, index) {\n      return _react2.default.createElement(_Tab2.default, {\n        className: \"tabs-Mob\",\n        style: { width: 100 },\n        key: index.toString(),\n        value: tab.path,\n        label: _i18n2.default.t(tab.title),\n        onActive: _this._handleActive\n      });\n    });\n  },\n\n  render: function render() {\n    var initialSelectedIndex = this.getTabIndexFromPath(this.context.location.pathname),\n        isMobile = this.context.customTheme.isMobile;\n\n    return _react2.default.createElement(\n      \"div\",\n      null,\n      !isMobile && _react2.default.createElement(\n        \"div\",\n        null,\n        _react2.default.createElement(\n          \"div\",\n          { className: \"row\" },\n          _react2.default.createElement(\n            \"div\",\n            { className: \"col-xs flex-xs-middle\" },\n            _react2.default.createElement(\n              _ToolbarGroup2.default,\n              null,\n              _react2.default.createElement(\n                _Tabs2.default,\n                {\n                  initialSelectedIndex: initialSelectedIndex,\n                  ref: \"tabs\"\n                },\n                this.renderTabs()\n              )\n            )\n          ),\n          _react2.default.createElement(\n            \"div\",\n            {\n              className: \"end-xs flex-xs-middle\",\n              style: { display: \"flex\" }\n            },\n            _react2.default.createElement(\n              \"div\",\n              { className: \"mat3\" },\n              _react2.default.createElement(\n                \"div\",\n                { className: \"col-xs-12 col-md-8\" },\n                _react2.default.createElement(_languagemenu2.default, null)\n              )\n            ),\n            _react2.default.createElement(\n              \"div\",\n              { className: \"end-xs\", style: { padding: 6 } },\n              _react2.default.createElement(_userprofile2.default, null)\n            )\n          )\n        )\n      )\n    );\n  }\n});\nexports.default = (0, _withRouter2.default)(HeaderTabs);\n\n/***/ }),\n\n/***/ 839:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _forIn2 = __webpack_require__(24);\n\nvar _forIn3 = _interopRequireDefault(_forIn2);\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _connect = __webpack_require__(63);\n\nvar _connect2 = _interopRequireDefault(_connect);\n\nvar _reactAddonsPureRenderMixin = __webpack_require__(27);\n\nvar _reactAddonsPureRenderMixin2 = _interopRequireDefault(_reactAddonsPureRenderMixin);\n\nvar _appactions = __webpack_require__(100);\n\nvar _appactions2 = _interopRequireDefault(_appactions);\n\nvar _appsettings = __webpack_require__(28);\n\nvar _colors = __webpack_require__(48);\n\nvar Colors = _interopRequireWildcard(_colors);\n\nvar _appstore = __webpack_require__(129);\n\nvar _appstore2 = _interopRequireDefault(_appstore);\n\nvar _DropDownMenu = __webpack_require__(379);\n\nvar _DropDownMenu2 = _interopRequireDefault(_DropDownMenu);\n\nvar _MenuItem = __webpack_require__(103);\n\nvar _MenuItem2 = _interopRequireDefault(_MenuItem);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar LanguageMenu = _react2.default.createClass({\n  displayName: \"LanguageMenu\",\n\n  mixins: [_reactAddonsPureRenderMixin2.default, (0, _connect2.default)(_appstore2.default, \"appCollection\")],\n  handleChange: function handleChange(event, index, value) {\n    this.setState({ value: value });\n    _appactions2.default.changeLanguage(value);\n    event.preventDefault();\n  },\n  render: function render() {\n    var languageMenu = [];\n    var self = this;\n    var selectedLanguage = this.state.appCollection.getIn([\"language\"]);\n    var options = (0, _forIn3.default)(_appsettings.SupportedLanguages, function (key, value) {\n      languageMenu.push(_react2.default.createElement(_MenuItem2.default, {\n        key: key,\n        value: key,\n        primaryText: value,\n        style: self.context.customTheme.menuItem\n      }));\n    });\n    return _react2.default.createElement(\n      _DropDownMenu2.default,\n      {\n        labelStyle: _extends({\n          color: Colors.white\n        }, this.context.customTheme.DropDownMenu),\n        menuStyle: this.context.customTheme.DropDownMenu,\n        value: selectedLanguage,\n        onChange: this.handleChange\n      },\n      languageMenu\n    );\n  }\n});\nLanguageMenu.contextTypes = {\n  customTheme: _react2.default.PropTypes.object\n};\nexports.default = LanguageMenu;\n\n/***/ }),\n\n/***/ 870:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _forIn2 = __webpack_require__(24);\n\nvar _forIn3 = _interopRequireDefault(_forIn2);\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _connect = __webpack_require__(63);\n\nvar _connect2 = _interopRequireDefault(_connect);\n\nvar _reactCollapse = __webpack_require__(390);\n\nvar _reactAddonsPureRenderMixin = __webpack_require__(27);\n\nvar _reactAddonsPureRenderMixin2 = _interopRequireDefault(_reactAddonsPureRenderMixin);\n\nvar _MenuItem = __webpack_require__(103);\n\nvar _MenuItem2 = _interopRequireDefault(_MenuItem);\n\nvar _Menu = __webpack_require__(382);\n\nvar _Menu2 = _interopRequireDefault(_Menu);\n\nvar _FontIcon = __webpack_require__(102);\n\nvar _FontIcon2 = _interopRequireDefault(_FontIcon);\n\nvar _colors = __webpack_require__(48);\n\nvar Colors = _interopRequireWildcard(_colors);\n\nvar _Tabs = __webpack_require__(235);\n\nvar _Tabs2 = _interopRequireDefault(_Tabs);\n\nvar _Tab = __webpack_require__(236);\n\nvar _Tab2 = _interopRequireDefault(_Tab);\n\nvar _withRouter = __webpack_require__(161);\n\nvar _withRouter2 = _interopRequireDefault(_withRouter);\n\nvar _appsettings = __webpack_require__(28);\n\nvar _mobilelanguagelink = __webpack_require__(880);\n\nvar _mobilelanguagelink2 = _interopRequireDefault(_mobilelanguagelink);\n\nvar _i18n = __webpack_require__(8);\n\nvar _i18n2 = _interopRequireDefault(_i18n);\n\nvar _appstore = __webpack_require__(129);\n\nvar _appstore2 = _interopRequireDefault(_appstore);\n\nvar _publishsurveyactions = __webpack_require__(143);\n\nvar _publishsurveyactions2 = _interopRequireDefault(_publishsurveyactions);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar TabsModel = [{ title: \"Surveys\", path: \"/surveys\" }, { title: \"Contacts\", path: \"/contacts\" }],\n    fontClass = {\n  0: {\n    class: \"icon-Survey\",\n    icon: \"\"\n  },\n  1: {\n    class: \"material-icons\",\n    icon: \"contact_phone\"\n  },\n  2: {\n    class: \"material-icons\",\n    icon: \"help\"\n  },\n  Language: {\n    class: \"material-icons\",\n    icon: \"language\"\n  }\n},\n    MobileMenu = _react2.default.createClass({\n  displayName: \"MobileMenu\",\n\n  mixins: [_reactAddonsPureRenderMixin2.default, (0, _connect2.default)(_appstore2.default, \"appCollection\")],\n  contextTypes: {\n    history: _react2.default.PropTypes.object.isRequired,\n    location: _react2.default.PropTypes.object.isRequired,\n    customTheme: _react2.default.PropTypes.object\n  },\n  getInitialState: function getInitialState() {\n    return {\n      displayLanguageMenu: false\n    };\n  },\n  _handleActive: function _handleActive(event, value) {\n    if (value == \"/surveys\") {\n      _publishsurveyactions2.default.tabChanged();\n    }\n    var router = this.props.router,\n        location = router.createLocation(value);\n    router.push(location);\n    this.props.closeMenu();\n  },\n  getTabIndexFromPath: function getTabIndexFromPath(path) {\n    var result = TabsModel.findIndex(function (tab) {\n      return tab.path == path;\n    });\n    if (result < 0) {\n      result = 0;\n    }\n    if (path.split(\"/\")[1] == \"surveys\") {\n      result = 0;\n    }\n    return result;\n  },\n  renderMenu: function renderMenu(menuCSS, menuIconCSS) {\n    var self = this;\n    return TabsModel.map(function (tab, i) {\n      return _react2.default.createElement(_MenuItem2.default, {\n        style: self.context.customTheme.menuItem,\n        value: tab.path,\n        primaryText: _react2.default.createElement(\n          \"div\",\n          { key: i, style: menuCSS },\n          _i18n2.default.t(tab.title)\n        ),\n        key: i,\n        leftIcon: _react2.default.createElement(\n          _FontIcon2.default,\n          {\n            className: fontClass[i].class,\n            style: menuIconCSS,\n            color: _colors.red500\n          },\n          fontClass[i].icon\n        )\n      });\n    });\n  },\n  renderLanguages: function renderLanguages() {\n    var selectedLanguage = this.state.appCollection.getIn([\"language\"]),\n        lang = [];\n    (0, _forIn3.default)(_appsettings.SupportedLanguages, function (key, value) {\n      if (key == selectedLanguage) {\n        lang.push(_react2.default.createElement(\n          \"div\",\n          { key: key, className: \"langMenu\" },\n          _react2.default.createElement(_mobilelanguagelink2.default, {\n            language: key,\n            key: \"link_\" + key,\n            text: value,\n            isSelected: true\n          })\n        ));\n      } else {\n        lang.push(_react2.default.createElement(\n          \"div\",\n          { key: key, className: \"langMenu\" },\n          _react2.default.createElement(_mobilelanguagelink2.default, {\n            language: key,\n            key: \"link_\" + key,\n            text: value,\n            isSelected: false\n          })\n        ));\n      }\n    });\n    return lang;\n  },\n  _handleLanguageRender: function _handleLanguageRender() {\n    var displayLanguageMenu = this.state.displayLanguageMenu;\n\n    this.setState({ displayLanguageMenu: !displayLanguageMenu });\n  },\n  render: function render() {\n    var locallink = [],\n        menuCSS = _extends({\n      fontFamily: \"Roboto, sans-serif\"\n    }, this.context.customTheme.titleText, {\n      fontWeight: \"700\",\n      textTransform: \"uppercase\",\n      color: \"#00BCD4\"\n    }),\n        menuIconCSS = {\n      marginRight: 24,\n      marginTop: \"3%\",\n      width: \"232px\"\n    },\n        self = this,\n        initialSelectedIndex = this.getTabIndexFromPath(location.pathname),\n        displayLanguageMenu = this.state.displayLanguageMenu;\n\n    return _react2.default.createElement(\n      \"div\",\n      null,\n      _react2.default.createElement(\n        _Menu2.default,\n        { onChange: this._handleActive, style: { width: \"232px\" } },\n        this.renderMenu(menuCSS, menuIconCSS)\n      ),\n      _react2.default.createElement(_MenuItem2.default, {\n        style: _extends({\n          marginBottom: 10,\n          marginTop: -10\n        }, this.context.customTheme.menuItem),\n        key: \"drawer\",\n        value: _i18n2.default.t(\"Language\"),\n        primaryText: _react2.default.createElement(\n          \"div\",\n          { style: menuCSS },\n          _i18n2.default.t(\"Language\")\n        ),\n        leftIcon: _react2.default.createElement(\n          _FontIcon2.default,\n          {\n            className: fontClass[\"Language\"].class,\n            style: menuIconCSS,\n            color: _colors.red500\n          },\n          fontClass[\"Language\"].icon\n        ),\n        rightIcon: _react2.default.createElement(\n          _FontIcon2.default,\n          {\n            className: fontClass[\"Language\"].class,\n            style: { margin: \"12px -2px\" },\n            color: _colors.red500\n          },\n          displayLanguageMenu ? \"keyboard_arrow_down\" : \"keyboard_arrow_right\"\n        ),\n        onClick: this._handleLanguageRender\n      }),\n      _react2.default.createElement(\n        _reactCollapse.Collapse,\n        { isOpened: displayLanguageMenu },\n        this.renderLanguages()\n      )\n    );\n  }\n});\n\nexports.default = (0, _withRouter2.default)(MobileMenu);\n\n/***/ }),\n\n/***/ 880:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactAddonsPureRenderMixin = __webpack_require__(27);\n\nvar _reactAddonsPureRenderMixin2 = _interopRequireDefault(_reactAddonsPureRenderMixin);\n\nvar _appactions = __webpack_require__(100);\n\nvar _appactions2 = _interopRequireDefault(_appactions);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar MobileLanguageLink = _react2.default.createClass({\n  displayName: \"MobileLanguageLink\",\n\n  mixins: [_reactAddonsPureRenderMixin2.default],\n  _handleClick: function _handleClick(e) {\n    _appactions2.default.changeLanguage(this.props.language);\n    e.preventDefault();\n  },\n  render: function render() {\n    var isSelected = this.props.isSelected;\n\n    return _react2.default.createElement(\n      \"a\",\n      {\n        style: { color: isSelected ? \"maroon\" : \"#00BCD4\" },\n        onClick: this._handleClick,\n        href: \"#\"\n      },\n      this.props.text\n    );\n  }\n});\n\nexports.default = MobileLanguageLink;\n\n/***/ }),\n\n/***/ 881:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"./images/navIcon.png\";\n\n/***/ }),\n\n/***/ 882:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _colors = __webpack_require__(223);\n\nvar _colorManipulator = __webpack_require__(366);\n\nvar _spacing = __webpack_require__(883);\n\nvar _spacing2 = _interopRequireDefault(_spacing);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\r\n *  Light Theme is the default theme used in material-ui. It is guaranteed to\r\n *  have all theme variables needed for every component. Variables not defined\r\n *  in a custom theme will default to these values.\r\n */\nexports.default = {\n  spacing: _spacing2.default,\n  fontFamily: \"Roboto, sans-serif\",\n  palette: {\n    primary1Color: _colors.cyan500,\n    primary2Color: _colors.cyan700,\n    primary3Color: _colors.grey400,\n    accent1Color: _colors.pinkA200,\n    accent2Color: _colors.grey100,\n    accent3Color: _colors.grey500,\n    textColor: _colors.darkBlack,\n    secondaryTextColor: (0, _colorManipulator.fade)(_colors.darkBlack, 0.54),\n    alternateTextColor: _colors.white,\n    canvasColor: _colors.white,\n    borderColor: _colors.grey300,\n    disabledColor: (0, _colorManipulator.fade)(_colors.darkBlack, 0.3),\n    pickerHeaderColor: _colors.cyan500,\n    clockCircleColor: (0, _colorManipulator.fade)(_colors.darkBlack, 0.07),\n    shadowColor: _colors.fullBlack\n  }\n}; /**\r\n    * NB: If you update this file, please also update `docs/src/app/customization/Themes.js`\r\n    */\n\n/***/ }),\n\n/***/ 883:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  iconSize: 24,\n  desktopGutter: 24,\n  desktopGutterMore: 32,\n  desktopGutterLess: 16,\n  desktopGutterMini: 8,\n  desktopKeylineIncrement: 64,\n  desktopDropDownMenuItemHeight: 32,\n  desktopDropDownMenuFontSize: 15,\n  desktopDrawerMenuItemHeight: 48,\n  desktopSubheaderHeight: 48,\n  desktopToolbarHeight: 56\n};\n\n/***/ }),\n\n/***/ 884:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  menu: 1000,\n  appBar: 1100,\n  drawerOverlay: 1200,\n  drawer: 1300,\n  dialogOverlay: 1400,\n  dialog: 1500,\n  layer: 2000,\n  popover: 2100,\n  snackbar: 2900,\n  tooltip: 3000\n};\n\n/***/ }),\n\n/***/ 885:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (muiTheme) {\n  var userAgent = muiTheme.userAgent;\n\n  if (userAgent === undefined && typeof navigator !== 'undefined') {\n    userAgent = navigator.userAgent;\n  }\n\n  if (userAgent === undefined && !hasWarnedAboutUserAgent) {\n    (0, _warning2.default)(false, 'Material-UI: userAgent should be supplied in the muiTheme context\\n      for server-side rendering.');\n\n    hasWarnedAboutUserAgent = true;\n  }\n\n  var isServer = typeof window === 'undefined';\n\n  if (userAgent === false) {\n    // Disabled autoprefixer\n    return null;\n  } else if (userAgent === 'all' || userAgent === undefined) {\n    // Prefix for all user agent\n    return function (style) {\n      var isFlex = false;\n\n      if (isServer) {\n        isFlex = ['flex', 'inline-flex'].indexOf(style.display) !== -1;\n      }\n\n      var stylePrefixed = _inlineStylePrefixer2.default.prefixAll(style);\n\n      // We can't apply this join with react-dom:\n      // #https://github.com/facebook/react/issues/6467\n      if (isFlex) {\n        stylePrefixed.display = stylePrefixed.display.join('; display: ');\n      }\n\n      return stylePrefixed;\n    };\n  } else {\n    var prefixer = new _inlineStylePrefixer2.default({\n      userAgent: userAgent\n    });\n\n    return function (style) {\n      return prefixer.prefix(style);\n    };\n  }\n};\n\nvar _inlineStylePrefixer = __webpack_require__(309);\n\nvar _inlineStylePrefixer2 = _interopRequireDefault(_inlineStylePrefixer);\n\nvar _warning = __webpack_require__(29);\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar hasWarnedAboutUserAgent = false;\n\n/***/ }),\n\n/***/ 886:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = callOnce;\n\nvar _warning = __webpack_require__(29);\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar CALLED_ONCE = 'muiPrepared';\n\nfunction callOnce() {\n  if (false) {\n    return function (style) {\n      if (style[CALLED_ONCE]) {\n        (0, _warning2.default)(false, 'Material-UI: You cannot call prepareStyles() on the same style object more than once.');\n      }\n      style[CALLED_ONCE] = true;\n      return style;\n    };\n  }\n}\n\n/***/ }),\n\n/***/ 887:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = rtl;\nvar reTranslate = /((^|\\s)translate(3d|X)?\\()(\\-?[\\d]+)/;\nvar reSkew = /((^|\\s)skew(x|y)?\\()\\s*(\\-?[\\d]+)(deg|rad|grad)(,\\s*(\\-?[\\d]+)(deg|rad|grad))?/;\n\n/**\r\n * This function ensures that `style` supports both ltr and rtl directions by\r\n * checking `styleConstants` in `muiTheme` and replacing attribute keys if\r\n * necessary.\r\n */\nfunction rtl(muiTheme) {\n  if (muiTheme.isRtl) {\n    return function (style) {\n      if (style.directionInvariant === true) {\n        return style;\n      }\n\n      var flippedAttributes = {\n        // Keys and their replacements.\n        right: 'left',\n        left: 'right',\n        marginRight: 'marginLeft',\n        marginLeft: 'marginRight',\n        paddingRight: 'paddingLeft',\n        paddingLeft: 'paddingRight',\n        borderRight: 'borderLeft',\n        borderLeft: 'borderRight'\n      };\n\n      var newStyle = {};\n\n      Object.keys(style).forEach(function (attribute) {\n        var value = style[attribute];\n        var key = attribute;\n\n        if (flippedAttributes.hasOwnProperty(attribute)) {\n          key = flippedAttributes[attribute];\n        }\n\n        switch (attribute) {\n          case 'float':\n          case 'textAlign':\n            if (value === 'right') {\n              value = 'left';\n            } else if (value === 'left') {\n              value = 'right';\n            }\n            break;\n\n          case 'direction':\n            if (value === 'ltr') {\n              value = 'rtl';\n            } else if (value === 'rtl') {\n              value = 'ltr';\n            }\n            break;\n\n          case 'transform':\n            if (!value) break;\n            var matches = void 0;\n            if (matches = value.match(reTranslate)) {\n              value = value.replace(matches[0], matches[1] + -parseFloat(matches[4]));\n            }\n            if (matches = value.match(reSkew)) {\n              value = value.replace(matches[0], matches[1] + -parseFloat(matches[4]) + matches[5] + matches[6] ? ', ' + (-parseFloat(matches[7]) + matches[8]) : '');\n            }\n            break;\n\n          case 'transformOrigin':\n            if (!value) break;\n            if (value.indexOf('right') > -1) {\n              value = value.replace('right', 'left');\n            } else if (value.indexOf('left') > -1) {\n              value = value.replace('left', 'right');\n            }\n            break;\n        }\n\n        newStyle[key] = value;\n      });\n\n      return newStyle;\n    };\n  }\n}\n\n/***/ }),\n\n/***/ 888:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _colors = __webpack_require__(223);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Typography = function Typography() {\n  _classCallCheck(this, Typography);\n\n  // text colors\n  this.textFullBlack = _colors.fullBlack;\n  this.textDarkBlack = _colors.darkBlack;\n  this.textLightBlack = _colors.lightBlack;\n  this.textMinBlack = _colors.minBlack;\n  this.textFullWhite = _colors.fullWhite;\n  this.textDarkWhite = _colors.darkWhite;\n  this.textLightWhite = _colors.lightWhite;\n\n  // font weight\n  this.fontWeightLight = 300;\n  this.fontWeightNormal = 400;\n  this.fontWeightMedium = 500;\n\n  this.fontStyleButtonFontSize = 14;\n};\n\nexports.default = new Typography();\n\n/***/ }),\n\n/***/ 889:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _appsettings = __webpack_require__(28);\n\nvar _colors = __webpack_require__(48);\n\nvar Colors = _interopRequireWildcard(_colors);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar themeSetting = {\n  surveyHeader: {\n    fontSize: _appsettings.fonts.x_large\n  },\n  sectionTitle: {\n    fontSize: _appsettings.fonts.large\n  },\n  sectionDescription: {\n    fontSize: _appsettings.fonts.small\n  },\n  sectionHeader: {\n    fontSize: _appsettings.fonts.normal\n  },\n  textField: {\n    fontSize: _appsettings.fonts.normal\n  },\n  radioButton: {\n    fontSize: _appsettings.fonts.medium\n  },\n  datePicker: {\n    fontSize: _appsettings.fonts.large\n  },\n  dropDownMenu: {\n    fontSize: _appsettings.fonts.normal\n  },\n  titleDecorator: {\n    fontSize: _appsettings.fonts.x_large\n  },\n  titleDescriptionDecorator: {\n    fontSize: _appsettings.fonts.small\n  },\n  toggleLabel: {\n    fontSize: _appsettings.fonts.medium\n  },\n  toggleDescription: {\n    fontSize: _appsettings.fonts.small\n  },\n  menuItem: {\n    fontSize: _appsettings.fonts.medium\n  },\n  validations: {\n    success: Colors.green500,\n    failed: Colors.red700,\n    unchecked: Colors.amber500\n  },\n  messageText: {\n    fontSize: _appsettings.fonts.larger\n  },\n  smallText: {\n    fontSize: _appsettings.fonts.small\n  },\n  titleText: {\n    fontSize: _appsettings.fonts.large\n  },\n  descriptionText: {\n    fontSize: _appsettings.fonts.small\n  },\n  infoText: {\n    fontSize: _appsettings.fonts.smaller\n  },\n  siteHeader: {\n    fontSize: _appsettings.fonts.x_large\n  },\n  normalText: {\n    fontSize: _appsettings.fonts.normal\n  },\n  timerText: {\n    fontSize: _appsettings.fonts.x_small\n  }\n};\n\nexports.default = themeSetting;\n\n/***/ }),\n\n/***/ 890:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * Copyright 2015, Yahoo Inc.\r\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\r\n */\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TouchBackend = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nexports.default = createTouchBackend;\n\nvar _invariant = __webpack_require__(4);\n\nvar _invariant2 = _interopRequireDefault(_invariant);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction getEventClientTouchOffset(e) {\n  if (e.targetTouches.length === 1) {\n    return getEventClientOffset(e.targetTouches[0]);\n  }\n}\n\nfunction getEventClientOffset(e) {\n  if (e.targetTouches) {\n    return getEventClientTouchOffset(e);\n  } else {\n    return {\n      x: e.clientX,\n      y: e.clientY\n    };\n  }\n}\n\nvar supportsPassive = function () {\n  //simular to jQuery's test\n  var supported = false;\n  try {\n    addEventListener(\"test\", null, Object.defineProperty({}, \"passive\", {\n      get: function get() {\n        supported = true;\n      }\n    }));\n  } catch (e) {}\n  return supported;\n}();\n\nvar ELEMENT_NODE = 1;\nfunction getNodeClientOffset(node) {\n  var el = node.nodeType === ELEMENT_NODE ? node : node.parentElement;\n\n  if (!el) {\n    return null;\n  }\n\n  var _el$getBoundingClient = el.getBoundingClientRect(),\n      top = _el$getBoundingClient.top,\n      left = _el$getBoundingClient.left;\n\n  return { x: left, y: top };\n}\n\nvar eventNames = {\n  mouse: {\n    start: \"mousedown\",\n    move: \"mousemove\",\n    end: \"mouseup\"\n  },\n  touch: {\n    start: \"touchstart\",\n    move: \"touchmove\",\n    end: \"touchend\"\n  },\n  keyboard: {\n    keydown: \"keydown\"\n  }\n};\n\nvar TouchBackend = exports.TouchBackend = function () {\n  function TouchBackend(manager) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, TouchBackend);\n\n    options.delayTouchStart = options.delayTouchStart || options.delay;\n\n    options = _extends({\n      enableTouchEvents: true,\n      enableMouseEvents: false,\n      enableKeyboardEvents: false,\n      delayTouchStart: 0,\n      delayMouseStart: 0\n    }, options);\n\n    this.actions = manager.getActions();\n    this.monitor = manager.getMonitor();\n    this.registry = manager.getRegistry();\n\n    this.enableKeyboardEvents = options.enableKeyboardEvents;\n    this.delayTouchStart = options.delayTouchStart;\n    this.delayMouseStart = options.delayMouseStart;\n    this.sourceNodes = {};\n    this.sourceNodeOptions = {};\n    this.sourcePreviewNodes = {};\n    this.sourcePreviewNodeOptions = {};\n    this.targetNodeOptions = {};\n    this.listenerTypes = [];\n    this._mouseClientOffset = {};\n\n    if (options.enableMouseEvents) {\n      this.listenerTypes.push(\"mouse\");\n    }\n\n    if (options.enableTouchEvents) {\n      this.listenerTypes.push(\"touch\");\n    }\n\n    if (options.enableKeyboardEvents) {\n      this.listenerTypes.push(\"keyboard\");\n    }\n\n    this.getSourceClientOffset = this.getSourceClientOffset.bind(this);\n    this.handleTopMoveStart = this.handleTopMoveStart.bind(this);\n    this.handleTopMoveStartDelay = this.handleTopMoveStartDelay.bind(this);\n    this.handleTopMoveStartCapture = this.handleTopMoveStartCapture.bind(this);\n    this.handleTopMoveCapture = this.handleTopMoveCapture.bind(this);\n    this.handleTopMove = this.handleTopMove.bind(this);\n    this.handleTopMoveEndCapture = this.handleTopMoveEndCapture.bind(this);\n    this.handleCancelOnEscape = this.handleCancelOnEscape.bind(this);\n  }\n\n  _createClass(TouchBackend, [{\n    key: \"setup\",\n    value: function setup() {\n      if (typeof window === \"undefined\") {\n        return;\n      }\n\n      (0, _invariant2.default)(!this.constructor.isSetUp, \"Cannot have two Touch backends at the same time.\");\n      this.constructor.isSetUp = true;\n\n      this.addEventListener(window, \"start\", this.getTopMoveStartHandler());\n      this.addEventListener(window, \"start\", this.handleTopMoveStartCapture, true);\n      this.addEventListener(window, \"move\", this.handleTopMove);\n      this.addEventListener(window, \"move\", this.handleTopMoveCapture, true);\n      this.addEventListener(window, \"end\", this.handleTopMoveEndCapture, true);\n\n      if (this.enableKeyboardEvents) {\n        this.addEventListener(window, \"keydown\", this.handleCancelOnEscape, true);\n      }\n    }\n  }, {\n    key: \"teardown\",\n    value: function teardown() {\n      if (typeof window === \"undefined\") {\n        return;\n      }\n\n      this.constructor.isSetUp = false;\n      this._mouseClientOffset = {};\n\n      this.removeEventListener(window, \"start\", this.handleTopMoveStartCapture, true);\n      this.removeEventListener(window, \"start\", this.handleTopMoveStart);\n      this.removeEventListener(window, \"move\", this.handleTopMoveCapture, true);\n      this.removeEventListener(window, \"move\", this.handleTopMove);\n      this.removeEventListener(window, \"end\", this.handleTopMoveEndCapture, true);\n\n      if (this.enableKeyboardEvents) {\n        this.removeEventListener(window, \"keydown\", this.handleCancelOnEscape, true);\n      }\n\n      this.uninstallSourceNodeRemovalObserver();\n    }\n  }, {\n    key: \"addEventListener\",\n    value: function addEventListener(subject, event, handler, capture) {\n      var options = supportsPassive ? { capture: capture, passive: false } : capture;\n\n      this.listenerTypes.forEach(function (listenerType) {\n        subject.addEventListener(eventNames[listenerType][event], handler, options);\n      });\n    }\n  }, {\n    key: \"removeEventListener\",\n    value: function removeEventListener(subject, event, handler, capture) {\n      var options = supportsPassive ? { capture: capture, passive: false } : capture;\n\n      this.listenerTypes.forEach(function (listenerType) {\n        subject.removeEventListener(eventNames[listenerType][event], handler, options);\n      });\n    }\n  }, {\n    key: \"connectDragSource\",\n    value: function connectDragSource(sourceId, node, options) {\n      var _this = this;\n\n      var handleMoveStart = this.handleMoveStart.bind(this, sourceId);\n      this.sourceNodes[sourceId] = node;\n\n      this.addEventListener(node, \"start\", handleMoveStart);\n\n      return function () {\n        delete _this.sourceNodes[sourceId];\n        _this.removeEventListener(node, \"start\", handleMoveStart);\n      };\n    }\n  }, {\n    key: \"connectDragPreview\",\n    value: function connectDragPreview(sourceId, node, options) {\n      var _this2 = this;\n\n      this.sourcePreviewNodeOptions[sourceId] = options;\n      this.sourcePreviewNodes[sourceId] = node;\n\n      return function () {\n        delete _this2.sourcePreviewNodes[sourceId];\n        delete _this2.sourcePreviewNodeOptions[sourceId];\n      };\n    }\n  }, {\n    key: \"connectDropTarget\",\n    value: function connectDropTarget(targetId, node) {\n      var _this3 = this;\n\n      var handleMove = function handleMove(e) {\n        var coords = void 0;\n\n        /**\r\n               * Grab the coordinates for the current mouse/touch position\r\n               */\n        switch (e.type) {\n          case eventNames.mouse.move:\n            coords = { x: e.clientX, y: e.clientY };\n            break;\n\n          case eventNames.touch.move:\n            coords = { x: e.touches[0].clientX, y: e.touches[0].clientY };\n            break;\n        }\n\n        /**\r\n               * Use the coordinates to grab the element the drag ended on.\r\n               * If the element is the same as the target node (or any of it's children) then we have hit a drop target and can handle the move.\r\n               */\n        var droppedOn = document.elementFromPoint(coords.x, coords.y);\n        var childMatch = node.contains(droppedOn);\n\n        if (droppedOn === node || childMatch) {\n          return _this3.handleMove(e, targetId);\n        }\n      };\n\n      /**\r\n           * Attaching the event listener to the body so that touchmove will work while dragging over multiple target elements.\r\n           */\n      this.addEventListener(document.querySelector(\"body\"), \"move\", handleMove);\n\n      return function () {\n        _this3.removeEventListener(document.querySelector(\"body\"), \"move\", handleMove);\n      };\n    }\n  }, {\n    key: \"getSourceClientOffset\",\n    value: function getSourceClientOffset(sourceId) {\n      return getNodeClientOffset(this.sourceNodes[sourceId]);\n    }\n  }, {\n    key: \"handleTopMoveStartCapture\",\n    value: function handleTopMoveStartCapture(e) {\n      this.moveStartSourceIds = [];\n    }\n  }, {\n    key: \"handleMoveStart\",\n    value: function handleMoveStart(sourceId) {\n      this.moveStartSourceIds.unshift(sourceId);\n    }\n  }, {\n    key: \"getTopMoveStartHandler\",\n    value: function getTopMoveStartHandler() {\n      if (!this.delayTouchStart && !this.delayMouseStart) {\n        return this.handleTopMoveStart;\n      }\n\n      return this.handleTopMoveStartDelay;\n    }\n  }, {\n    key: \"handleTopMoveStart\",\n    value: function handleTopMoveStart(e) {\n      // Don't prematurely preventDefault() here since it might:\n      // 1. Mess up scrolling\n      // 2. Mess up long tap (which brings up context menu)\n      // 3. If there's an anchor link as a child, tap won't be triggered on link\n\n      var clientOffset = getEventClientOffset(e);\n      if (clientOffset) {\n        this._mouseClientOffset = clientOffset;\n      }\n    }\n  }, {\n    key: \"handleTopMoveStartDelay\",\n    value: function handleTopMoveStartDelay(e) {\n      var delay = e.type === eventNames.touch.start ? this.delayTouchStart : this.delayMouseStart;\n      this.timeout = setTimeout(this.handleTopMoveStart.bind(this, e), delay);\n    }\n  }, {\n    key: \"handleTopMoveCapture\",\n    value: function handleTopMoveCapture(e) {\n      this.dragOverTargetIds = [];\n    }\n  }, {\n    key: \"handleMove\",\n    value: function handleMove(e, targetId) {\n      this.dragOverTargetIds.unshift(targetId);\n    }\n  }, {\n    key: \"handleTopMove\",\n    value: function handleTopMove(e) {\n      clearTimeout(this.timeout);\n\n      var moveStartSourceIds = this.moveStartSourceIds,\n          dragOverTargetIds = this.dragOverTargetIds;\n\n      var clientOffset = getEventClientOffset(e);\n\n      if (!clientOffset) {\n        return;\n      }\n\n      // If we're not dragging and we've moved a little, that counts as a drag start\n      if (!this.monitor.isDragging() && this._mouseClientOffset.hasOwnProperty(\"x\") && moveStartSourceIds && (this._mouseClientOffset.x !== clientOffset.x || this._mouseClientOffset.y !== clientOffset.y)) {\n        this.moveStartSourceIds = null;\n        this.actions.beginDrag(moveStartSourceIds, {\n          clientOffset: this._mouseClientOffset,\n          getSourceClientOffset: this.getSourceClientOffset,\n          publishSource: false\n        });\n      }\n\n      if (!this.monitor.isDragging()) {\n        return;\n      }\n\n      var sourceNode = this.sourceNodes[this.monitor.getSourceId()];\n      this.installSourceNodeRemovalObserver(sourceNode);\n      this.actions.publishDragSource();\n\n      e.preventDefault();\n\n      /******************** scroll API *******************************/\n      var rect = document.querySelector(\"body\").getBoundingClientRect(),\n          scrollHeight = document.querySelector(\"body\").scrollHeight;\n\n      if (80 >= clientOffset.y) {\n        var tY = rect.top * -1 - 15;\n        if (tY >= 0) {\n          window.scrollTo(0, tY);\n        }\n      }\n      if (window.outerHeight - 100 <= clientOffset.y) {\n        var bY = rect.top * -1 + 15;\n        if (bY <= scrollHeight) {\n          window.scrollTo(0, bY);\n        }\n      }\n      /***************************************************************/\n\n      this.actions.hover(dragOverTargetIds, {\n        clientOffset: clientOffset\n      });\n    }\n  }, {\n    key: \"handleTopMoveEndCapture\",\n    value: function handleTopMoveEndCapture(e) {\n      if (!this.monitor.isDragging() || this.monitor.didDrop()) {\n        this.moveStartSourceIds = null;\n        return;\n      }\n\n      e.preventDefault();\n\n      this._mouseClientOffset = {};\n\n      this.uninstallSourceNodeRemovalObserver();\n      this.actions.drop();\n      this.actions.endDrag();\n    }\n  }, {\n    key: \"handleCancelOnEscape\",\n    value: function handleCancelOnEscape(e) {\n      if (e.key === \"Escape\") {\n        this._mouseClientOffset = {};\n\n        this.uninstallSourceNodeRemovalObserver();\n        this.actions.endDrag();\n      }\n    }\n  }, {\n    key: \"installSourceNodeRemovalObserver\",\n    value: function installSourceNodeRemovalObserver(node) {\n      var _this4 = this;\n\n      this.uninstallSourceNodeRemovalObserver();\n\n      this.draggedSourceNode = node;\n      this.draggedSourceNodeRemovalObserver = new window.MutationObserver(function () {\n        if (!node.parentElement) {\n          _this4.resurrectSourceNode();\n          _this4.uninstallSourceNodeRemovalObserver();\n        }\n      });\n\n      if (!node || !node.parentElement) {\n        return;\n      }\n\n      this.draggedSourceNodeRemovalObserver.observe(node.parentElement, {\n        childList: true\n      });\n    }\n  }, {\n    key: \"resurrectSourceNode\",\n    value: function resurrectSourceNode() {\n      this.draggedSourceNode.style.display = \"none\";\n      this.draggedSourceNode.removeAttribute(\"data-reactid\");\n      document.body.appendChild(this.draggedSourceNode);\n    }\n  }, {\n    key: \"uninstallSourceNodeRemovalObserver\",\n    value: function uninstallSourceNodeRemovalObserver() {\n      if (this.draggedSourceNodeRemovalObserver) {\n        this.draggedSourceNodeRemovalObserver.disconnect();\n      }\n\n      this.draggedSourceNodeRemovalObserver = null;\n      this.draggedSourceNode = null;\n    }\n  }]);\n\n  return TouchBackend;\n}();\n\nfunction createTouchBackend() {\n  var optionsOrManager = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var touchBackendFactory = function touchBackendFactory(manager) {\n    return new TouchBackend(manager, optionsOrManager);\n  };\n\n  if (optionsOrManager.getMonitor) {\n    return touchBackendFactory(optionsOrManager);\n  } else {\n    return touchBackendFactory;\n  }\n}\n\n/***/ }),\n\n/***/ 932:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createStore = __webpack_require__(22);\n\nvar _createStore2 = _interopRequireDefault(_createStore);\n\nvar _immutable = __webpack_require__(9);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _pouchdbCore = __webpack_require__(87);\n\nvar _pouchdbCore2 = _interopRequireDefault(_pouchdbCore);\n\nvar _authactions = __webpack_require__(30);\n\nvar _authactions2 = _interopRequireDefault(_authactions);\n\nvar _timetrackeractions = __webpack_require__(163);\n\nvar _timetrackeractions2 = _interopRequireDefault(_timetrackeractions);\n\nvar _timetrackerprovider = __webpack_require__(208);\n\nvar _timetrackerprovider2 = _interopRequireDefault(_timetrackerprovider);\n\nvar _diservice = __webpack_require__(40);\n\nvar _diservice2 = _interopRequireDefault(_diservice);\n\nvar _bsonObjectid = __webpack_require__(17);\n\nvar _bsonObjectid2 = _interopRequireDefault(_bsonObjectid);\n\nvar _logger = __webpack_require__(6);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar TimeTrackerStore = (0, _createStore2.default)({\n  listenables: [_timetrackeractions2.default, _authactions2.default],\n  init: function init() {\n    this.state = _immutable2.default.Map({\n      loadTimes: []\n    });\n  },\n  getInitialState: function getInitialState() {\n    return this.state;\n  },\n  userChanged: function userChanged(prevProfile, newProfile) {\n    if (!newProfile.isGuest) {\n      this._timeTrackerProvider = _diservice2.default.get(\"TimeTrackerProvider\");\n    }\n  },\n  updateState: function updateState(newState, suppress) {\n    this.state = newState;\n    if (!suppress) {\n      this.trigger(this.state);\n    }\n  },\n  recordTime: function recordTime(componentName) {\n    if (componentName) {\n      var loadTimes = this.state.get(\"loadTimes\");\n      if (localStorage && localStorage.getItem(\"startTime\")) {\n        var startTime = localStorage.getItem(\"startTime\"),\n            currentTime = new Date().getTime(),\n            timeDiffSeconds = (currentTime - startTime) / 1000;\n        loadTimes.push({\n          componentName: componentName,\n          offset: timeDiffSeconds,\n          timeStamp: new Date(currentTime).toISOString()\n        });\n        this.updateState(this.state.set(\"loadTimes\", loadTimes), true);\n      }\n    }\n  },\n  updateTimerInformation: function updateTimerInformation(isRefreshed, userProfile) {\n    var trackerInfo = this.state.get(\"loadTimes\");\n    if (localStorage && localStorage.getItem(\"startTime\")) {\n      var startTimer = {\n        componentName: \"Survey initiated\",\n        offset: 0,\n        timeStamp: new Date(parseInt(localStorage.getItem(\"startTime\"))).toISOString(),\n        instanceInfo: isRefreshed ? \"Refreshed Instance\" : \"Fresh Instance\",\n        userName: userProfile.name,\n        userEmail: userProfile.email\n      };\n      trackerInfo.splice(0, 0, startTimer);\n    }\n    var trackerInfoDoc = {\n      docType: \"surveytracker_info\",\n      _id: (0, _bsonObjectid2.default)().str,\n      trackerInfo: trackerInfo\n    };\n    this._timeTrackerProvider && this._timeTrackerProvider.reportTrackerInfo(trackerInfoDoc).then(function (response) {\n      _logger2.default.log(\"ErrorDocs synched in localDB\");\n      _logger2.default.log(response);\n    }).catch(function (err) {\n      _logger2.default.log(err);\n    });\n  }\n});\n\nexports.default = TimeTrackerStore;\n\n/***/ })\n\n},[445]);\n\n\n// WEBPACK FOOTER //\n// bundle.496c7e88dc3ac1bd4a4d.js","import Reflux from 'reflux-core';\r\nconst AppActions = Reflux.createActions(\r\n    [\"new\", \"save\", \"edit\", \"test\", \"changeLanguage\", \"changeQuestionMode\"]\r\n);\r\n\r\nexport default AppActions;\n\n\n// WEBPACK FOOTER //\n// ./src/js/actions/appactions.js","import createStore from 'reflux-core/lib/createStore';\r\nimport Immutable from 'immutable';\r\nimport AppActions from '../actions/appactions';\r\nimport i18n from '../helpers/i18n.js';\r\nimport PreferenceProvider from '../helpers/preferenceprovider';\r\nimport AuthActions from '../actions/authactions.js';\r\nimport DIService from '../helpers/diservice';\r\nconst defaultData = Immutable.Map({ \"editMode\": true, \"language\": \"en-US\", \"footer\": \"block\", \"questionMode\": false }),\r\n      AppStore = createStore({\r\n          listenables: [AppActions, AuthActions],\r\n          _currentProfile: null,\r\n          _preferenceProvider: null,\r\n          init: function () {\r\n              this.data = defaultData;\r\n          },\r\n          userChanged: function (prevProfile, newProfile) {\r\n              this._currentProfile = newProfile;\r\n              this._preferenceProvider = DIService.get(\"PreferenceProvider\");\r\n              return this._preferenceProvider.getPreference(\"language\")\r\n                  .then((language) => {\r\n                      this.data = this.data.set(\"language\", language);\r\n                      return i18n.setLanguage(language);\r\n                  }).then(() => {\r\n                      return this._preferenceProvider.getPreference(\"questionMode\");\r\n                  }).then((questionMode) => {\r\n                      this.data = this.data.set(\"questionMode\", questionMode);\r\n                      this.updateState();\r\n                  });\r\n\r\n          },\r\n          getInitialState: function () {\r\n              return this.data;\r\n          },\r\n          updateState: function () {\r\n              this.trigger(this.data);\r\n          },\r\n          test: function (testMode) {\r\n              this.data = this.data.set(\"editMode\", testMode);\r\n              this.updateState();\r\n          },\r\n          changeQuestionMode: function (questionMode) {\r\n              if (questionMode != this.data.get(\"questionMode\")) {\r\n                  if (this._preferenceProvider) {\r\n                      this._preferenceProvider\r\n                          .setPreference(\"questionMode\", questionMode)\r\n                          .then((result) => {\r\n                              if (result.ok) {\r\n                                  this.data = this.data.set(\"questionMode\", questionMode);\r\n                                  this.updateState();\r\n                              }\r\n                          });\r\n                  }\r\n              }\r\n          },\r\n          changeLanguage: function (language) {\r\n              if (language != this.data.get(\"language\")) {\r\n                  if (this._preferenceProvider) {\r\n                      this._preferenceProvider\r\n                          .setPreference(\"language\", language)\r\n                          .then((result) => {\r\n                              if (result.ok) {\r\n                                  this.data = this.data.set(\"language\", language);\r\n                                  return i18n.setLanguage(language);\r\n                              }\r\n                          })\r\n                          .then(() => this.updateState());\r\n                  }\r\n              }\r\n          }\r\n      });\r\n\r\nexport default AppStore;\n\n\n// WEBPACK FOOTER //\n// ./src/js/stores/appstore.js","import ObjectID from \"bson-objectid\";\r\nimport _ from \"lodash\";\r\nimport im from \"immutable\";\r\nimport SurveyModelFactory from \"../../surveymodelbuilder\";\r\nimport makeTypedRecord from \"../../maketypedrecord\";\r\nimport processRevivers from \"../../processrevivers\";\r\nimport Assertions from \"./assertions.js\";\r\nconst defaultSchemaVersion = \"1.0\",\r\n  PublishedSurveySchemaProvider = function() {\r\n    const version = [\"1.0\"];\r\n    version[\"1.0\"] = function(publishedSurveyOrModel) {\r\n      const SchemaVersion = \"1.0\",\r\n        Model = {\r\n          schema: {\r\n            _id: \"\",\r\n            _rev: \"\",\r\n            docType: \"publishedsurvey\",\r\n            surveyId: null,\r\n            survey: {},\r\n            commonLink: \"\",\r\n            contacts: im.Map(),\r\n            providers: im.Set(),\r\n            askLocation: false,\r\n            locationRestrict: false,\r\n            locationRequired: false,\r\n            isSurveyAvailabilitySet: false,\r\n            surveyStartDateTime: null,\r\n            surveyEndDateTime: null,\r\n            selectedLocations: [],\r\n            notification: false,\r\n            recipientsForNotification: im.Set()\r\n          },\r\n          methods: {\r\n            validateSurvey: function(questionKeys, responses) {\r\n              let survey = this.getSurvey(),\r\n                promises = _.map(questionKeys, questionKey =>\r\n                  survey\r\n                    .getPageItem(questionKey)\r\n                    .validate(responses[questionKey])\r\n                );\r\n              return Promise.all(promises);\r\n            },\r\n            revivers: {\r\n              publishedSurvey: function(model) {\r\n                let {\r\n                    _id,\r\n                    _rev,\r\n                    surveyId,\r\n                    survey,\r\n                    contacts,\r\n                    date,\r\n                    commonLink,\r\n                    providers,\r\n                    askLocation,\r\n                    locationRestrict,\r\n                    isSurveyAvailabilitySet,\r\n                    locationRequired,\r\n                    surveyStartDateTime,\r\n                    surveyEndDateTime,\r\n                    selectedLocations,\r\n                    notification,\r\n                    recipientsForNotification\r\n                  } = model,\r\n                  publishedSurvey = this,\r\n                  SurveyModelBuilder = SurveyModelFactory(\r\n                    survey._schemaVersion\r\n                  );\r\n                survey = SurveyModelBuilder.fromModel(survey);\r\n                return publishedSurvey\r\n                  .setId(_id)\r\n                  .setRev(_rev)\r\n                  .setSurveyId(surveyId)\r\n                  .setSurvey(survey)\r\n                  .setContacts(contacts)\r\n                  .setCreated(date.created)\r\n                  .setUpdated(date.updated)\r\n                  .setCommonLink(commonLink)\r\n                  .setProviders(providers)\r\n                  .setAskLocation(askLocation)\r\n                  .setLocationRestrict(locationRestrict)\r\n                  .setIsSurveyAvailabilitySet(isSurveyAvailabilitySet)\r\n                  .setLocationRequired(locationRequired)\r\n                  .setSelectedLocations(selectedLocations)\r\n                  .setNotification(notification)\r\n                  .setSurveyStartDateTime(surveyStartDateTime)\r\n                  .setSurveyEndDateTime(surveyEndDateTime)\r\n                  .setRecipientsForNotification(recipientsForNotification);\r\n              }\r\n            },\r\n            getId: function() {\r\n              return this.get(\"_id\");\r\n            },\r\n            setId: function(id) {\r\n              return this.setIn([\"_id\"], id);\r\n            },\r\n            getRev: function() {\r\n              return this.get(\"_rev\");\r\n            },\r\n            setRev: function(rev) {\r\n              return this.setIn([\"_rev\"], rev);\r\n            },\r\n            getSurveyId: function() {\r\n              return this.get(\"surveyId\");\r\n            },\r\n            setSurveyId: function(surveyId) {\r\n              return this.setIn([\"surveyId\"], surveyId);\r\n            },\r\n            getSurvey: function() {\r\n              return this.get(\"survey\");\r\n            },\r\n            setSurvey: function(survey) {\r\n              return this.setIn([\"survey\"], survey);\r\n            },\r\n            getCommonLink: function() {\r\n              return this.get(\"commonLink\");\r\n            },\r\n            setCommonLink: function(commonLink) {\r\n              return this.setIn([\"commonLink\"], commonLink);\r\n            },\r\n            getContacts: function() {\r\n              return this.get(\"contacts\");\r\n            },\r\n            setContacts: function(contacts) {\r\n              return this.setIn([\"contacts\"], im.Map(contacts));\r\n            },\r\n            getContact: function(key) {\r\n              return this.getIn([\"contacts\", key]);\r\n            },\r\n            setCompleted: function(responseId, status) {\r\n              let [contact] = this.get(\"contacts\").filter(contact => {\r\n                  if (contact.responseId == responseId) {\r\n                    return true;\r\n                  }\r\n                }),\r\n                [id, obj] = contact;\r\n              obj[\"completed\"] = status;\r\n              return this.setIn([\"contacts\", id], obj);\r\n            },\r\n            isUserCompleted: function(responseId) {\r\n              let hasResponseId = this.get(\"contacts\").filter(contact => {\r\n                if (contact.responseId == responseId) {\r\n                  return contact.completed;\r\n                }\r\n              });\r\n              return hasResponseId.toArray().length;\r\n            },\r\n            validResponseId: function(responseId) {\r\n              let hasResponseId = this.get(\"contacts\").filter(contact => {\r\n                if (contact.responseId == responseId) {\r\n                  return true;\r\n                }\r\n              });\r\n              return hasResponseId.toArray().length;\r\n            },\r\n            getProviders: function() {\r\n              return this.get(\"providers\");\r\n            },\r\n            setProviders: function(providers) {\r\n              if (!providers) {\r\n                return this;\r\n              }\r\n              return this.set(\"providers\", im.Set(providers));\r\n            },\r\n            getAskLocation: function() {\r\n              return this.get(\"askLocation\");\r\n            },\r\n            setAskLocation: function(askLocation) {\r\n              if (!askLocation) {\r\n                return this;\r\n              }\r\n              return this.set(\"askLocation\", askLocation);\r\n            },\r\n            getLocationRestrict: function() {\r\n              return this.get(\"locationRestrict\");\r\n            },\r\n            setLocationRestrict: function(locationRestrict) {\r\n              if (!locationRestrict) {\r\n                return this;\r\n              }\r\n              return this.set(\"locationRestrict\", locationRestrict);\r\n            },\r\n            getIsSurveyAvailabilitySet: function() {\r\n              return this.get(\"isSurveyAvailabilitySet\");\r\n            },\r\n            setIsSurveyAvailabilitySet: function(isSurveyAvailabilitySet) {\r\n              if (!isSurveyAvailabilitySet) {\r\n                return this;\r\n              }\r\n              return this.set(\r\n                \"isSurveyAvailabilitySet\",\r\n                isSurveyAvailabilitySet\r\n              );\r\n            },\r\n            getSurveyStartDateTime: function() {\r\n              return this.get(\"surveyStartDateTime\");\r\n            },\r\n            setSurveyStartDateTime: function(surveyStartDateTime) {\r\n              if (!surveyStartDateTime) {\r\n                return this;\r\n              }\r\n              return this.set(\"surveyStartDateTime\", surveyStartDateTime);\r\n            },\r\n            getSurveyEndDateTime: function() {\r\n              return this.get(\"surveyEndDateTime\");\r\n            },\r\n            setSurveyEndDateTime: function(surveyEndDateTime) {\r\n              if (!surveyEndDateTime) {\r\n                return this;\r\n              }\r\n              return this.set(\"surveyEndDateTime\", surveyEndDateTime);\r\n            },\r\n            getLocationRequired: function() {\r\n              return this.get(\"locationRequired\");\r\n            },\r\n            setLocationRequired: function(locationRequired) {\r\n              if (!locationRequired) {\r\n                return this;\r\n              }\r\n              return this.set(\"locationRequired\", locationRequired);\r\n            },\r\n            getSelectedLocations: function() {\r\n              return this.get(\"selectedLocations\");\r\n            },\r\n            setSelectedLocations: function(selectedLocations) {\r\n              if (!selectedLocations) {\r\n                return this;\r\n              }\r\n              return this.set(\"selectedLocations\", selectedLocations);\r\n            },\r\n            getNotification: function() {\r\n              return this.get(\"notification\");\r\n            },\r\n            setNotification: function(notification) {\r\n              return this.setIn([\"notification\"], notification);\r\n            },\r\n            getRecipientsForNotification: function() {\r\n              return this.get(\"recipientsForNotification\");\r\n            },\r\n            setRecipientsForNotification: function(recipientsForNotification) {\r\n              if (!recipientsForNotification) {\r\n                return this;\r\n              }\r\n              return this.set(\r\n                \"recipientsForNotification\",\r\n                im.Set(recipientsForNotification)\r\n              );\r\n            }\r\n          }\r\n        };\r\n      Model.Date = {\r\n        schema: {\r\n          date: {\r\n            created: new Date(),\r\n            updated: new Date()\r\n          }\r\n        },\r\n        methods: {\r\n          revivers: {\r\n            date: function(date) {\r\n              let { created, updated } = date,\r\n                Date = this;\r\n              return this.setCreated(created).setUpdated(updated);\r\n            }\r\n          },\r\n          getDate: function() {\r\n            return this.get(\"date\");\r\n          },\r\n          getCreated: function() {\r\n            return this.getIn([\"date\", \"created\"]);\r\n          },\r\n          setCreated: function(dateString) {\r\n            if (!dateString) {\r\n              return this;\r\n            }\r\n            let date = new Date(dateString);\r\n            return this.setIn([\"date\", \"created\"], date);\r\n          },\r\n          getUpdated: function() {\r\n            return this.getIn([\"date\", \"updated\"]);\r\n          },\r\n          setUpdated: function(dateString) {\r\n            if (!dateString) {\r\n              return this;\r\n            }\r\n            let date = new Date(dateString);\r\n            return this.setIn([\"date\", \"updated\"], date);\r\n          }\r\n        }\r\n      };\r\n\r\n      Model.Attachments = {\r\n        schema: {\r\n          thumbnail: \"\"\r\n        },\r\n        methods: {\r\n          revivers: {\r\n            attachments: function(model) {\r\n              let { thumbnail } = model;\r\n              return this.setThumbnail(thumbnail);\r\n            }\r\n          },\r\n          getThumbnail: function() {\r\n            return this.getIn([\"thumbnail\"]);\r\n          },\r\n          setThumbnail: function(thumbnail) {\r\n            return this.setIn([\"thumbnail\"], thumbnail);\r\n          }\r\n        }\r\n      };\r\n      Model.PublishedSurvey = _.merge(Model, Model.Date, Model.Attachments);\r\n      const Types = {\r\n          PublishedSurvey: makeTypedRecord(Model.PublishedSurvey)\r\n        },\r\n        revivePublishedSurveyModel = function(model) {\r\n          let publishedSurvey = new Types.PublishedSurvey();\r\n          return processRevivers(publishedSurvey, model);\r\n        },\r\n        getPublishedSurveyModel = function(publishedSurveyOrModel) {\r\n          if (!publishedSurveyOrModel.docType) {\r\n            let SurveyModelBuilder = SurveyModelFactory(\r\n                publishedSurveyOrModel._schemaVersion\r\n              ),\r\n              model = {\r\n                _id: ObjectID().str,\r\n                surveyId: publishedSurveyOrModel.surveyId,\r\n                survey: SurveyModelBuilder.fromModel(\r\n                  publishedSurveyOrModel.survey\r\n                ),\r\n                contacts: publishedSurveyOrModel.contacts,\r\n                providers: publishedSurveyOrModel.providers,\r\n                askLocation: publishedSurveyOrModel.askLocation,\r\n                locationRestrict: publishedSurveyOrModel.locationRestrict,\r\n                locationRequired: publishedSurveyOrModel.locationRequired,\r\n                isSurveyAvailabilitySet:\r\n                  publishedSurveyOrModel.isSurveyAvailabilitySet,\r\n                surveyStartDateTime: publishedSurveyOrModel.surveyStartDateTime,\r\n                surveyEndDateTime: publishedSurveyOrModel.surveyEndDateTime,\r\n                selectedLocations: publishedSurveyOrModel.selectedLocations,\r\n                recipientsForNotification:\r\n                  publishedSurveyOrModel.recipientsForNotification,\r\n                notification: publishedSurveyOrModel.notification\r\n              };\r\n            return new Types.PublishedSurvey(model);\r\n          }\r\n          return revivePublishedSurveyModel(publishedSurveyOrModel);\r\n        };\r\n\r\n      return getPublishedSurveyModel(publishedSurveyOrModel);\r\n    };\r\n    return {\r\n      getPublishedSurveyModel: function(publishedSurvey) {\r\n        let _schemaVersion = defaultSchemaVersion;\r\n        if (publishedSurvey.survey._schemaVersion) {\r\n          _schemaVersion = publishedSurvey.survey._schemaVersion;\r\n        }\r\n        return version[_schemaVersion](publishedSurvey);\r\n      },\r\n      fromModel: function(model) {\r\n        let _schemaVersion = defaultSchemaVersion;\r\n        if (model._schemaVersion) {\r\n          _schemaVersion = model._schemaVersion;\r\n        }\r\n        return version[_schemaVersion](model);\r\n      }\r\n    };\r\n  },\r\n  PublishedSurveyModelProvider = function(\r\n    schemaVersion = defaultSchemaVersion\r\n  ) {\r\n    return PublishedSurveySchemaProvider();\r\n  };\r\n\r\nexport default PublishedSurveyModelProvider;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/publishedsurveys/publishedsurveymodelprovider/index.js","import Reflux from \"reflux-core\";\r\nconst SurveysActions = Reflux.createActions([\r\n  \"addNewSurvey\",\r\n  \"deleteSurvey\",\r\n  \"undo\",\r\n  \"dialogOpen\",\r\n  \"cloneSurvey\",\r\n  \"undoSurvey\",\r\n  \"optionsSurveyHeaderOpen\",\r\n  \"optionsSurveyHeaderDone\",\r\n  \"optionPageOpen\",\r\n  \"optionPageDone\",\r\n  \"optionsPageItemOpen\",\r\n  \"optionsPageItemDone\",\r\n  \"addQuestionDone\",\r\n  \"addDecoratorDone\",\r\n  \"addPageDone\",\r\n  \"deleteQuestion\",\r\n  \"deletePage\",\r\n  \"moveQuestion\",\r\n  \"movePage\",\r\n  \"loadSurvey\",\r\n  \"addDefaultPage\",\r\n  \"addDefaultQuestion\",\r\n  \"shuffleQuestions\",\r\n  \"startTest\",\r\n  \"stopTest\",\r\n  \"changeQuestion\",\r\n  \"setSurveyTitle\",\r\n  \"setSectionTitleDescription\",\r\n  \"movePageItem\",\r\n  \"randomizePageItems\",\r\n  \"setQuestionDisplay\",\r\n  \"exportToJSON\",\r\n  \"uploadSurvey\",\r\n  \"undoSurvey\",\r\n  \"reset\",\r\n  \"setUpdatedSurvey\"\r\n]);\r\n\r\nexport default SurveysActions;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/actions/surveysactions.js","import Reflux from \"reflux-core\";\r\nconst PublishSurveyActions = Reflux.createActions([\r\n  \"cancel\",\r\n  \"next\",\r\n  \"prev\",\r\n  \"finish\",\r\n  \"startPublish\",\r\n  \"setSurveyId\",\r\n  \"addContact\",\r\n  \"removeContact\",\r\n  \"addGroup\",\r\n  \"addContactsByGroup\",\r\n  \"deletePublishedSurvey\",\r\n  \"tabChanged\",\r\n  \"searchContacts\",\r\n  \"nextContactsPage\",\r\n  \"prevContactsPage\",\r\n  \"jumpToContactsPage\",\r\n  \"nextSelectedContactsPage\",\r\n  \"prevSelectedContactsPage\",\r\n  \"jumpToSelectedContactsPage\",\r\n  \"nextPublishedSurveysPage\",\r\n  \"prevPublishedSurveysPage\",\r\n  \"jumpToPublishedSurveysPage\",\r\n  \"updateProviders\",\r\n  \"updateAskLocation\",\r\n  \"updateSurveyAvailability\",\r\n  \"updateLocationRestrict\",\r\n  \"updateLocationRequired\",\r\n  \"updateSurveyStartDateTime\",\r\n  \"updateSurveyEndDateTime\",\r\n  \"initializeSurveysResponses\",\r\n  \"jumpToResponses\",\r\n  \"nextResponses\",\r\n  \"previousResponses\",\r\n  \"resetResponses\",\r\n  \"optionsInvitationOpen\",\r\n  \"optionsInvitationDone\",\r\n  \"getCurrentLocation\",\r\n  \"onSelectedMarkerDelete\",\r\n  \"onSuggestSelect\",\r\n  \"oncurrentLocationDragEnd\",\r\n  \"onCurrentLocMarkerClick\",\r\n  \"setMapCenterLocation\",\r\n  \"onDistanceChange\",\r\n  \"onSelectedLocMarkerClick\",\r\n  \"onLocationCardClick\",\r\n  \"setMailsForNotification\",\r\n  \"initCurrentPublishedSurvey\",\r\n  \"reset\",\r\n  \"enableNotifications\",\r\n  \"setRecipientsForNotifications\",\r\n  \"updateCurrentPublishedSurvey\"\r\n]);\r\n\r\nexport default PublishSurveyActions;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/actions/publishsurveyactions.js","import Reflux from \"reflux-core\";\r\nconst SettingsActions = Reflux.createActions([\r\n  \"open\",\r\n  \"update\",\r\n  \"done\",\r\n  \"cancel\",\r\n  \"close\"\r\n]);\r\n\r\nexport default SettingsActions;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/actions/settingsactions.js","import _ from \"lodash\";\r\nimport im from \"immutable\";\r\nimport SurveyModelFactory from \"../surveymodelbuilder\";\r\nimport makeTypedRecord from \"../maketypedrecord\";\r\nimport processRevivers from \"../processrevivers\";\r\nimport Assertions from \"./assertions.js\";\r\nconst defaultSchemaVersion = \"1.0\",\r\n  ClientSurveyResponseSchemaProvider = function() {\r\n    const version = [\"1.0\"];\r\n    version[\"1.0\"] = function(clientSurveyResponseOrModel) {\r\n      const SchemaVersion = \"1.0\",\r\n        TimeTrackerFactory = {\r\n          timeTracker: function(model) {\r\n            if (!model) {\r\n              throw `Empty.`;\r\n            }\r\n            return new Types.TimeTracker(model);\r\n          },\r\n          fromModel: function(model) {\r\n            return processRevivers(new Types.TimeTracker(model), model);\r\n          }\r\n        },\r\n        Model = {\r\n          schema: {\r\n            _id: \"\",\r\n            _rev: \"\",\r\n            docType: \"surveyresponse\",\r\n            publishedInstanceId: \"\",\r\n            survey: {},\r\n            responses: im.Map(),\r\n            sharedInformation: im.Map({\r\n              link: \"\",\r\n              id: \"\"\r\n            }),\r\n            session: im.Map({\r\n              startTime: \"\",\r\n              endTime: \"\"\r\n            }),\r\n            client: im.Map({\r\n              startTime: \"\",\r\n              endTime: \"\",\r\n              surveyArriveTime: \"\",\r\n              tracker: im.Map()\r\n            }),\r\n            code: im.Map({\r\n              total: 0,\r\n              success: 0\r\n            }),\r\n            totalMarks: 0,\r\n            obtainedMarks: 0,\r\n            userLocations: [],\r\n            selectedLocations: []\r\n          },\r\n          methods: {\r\n            validateSurvey: function(questionKeys, responses) {\r\n              let survey = this.getSurvey(),\r\n                promises = _.map(questionKeys, questionKey =>\r\n                  survey\r\n                    .getPageItem(questionKey)\r\n                    .validate(responses[questionKey])\r\n                );\r\n              return Promise.all(promises);\r\n            },\r\n            revivers: {\r\n              clientSurveyResponse: function(model) {\r\n                let {\r\n                    _id,\r\n                    _rev,\r\n                    publishedInstanceId,\r\n                    survey,\r\n                    responses,\r\n                    code,\r\n                    totalMarks,\r\n                    obtainedMarks,\r\n                    session,\r\n                    client,\r\n                    userLocations,\r\n                    selectedLocations,\r\n                    sharedInformation\r\n                  } = model,\r\n                  clientSurveyResponse = this,\r\n                  SurveyModelBuilder = SurveyModelFactory(\r\n                    survey._schemaVersion\r\n                  );\r\n                survey = SurveyModelBuilder.fromModel(survey);\r\n\r\n                return clientSurveyResponse\r\n                  .setId(_id)\r\n                  .setRevision(_rev)\r\n                  .setPublishedInstanceId(publishedInstanceId)\r\n                  .setSurvey(survey)\r\n                  .setSharedInformation(sharedInformation)\r\n                  .setResponses(responses)\r\n                  .setTotalMarks(totalMarks)\r\n                  .setObtainedMarks(obtainedMarks)\r\n                  .setSurveyArriveTime(client.surveyArriveTime)\r\n                  .setSession(session)\r\n                  .setClientStartTime(client.startTime)\r\n                  .setClientEndTime(client.endTime)\r\n                  .setClientTracker(client.tracker)\r\n                  .setUserLocations(userLocations)\r\n                  .setSelectedLocations(selectedLocations);\r\n              }\r\n            },\r\n            getId: function() {\r\n              return this.get(\"_id\");\r\n            },\r\n            setId: function(id) {\r\n              return this.setIn([\"_id\"], id);\r\n            },\r\n            getRevision: function() {\r\n              return this.get(\"_rev\");\r\n            },\r\n            setRevision: function(_rev) {\r\n              return this.setIn([\"_rev\"], _rev);\r\n            },\r\n            getPublishedInstanceId: function() {\r\n              return this.get(\"publishedInstanceId\");\r\n            },\r\n            setPublishedInstanceId: function(publishedInstanceId) {\r\n              return this.setIn([\"publishedInstanceId\"], publishedInstanceId);\r\n            },\r\n            getSurvey: function() {\r\n              return this.get(\"survey\");\r\n            },\r\n            setSurvey: function(survey) {\r\n              return this.setIn([\"survey\"], survey);\r\n            },\r\n            setSharedInformation: function(sharedInformation) {\r\n              if (!sharedInformation) {\r\n                return this;\r\n              }\r\n              return this.setIn(\r\n                [\"sharedInformation\"],\r\n                im.Map(sharedInformation)\r\n              );\r\n            },\r\n            getSharedInformation: function() {\r\n              return this.get(\"sharedInformation\");\r\n            },\r\n            getSharedLink: function() {\r\n              return this.getIn([\"sharedInformation\", \"link\"]);\r\n            },\r\n            getSharedId: function() {\r\n              return this.getIn([\"sharedInformation\", \"id\"]);\r\n            },\r\n            getResponses: function() {\r\n              return this.get(\"responses\");\r\n            },\r\n            setResponses: function(responses) {\r\n              return this.setIn([\"responses\"], im.Map(responses));\r\n            },\r\n            getResponse: function(key) {\r\n              return this.getIn([\"responses\", key]);\r\n            },\r\n            setResponse: function(key, response) {\r\n              return this.setIn([\"responses\", key], response);\r\n            },\r\n            getCode: function() {\r\n              return this.getIn([\"code\"]);\r\n            },\r\n            setCode: function(code) {\r\n              if (!code) {\r\n                return this;\r\n              }\r\n              return this.setIn([\"code\"], im.Map(code));\r\n            },\r\n            getTotalCodeQuestions: function() {\r\n              return this.getIn([\"code\", \"total\"]);\r\n            },\r\n            setTotalCodeQuestions: function(total) {\r\n              return this.setIn([\"code\", \"total\"], total);\r\n            },\r\n            getTotalSuccessCodeQuestions: function() {\r\n              return this.getIn([\"code\", \"success\"]);\r\n            },\r\n            setTotalSuccessCodeQuestions: function(success) {\r\n              return this.setIn([\"code\", \"success\"], success);\r\n            },\r\n            getSession: function() {\r\n              return this.get(\"session\");\r\n            },\r\n            setSession: function(session) {\r\n              return this.set(\"session\", im.Map(session));\r\n            },\r\n            getClient: function() {\r\n              return this.get(\"client\");\r\n            },\r\n            setClient: function(client) {\r\n              return this.set(\"client\", im.Map(client));\r\n            },\r\n            getSessionStartTime: function() {\r\n              return this.getIn([\"session\", \"startTime\"]);\r\n            },\r\n            setSessionStartTime: function(startTime) {\r\n              return this.setIn([\"session\", \"startTime\"], startTime);\r\n            },\r\n            getSessionEndTime: function() {\r\n              return this.getIn([\"session\", \"endTime\"]);\r\n            },\r\n            setSessionEndTime: function(endTime) {\r\n              return this.setIn([\"session\", \"endTime\"], endTime);\r\n            },\r\n            getClientStartTime: function() {\r\n              return this.getIn([\"client\", \"startTime\"]);\r\n            },\r\n            setClientStartTime: function(startTime) {\r\n              return this.setIn([\"client\", \"startTime\"], startTime);\r\n            },\r\n            getClientEndTime: function() {\r\n              return this.getIn([\"client\", \"endTime\"]);\r\n            },\r\n            setClientEndTime: function(endTime) {\r\n              return this.setIn([\"client\", \"endTime\"], endTime);\r\n            },\r\n            getTotalMarks: function() {\r\n              return this.get(\"totalMarks\");\r\n            },\r\n            setTotalMarks: function(marks) {\r\n              return this.set(\"totalMarks\", marks);\r\n            },\r\n            getObtainedMarks: function() {\r\n              return this.get(\"obtainedMarks\");\r\n            },\r\n            setObtainedMarks: function(marks) {\r\n              return this.set(\"obtainedMarks\", marks);\r\n            },\r\n            getUserLocations: function() {\r\n              return this.get(\"userLocations\");\r\n            },\r\n            setUserLocations: function(userLocations) {\r\n              return this.set(\"userLocations\", userLocations);\r\n            },\r\n            getSelectedLocations: function() {\r\n              return this.get(\"selectedLocations\");\r\n            },\r\n            setSelectedLocations: function(selectedLocations) {\r\n              return this.set(\"selectedLocations\", selectedLocations);\r\n            },\r\n            getClientTracker: function(id) {\r\n              return this.getIn([\"client\", \"tracker\", id]);\r\n            },\r\n            getClientTrackers: function() {\r\n              return this.getIn([\"client\", \"tracker\"]);\r\n            },\r\n            addClientTracker: function(id, timeTracker) {\r\n              return this.setIn([\"client\", \"tracker\", id], timeTracker);\r\n            },\r\n            setClientTracker: function(tracker) {\r\n              let clientSurveyResponse = this;\r\n              _.forIn(tracker, (timeTracker, key) => {\r\n                clientSurveyResponse = clientSurveyResponse.addClientTracker(\r\n                  key,\r\n                  TimeTrackerFactory.fromModel(timeTracker)\r\n                );\r\n              });\r\n              return clientSurveyResponse;\r\n            },\r\n            getSurveyArriveTime: function() {\r\n              return this.getIn([\"client\", \"surveyArriveTime\"]);\r\n            },\r\n            setSurveyArriveTime: function(surveyArriveTime) {\r\n              return this.setIn(\r\n                [\"client\", \"surveyArriveTime\"],\r\n                surveyArriveTime\r\n              );\r\n            }\r\n          }\r\n        };\r\n      Model.UserInfo = {\r\n        schema: {\r\n          userInfo: {\r\n            general: {\r\n              name: \"\",\r\n              email: \"\"\r\n            },\r\n            device: {\r\n              id: \"\",\r\n              screenResolution: \"\",\r\n              timeZoneOffset: \"\"\r\n            },\r\n            os: \"\",\r\n            browser: {\r\n              name: \"\",\r\n              version: \"\"\r\n            }\r\n          }\r\n        },\r\n        methods: {\r\n          revivers: {\r\n            userInfo: function(model) {\r\n              let { userInfo } = model;\r\n              if (!userInfo) {\r\n                return this;\r\n              }\r\n              return this.setGeneral(userInfo.general)\r\n                .setDeviceId(userInfo.device.id)\r\n                .setDeviceScreenResolution(userInfo.device.screenResolution)\r\n                .setDeviceTimeZoneOffset(userInfo.device.timeZoneOffset)\r\n                .setOS(userInfo.os)\r\n                .setBrowserName(userInfo.browser.name)\r\n                .setBrowserVersion(userInfo.browser.version);\r\n            }\r\n          },\r\n          getUserInfo: function() {\r\n            return this.get(\"userInfo\");\r\n          },\r\n          setUserInfo: function(userInfo) {\r\n            return this.set(\"userInfo\", im.Map(userInfo));\r\n          },\r\n          getGeneral: function() {\r\n            return this.getIn([\"userInfo\", \"general\"]);\r\n          },\r\n          setGeneral: function(general) {\r\n            if (!general) {\r\n              return this;\r\n            }\r\n            return this.setIn([\"userInfo\", \"general\"], general);\r\n          },\r\n          getName: function() {\r\n            return this.getIn([\"userInfo\", \"general\", \"name\"]);\r\n          },\r\n          setName: function(name) {\r\n            return this.setIn([\"userInfo\", \"general\", \"name\"], name);\r\n          },\r\n          getEmail: function() {\r\n            return this.getIn([\"userInfo\", \"general\", \"email\"]);\r\n          },\r\n          setEmail: function(email) {\r\n            return this.setIn([\"userInfo\", \"general\", \"email\"], email);\r\n          },\r\n          getDevice: function() {\r\n            return this.getIn([\"userInfo\", \"device\"]);\r\n          },\r\n          setDevice: function(device) {\r\n            return this.setIn([\"userInfo\", \"device\"], device);\r\n          },\r\n          getDeviceId: function() {\r\n            return this.getIn([\"userInfo\", \"device\", \"id\"]);\r\n          },\r\n          setDeviceId: function(id) {\r\n            return this.setIn([\"userInfo\", \"device\", \"id\"], id);\r\n          },\r\n          setDeviceName: function(name) {\r\n            return this.setIn([\"userInfo\", \"device\", \"name\"], name);\r\n          },\r\n          getDeviceScreenResolution: function() {\r\n            return this.getIn([\"userInfo\", \"device\", \"screenResolution\"]);\r\n          },\r\n          setDeviceScreenResolution: function(screenResolution) {\r\n            return this.setIn(\r\n              [\"userInfo\", \"device\", \"screenResolution\"],\r\n              screenResolution\r\n            );\r\n          },\r\n          getDeviceTimeZoneOffset: function() {\r\n            return this.getIn([\"userInfo\", \"device\", \"timeZoneOffset\"]);\r\n          },\r\n          setDeviceTimeZoneOffset: function(timeZoneOffset) {\r\n            return this.setIn(\r\n              [\"userInfo\", \"device\", \"timeZoneOffset\"],\r\n              timeZoneOffset\r\n            );\r\n          },\r\n          getOS: function() {\r\n            return this.getIn([\"userInfo\", \"os\"]);\r\n          },\r\n          setOS: function(os) {\r\n            return this.setIn([\"userInfo\", \"os\"], os);\r\n          },\r\n          getBrowser: function() {\r\n            return this.getIn([\"userInfo\", \"browser\"]);\r\n          },\r\n          setBrowser: function(browser) {\r\n            return this.setIn([\"userInfo\", \"browser\"], browser);\r\n          },\r\n          getBrowserName: function() {\r\n            return this.getIn([\"userInfo\", \"browser\", \"name\"]);\r\n          },\r\n          setBrowserName: function(name) {\r\n            return this.setIn([\"userInfo\", \"browser\", \"name\"], name);\r\n          },\r\n          getBrowserVersion: function() {\r\n            return this.getIn([\"userInfo\", \"browser\", \"version\"]);\r\n          },\r\n          setBrowserVersion: function(version) {\r\n            return this.setIn([\"userInfo\", \"browser\", \"version\"], version);\r\n          }\r\n        }\r\n      };\r\n      Model.TimeTracker = {\r\n        schema: {\r\n          timeTrail: [],\r\n          switchTrail: [],\r\n          finalResponseTime: \"\"\r\n        },\r\n        methods: {\r\n          revivers: {\r\n            timeTracker: function(model) {\r\n              let { timeTrail, finalResponseTime, switchTrail } = model;\r\n\r\n              return this.setTimeTrail(timeTrail)\r\n                .setSwitchTrail(switchTrail)\r\n                .setFinalResponseTime(finalResponseTime);\r\n            }\r\n          },\r\n          getTimeTrail: function() {\r\n            return this.get(\"timeTrail\");\r\n          },\r\n          setTimeTrail: function(timeTrail) {\r\n            if (!_.isArray(timeTrail)) {\r\n              return this;\r\n            }\r\n            return this.set(\"timeTrail\", timeTrail);\r\n          },\r\n          getSwitchTrail: function() {\r\n            return this.get(\"switchTrail\");\r\n          },\r\n          setSwitchTrail: function(switchTrail) {\r\n            if (!_.isArray(switchTrail)) {\r\n              return this;\r\n            }\r\n            return this.set(\"switchTrail\", switchTrail);\r\n          },\r\n          getFinalResponseTime: function() {\r\n            return this.get(\"finalResponseTime\");\r\n          },\r\n          setFinalResponseTime: function(finalResponseTime) {\r\n            return this.set(\"finalResponseTime\", finalResponseTime);\r\n          }\r\n        }\r\n      };\r\n      Model.ClientSurveyResponse = _.merge(Model, Model.UserInfo);\r\n      const Types = {\r\n          ClientSurveyResponse: makeTypedRecord(Model.ClientSurveyResponse),\r\n          TimeTracker: makeTypedRecord(Model.TimeTracker)\r\n        },\r\n        reviveClientSurveyResponseModel = function(model) {\r\n          let clientSurveyResponse = new Types.ClientSurveyResponse();\r\n          return processRevivers(clientSurveyResponse, model);\r\n        },\r\n        getClientSurveyResponseModel = function(clientSurveyResponseOrModel) {\r\n          if (!clientSurveyResponseOrModel.docType) {\r\n            let SurveyModelBuilder = SurveyModelFactory(\r\n                clientSurveyResponseOrModel._schemaVersion\r\n              ),\r\n              model = {\r\n                _id: clientSurveyResponseOrModel.responseId,\r\n                survey: SurveyModelBuilder.fromModel(\r\n                  clientSurveyResponseOrModel.survey\r\n                )\r\n              };\r\n            return new Types.ClientSurveyResponse(model);\r\n          }\r\n          return reviveClientSurveyResponseModel(clientSurveyResponseOrModel);\r\n        };\r\n\r\n      return getClientSurveyResponseModel(clientSurveyResponseOrModel);\r\n    };\r\n    return {\r\n      getClientSurveyResponseModel: function(clientSurveyResponse) {\r\n        let _schemaVersion = defaultSchemaVersion;\r\n        if (clientSurveyResponse.survey._schemaVersion) {\r\n          _schemaVersion = clientSurveyResponse.survey._schemaVersion;\r\n        }\r\n        return version[_schemaVersion](clientSurveyResponse);\r\n      },\r\n      fromModel: function(model) {\r\n        let _schemaVersion = defaultSchemaVersion;\r\n        if (model._schemaVersion) {\r\n          _schemaVersion = model._schemaVersion;\r\n        }\r\n        return version[_schemaVersion](model);\r\n      }\r\n    };\r\n  },\r\n  ClientSurveyResponseModelProvider = function(\r\n    schemaVersion = defaultSchemaVersion\r\n  ) {\r\n    return ClientSurveyResponseSchemaProvider();\r\n  };\r\n\r\nexport default ClientSurveyResponseModelProvider;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/clientsurveyresponsemodelprovider/index.js","export default {\r\n    //http://stackoverflow.com/questions/46155/validate-email-address-in-javascript\r\n    email: /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/regex/index.js","import React from \"react\";\r\nimport connect from \"reflux/src/connect\";\r\nimport PureRenderMixin from \"react-addons-pure-render-mixin\";\r\nimport FontIcon from \"material-ui/FontIcon\";\r\nimport CircularProgress from \"material-ui/CircularProgress\";\r\nimport Avatar from \"material-ui/Avatar\";\r\nimport IconButton from \"material-ui/IconButton\";\r\nimport Paper from \"material-ui/Paper\";\r\nimport MenuItem from \"material-ui/MenuItem\";\r\nimport IconMenu from \"material-ui/IconMenu\";\r\nimport * as Colors from \"material-ui/styles/colors\";\r\nimport i18n from \"../helpers/i18n.js\";\r\nimport AuthActions from \"../actions/authactions.js\";\r\nimport AuthStore from \"../stores/authstore.js\";\r\nimport { Emboss } from \"../appsettings.json\";\r\nconst UserProfile = React.createClass({\r\n  mixins: [PureRenderMixin, connect(AuthStore, \"Auth\")],\r\n  handleLogout: function() {\r\n    AuthActions.logout();\r\n  },\r\n  handleLogin: function(provider) {\r\n    AuthActions.login(provider);\r\n  },\r\n  handleChildLogOut: function() {\r\n    this.props.onLogOut();\r\n  },\r\n  getUserIcon: function(auth) {\r\n    let { authState, AuthStates, error, userProfile } = auth,\r\n      { isMobile } = this.context.customTheme;\r\n\r\n    if (authState == AuthStates.SIGNED_IN) {\r\n      let { name, thumbnail } = userProfile;\r\n      return (\r\n        <IconButton\r\n          className=\"iconButton\"\r\n          tooltip={!isMobile && name}\r\n          tooltipPosition=\"bottom-left\"\r\n          touch={true}\r\n        >\r\n          <Avatar src={thumbnail} size={40} className=\"userAvatar\" />\r\n        </IconButton>\r\n      );\r\n    }\r\n\r\n    if (authState == AuthStates.SIGNED_OUT) {\r\n      return (\r\n        <IconButton\r\n          className=\"iconButton\"\r\n          iconClassName=\"icon-person icon_medium\"\r\n          tooltipPosition=\"bottom-left\"\r\n          tooltip={!isMobile && i18n.t(\"Sign-in\")}\r\n          touch={true}\r\n        />\r\n      );\r\n    }\r\n\r\n    if (authState == AuthStates.ERROR) {\r\n      return (\r\n        <IconButton\r\n          className=\"iconButton\"\r\n          iconClassName=\"material-icons icon_medium\"\r\n          tooltipPosition=\"bottom-left\"\r\n          tooltip={(!isMobile && error.message) || error}\r\n          iconStyle={{ color: Colors.red, textShadow: Emboss }}\r\n          touch={true}\r\n        >\r\n          error_outline\r\n        </IconButton>\r\n      );\r\n    }\r\n\r\n    // The other states are sining-in ang signing-out.\r\n    // Display in-progress icon for this period.\r\n    return (\r\n      <CircularProgress\r\n        size={0.4}\r\n        color={Colors.lightBlue800}\r\n        style={{ height: 40, width: 40, margin: \"-5px 5px 0px -5px\" }}\r\n      />\r\n    );\r\n  },\r\n  getAuthMenu: function(auth) {\r\n    let { authState, AuthStates, provider, AuthProviders } = auth;\r\n    if (authState == AuthStates.SIGNED_IN) {\r\n      // Render logout for signed-in user.\r\n      let icon = <FontIcon className=\"icon-logout\" color={Colors.blue500} />;\r\n      return (\r\n        <IconMenu\r\n          iconButtonElement={this.getUserIcon(auth)}\r\n          anchorOrigin={{ horizontal: \"left\", vertical: \"bottom\" }}\r\n          targetOrigin={{ horizontal: \"left\", vertical: \"top\" }}\r\n        >\r\n          <MenuItem\r\n            style={this.context.customTheme.menuItem}\r\n            leftIcon={icon}\r\n            primaryText={i18n.t(\"Sign-out\")}\r\n            onTouchTap={this.handleLogout}\r\n          />\r\n        </IconMenu>\r\n      );\r\n    }\r\n\r\n    if (authState == AuthStates.SIGNED_OUT) {\r\n      // Render login options from supported providers\r\n      // for signed-out user.\r\n      let providersItems = [];\r\n      for (let provider of AuthProviders) {\r\n        let { name, title, logo } = provider,\r\n          icon = <FontIcon className={logo} color={Colors.blue500} />;\r\n        providersItems.push(\r\n          <MenuItem\r\n            style={this.context.customTheme.menuItem}\r\n            key={name}\r\n            primaryText={i18n.t(title)}\r\n            leftIcon={icon}\r\n            onTouchTap={this.handleLogin.bind(this, name)}\r\n          />\r\n        );\r\n      }\r\n\r\n      return (\r\n        <IconMenu\r\n          iconButtonElement={this.getUserIcon(auth)}\r\n          anchorOrigin={{ horizontal: \"right\", vertical: \"bottom\" }}\r\n          targetOrigin={{ horizontal: \"right\", vertical: \"top\" }}\r\n        >\r\n          {providersItems}\r\n        </IconMenu>\r\n      );\r\n    }\r\n\r\n    return this.getUserIcon(auth);\r\n  },\r\n  render: function() {\r\n    let auth = this.state.Auth.toJSON(),\r\n      node = this.getAuthMenu(auth);\r\n    let { signoutCaption, cancelCaption } = this.props;\r\n    return (\r\n      <Paper\r\n        zDepth={1}\r\n        style={{\r\n          height: 40,\r\n          width: 40,\r\n          display: \"inline-block\"\r\n        }}\r\n        circle={true}\r\n      >\r\n        {node}\r\n      </Paper>\r\n    );\r\n  }\r\n});\r\nUserProfile.contextTypes = {\r\n  customTheme: React.PropTypes.object\r\n};\r\n\r\nexport default UserProfile;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/components/userprofile.jsx","import Reflux from \"reflux-core\";\r\nconst TimeTrackerActions = Reflux.createActions([\r\n  \"recordTime\",\r\n  \"updateTimerInformation\"\r\n]);\r\n\r\nexport default TimeTrackerActions;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/actions/timetrackeractions.js","import _ from 'lodash';\r\nimport Promise from 'bluebird';\r\nimport im from 'immutable';\r\nimport regex from '../../regex';\r\nimport makeTypedRecord from '../../maketypedrecord';\r\nimport processRevivers from '../../processrevivers';\r\nimport Assertions from './assertions.js';\r\nconst ContactsBuilder = function () {\r\n    const contact = function (model) {\r\n        const Model = {\r\n            \"schema\": {\r\n                \"_id\": \"\",\r\n                \"_rev\": \"\",\r\n                \"_deleted\": false,\r\n                \"groups\": im.Set()\r\n            },\r\n            \"methods\": {\r\n                \"revivers\": {\r\n                    \"contact\": function (model) {\r\n                        let { _id, _rev, groups } = model,\r\n                            contact = this;\r\n                        return contact.setId(_id)\r\n                            .setRev(_rev)\r\n                            .setGroups(groups);\r\n                    }\r\n                },\r\n                \"getId\": function () {\r\n                    return this.get(\"_id\");\r\n                },\r\n                \"setId\": function (id) {\r\n                    return this.set(\"_id\", id);\r\n                },\r\n                \"getRev\": function () {\r\n                    return this.get(\"_rev\");\r\n                },\r\n                \"setRev\": function (rev) {\r\n                    return this.set(\"_rev\", rev);\r\n                },\r\n                \"getDeleted\": function () {\r\n                    return this.get(\"_deleted\");\r\n                },\r\n                \"setDeleted\": function (deleted) {\r\n                    if (_.isBoolean(deleted)) {\r\n                        return this.set(\"_deleted\", deleted);\r\n                    }\r\n\r\n                    return this;\r\n                },\r\n                \"hasGroup\": function (groupName) {\r\n                    return this.get(\"groups\").includes(groupName);\r\n                },\r\n                \"getGroups\": function () {\r\n                    return this.get(\"groups\").toSeq();\r\n                },\r\n                \"setGroup\": function (groupName) {\r\n                    return this.set(\"groups\", this.get(\"groups\").add(groupName));\r\n                },\r\n                \"setGroups\": function (groups) {\r\n                    groups = im.Set(groups);\r\n                    return this.set(\"groups\", groups);\r\n                },\r\n                \"removeGroup\": function (groupName) {\r\n                    return this.set(\"groups\", this.get(\"groups\").remove(groupName));\r\n                },\r\n                \"validate\": function () {\r\n                    var promises = [],\r\n                        validatorsKeys = Object.keys(this.validators);\r\n                    for (var i = 0; i < validatorsKeys.length; i++) {\r\n                        var validatorsKey = validatorsKeys[i];\r\n                        promises.push(this.validators[validatorsKey].call(this));\r\n                    }\r\n                    return Promise.all(promises.map((promise) => {\r\n                        return promise.reflect();\r\n                    })).each((inspection) => {\r\n                        if (inspection.isFulfilled()) {\r\n                            return inspection.value();\r\n                        } else {\r\n                            return inspection.reason();\r\n                        }\r\n                    });\r\n\r\n                },\r\n            }\r\n\r\n        };\r\n        Model.Email = {\r\n            \"schema\": {\r\n                \"email\": \"\"\r\n            },\r\n            \"methods\": {\r\n                \"revivers\": {\r\n                    \"email\": function (model) {\r\n                        let { email } = model;\r\n                        return this.setEmail(email);\r\n                    }\r\n                },\r\n                \"getEmail\": function () {\r\n                    return this.get(\"email\");\r\n                },\r\n                \"setEmail\": function (email) {\r\n                    Assertions.validEmail(email);\r\n                    return this.set(\"email\", email);\r\n                },\r\n                \"validators\": {\r\n                    \"validEmail\": function () {\r\n                        let email = this.getEmail();\r\n                        if (!email) {\r\n                            return Promise.reject({ \"email\": \"Email is required.\" });\r\n                        }\r\n                        if (!regex[\"email\"].test(email)) {\r\n                            return Promise.reject({ \"email\": \"Email is not valid.\" });\r\n                        }\r\n                        return Promise.resolve();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        Model.FullName = {\r\n            \"schema\": {\r\n                \"fullName\": \"\"\r\n            },\r\n            \"methods\": {\r\n                \"revivers\": {\r\n                    \"fullName\": function (model) {\r\n                        let { fullName } = model;\r\n                        return this.setFullName(fullName);\r\n                    }\r\n                },\r\n                \"getFullName\": function () {\r\n                    return this.get(\"fullName\");\r\n                },\r\n                \"setFullName\": function (fullName) {\r\n                    Assertions.validFullName(fullName);\r\n                    return this.set(\"fullName\", fullName);\r\n                },\r\n                \"validators\": {\r\n                    \"validFullName\": function () {\r\n                        let fullname = this.getFullName();\r\n                        if (!fullname) {\r\n                            return Promise.reject({ \"fullName\": \"Full name is required.\" });\r\n                        }\r\n                        return Promise.resolve();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        Model.Contact = _.merge(Model, Model.FullName, Model.Email);\r\n        const Types = {\r\n            \"Contact\": makeTypedRecord(Model.Contact)\r\n        },\r\n            reviveContactModel = function (model) {\r\n                let contactModel = new Types.Contact();\r\n                return processRevivers(contactModel, model);\r\n            },\r\n            getContactModel = function (model) {\r\n                if (!model._id) {\r\n                    var model = {\r\n                        \"_id\": model.email,\r\n                        \"email\": model.email,\r\n                        \"fullName\": model.fullName,\r\n                        \"groups\": model.groups || im.Set()\r\n                    };\r\n                    return new Types.Contact(model);\r\n                }\r\n                return reviveContactModel(model);\r\n            };\r\n\r\n        return getContactModel(model);\r\n\r\n    }\r\n\r\n    return {\r\n        \"createContact\": function (recipientInfo) {\r\n            return contact(recipientInfo);\r\n        },\r\n        \"fromModel\": function (model) {\r\n            return contact(model);\r\n        }\r\n    }\r\n};\r\n\r\nexport default ContactsBuilder;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/contacts/contactbuilder/index.js","import AbstractDataProvider from \"../abstractdataprovider\";\r\nimport Logger from \"../logger.js\";\r\nimport CDBSA from \"../couchdbsurveyadapter\";\r\nimport _ from \"lodash\";\r\nimport axios from \"axios\";\r\nimport settleAll from \"../settleAll\";\r\nimport Promise from \"bluebird\";\r\nexport default class SurveyDataProvider extends AbstractDataProvider {\r\n  constructor(container, surveyModelBuilder) {\r\n    super(container);\r\n    this.CouchDBSurveyProvider = new CDBSA(surveyModelBuilder);\r\n  }\r\n  getUserSurvey(surveyId) {\r\n    return this.getUserContext()\r\n      .then(userContext => {\r\n        return userContext.DB.allDocs({\r\n          key: surveyId,\r\n          include_docs: true\r\n        });\r\n      })\r\n      .then(result => {\r\n        let [survey] = result.rows;\r\n        return this.CouchDBSurveyProvider.toSurveyModel(survey.doc);\r\n      });\r\n  }\r\n  getSurveysBykeys(keys) {\r\n    return this.getUserContext()\r\n      .then(userContext => {\r\n        return userContext.DB.allDocs({\r\n          keys,\r\n          include_docs: true\r\n        });\r\n      })\r\n      .then(result => {\r\n        let surveys = {};\r\n        result.rows.forEach(row => {\r\n          var survey = this.CouchDBSurveyProvider.toSurveyModel(row.doc);\r\n          surveys[survey.getId()] = survey;\r\n        });\r\n        return surveys;\r\n      });\r\n  }\r\n  getUserSurveysIdWithTitle() {\r\n    return this.getUserContext()\r\n      .then(userContext => {\r\n        return userContext.DB.find({\r\n          selector: {\r\n            docType: \"surveytemplate\"\r\n          },\r\n          fields: [\"_id\", \"header\"]\r\n        });\r\n      })\r\n      .then(result => {\r\n        let surveys = _.map(result.docs, doc => {\r\n          return { id: doc._id, title: doc.header.title };\r\n        });\r\n        return surveys;\r\n      });\r\n  }\r\n  getThumbnail(data, isGuest) {\r\n    if (isGuest) {\r\n      return Promise.resolve();\r\n    }\r\n    return axios({\r\n      url: `/thumbnail`,\r\n      method: \"POST\",\r\n      data\r\n    });\r\n  }\r\n  addUserSurvey(newSurvey, isGuest) {\r\n    if (!newSurvey) {\r\n      newSurvey = this.CouchDBSurveyProvider.toSurveyModel();\r\n    }\r\n    newSurvey = newSurvey\r\n      .setCreated(new Date().toISOString())\r\n      .setUpdated(new Date().toISOString());\r\n    let userContext = null,\r\n      data = { survey: newSurvey.toJSON(), modified: newSurvey.getId() };\r\n    return this.getThumbnail(data, isGuest)\r\n      .then(response => {\r\n        let { data } = response || {};\r\n        newSurvey = newSurvey.setThumbnail(data && data.data);\r\n        return this.getUserContext();\r\n      })\r\n      .then(uc => {\r\n        userContext = uc;\r\n        return userContext.save(\r\n          \"surveytemplate\",\r\n          this.CouchDBSurveyProvider.fromSurveyModel(newSurvey)\r\n        );\r\n      })\r\n      .then(result => {\r\n        return userContext.DB.allDocs({\r\n          key: result.id,\r\n          include_docs: true\r\n        });\r\n      })\r\n      .then(docs => {\r\n        let [{ doc }] = docs.rows;\r\n        userContext.triggerListener(doc, \"add\");\r\n        return this.CouchDBSurveyProvider.toSurveyModel(doc);\r\n      });\r\n  }\r\n\r\n  addSurveys(surveys) {\r\n    let promises = surveys.map(survey => {\r\n      survey = this.CouchDBSurveyProvider.toSurveyModel(survey);\r\n      return Promise.try(() => this.addUserSurvey(survey));\r\n    });\r\n    return settleAll(promises);\r\n  }\r\n  updateUserSurvey(editedSurvey, isGuest) {\r\n    editedSurvey = editedSurvey.setUpdated(new Date().toISOString());\r\n    let userContext = null,\r\n      data = {\r\n        survey: editedSurvey.toJSON(),\r\n        modified: editedSurvey.getRevision()\r\n      };\r\n    return this.getThumbnail(data, isGuest)\r\n      .then(response => {\r\n        let { data } = response || {};\r\n        editedSurvey = editedSurvey.setThumbnail(data && data.data);\r\n        return this.getUserContext();\r\n      })\r\n      .then(uc => {\r\n        userContext = uc;\r\n        return userContext.save(\r\n          \"surveytemplate\",\r\n          this.CouchDBSurveyProvider.fromSurveyModel(editedSurvey)\r\n        );\r\n      })\r\n      .then(result => {\r\n        Logger.debug(\"Survey updated.\", result);\r\n        userContext.triggerListener(\r\n          this.CouchDBSurveyProvider.fromSurveyModel(\r\n            editedSurvey.setRevision(result.rev)\r\n          ),\r\n          \"update\"\r\n        );\r\n        return result;\r\n      });\r\n  }\r\n  undoSurvey(survey) {\r\n    let userContext = null;\r\n    return this.getUserContext()\r\n      .then(uc => {\r\n        userContext = uc;\r\n        return userContext.save(\r\n          \"surveytemplate\",\r\n          this.CouchDBSurveyProvider.fromSurveyModel(survey)\r\n        );\r\n      })\r\n      .then(result => {\r\n        userContext.triggerListener(\r\n          this.CouchDBSurveyProvider.fromSurveyModel(\r\n            survey.setRevision(result.rev)\r\n          ),\r\n          \"update\"\r\n        );\r\n        return result;\r\n      });\r\n  }\r\n  undoUserSurveys(undoAppliedSurveys) {\r\n    let keys = [];\r\n    undoAppliedSurveys = undoAppliedSurveys.map(survey => {\r\n      keys.push(survey.getId());\r\n      return this.CouchDBSurveyProvider.fromSurveyModel(survey);\r\n    });\r\n    let userContext = null;\r\n    return this.getUserContext()\r\n      .then(uc => {\r\n        userContext = uc;\r\n        return userContext.DB.bulkDocs(undoAppliedSurveys);\r\n      })\r\n      .then(result => {\r\n        Logger.debug(\"undo surveys\", result);\r\n        return this.getSurveysBykeys(keys);\r\n      });\r\n  }\r\n  deleteUserSurvey(survey) {\r\n    survey = this.CouchDBSurveyProvider.fromSurveyModel(survey);\r\n    survey[\"_deleted\"] = true;\r\n    let userContext = null;\r\n    return this.getUserContext()\r\n      .then(uc => {\r\n        userContext = uc;\r\n        return userContext.save(\"surveytemplate\", survey);\r\n      })\r\n      .then(result => {\r\n        survey[\"_rev\"] = result.rev;\r\n        userContext.triggerListener(survey, \"delete\");\r\n        return result;\r\n      });\r\n  }\r\n  destroy() {\r\n    Logger.log(\"Logged off\");\r\n  }\r\n  initialSyncCompleted() {\r\n    Logger.debug(\"[SurveyDataProvider]: initialSyncCompleted\");\r\n  }\r\n  deltaSyncCompleted() {\r\n    Logger.debug(\"[SurveyDataProvider]: deltaSyncCompleted\");\r\n  }\r\n  initialSyncFailed() {\r\n    Logger.debug(\"[SurveyDataProvider]: initialSyncFailed\");\r\n  }\r\n  deltaSyncFailed() {\r\n    Logger.debug(\"[SurveyDataProvider]: deltaSyncFailed\");\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/surveydataprovider/index.js","let Setting = function(key, type, title, options){\r\n\tthis.key = key;\r\n\tthis.type = type;\r\n\tthis.title = title;\r\n\tthis.options = options;\r\n\t\r\n\tthis.toString = function(){\r\n\t\treturn JSON.stringify(this.toJSON());\r\n\t};\r\n\t\r\n\tthis.toJSON = function(){\r\n\t\treturn {key:this.key, type:this.type, title:this.title, options: this.options};\r\n\t};\r\n};\r\n\r\nlet SettingsGroup = function(title, options){\r\n\tthis.title = title;\r\n\tthis.options = options;\r\n\tthis.settings = {};\r\n\tthis.addSetting = function(key, type, title, options){\r\n\t\tthis.settings[key] = new Setting(key, type, title, options || {});\r\n\t\treturn this;\r\n\t};\r\n\tthis.getSettings = function(key){\r\n\t\treturn this.settings[key].toJSON();\r\n\t},\r\n\tthis.toJSON = function(){\r\n\t\tlet result = {}, settings = {};\r\n\t\tfor (let key in this.settings){\r\n\t\t\tif (this.settings[key].toJSON){\r\n\t\t\t\tsettings[key] =  this.settings[key].toJSON();\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tresult = {\"title\" : this.title, \"settings\": settings};\r\n\t\t\r\n\t\treturn result;\r\n\t};\r\n\tthis.toString = function(){\r\n\t\treturn JSON.stringify(this.toJSON());\r\n\t};\r\n};\r\n\r\nlet SettingsDefinitionBuilder = function() {\r\n\tlet TemplateClass = function () {\r\n\t\tlet settings = [];\r\n\t\tthis.getSettingsDefinition = function(){\r\n\t\t\tlet result = settings.map((settingsGroup)=>settingsGroup.toJSON());\r\n\t\t\treturn result;\r\n\t\t};\r\n\t\tthis.addSettingsGroup = function(title, options){\r\n\t\t\tlet result = new SettingsGroup(title, options);\r\n\t\t\tsettings.push(result);\r\n\t\t\t\r\n\t\t\treturn result;\r\n\t\t};\r\n\t}; \r\n\treturn new TemplateClass();\r\n};\r\n\r\nexport default SettingsDefinitionBuilder;\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/settingdefinitionbuilder.js","import { merge } from \"lodash\";\r\nimport { darken, fade, emphasize, lighten } from \"./colorManipulator\";\r\nimport lightBaseTheme from \"./lightBaseTheme\";\r\nimport zIndex from \"./zIndex\";\r\nimport autoprefixer from \"./autoprefixer\";\r\nimport callOnce from \"./callOnce\";\r\nimport rtl from \"./rtl\";\r\nimport compose from \"recompose/compose\";\r\nimport typography from \"./typography\";\r\nimport {\r\n  red500,\r\n  grey400,\r\n  grey500,\r\n  grey600,\r\n  grey700,\r\n  transparent,\r\n  lightWhite,\r\n  white,\r\n  darkWhite,\r\n  lightBlack,\r\n  black\r\n} from \"./colors\";\r\nimport themeSetting from \"../themesetting.js\";\r\n/**\r\n * Get the CUSTOM theme corresponding to a base theme.\r\n * It's possible to override the computed theme values\r\n * by providing a second argument. The calculated\r\n * theme will be deeply merged with the second argument.\r\n */\r\nexport default function getCustomTheme(customTheme, isMobile, ...more) {\r\n  customTheme = merge(\r\n    {\r\n      zIndex,\r\n      isRtl: false,\r\n      userAgent: undefined\r\n    },\r\n    lightBaseTheme,\r\n    customTheme,\r\n    ...more\r\n  );\r\n\r\n  const { spacing, fontFamily, palette } = customTheme;\r\n  const baseTheme = { spacing, fontFamily, palette };\r\n\r\n  customTheme = merge(\r\n    themeSetting,\r\n    customTheme,\r\n    {\r\n      baseTheme, // To provide backward compatibility.\r\n      rawTheme: baseTheme // To provide backward compatibility.\r\n    },\r\n    { isMobile }\r\n  );\r\n  const transformers = [autoprefixer, rtl, callOnce]\r\n    .map(t => t(customTheme))\r\n    .filter(t => t);\r\n\r\n  customTheme.prepareStyles = compose(...transformers);\r\n\r\n  return customTheme;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/customtheme/getcustomtheme.js","import ObjectID from \"bson-objectid\";\r\nimport _ from \"lodash\";\r\nimport AbstractDataProvider from \"../abstractdataprovider\";\r\nimport Logger from \"../logger.js\";\r\nvar defaultPreferences = { language: \"en-US\", questionMode: false };\r\n\r\nexport default class PreferenceProvider extends AbstractDataProvider {\r\n  constructor(container) {\r\n    super(container);\r\n    this._preferences = null;\r\n  }\r\n  _fetchSavedPreferences() {\r\n    //fetch preferences from db if present\r\n    return this.getUserContext()\r\n      .then(userContext => {\r\n        return userContext.DB.query(\"getByDocType/typed\", {\r\n          key: \"preferences\",\r\n          include_docs: true\r\n        });\r\n      })\r\n      .then(result => {\r\n        return result.rows[0].doc;\r\n      });\r\n  }\r\n  _ensurePreferences() {\r\n    //ensures that preference has been initializesed or not\r\n    if (this._preferences) {\r\n      return Promise.resolve(this._preferences);\r\n    } else {\r\n      return this._fetchSavedPreferences()\r\n        .then(preferences => {\r\n          this._preferences = _.merge({}, defaultPreferences);\r\n          return (this._preferences = _.merge(this._preferences, preferences));\r\n        })\r\n        .catch(err => {\r\n          return (this._preferences = _.merge({}, defaultPreferences));\r\n        });\r\n    }\r\n  }\r\n  getPreference(key) {\r\n    //first ensure that preference is available or not\r\n    //then according to that further proccess going on\r\n    return this._ensurePreferences().then(preferences => {\r\n      //Logger.log(\"first preference\",this._preferences)\r\n      if (preferences.hasOwnProperty(key)) {\r\n        return Promise.resolve(preferences[key]);\r\n      }\r\n      throw TypeError(\"Invalid key.\");\r\n    });\r\n  }\r\n  setPreference(key, value) {\r\n    // first ensure that preference is available or not\r\n    // if found then assign value to key\r\n    // if not then create preferences object with given key and value\r\n    return this._ensurePreferences()\r\n      .then(preferences => {\r\n        this._preferences = _.merge(preferences, { [key]: value });\r\n        if (!this._preferences.hasOwnProperty(\"_id\")) {\r\n          this._preferences[\"_id\"] = \"preferences\";\r\n        }\r\n        return this.getUserContext();\r\n      })\r\n      .then(userContext => {\r\n        return userContext.save(\"preferences\", this._preferences);\r\n      })\r\n      .then(result => {\r\n        this._preferences[\"_rev\"] = result.rev;\r\n        return { ok: true };\r\n      })\r\n      .catch(err => {\r\n        if (err.status === 409) {\r\n          // We found a conflict, let's take the existing version.\r\n          return this._fetchSavedPreferences().then(() => ({ ok: true }));\r\n        }\r\n\r\n        throw err;\r\n      });\r\n  }\r\n  destroy() {\r\n    Logger.debug(\"[PreferencesProvider]: destroy\");\r\n  }\r\n  initialSyncCompleted() {\r\n    Logger.debug(\"[PreferencesProvider]: initialSyncCompleted\");\r\n  }\r\n  deltaSyncCompleted() {\r\n    Logger.debug(\"[PreferencesProvider]: deltaSyncCompleted\");\r\n  }\r\n  initialSyncFailed() {\r\n    Logger.debug(\"[PreferencesProvider]: initialSyncFailed\");\r\n  }\r\n  deltaSyncFailed() {\r\n    Logger.debug(\"[PreferencesProvider]: deltaSyncFailed\");\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/preferenceprovider/index.js","import AbstractDataProvider from \"../abstractdataprovider\";\r\nimport Logger from \"../logger.js\";\r\n\r\nexport default class ErrorProvider extends AbstractDataProvider {\r\n  constructor(container) {\r\n    super(container);\r\n  }\r\n  reportTrackerInfo(tracker) {\r\n    return this.getUserContext().then(userContext => {\r\n      return userContext.save(\"surveytracker_info\", tracker);\r\n    });\r\n  }\r\n\r\n  destroy() {\r\n    Logger.debug(\"[ErrorProvider]: destroy\");\r\n  }\r\n  initialSyncCompleted() {\r\n    Logger.debug(\"[ErrorProvider]: initialSyncCompleted\");\r\n  }\r\n  deltaSyncCompleted() {\r\n    Logger.debug(\"[ErrorProvider]: deltaSyncCompleted\");\r\n  }\r\n  initialSyncFailed() {\r\n    Logger.debug(\"[ErrorProvider]: initialSyncFailed\");\r\n  }\r\n  deltaSyncFailed() {\r\n    Logger.debug(\"[ErrorProvider]: deltaSyncFailed\");\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/timetrackerprovider/index.js","import _ from \"lodash\";\r\nimport immutable from \"immutable\";\r\nimport CDBRA from \"../couchdbrecipientadapter\";\r\nimport AbstractDataProvider from \"../../abstractdataprovider\";\r\nimport Logger from \"../../logger.js\";\r\nimport i18n from \"../../i18n.js\";\r\nimport Promise from \"bluebird\";\r\nimport settleAll from \"../../settleAll\";\r\nexport default class GroupsAndRecipientsProvider extends AbstractDataProvider {\r\n  constructor(container, CB) {\r\n    super(container);\r\n    this.CouchDBRecipientAdapter = new CDBRA(CB);\r\n    this._groups = {};\r\n  }\r\n  //recipients APIs\r\n  //updated by find\r\n  addRecipient(model) {\r\n    let contact = this.CouchDBRecipientAdapter.toRecipientModel(model);\r\n    this.add(model.groups);\r\n    return this.getUserContext().then(userContext => {\r\n      return userContext\r\n        .save(\r\n          \"contact\",\r\n          this.CouchDBRecipientAdapter.fromRecipientModel(contact)\r\n        )\r\n        .then(result => {\r\n          userContext.triggerListener(\r\n            this.CouchDBRecipientAdapter.fromRecipientModel(\r\n              contact.setRev(result.rev)\r\n            ),\r\n            \"add\"\r\n          );\r\n          return contact;\r\n        });\r\n    });\r\n  }\r\n  getRecipient(id) {\r\n    return this.getUserContext().then(userContext => {\r\n      return userContext.DB\r\n        .allDocs({\r\n          key: id,\r\n          include_docs: true\r\n        })\r\n        .then(result => {\r\n          let [row] = result.rows;\r\n          return row && this.CouchDBRecipientAdapter.toRecipientModel(row.doc);\r\n        });\r\n    });\r\n  }\r\n  ensureEmail(value) {\r\n    return this.getUserContext()\r\n      .then(userContext => {\r\n        return userContext.DB.find({\r\n          selector: {\r\n            docType: \"contact\",\r\n            email: { $eq: value }\r\n          },\r\n          fields: [\"_id\"]\r\n        });\r\n      })\r\n      .then(result => {\r\n        if (result.docs.length) {\r\n          return Promise.reject(i18n.t(\"This email is already present\"));\r\n        }\r\n        return Promise.resolve();\r\n      });\r\n  }\r\n  updateRecipient(editedRecipient) {\r\n    let groups = editedRecipient.getGroups().toArray();\r\n    return this.add(groups)\r\n      .then(() => this.getUserContext())\r\n      .then(userContext => {\r\n        return userContext\r\n          .save(\r\n            \"contact\",\r\n            this.CouchDBRecipientAdapter.fromRecipientModel(editedRecipient)\r\n          )\r\n          .then(result => {\r\n            this.removeUnwantedGroups(null, true);\r\n            userContext.triggerListener(\r\n              this.CouchDBRecipientAdapter.fromRecipientModel(\r\n                editedRecipient.setRev(result.rev)\r\n              ),\r\n              \"update\"\r\n            );\r\n            return editedRecipient;\r\n          });\r\n      });\r\n  }\r\n  deleteRecipient(key) {\r\n    let contactDoc = {};\r\n    return this.getUserContext().then(userContext =>\r\n      userContext.DB\r\n        .allDocs({\r\n          key,\r\n          include_docs: true\r\n        })\r\n        .then(docs => {\r\n          let [{ doc }] = docs.rows;\r\n          contactDoc = _.cloneDeep(doc);\r\n          doc._deleted = true;\r\n          return userContext.save(\"contact\", doc);\r\n        })\r\n        .then(result => {\r\n          contactDoc._rev = result.rev;\r\n          this.removeUnwantedGroups(contactDoc.groups);\r\n          userContext.triggerListener(contactDoc, \"delete\");\r\n          return this.CouchDBRecipientAdapter.toRecipientModel(contactDoc);\r\n        })\r\n    );\r\n  }\r\n  undo(doc) {\r\n    return this.getUserContext().then(userContext => {\r\n      return userContext.DB.put(doc).then(result => {\r\n        doc._rev = result.rev;\r\n        userContext.triggerListener(doc, \"update\");\r\n        return doc;\r\n      });\r\n    });\r\n  }\r\n  undoRecipent(recipient) {\r\n    return this.add(recipient.groups)\r\n      .then(() => this.getUserContext())\r\n      .then(userContext => {\r\n        return userContext.save(\"contact\", recipient).then(result => {\r\n          recipient._rev = result.rev;\r\n          this.removeUnwantedGroups(recipient.group);\r\n          userContext.triggerListener(recipient, \"update\");\r\n          return recipient;\r\n        });\r\n      });\r\n  }\r\n  /*** */\r\n  _fetchSavedGroups() {\r\n    return this.getUserContext()\r\n      .then(userContext => {\r\n        return userContext.DB.find({\r\n          selector: {\r\n            docType: \"groups\"\r\n          }\r\n        });\r\n      })\r\n      .then(result => {\r\n        return result.docs[0];\r\n      });\r\n  }\r\n  _ensureGroups() {\r\n    if (this._groups && this._groups.groups && this._groups.groups.length) {\r\n      return Promise.resolve(this._groups);\r\n    } else {\r\n      return this._fetchSavedGroups()\r\n        .then(groups => {\r\n          return (this._groups = _.merge({}, groups));\r\n        })\r\n        .catch(err => {\r\n          return {};\r\n        });\r\n    }\r\n  }\r\n  get() {\r\n    return this._ensureGroups().then(groups => {\r\n      this._groups = groups;\r\n      if (!this._groups.hasOwnProperty(\"groups\")) {\r\n        this._groups[\"groups\"] = [];\r\n      }\r\n      return this._groups.groups;\r\n    });\r\n  }\r\n  getRecipientsByGroup(group) {\r\n    return this.getUserContext().then(userContext =>\r\n      userContext.DB.find({\r\n        selector: {\r\n          docType: \"contact\",\r\n          groups: { $elemMatch: { $eq: group } }\r\n        }\r\n      })\r\n    );\r\n  }\r\n  removeUnwantedGroups(groups, searchForAll) {\r\n    if (searchForAll && this._groups.groups) {\r\n      groups = _.compact(_.uniq(_.concat(this._groups.groups, groups)));\r\n    }\r\n    if (!(groups && groups.length)) {\r\n      return Promise.resolve();\r\n    }\r\n    let promises = groups.map(group =>\r\n      Promise.try(() =>\r\n        this.getRecipientsByGroup(group).then(result => ({\r\n          group,\r\n          count: result.docs.length\r\n        }))\r\n      )\r\n    );\r\n    return settleAll(promises).then(outputs => {\r\n      let groupsPromises = outputs.reduce((promiseCollection, output) => {\r\n        if (!output.isRejected()) {\r\n          let result = output.value();\r\n          if (!result.count) {\r\n            promiseCollection.push(this.remove(result.group));\r\n          }\r\n        }\r\n        return promiseCollection;\r\n      }, []);\r\n      return Promise.all(groupsPromises);\r\n    });\r\n  }\r\n  add(newGroups) {\r\n    if (!(newGroups && newGroups.length)) {\r\n      return Promise.resolve();\r\n    }\r\n    let _userContext;\r\n    return this._ensureGroups()\r\n      .then(groups => {\r\n        this._groups = groups;\r\n        if (!this._groups.hasOwnProperty(\"groups\")) {\r\n          this._groups[\"groups\"] = [];\r\n        }\r\n        this._groups[\"groups\"] = _.uniq(\r\n          _.concat(this._groups[\"groups\"], newGroups)\r\n        );\r\n        if (!this._groups.hasOwnProperty(\"_id\")) {\r\n          this._groups[\"_id\"] = \"groups\";\r\n        }\r\n        return this.getUserContext();\r\n      })\r\n      .then(userContext => {\r\n        _userContext = userContext;\r\n        return userContext.save(\"groups\", this._groups);\r\n      })\r\n      .then(result => {\r\n        this._groups[\"_rev\"] = result.rev;\r\n        _userContext.triggerListener(this._groups, \"add\");\r\n        return immutable.Set(this._groups[\"groups\"]);\r\n      })\r\n      .catch(err => {\r\n        if (err.status === 409) {\r\n          return this._fetchSavedGroups().then(() =>\r\n            immutable.Set(this._groups[\"groups\"])\r\n          );\r\n        }\r\n        throw err;\r\n      });\r\n  }\r\n  remove(key) {\r\n    if (!key) {\r\n      return immutable.Set(this._groups[\"groups\"]);\r\n    }\r\n    let _userContext;\r\n    return this.getRecipientsByGroup(key)\r\n      .then(result => {\r\n        if (!result.docs.length) {\r\n          return this.getUserContext();\r\n        }\r\n        this.lastRecipients = { [key]: {} };\r\n        this.newRecipients = _.map(result.docs, doc => {\r\n          var contact = this.CouchDBRecipientAdapter.toRecipientModel(doc);\r\n          this.lastRecipients[key][contact.getId()] = contact;\r\n          contact = contact.removeGroup(key);\r\n          return this.CouchDBRecipientAdapter.fromRecipientModel(contact);\r\n        });\r\n        return this.getUserContext();\r\n      })\r\n      .then(userContext => {\r\n        _userContext = userContext;\r\n        return this.newRecipients && this.newRecipients.length\r\n          ? userContext.saveDocs(this.newRecipients)\r\n          : Promise.resolve();\r\n      })\r\n      .then(results => {\r\n        _.map(results, result => {\r\n          if (this.lastRecipients[key][result.id])\r\n            this.lastRecipients[key][\r\n              result.id\r\n            ] = this.CouchDBRecipientAdapter.fromRecipientModel(\r\n              this.lastRecipients[key][result.id].setRev(result.rev)\r\n            );\r\n        });\r\n        return this._ensureGroups();\r\n      })\r\n      .then(groups => {\r\n        this._groups = groups;\r\n        if (!this._groups.hasOwnProperty(\"groups\")) {\r\n          this._groups[\"groups\"] = [];\r\n        }\r\n        if (!this._groups.hasOwnProperty(\"_id\")) {\r\n          this._groups[\"_id\"] = \"groups\";\r\n        }\r\n        this._groups.groups = _.filter(\r\n          this._groups.groups,\r\n          group => group != key\r\n        );\r\n        this._groups.groups = _.compact(this._groups.groups);\r\n        return _userContext.save(\"groups\", this._groups);\r\n      })\r\n      .then(result => {\r\n        this._groups[\"_rev\"] = result.rev;\r\n        _userContext.triggerListener(this._groups, \"delete\");\r\n        return immutable.Set(this._groups[\"groups\"]);\r\n      });\r\n  }\r\n  renameGroup(oldName, newName) {\r\n    let _userContext;\r\n    return this.getRecipientsByGroup(oldName)\r\n      .then(result => {\r\n        if (!result.docs.length) {\r\n          return this.getUserContext();\r\n        }\r\n        this.newRecipients = _.map(result.docs, doc => {\r\n          var contact = this.CouchDBRecipientAdapter.toRecipientModel(doc);\r\n          contact = contact.removeGroup(oldName).setGroup(newName);\r\n          return this.CouchDBRecipientAdapter.fromRecipientModel(contact);\r\n        });\r\n        return this.getUserContext();\r\n      })\r\n      .then(userContext => {\r\n        _userContext = userContext;\r\n        return this.newRecipients && this.newRecipients.length\r\n          ? _userContext.saveDocs(this.newRecipients)\r\n          : Promise.resolve();\r\n      })\r\n      .then(() => this._ensureGroups())\r\n      .then(groups => {\r\n        this._groups = groups;\r\n        if (!this._groups.hasOwnProperty(\"groups\")) {\r\n          this._groups[\"groups\"] = [];\r\n        }\r\n        if (!this._groups.hasOwnProperty(\"_id\")) {\r\n          this._groups[\"_id\"] = \"groups\";\r\n        }\r\n        this._groups.groups = _.filter(\r\n          this._groups.groups,\r\n          group => group != oldName\r\n        );\r\n        this._groups.groups.push(newName);\r\n        this._groups.groups = _.compact(this._groups.groups);\r\n        return _userContext.save(\"groups\", this._groups);\r\n      })\r\n      .then(result => {\r\n        this._groups[\"_rev\"] = result.rev;\r\n        _userContext.triggerListener(this._groups, \"update\");\r\n        return immutable.Set(this._groups[\"groups\"]);\r\n      })\r\n      .catch(err => {\r\n        throw err;\r\n      });\r\n  }\r\n  undoGroups(oldGroups) {\r\n    let _userContext;\r\n    return this._ensureGroups()\r\n      .then(groups => {\r\n        this._groups = groups;\r\n        if (!this._groups.hasOwnProperty(\"groups\")) {\r\n          this._groups[\"groups\"] = [];\r\n        }\r\n        this.groupDifference = _.difference(oldGroups, this._groups[\"groups\"]);\r\n        this._groups[\"groups\"] = oldGroups;\r\n        if (!this._groups.hasOwnProperty(\"_id\")) {\r\n          this._groups[\"_id\"] = \"groups\";\r\n        }\r\n        return this.getUserContext();\r\n      })\r\n      .then(userContext => {\r\n        _userContext = userContext;\r\n        return userContext.save(\"groups\", this._groups);\r\n      })\r\n      .then(result => {\r\n        this._groups[\"_rev\"] = result.rev;\r\n        _userContext.triggerListener(this._groups, \"update\");\r\n        let promises = _.map(this.groupDifference, group => {\r\n          if (this.lastRecipients[group]) {\r\n            return this.getUserContext().then(userContext => {\r\n              return userContext.DB.bulkDocs(\r\n                _.values(this.lastRecipients[group])\r\n              );\r\n            });\r\n          }\r\n        });\r\n        return Promise.all(promises);\r\n      })\r\n      .then(() => {\r\n        return immutable.Set(this._groups[\"groups\"]);\r\n      });\r\n  }\r\n  destroy() {\r\n    Logger.debug(\"[GroupsAndRecipientsProvider]: destroy\");\r\n  }\r\n  initialSyncCompleted() {\r\n    Logger.debug(\"[GroupsAndRecipientsProvider]: initialSyncCompleted\");\r\n  }\r\n  deltaSyncCompleted() {\r\n    Logger.debug(\"[GroupsAndRecipientsProvider]: deltaSyncCompleted\");\r\n  }\r\n  initialSyncFailed() {\r\n    Logger.debug(\"[GroupsAndRecipientsProvider]: initialSyncFailed\");\r\n  }\r\n  deltaSyncFailed() {\r\n    Logger.debug(\"[GroupsAndRecipientsProvider]: deltaSyncFailed\");\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/contacts/groupsandrecipientsprovider/index.js","export const red50 = '#ffebee';\r\nexport const red100 = '#ffcdd2';\r\nexport const red200 = '#ef9a9a';\r\nexport const red300 = '#e57373';\r\nexport const red400 = '#ef5350';\r\nexport const red500 = '#f44336';\r\nexport const red600 = '#e53935';\r\nexport const red700 = '#d32f2f';\r\nexport const red800 = '#c62828';\r\nexport const red900 = '#b71c1c';\r\nexport const redA100 = '#ff8a80';\r\nexport const redA200 = '#ff5252';\r\nexport const redA400 = '#ff1744';\r\nexport const redA700 = '#d50000';\r\n\r\nexport const pink50 = '#fce4ec';\r\nexport const pink100 = '#f8bbd0';\r\nexport const pink200 = '#f48fb1';\r\nexport const pink300 = '#f06292';\r\nexport const pink400 = '#ec407a';\r\nexport const pink500 = '#e91e63';\r\nexport const pink600 = '#d81b60';\r\nexport const pink700 = '#c2185b';\r\nexport const pink800 = '#ad1457';\r\nexport const pink900 = '#880e4f';\r\nexport const pinkA100 = '#ff80ab';\r\nexport const pinkA200 = '#ff4081';\r\nexport const pinkA400 = '#f50057';\r\nexport const pinkA700 = '#c51162';\r\n\r\nexport const purple50 = '#f3e5f5';\r\nexport const purple100 = '#e1bee7';\r\nexport const purple200 = '#ce93d8';\r\nexport const purple300 = '#ba68c8';\r\nexport const purple400 = '#ab47bc';\r\nexport const purple500 = '#9c27b0';\r\nexport const purple600 = '#8e24aa';\r\nexport const purple700 = '#7b1fa2';\r\nexport const purple800 = '#6a1b9a';\r\nexport const purple900 = '#4a148c';\r\nexport const purpleA100 = '#ea80fc';\r\nexport const purpleA200 = '#e040fb';\r\nexport const purpleA400 = '#d500f9';\r\nexport const purpleA700 = '#aa00ff';\r\n\r\nexport const deepPurple50 = '#ede7f6';\r\nexport const deepPurple100 = '#d1c4e9';\r\nexport const deepPurple200 = '#b39ddb';\r\nexport const deepPurple300 = '#9575cd';\r\nexport const deepPurple400 = '#7e57c2';\r\nexport const deepPurple500 = '#673ab7';\r\nexport const deepPurple600 = '#5e35b1';\r\nexport const deepPurple700 = '#512da8';\r\nexport const deepPurple800 = '#4527a0';\r\nexport const deepPurple900 = '#311b92';\r\nexport const deepPurpleA100 = '#b388ff';\r\nexport const deepPurpleA200 = '#7c4dff';\r\nexport const deepPurpleA400 = '#651fff';\r\nexport const deepPurpleA700 = '#6200ea';\r\n\r\nexport const indigo50 = '#e8eaf6';\r\nexport const indigo100 = '#c5cae9';\r\nexport const indigo200 = '#9fa8da';\r\nexport const indigo300 = '#7986cb';\r\nexport const indigo400 = '#5c6bc0';\r\nexport const indigo500 = '#3f51b5';\r\nexport const indigo600 = '#3949ab';\r\nexport const indigo700 = '#303f9f';\r\nexport const indigo800 = '#283593';\r\nexport const indigo900 = '#1a237e';\r\nexport const indigoA100 = '#8c9eff';\r\nexport const indigoA200 = '#536dfe';\r\nexport const indigoA400 = '#3d5afe';\r\nexport const indigoA700 = '#304ffe';\r\n\r\nexport const blue50 = '#e3f2fd';\r\nexport const blue100 = '#bbdefb';\r\nexport const blue200 = '#90caf9';\r\nexport const blue300 = '#64b5f6';\r\nexport const blue400 = '#42a5f5';\r\nexport const blue500 = '#2196f3';\r\nexport const blue600 = '#1e88e5';\r\nexport const blue700 = '#1976d2';\r\nexport const blue800 = '#1565c0';\r\nexport const blue900 = '#0d47a1';\r\nexport const blueA100 = '#82b1ff';\r\nexport const blueA200 = '#448aff';\r\nexport const blueA400 = '#2979ff';\r\nexport const blueA700 = '#2962ff';\r\n\r\nexport const lightBlue50 = '#e1f5fe';\r\nexport const lightBlue100 = '#b3e5fc';\r\nexport const lightBlue200 = '#81d4fa';\r\nexport const lightBlue300 = '#4fc3f7';\r\nexport const lightBlue400 = '#29b6f6';\r\nexport const lightBlue500 = '#03a9f4';\r\nexport const lightBlue600 = '#039be5';\r\nexport const lightBlue700 = '#0288d1';\r\nexport const lightBlue800 = '#0277bd';\r\nexport const lightBlue900 = '#01579b';\r\nexport const lightBlueA100 = '#80d8ff';\r\nexport const lightBlueA200 = '#40c4ff';\r\nexport const lightBlueA400 = '#00b0ff';\r\nexport const lightBlueA700 = '#0091ea';\r\n\r\nexport const cyan50 = '#e0f7fa';\r\nexport const cyan100 = '#b2ebf2';\r\nexport const cyan200 = '#80deea';\r\nexport const cyan300 = '#4dd0e1';\r\nexport const cyan400 = '#26c6da';\r\nexport const cyan500 = '#00bcd4';\r\nexport const cyan600 = '#00acc1';\r\nexport const cyan700 = '#0097a7';\r\nexport const cyan800 = '#00838f';\r\nexport const cyan900 = '#006064';\r\nexport const cyanA100 = '#84ffff';\r\nexport const cyanA200 = '#18ffff';\r\nexport const cyanA400 = '#00e5ff';\r\nexport const cyanA700 = '#00b8d4';\r\n\r\nexport const teal50 = '#e0f2f1';\r\nexport const teal100 = '#b2dfdb';\r\nexport const teal200 = '#80cbc4';\r\nexport const teal300 = '#4db6ac';\r\nexport const teal400 = '#26a69a';\r\nexport const teal500 = '#009688';\r\nexport const teal600 = '#00897b';\r\nexport const teal700 = '#00796b';\r\nexport const teal800 = '#00695c';\r\nexport const teal900 = '#004d40';\r\nexport const tealA100 = '#a7ffeb';\r\nexport const tealA200 = '#64ffda';\r\nexport const tealA400 = '#1de9b6';\r\nexport const tealA700 = '#00bfa5';\r\n\r\nexport const green50 = '#e8f5e9';\r\nexport const green100 = '#c8e6c9';\r\nexport const green200 = '#a5d6a7';\r\nexport const green300 = '#81c784';\r\nexport const green400 = '#66bb6a';\r\nexport const green500 = '#4caf50';\r\nexport const green600 = '#43a047';\r\nexport const green700 = '#388e3c';\r\nexport const green800 = '#2e7d32';\r\nexport const green900 = '#1b5e20';\r\nexport const greenA100 = '#b9f6ca';\r\nexport const greenA200 = '#69f0ae';\r\nexport const greenA400 = '#00e676';\r\nexport const greenA700 = '#00c853';\r\n\r\nexport const lightGreen50 = '#f1f8e9';\r\nexport const lightGreen100 = '#dcedc8';\r\nexport const lightGreen200 = '#c5e1a5';\r\nexport const lightGreen300 = '#aed581';\r\nexport const lightGreen400 = '#9ccc65';\r\nexport const lightGreen500 = '#8bc34a';\r\nexport const lightGreen600 = '#7cb342';\r\nexport const lightGreen700 = '#689f38';\r\nexport const lightGreen800 = '#558b2f';\r\nexport const lightGreen900 = '#33691e';\r\nexport const lightGreenA100 = '#ccff90';\r\nexport const lightGreenA200 = '#b2ff59';\r\nexport const lightGreenA400 = '#76ff03';\r\nexport const lightGreenA700 = '#64dd17';\r\n\r\nexport const lime50 = '#f9fbe7';\r\nexport const lime100 = '#f0f4c3';\r\nexport const lime200 = '#e6ee9c';\r\nexport const lime300 = '#dce775';\r\nexport const lime400 = '#d4e157';\r\nexport const lime500 = '#cddc39';\r\nexport const lime600 = '#c0ca33';\r\nexport const lime700 = '#afb42b';\r\nexport const lime800 = '#9e9d24';\r\nexport const lime900 = '#827717';\r\nexport const limeA100 = '#f4ff81';\r\nexport const limeA200 = '#eeff41';\r\nexport const limeA400 = '#c6ff00';\r\nexport const limeA700 = '#aeea00';\r\n\r\nexport const yellow50 = '#fffde7';\r\nexport const yellow100 = '#fff9c4';\r\nexport const yellow200 = '#fff59d';\r\nexport const yellow300 = '#fff176';\r\nexport const yellow400 = '#ffee58';\r\nexport const yellow500 = '#ffeb3b';\r\nexport const yellow600 = '#fdd835';\r\nexport const yellow700 = '#fbc02d';\r\nexport const yellow800 = '#f9a825';\r\nexport const yellow900 = '#f57f17';\r\nexport const yellowA100 = '#ffff8d';\r\nexport const yellowA200 = '#ffff00';\r\nexport const yellowA400 = '#ffea00';\r\nexport const yellowA700 = '#ffd600';\r\n\r\nexport const amber50 = '#fff8e1';\r\nexport const amber100 = '#ffecb3';\r\nexport const amber200 = '#ffe082';\r\nexport const amber300 = '#ffd54f';\r\nexport const amber400 = '#ffca28';\r\nexport const amber500 = '#ffc107';\r\nexport const amber600 = '#ffb300';\r\nexport const amber700 = '#ffa000';\r\nexport const amber800 = '#ff8f00';\r\nexport const amber900 = '#ff6f00';\r\nexport const amberA100 = '#ffe57f';\r\nexport const amberA200 = '#ffd740';\r\nexport const amberA400 = '#ffc400';\r\nexport const amberA700 = '#ffab00';\r\n\r\nexport const orange50 = '#fff3e0';\r\nexport const orange100 = '#ffe0b2';\r\nexport const orange200 = '#ffcc80';\r\nexport const orange300 = '#ffb74d';\r\nexport const orange400 = '#ffa726';\r\nexport const orange500 = '#ff9800';\r\nexport const orange600 = '#fb8c00';\r\nexport const orange700 = '#f57c00';\r\nexport const orange800 = '#ef6c00';\r\nexport const orange900 = '#e65100';\r\nexport const orangeA100 = '#ffd180';\r\nexport const orangeA200 = '#ffab40';\r\nexport const orangeA400 = '#ff9100';\r\nexport const orangeA700 = '#ff6d00';\r\n\r\nexport const deepOrange50 = '#fbe9e7';\r\nexport const deepOrange100 = '#ffccbc';\r\nexport const deepOrange200 = '#ffab91';\r\nexport const deepOrange300 = '#ff8a65';\r\nexport const deepOrange400 = '#ff7043';\r\nexport const deepOrange500 = '#ff5722';\r\nexport const deepOrange600 = '#f4511e';\r\nexport const deepOrange700 = '#e64a19';\r\nexport const deepOrange800 = '#d84315';\r\nexport const deepOrange900 = '#bf360c';\r\nexport const deepOrangeA100 = '#ff9e80';\r\nexport const deepOrangeA200 = '#ff6e40';\r\nexport const deepOrangeA400 = '#ff3d00';\r\nexport const deepOrangeA700 = '#dd2c00';\r\n\r\nexport const brown50 = '#efebe9';\r\nexport const brown100 = '#d7ccc8';\r\nexport const brown200 = '#bcaaa4';\r\nexport const brown300 = '#a1887f';\r\nexport const brown400 = '#8d6e63';\r\nexport const brown500 = '#795548';\r\nexport const brown600 = '#6d4c41';\r\nexport const brown700 = '#5d4037';\r\nexport const brown800 = '#4e342e';\r\nexport const brown900 = '#3e2723';\r\n\r\nexport const blueGrey50 = '#eceff1';\r\nexport const blueGrey100 = '#cfd8dc';\r\nexport const blueGrey200 = '#b0bec5';\r\nexport const blueGrey300 = '#90a4ae';\r\nexport const blueGrey400 = '#78909c';\r\nexport const blueGrey500 = '#607d8b';\r\nexport const blueGrey600 = '#546e7a';\r\nexport const blueGrey700 = '#455a64';\r\nexport const blueGrey800 = '#37474f';\r\nexport const blueGrey900 = '#263238';\r\n\r\nexport const grey50 = '#fafafa';\r\nexport const grey100 = '#f5f5f5';\r\nexport const grey200 = '#eeeeee';\r\nexport const grey300 = '#e0e0e0';\r\nexport const grey400 = '#bdbdbd';\r\nexport const grey500 = '#9e9e9e';\r\nexport const grey600 = '#757575';\r\nexport const grey700 = '#616161';\r\nexport const grey800 = '#424242';\r\nexport const grey900 = '#212121';\r\n\r\nexport const black = '#000000';\r\nexport const white = '#ffffff';\r\n\r\nexport const transparent = 'rgba(0, 0, 0, 0)';\r\nexport const fullBlack = 'rgba(0, 0, 0, 1)';\r\nexport const darkBlack = 'rgba(0, 0, 0, 0.87)';\r\nexport const lightBlack = 'rgba(0, 0, 0, 0.54)';\r\nexport const minBlack = 'rgba(0, 0, 0, 0.26)';\r\nexport const faintBlack = 'rgba(0, 0, 0, 0.12)';\r\nexport const fullWhite = 'rgba(255, 255, 255, 1)';\r\nexport const darkWhite = 'rgba(255, 255, 255, 0.87)';\r\nexport const lightWhite = 'rgba(255, 255, 255, 0.54)';\n\n\n// WEBPACK FOOTER //\n// ./src/js/customtheme/colors.js","import Superlogin from \"superlogin-client\";\r\nimport createHashHistory from \"history/lib/createHashHistory\";\r\nimport createStore from \"reflux-core/lib/createStore\";\r\nimport ContextProvider from \"../helpers/contexts/contextprovider\";\r\nimport PreferenceProvider from \"../helpers/preferenceprovider\";\r\nimport ErrorProvider from \"../helpers/errors/errorsprovider\";\r\nimport TimeTrackerProvider from \"../helpers/timetrackerprovider\";\r\nimport GroupsAndRecipientsProvider from \"../helpers/contacts/groupsandrecipientsprovider\";\r\nimport ImageProvider from \"../helpers/image/imageprovider\";\r\nimport SurveyDataProvider from \"../helpers/surveydataprovider\";\r\nimport PublishedSurveyResponeseProvider from \"../helpers/publishedsurveys/publishedsurveyresponseprovider\";\r\nimport PublishedSurveyProvider from \"../helpers/publishedsurveys/publishedsurveyprovider\";\r\nimport DefaultPaginatorProvider from \"../helpers/paginatorprovider\";\r\nimport GroupsPaginatorProvider from \"../helpers/groupspaginatorprovider\";\r\nimport ResponsesPaginatorProvider from \"../helpers/responsespaginatorprovider\";\r\nimport ContactBuilder from \"../helpers/contacts/contactbuilder\";\r\nimport SurveyModelBuilder from \"../helpers/surveymodelbuilder\";\r\nimport PublishedSurveyModelProvider from \"../helpers/publishedsurveys/publishedsurveymodelprovider\";\r\nimport GuestProfile from \"../helpers/guestprofile\";\r\nimport Immutable from \"immutable\";\r\nimport _ from \"lodash\";\r\nimport AppActions from \"../actions/appactions\";\r\nimport UserContext from \"../helpers/contexts/usercontext\";\r\nimport i18n from \"../helpers/i18n.js\";\r\nimport Logger from \"../helpers/logger.js\";\r\nimport DIService from \"../helpers/diservice\";\r\nimport XHR from \"i18next-xhr-backend\";\r\nimport { OAuth, clientConfig, userDb } from \"../appsettings.json\";\r\nimport AuthActions from \"../actions/authactions.js\";\r\nimport url from \"url\";\r\nimport { Notifications, skipSignOutRoutes } from \"../appsettings.json\";\r\nimport NotificationActions from \"../actions/notificationactions.js\";\r\nconst contactBuilder = ContactBuilder(),\r\n  surveyModelBuilder = SurveyModelBuilder(),\r\n  publishedSurveyModelProvider = PublishedSurveyModelProvider(),\r\n  guestUser = \"guest\",\r\n  AuthStates = {\r\n    SIGNED_IN: \"signed-in\",\r\n    SIGNING_IN: \"signing-in\",\r\n    SIGNED_OUT: \"signed-out\",\r\n    SIGNING_OUT: \"signing-out\",\r\n    ERROR: \"error\"\r\n  },\r\n  AuthProviders = [\r\n    {\r\n      name: \"google\",\r\n      title: \"Google\",\r\n      logo: \"icon-google\"\r\n    },\r\n    {\r\n      name: \"facebook\",\r\n      title: \"Facebook\",\r\n      logo: \"icon-facebook\"\r\n    }\r\n  ],\r\n  filterProviders = function(providers) {\r\n    return _.takeWhile(providers, provider => {\r\n      return (\r\n        _.findKey(OAuth, client => {\r\n          return client.name == provider.name;\r\n        }) != undefined\r\n      );\r\n    });\r\n  },\r\n  defaultData = Immutable.fromJS({\r\n    AuthStates: AuthStates,\r\n    AuthProviders: filterProviders(AuthProviders),\r\n    authState: AuthStates.SIGNED_OUT,\r\n    provider: null,\r\n    error: null,\r\n    userProfile: GuestProfile\r\n  }),\r\n  AuthStore = createStore({\r\n    listenables: AuthActions,\r\n    state: defaultData,\r\n    provider: null,\r\n    _subscribers: Immutable.Map({\r\n      onbeforelogout: [],\r\n      onafterlogout: []\r\n    }),\r\n    onLogout: false,\r\n    updateState: function(newState, trigger) {\r\n      this.state = newState;\r\n      if (trigger) {\r\n        this.trigger(this.state);\r\n      }\r\n    },\r\n    getInitialState: function() {\r\n      return this.state;\r\n    },\r\n    subscribe: function(event, fn) {\r\n      if (this._subscribers.get(event).indexOf(fn) == -1) {\r\n        this._subscribers.get(event).push(fn);\r\n      }\r\n    },\r\n    unsubscribe: function(event, fn) {\r\n      let index = this._subscribers.get(event).indexOf(fn);\r\n      if (index > -1) {\r\n        this._subscribers.get(event).splice(index, 1);\r\n      }\r\n    },\r\n    triggerEvent: function(event, ...payload) {\r\n      return this._subscribers.get(event).reduce((acc, handler) => {\r\n        if (!handler(...payload)) {\r\n          acc = false;\r\n        }\r\n        return acc;\r\n      }, true);\r\n    },\r\n    routeToSurveys: function() {\r\n      let currentLocationArr = window.location.href.split(\"/\"),\r\n        skipRoute = skipSignOutRoutes.reduce((result, testRoute) => {\r\n          let index = _.indexOf(currentLocationArr, testRoute);\r\n          if (index != -1) {\r\n            result = true;\r\n          }\r\n          return result;\r\n        }, false);\r\n      if (skipRoute) return;\r\n      let history = createHashHistory({\r\n          queryKey: false\r\n        }),\r\n        location = history.createLocation(\"/surveys\");\r\n      history.push(location);\r\n    },\r\n    init: function() {\r\n      Superlogin.configure(clientConfig);\r\n      if (Superlogin.authenticated()) {\r\n        this._getProfile()\r\n          .then(profile => {\r\n            this.updateState(\r\n              this.state.mergeDeep({\r\n                authState: AuthStates.SIGNED_IN,\r\n                userProfile: profile\r\n              }),\r\n              true\r\n            );\r\n            this.registerContextAndProviders(profile);\r\n            AuthActions.userChanged(GuestProfile, profile, true);\r\n          })\r\n          .catch(err => Logger.log);\r\n      } else {\r\n        this.registerContextAndProviders(GuestProfile);\r\n        AuthActions.userChanged(null, GuestProfile);\r\n      }\r\n    },\r\n    getProperDBURL: function(dbURL) {\r\n      let urlObj = url.parse(dbURL);\r\n      urlObj.protocol = window.location.protocol;\r\n      urlObj.host = window.location.host;\r\n      urlObj.port = window.location.port || 443;\r\n      urlObj.pathname = `\\db${urlObj.pathname}`;\r\n      return url.format(urlObj);\r\n    },\r\n    _getProfile: function() {\r\n      return Superlogin.getHttp()\r\n        .get(\"user/profile\")\r\n        .then(res => {\r\n          let profile = res.data,\r\n            dbURL = Superlogin.getDbUrl(userDb);\r\n          profile[\"userDbUrl\"] = this.getProperDBURL(dbURL);\r\n          profile[\"isGuest\"] = false;\r\n          return profile;\r\n        });\r\n    },\r\n    login: function(provider) {\r\n      this.updateState(\r\n        this.state.setIn([\"authState\"], AuthStates.SIGNING_IN),\r\n        true\r\n      );\r\n      Superlogin.socialAuth(provider)\r\n        .then(() => this._getProfile())\r\n        .then(profile => {\r\n          this.updateState(\r\n            this.state.mergeDeep({\r\n              authState: AuthStates.SIGNED_IN,\r\n              userProfile: profile\r\n            }),\r\n            true\r\n          );\r\n          this.registerContextAndProviders(profile);\r\n          AuthActions.userChanged(GuestProfile, profile);\r\n          NotificationActions.notify(\r\n            Notifications.INFO,\r\n            i18n.t(\"You are successfully logged in\")\r\n          );\r\n          Logger.log(\"logged-in\");\r\n        })\r\n        .catch(err => {\r\n          Logger.error(err);\r\n          NotificationActions.notify(\r\n            Notifications.ERROR,\r\n            i18n.t(`The Login wasn't completed`)\r\n          );\r\n          this.updateState(\r\n            this.state.mergeDeep({\r\n              authState: AuthStates.SIGNED_OUT,\r\n              userProfile: GuestProfile\r\n            }),\r\n            true\r\n          );\r\n        });\r\n    },\r\n    logout: function(...payload) {\r\n      this.updateState(\r\n        this.state.setIn([\"authState\"], AuthStates.SIGNING_IN),\r\n        true\r\n      );\r\n      //AuthActions.onBeforeLogout();\r\n      if (this.onLogout) {\r\n        return;\r\n      }\r\n      this.onLogout = true;\r\n      if (!this.triggerEvent(\"onbeforelogout\", ...payload)) {\r\n        this.onLogout = false;\r\n        return;\r\n      }\r\n      DIService.get(\"UserContext\")\r\n        .then(uc => uc.destroy())\r\n        .then(() => Superlogin.logout(\"logout\"))\r\n        .then(() => {\r\n          this.registerContextAndProviders(GuestProfile);\r\n          AuthActions.userChanged(\r\n            this.state.getIn([\"userProfile\"]).toJSON(),\r\n            GuestProfile\r\n          );\r\n          this.updateState(\r\n            this.state.mergeDeep({\r\n              authState: AuthStates.SIGNED_OUT,\r\n              userProfile: GuestProfile\r\n            }),\r\n            true\r\n          );\r\n          this.onLogout = false;\r\n          //AuthActions.onAfterLogout();\r\n          this.triggerEvent(\"onafterlogout\", ...payload);\r\n          this.routeToSurveys();\r\n          NotificationActions.notify(\r\n            Notifications.INFO,\r\n            i18n.t(`You have successfully logged out`)\r\n          );\r\n          this.updateState(\r\n            this.state.setIn([\"authState\"], AuthStates.SIGNED_OUT),\r\n            true\r\n          );\r\n        })\r\n        .catch(error => {\r\n          this.onLogout = false;\r\n          Logger.error(error);\r\n          this.updateState(\r\n            this.state.mergeDeep({\r\n              authState: AuthStates.ERROR,\r\n              error: { message: \"An error occurred during logout\" }\r\n            }),\r\n            true\r\n          );\r\n          this.updateState(\r\n            this.state.setIn([\"authState\"], AuthStates.SIGNED_IN),\r\n            true\r\n          );\r\n        });\r\n    },\r\n    registerContextAndProviders(profile) {\r\n      DIService.register(\r\n        \"UserContext\",\r\n        ContextProvider.getUserContext(profile)\r\n      );\r\n      DIService.register(\r\n        \"GroupsAndRecipientsProvider\",\r\n        new GroupsAndRecipientsProvider(DIService, contactBuilder)\r\n      );\r\n      DIService.register(\r\n        \"SurveyDataProvider\",\r\n        new SurveyDataProvider(DIService, surveyModelBuilder)\r\n      );\r\n      DIService.register(\r\n        \"PublishedSurveyProvider\",\r\n        new PublishedSurveyProvider(DIService, publishedSurveyModelProvider)\r\n      );\r\n      DIService.register(\r\n        \"PreferenceProvider\",\r\n        new PreferenceProvider(DIService)\r\n      );\r\n      DIService.register(\r\n        \"PublishedSurveyResponeseProvider\",\r\n        new PublishedSurveyResponeseProvider(DIService)\r\n      );\r\n      DIService.register(\"ImageProvider\", new ImageProvider(DIService));\r\n      DIService.register(\r\n        \"DefaultPaginatorProvider\",\r\n        new DefaultPaginatorProvider(DIService)\r\n      );\r\n      DIService.register(\r\n        \"GroupsPaginatorProvider\",\r\n        new GroupsPaginatorProvider(DIService)\r\n      );\r\n      DIService.register(\r\n        \"ResponsesPaginatorProvider\",\r\n        new ResponsesPaginatorProvider(DIService)\r\n      );\r\n      DIService.register(\"ErrorProvider\", new ErrorProvider(DIService));\r\n      DIService.register(\r\n        \"TimeTrackerProvider\",\r\n        new TimeTrackerProvider(DIService)\r\n      );\r\n    }\r\n  });\r\n\r\nexport default AuthStore;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/stores/authstore.js","import Reflux from 'reflux-core';\r\nconst SurveyRunnerActions = Reflux.createActions(\r\n\t[\"setResponse\", \"startTest\", \"stopTest\", \"next\", \"previous\", \"finish\", \"setDisable\"]\r\n);\r\n\r\nexport default SurveyRunnerActions;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/actions/surveyrunneractions.js","import {Component, PropTypes} from 'react';\r\nimport getCustomTheme from './getcustomtheme.js';\r\n\r\nclass CustomThemeProvider extends Component {\r\n\r\n  static propTypes = {\r\n    children: PropTypes.element,\r\n    customTheme: PropTypes.object,\r\n  };\r\n\r\n  static childContextTypes = {\r\n    customTheme: PropTypes.object.isRequired,\r\n  };\r\n\r\n  getChildContext() {\r\n    return {\r\n      customTheme: this.props.customTheme || getCustomTheme(),\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return this.props.children;\r\n  }\r\n}\r\n\r\nexport default CustomThemeProvider;\n\n\n// WEBPACK FOOTER //\n// ./src/js/customtheme/customthemeprovider.js","import React from \"react\";\r\nimport connect from \"reflux/src/connect\";\r\nimport PureRenderMixin from \"react-addons-pure-render-mixin\";\r\nimport MediaQuery from \"react-responsive\";\r\nconst DetectDevice = React.createClass({\r\n  mixins: [PureRenderMixin],\r\n  childContextTypes: {\r\n    location: React.PropTypes.object,\r\n    history: React.PropTypes.object\r\n  },\r\n\r\n  getChildContext: function() {\r\n    return { location: this.props.location, history: this.props.history };\r\n  },\r\n  getChildWithProps: function(isMobile, isShort) {\r\n    return React.Children.map(this.props.children, function(child) {\r\n      return React.cloneElement(child, {\r\n        isMobile,\r\n        isShort\r\n      });\r\n    });\r\n  },\r\n  render: function() {\r\n    return (\r\n      <div>\r\n        <MediaQuery query=\"(min-device-width: 1224px)\">\r\n          <MediaQuery query=\"(min-width: 808px)\">\r\n            {this.getChildWithProps(false)}\r\n          </MediaQuery>\r\n          <MediaQuery query=\"(max-width: 807px) and (min-width: 471px)\">\r\n            {this.getChildWithProps(true)}\r\n          </MediaQuery>\r\n          <MediaQuery query=\"(max-width: 470px)\">\r\n            {this.getChildWithProps(true, true)}\r\n          </MediaQuery>\r\n        </MediaQuery>\r\n        <MediaQuery query=\"(max-device-width: 1224px)\">\r\n          <MediaQuery query=\"(min-width: 471px)\">\r\n            {this.getChildWithProps(true)}\r\n          </MediaQuery>\r\n          <MediaQuery query=\"(max-width: 470px)\">\r\n            {this.getChildWithProps(true, true)}\r\n          </MediaQuery>\r\n        </MediaQuery>\r\n      </div>\r\n    );\r\n  }\r\n});\r\nexport default DetectDevice;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/detectdevice.jsx","import Reflux from \"reflux-core\";\r\n\r\nconst ErrorActions = Reflux.createActions([\"registerError\", \"postToServer\"]);\r\n\r\nexport default ErrorActions;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/actions/erroractions.js","module.exports = {\n\t\"AppTitle\": \"quizMe\",\n\t\"Emboss\": \"rgba(255, 255, 255, 0.0980392) -1px -1px 1px, rgba(0, 0, 0, 0.498039) 1px 1px 1px\",\n\t\"markdownGuideLink\": \"https://guides.github.com/features/mastering-markdown\",\n\t\"DisabledStyle\": {\n\t\t\"opacity\": 0.2\n\t},\n\t\"SupportedLanguages\": {\n\t\t\"English\": \"en-US\",\n\t\t\"हिंदी\": \"hi-IN\"\n\t},\n\t\"SupportedLanguagesCollection\": [\n\t\t\"en-US\",\n\t\t\"hi-IN\"\n\t],\n\t\"SurveyModelDefaults\": {\n\t\t\"SchemaRevision\": 1,\n\t\t\"DataStoreKey\": \"SurveyModel\",\n\t\t\"SurveyCollectionKey\": \"Surveys\",\n\t\t\"MaxSurveyTitleLength\": 100,\n\t\t\"MaxSurveySubTitleLength\": 1000,\n\t\t\"MaxPageTitleLength\": 100,\n\t\t\"MaxPageSubTitleLength\": 1000\n\t},\n\t\"OAuth\": {\n\t\t\"Google\": {\n\t\t\t\"name\": \"google\"\n\t\t},\n\t\t\"Facebook\": {\n\t\t\t\"name\": \"facebook\"\n\t\t}\n\t},\n\t\"CouchDbUrl\": \"http://localhost:5984/\",\n\t\"siteURL\": \"https://survey.bitpod.io\",\n\t\"Notifications\": {\n\t\t\"INFO\": {\n\t\t\t\"lable\": \"info\",\n\t\t\t\"timespan\": 3000\n\t\t},\n\t\t\"SUCCESS\": {\n\t\t\t\"lable\": \"success\",\n\t\t\t\"timespan\": 3000\n\t\t},\n\t\t\"WARNING\": {\n\t\t\t\"lable\": \"warning\",\n\t\t\t\"timespan\": 4000\n\t\t},\n\t\t\"ERROR\": {\n\t\t\t\"lable\": \"error\",\n\t\t\t\"timespan\": 4000\n\t\t},\n\t\t\"LONGINFO\": {\n\t\t\t\"lable\": \"info\",\n\t\t\t\"timespan\": 10000\n\t\t}\n\t},\n\t\"userDb\": \"survey\",\n\t\"clientConfig\": {\n\t\t\"baseUrl\": \"/auth/\",\n\t\t\"endpoints\": [],\n\t\t\"noDefaultEndpoint\": false,\n\t\t\"storage\": \"local\",\n\t\t\"providers\": [\n\t\t\t\"facebook\",\n\t\t\t\"google\"\n\t\t],\n\t\t\"checkExpired\": \"stateChange\",\n\t\t\"refreshThreshold\": 0.5\n\t},\n\t\"tag\": {\n\t\t\"delimiters\": \",|;\",\n\t\t\"actions\": {\n\t\t\t\"add\": \"add\",\n\t\t\t\"remove\": \"remove\"\n\t\t}\n\t},\n\t\"contactView\": {\n\t\t\"navigation\": {\n\t\t\t\"pageSize\": 5\n\t\t}\n\t},\n\t\"allowedImageFileType\": \"image/jpeg, image/png\",\n\t\"fonts\": {\n\t\t\"xxx_small\": \"20%\",\n\t\t\"xx_small\": \"30%\",\n\t\t\"x_small\": \"50%\",\n\t\t\"smaller\": \"70%\",\n\t\t\"small\": \"80%\",\n\t\t\"medium\": \"110%\",\n\t\t\"normal\": \"100%\",\n\t\t\"large\": \"120%\",\n\t\t\"larger\": \"130%\",\n\t\t\"x_large\": \"150%\",\n\t\t\"xx_large\": \"170%\",\n\t\t\"xxx_large\": \"190%\",\n\t\t\"xxxx_large\": \"200%\"\n\t},\n\t\"Placeholders\": {\n\t\t\"text\": \"Section Title\",\n\t\t\"image\": \"Image\",\n\t\t\"question\": \"Question title\"\n\t},\n\t\"distributionTypes\": {\n\t\t\"commonlink\": \"commonlink\",\n\t\t\"yourcontacts\": \"yourcontacts\"\n\t},\n\t\"shortUrl\": {\n\t\t\"apiKey\": \"AIzaSyBKAL6miYV8VMMDsooQTefxrfxkrvzqwCQ\"\n\t},\n\t\"googleMap\": {\n\t\t\"apiKey\": \"AIzaSyBJGXlxHBAbNnPk65friDQKqbqLqwnvwog\"\n\t},\n\t\"mapIcons\": {\n\t\t\"grayIcon\": \"../../grey-dot.png\",\n\t\t\"greenIcon\": \"../../green-dot.png\",\n\t\t\"redIcon\": \"../../maroon-dot.png\",\n\t\t\"blueIcon\": \"../../blue-dot.png\",\n\t\t\"selectedUserLocationIcon\": \"../../selectedUserLocation.png\",\n\t\t\"addUserLocationIcon\": \"../../addUserLocation.png\"\n\t},\n\t\"locationRange\": {\n\t\t\"min\": 10,\n\t\t\"max\": 50\n\t},\n\t\"locationSelecteionLimit\": 5,\n\t\"defaultMapCenter\": {\n\t\t\"latitude\": 40.7127837,\n\t\t\"longitude\": -74.00594130000002\n\t},\n\t\"locationDifferenceLimit\": 10,\n\t\"providerLinks\": {\n\t\t\"google\": {\n\t\t\t\"label\": \"www.google.com\",\n\t\t\t\"link\": \"https://www.google.com\"\n\t\t},\n\t\t\"facebook\": {\n\t\t\t\"label\": \"www.facebook.com\",\n\t\t\t\"link\": \"https://www.facebook.com\"\n\t\t}\n\t},\n\t\"mediaAPIEndpoint\": \"/media\",\n\t\"sharedPath\": \"message/shared\",\n\t\"skipSignOutRoutes\": [\n\t\t\"run\",\n\t\t\"message\"\n\t]\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/appsettings.json\n// module id = 28\n// module chunks = 3","import Reflux from 'reflux-core';\r\nconst AuthActions = Reflux.createActions(\r\n    [\"login\", \"logout\", \"userChanged\", \"onBeforeLogout\", \"onAfterLogout\"]\r\n);\r\n\r\nexport default AuthActions;\n\n\n// WEBPACK FOOTER //\n// ./src/js/actions/authactions.js","import AbstractDataProvider from \"../abstractdataprovider\";\r\nimport Logger from \"../logger.js\";\r\nimport _ from \"lodash\";\r\nexport default class PaginatorProvider extends AbstractDataProvider {\r\n  constructor(container) {\r\n    super(container);\r\n  }\r\n  registerListener(filterFunction, callback) {\r\n    return this.getUserContext().then(userContext =>\r\n      userContext.registerListener(filterFunction, callback));\r\n  }\r\n  unregisterListener(filterFunction, callback) {\r\n    return this.getUserContext().then(userContext =>\r\n      userContext.unregisterListener(filterFunction, callback));\r\n  }\r\n  _find(selector) {\r\n    return this.getUserContext().then(userContext =>\r\n      userContext.DB.find(selector));\r\n  }\r\n  get(selector, skip, limit) {\r\n    selector = _.merge(selector, { skip, limit });\r\n    return this._find(selector).then(result => result.docs);\r\n  }\r\n  filter(selector, skip, limit) {\r\n    selector = _.merge(selector, { skip, limit });\r\n    return this._find(selector).then(result => result.docs);\r\n  }\r\n  getIndex(selector, doc, isEqual) {\r\n    return this._find(selector).then(result => {\r\n      let { docs } = result;\r\n      return _.findIndex(docs, lDoc => isEqual(lDoc, doc));\r\n    });\r\n  }\r\n  getQueryCount(selector) {\r\n    return this._find(selector).then(result => result.docs.length);\r\n  }\r\n  getFilterCount(selector) {\r\n    return this._find(selector).then(result => result.docs.length);\r\n  }\r\n  destroy() {\r\n    Logger.log(\"Logged off\");\r\n  }\r\n  initialSyncCompleted() {\r\n    Logger.debug(\"[SurveyDataProvider]: initialSyncCompleted\");\r\n  }\r\n  deltaSyncCompleted() {\r\n    Logger.debug(\"[SurveyDataProvider]: deltaSyncCompleted\");\r\n  }\r\n  initialSyncFailed() {\r\n    Logger.debug(\"[SurveyDataProvider]: initialSyncFailed\");\r\n  }\r\n  deltaSyncFailed() {\r\n    Logger.debug(\"[SurveyDataProvider]: deltaSyncFailed\");\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/paginatorprovider/index.js","import AbstractDataProvider from \"../abstractdataprovider\";\r\nimport Logger from \"../logger.js\";\r\nimport Promise from \"bluebird\";\r\nimport settleAll from \"../settleAll\";\r\nimport _ from \"lodash\";\r\nexport default class GroupsPaginatorProvider extends AbstractDataProvider {\r\n  constructor(container) {\r\n    super(container);\r\n  }\r\n  registerListener(filterFunction, callback) {\r\n    return this.getUserContext().then(userContext =>\r\n      userContext.registerListener(filterFunction, callback)\r\n    );\r\n  }\r\n  unregisterListener(filterFunction, callback) {\r\n    return this.getUserContext().then(userContext =>\r\n      userContext.unregisterListener(filterFunction, callback)\r\n    );\r\n  }\r\n  _find(selector) {}\r\n  _fetchGroups() {\r\n    return this.getUserContext()\r\n      .then(userContext =>\r\n        userContext.DB.find({\r\n          selector: {\r\n            _id: \"groups\"\r\n          },\r\n          fields: [\"groups\"]\r\n        })\r\n      )\r\n      .then(result => (result.docs[0] && result.docs[0].groups) || []);\r\n  }\r\n  get(selector, skip, limit) {\r\n    return this._fetchGroups().then(groups =>\r\n      settleAll(\r\n        groups.map(group =>\r\n          Promise.try(() => this.getGroupWithContactsCount(group))\r\n        )\r\n      ).then(outputs =>\r\n        _.compact(outputs.map(output => !output.isRejected() && output.value()))\r\n      )\r\n    );\r\n  }\r\n  getGroupWithContactsCount(group) {\r\n    return this.getRecipientsByGroup(group).then(result => ({\r\n      [group]: result.docs.length\r\n    }));\r\n  }\r\n  getRecipientsByGroup(group) {\r\n    return this.getUserContext().then(userContext =>\r\n      userContext.DB.find({\r\n        selector: {\r\n          docType: \"contact\",\r\n          groups: { $elemMatch: { $eq: group } }\r\n        },\r\n        fields: [\"_id\"]\r\n      })\r\n    );\r\n  }\r\n  filter(selector, skip, limit) {}\r\n  getIndex(selector, doc, isEqual) {}\r\n  getQueryCount(selector) {\r\n    return Promise.resolve(0);\r\n  }\r\n  getFilterCount(selector) {}\r\n  destroy() {\r\n    Logger.log(\"Logged off\");\r\n  }\r\n  initialSyncCompleted() {\r\n    Logger.debug(\"[SurveyDataProvider]: initialSyncCompleted\");\r\n  }\r\n  deltaSyncCompleted() {\r\n    Logger.debug(\"[SurveyDataProvider]: deltaSyncCompleted\");\r\n  }\r\n  initialSyncFailed() {\r\n    Logger.debug(\"[SurveyDataProvider]: initialSyncFailed\");\r\n  }\r\n  deltaSyncFailed() {\r\n    Logger.debug(\"[SurveyDataProvider]: deltaSyncFailed\");\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/groupspaginatorprovider/index.js","import AbstractDataProvider from \"../abstractdataprovider\";\r\nimport Logger from \"../logger.js\";\r\nimport Promise from \"bluebird\";\r\nimport settleAll from \"../settleAll\";\r\nimport _ from \"lodash\";\r\nimport im from \"immutable\";\r\nimport PublishedSurveyModelProvider\r\n  from \"../publishedsurveys/publishedsurveymodelprovider\";\r\nexport default class ResponsesPaginatorProvider extends AbstractDataProvider {\r\n  constructor(container) {\r\n    super(container);\r\n    this._publidhedSurveys = im.Map();\r\n    this._publishedSurveyModelProvider = PublishedSurveyModelProvider();\r\n  }\r\n  registerListener(filterFunction, callback) {\r\n    return this.getUserContext().then(userContext =>\r\n      userContext.registerListener(filterFunction, callback)\r\n    );\r\n  }\r\n  unregisterListener(filterFunction, callback) {\r\n    return this.getUserContext().then(userContext =>\r\n      userContext.unregisterListener(filterFunction, callback)\r\n    );\r\n  }\r\n  _find(selector) {}\r\n  _fetchPublishedSurvey(id) {\r\n    return this.getUserContext()\r\n      .then(userContext =>\r\n        userContext.DB.allDocs({\r\n          key: id,\r\n          include_docs: true\r\n        })\r\n      )\r\n      .then(\r\n        result =>\r\n          result.rows[0] &&\r\n          this._publishedSurveyModelProvider.fromModel(result.rows[0].doc)\r\n      );\r\n  }\r\n  getResponses(id) {\r\n    let responses =\r\n      this._publidhedSurveys.get(id) &&\r\n      this._publidhedSurveys\r\n        .get(id)\r\n        .getContacts()\r\n        .sortBy(contact => contact.obtainedMarks || 0);\r\n    return responses && responses.reverse();\r\n  }\r\n  get(id, skip, limit) {\r\n    let responses = this.getResponses(id) || im.Map();\r\n    return Promise.resolve(responses.skip(skip).take(limit).toArray());\r\n  }\r\n  filter(selector, skip, limit) {}\r\n  getIndex(selector, doc, isEqual) {}\r\n  getQueryCount(id) {\r\n    return this._fetchPublishedSurvey(id).then(publishedSurvey => {\r\n      this._publidhedSurveys = this._publidhedSurveys.set(id, publishedSurvey);\r\n      return publishedSurvey.getContacts().size;\r\n    });\r\n  }\r\n  getFilterCount(selector) {}\r\n  destroy() {\r\n    Logger.log(\"Logged off\");\r\n  }\r\n  initialSyncCompleted() {\r\n    Logger.debug(\"[SurveyDataProvider]: initialSyncCompleted\");\r\n  }\r\n  deltaSyncCompleted() {\r\n    Logger.debug(\"[SurveyDataProvider]: deltaSyncCompleted\");\r\n  }\r\n  initialSyncFailed() {\r\n    Logger.debug(\"[SurveyDataProvider]: initialSyncFailed\");\r\n  }\r\n  deltaSyncFailed() {\r\n    Logger.debug(\"[SurveyDataProvider]: deltaSyncFailed\");\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/responsespaginatorprovider/index.js","import ObjectID from \"bson-objectid\";\r\nimport _ from \"lodash\";\r\nimport AbstractDataProvider from \"../../abstractdataprovider\";\r\nimport Logger from \"../../logger.js\";\r\nvar defaultPreferences = { language: \"en-US\", questionMode: false };\r\n\r\nexport default class ErrorProvider extends AbstractDataProvider {\r\n  constructor(container) {\r\n    super(container);\r\n  }\r\n  reportErrors(errors) {\r\n    return this.getUserContext().then(userContext => {\r\n      return userContext.saveDocs(errors);\r\n    });\r\n  }\r\n\r\n  destroy() {\r\n    Logger.debug(\"[ErrorProvider]: destroy\");\r\n  }\r\n  initialSyncCompleted() {\r\n    Logger.debug(\"[ErrorProvider]: initialSyncCompleted\");\r\n  }\r\n  deltaSyncCompleted() {\r\n    Logger.debug(\"[ErrorProvider]: deltaSyncCompleted\");\r\n  }\r\n  initialSyncFailed() {\r\n    Logger.debug(\"[ErrorProvider]: initialSyncFailed\");\r\n  }\r\n  deltaSyncFailed() {\r\n    Logger.debug(\"[ErrorProvider]: deltaSyncFailed\");\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/errors/errorsprovider/index.js","import UserContext from '../usercontext';\r\nconst ContextProvider = {\r\n    \"userContexts\": {},\r\n    \"getUserContext\": function (userProfile) {\r\n        if (this.userContexts[userProfile._id]) {\r\n            return this.userContexts[userProfile._id].then((uc) => {\r\n                return uc.isValid() ? uc : this.userContexts[userProfile._id] = new UserContext(userProfile)._initialize();\r\n            });\r\n        }\r\n        return this.userContexts[userProfile._id] = new UserContext(userProfile)._initialize();\r\n    }\r\n};\r\n\r\nexport default ContextProvider;\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/contexts/contextprovider/index.js","import EventEmitter from \"events\";\r\nimport _ from \"lodash\";\r\nimport PouchDB from \"pouchdb-core\";\r\nimport pouchMirrorLocalFirst from \"../pouchmirrorlocalfirst\";\r\nimport seed from \"pouchdb-seed-design\";\r\nimport design from \"../designs/private/designs.js\";\r\nimport views from \"../designs/private/views.js\";\r\nimport indexes from \"../../designs/indexes\";\r\nimport settleAll from \"../../settleAll\";\r\nimport Logger from \"../../logger.js\";\r\nimport axios from \"axios\";\r\nimport Promise from \"bluebird\";\r\nimport HTTPAdapter from \"pouchdb-adapter-http\";\r\nimport MapReduceAdapter from \"pouchdb-mapreduce\";\r\nimport ReplicationAdapter from \"pouchdb-replication\";\r\nimport PouchDBFind from \"pouchdb-find\";\r\nimport IDBAdapter from \"pouchdb-adapter-idb\";\r\nimport WebSqlAdapter from \"pouchdb-adapter-websql\";\r\nPouchDB.plugin(HTTPAdapter)\r\n  .plugin(MapReduceAdapter)\r\n  .plugin(ReplicationAdapter)\r\n  .plugin(PouchDBFind)\r\n  .plugin(IDBAdapter)\r\n  .plugin(WebSqlAdapter);\r\n\r\nif (REMOVE_LOGS) {\r\n  PouchDB.debug.disable();\r\n}\r\n\r\nvar Assertions = {\r\n  AssertContextValid: function(valid) {\r\n    if (!valid) {\r\n      throw TypeError(\"This context has already been destroyed.\");\r\n    }\r\n  },\r\n  AssertDBInitialized: function(initialized) {\r\n    if (!initialized) {\r\n      throw TypeError(\"Database is not initialized yet!\");\r\n    }\r\n  }\r\n};\r\nexport default class UserContext extends EventEmitter {\r\n  constructor(userProfile) {\r\n    super();\r\n    this._userId = userProfile._id;\r\n    this._userProfile = userProfile;\r\n    this._initialized = false;\r\n    this._db = null;\r\n    this._listeners = new Map();\r\n  }\r\n  registerListener(filterFunction, callback) {\r\n    this._listeners.set(\r\n      filterFunction,\r\n      _.uniq(\r\n        _.flattenDeep(_.concat(this._listeners[filterFunction] || [], callback))\r\n      )\r\n    );\r\n  }\r\n  unregisterListener(filterFunction, callback) {\r\n    this._listeners.set(\r\n      filterFunction,\r\n      _.remove(this._listeners.get(filterFunction), iCallback => {\r\n        return callback != iCallback;\r\n      })\r\n    );\r\n  }\r\n  _seedDesigns(userProfile) {\r\n    var localDB = new PouchDB(userProfile._id);\r\n    Logger.log(\"Adapter used: \" + localDB.adapter);\r\n    return seed(localDB, views).then(result => {\r\n      Logger.debug(\"Views created.\", result);\r\n      if (userProfile.isGuest) {\r\n        this._db = localDB;\r\n        return localDB;\r\n      } else {\r\n        return seed(localDB, design).then(results => {\r\n          Logger.debug(\"Filter created\", results);\r\n          this._db = new pouchMirrorLocalFirst(\r\n            localDB,\r\n            new PouchDB(userProfile.userDbUrl)\r\n          );\r\n          return this.addEventListener(this._db);\r\n        });\r\n      }\r\n    });\r\n  }\r\n  syncCompleted() {\r\n    Assertions.AssertContextValid(this.isValid());\r\n    if (this.isPublished) {\r\n      this.isPublished = false;\r\n      axios({\r\n        url: `/trigger/invitation`,\r\n        method: \"POST\",\r\n        data: { userId: this._userId }\r\n      });\r\n    }\r\n  }\r\n  triggerListener(doc, action, listeners = this._listeners) {\r\n    listeners.forEach((callbacks, filterFunction) => {\r\n      filterFunction(doc) && this.invokeCallbacks(doc, action, callbacks);\r\n    });\r\n  }\r\n  invokeCallbacks(doc, action, callbacks) {\r\n    callbacks = _.uniq(callbacks);\r\n    _.forEach(callbacks, callback => callback(doc, action));\r\n  }\r\n  triggerChanges(change) {\r\n    let { docs } = change.change;\r\n    _.forEach(docs, doc => {\r\n      this.triggerListener(doc, doc._deleted ? \"delete\" : \"addorupdate\");\r\n    });\r\n  }\r\n  changesFound(change) {\r\n    //this.triggerChanges(change);\r\n    if (change.direction == \"pull\") {\r\n      this.triggerChanges(change);\r\n    }\r\n    if (change.direction == \"push\") {\r\n      let { docs } = change.change;\r\n      _.forEach(docs, doc => {\r\n        if (doc.docType == \"publishedsurvey\") {\r\n          this.isPublished = true;\r\n        }\r\n      });\r\n    }\r\n  }\r\n  addEventListener(db) {\r\n    return db\r\n      .on(\"delta-sync-completed\", () => {\r\n        this.syncCompleted();\r\n        this.emit(\"delta-sync-completed\");\r\n      })\r\n      .on(\"delta-sync-started\", () => {\r\n        Logger.debug(\"Delta sync started.\");\r\n      })\r\n      .on(\"delta-sync-changes-detected\", change => {\r\n        this.changesFound(change);\r\n        Logger.debug(\"delta-sync-changes-detected.\");\r\n      })\r\n      .on(\"delta-sync-failed\", () => {\r\n        this.emit(\"delta-sync-failed\");\r\n      })\r\n      .on(\"initial-sync-changes-detected\", () => {\r\n        Logger.debug(\"initial-sync-changes-detected.\");\r\n      })\r\n      .on(\"initial-sync-started\", () => {\r\n        Logger.debug(\"initial-sync-started.\");\r\n      })\r\n      .on(\"initial-sync-failed\", () => {\r\n        this.emit(\"initial-sync-failed\");\r\n      })\r\n      .on(\"initial-sync-completed\", () => {\r\n        this.emit(\"initial-sync-completed\");\r\n      });\r\n  }\r\n  _initialize() {\r\n    //PouchDB.debug.enable('*');\r\n    return this._seedDesigns(this._userProfile)\r\n      .then(db => {\r\n        let promises = [];\r\n        _.forIn(indexes, (value, key) => {\r\n          promises.push(Promise.try(() => db.createIndex(value)));\r\n        });\r\n        return settleAll(promises);\r\n      })\r\n      .then(result => {\r\n        this._initialized = true;\r\n        this._isValid = true;\r\n        Logger.debug(\"Index created\", result);\r\n        return this;\r\n      });\r\n  }\r\n  off(eventName, callback) {\r\n    Assertions.AssertDBInitialized(this._initialized);\r\n    this.removeListener(eventName, callback);\r\n  }\r\n  get ID() {\r\n    Assertions.AssertDBInitialized(this._initialized);\r\n    Assertions.AssertContextValid(this.isValid());\r\n    return this._userId;\r\n  }\r\n  get DB() {\r\n    Assertions.AssertContextValid(this.isValid());\r\n    return this._db;\r\n  }\r\n  find(query) {\r\n    Assertions.AssertDBInitialized(this._initialized);\r\n    Assertions.AssertContextValid(this.isValid());\r\n    //PouchDB.debug.enable('*');\r\n    return this._db.find(query);\r\n  }\r\n  save(docType, docs) {\r\n    Assertions.AssertDBInitialized(this._initialized);\r\n    Assertions.AssertContextValid(this.isValid());\r\n    var object = _.merge(docs, { docType: docType });\r\n    //PouchDB.debug.enable('*');\r\n    return this._db.put(object);\r\n  }\r\n  saveDocs(docs) {\r\n    Assertions.AssertDBInitialized(this._initialized);\r\n    Assertions.AssertContextValid(this.isValid());\r\n    return this._db.bulkDocs(docs);\r\n  }\r\n  destroy() {\r\n    Assertions.AssertDBInitialized(this._initialized);\r\n    Assertions.AssertContextValid(this.isValid());\r\n    this.emit(\"destroy\");\r\n    this.removeAllListeners();\r\n    this._isValid = false;\r\n    return this._db.destroy();\r\n  }\r\n  isValid() {\r\n    return this._isValid;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/contexts/usercontext/index.js","export default class AbstractDataProvider {\r\n    constructor(container) {\r\n        this.getUserContext = function () {\r\n            return container.get(\"UserContext\")\r\n                .then((uc) => {\r\n                    return uc;\r\n                });\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/abstractdataprovider/index.js","import AbstractDataProvider from \"../../abstractdataprovider\";\r\nimport Logger from \"../../logger.js\";\r\nimport CDBSA from \"../../couchdbsurveyadapter\";\r\nimport _ from \"lodash\";\r\nimport axios from \"axios\";\r\nexport default class PublishedSurveyProvider extends AbstractDataProvider {\r\n  constructor(container, PublishedSurveyModelProvider) {\r\n    super(container);\r\n    this.PublishedSurveyModelProvider = PublishedSurveyModelProvider;\r\n  }\r\n  getUserPublishedSurveys() {\r\n    return this.getUserContext()\r\n      .then(userContext => {\r\n        return userContext.DB.query(\"getByDocType/typed\", {\r\n          key: \"publishedsurvey\",\r\n          include_docs: true\r\n        });\r\n      })\r\n      .then(result => {\r\n        var publishedsurveys = {};\r\n        _.map(result.rows, row => {\r\n          if (!row.doc) return;\r\n          publishedsurveys[\r\n            row.id\r\n          ] = this.PublishedSurveyModelProvider.fromModel(row.doc);\r\n        });\r\n        return publishedsurveys;\r\n      });\r\n  }\r\n  getUserPublishedSurvey(publishedSurveyId) {\r\n    return this.getUserContext()\r\n      .then(userContext => {\r\n        return userContext.DB.allDocs({\r\n          key: publishedSurveyId,\r\n          include_docs: true\r\n        });\r\n      })\r\n      .then(result => {\r\n        let [survey] = result.rows;\r\n        return this.PublishedSurveyModelProvider.getPublishedSurveyModel(\r\n          survey.doc\r\n        );\r\n      });\r\n  }\r\n  addUserPublishedSurvey(newPublishedSurvey) {\r\n    newPublishedSurvey = this.PublishedSurveyModelProvider\r\n      .getPublishedSurveyModel(newPublishedSurvey)\r\n      .toJS();\r\n    Logger.debug(newPublishedSurvey);\r\n    let userContext = null,\r\n      data = {\r\n        survey: newPublishedSurvey.survey,\r\n        modified: newPublishedSurvey._id\r\n      };\r\n    return axios({\r\n      url: `/thumbnail`,\r\n      method: \"POST\",\r\n      data\r\n    })\r\n      .then(response => {\r\n        let { data } = response;\r\n        newPublishedSurvey.thumbnail = data.data;\r\n        return this.getUserContext();\r\n      })\r\n      .then(uc => {\r\n        userContext = uc;\r\n        return userContext.save(\"publishedsurvey\", newPublishedSurvey);\r\n      })\r\n      .then(result => {\r\n        return userContext.DB.allDocs({\r\n          key: result.id,\r\n          include_docs: true\r\n        });\r\n      })\r\n      .then(docs => {\r\n        let [publishedsurvey] = docs.rows;\r\n        userContext.triggerListener(publishedsurvey, \"add\");\r\n        return this.PublishedSurveyModelProvider.fromModel(publishedsurvey.doc);\r\n      });\r\n  }\r\n  updateUserPublishedSurvey(updatedPublishedSurvey) {\r\n    updatedPublishedSurvey = updatedPublishedSurvey.toJS();\r\n    Logger.debug(updatedPublishedSurvey);\r\n    let userContext = null,\r\n      data = {\r\n        survey: updatedPublishedSurvey.survey,\r\n        modified: updatedPublishedSurvey._rev\r\n      };\r\n    return axios({\r\n      url: `/thumbnail`,\r\n      method: \"POST\",\r\n      data\r\n    })\r\n      .then(response => {\r\n        let { data } = response;\r\n        updatedPublishedSurvey.thumbnail = data.data;\r\n        return this.getUserContext();\r\n      })\r\n      .then(uc => {\r\n        userContext = uc;\r\n        return userContext.save(\"publishedsurvey\", updatedPublishedSurvey);\r\n      })\r\n      .then(result => {\r\n        return userContext.DB.allDocs({\r\n          key: result.id,\r\n          include_docs: true\r\n        });\r\n      })\r\n      .then(docs => {\r\n        let [publishedsurvey] = docs.rows;\r\n        userContext.triggerListener(publishedsurvey, \"update\");\r\n        return this.PublishedSurveyModelProvider.fromModel(publishedsurvey.doc);\r\n      });\r\n  }\r\n  undoUserPublishedSurveys(undoAppliedSurveys) {\r\n    undoAppliedSurveys = _.map(undoAppliedSurveys, undoAppliedSurvey => {\r\n      undoAppliedSurvey = undoAppliedSurvey.toJS();\r\n      return undoAppliedSurvey;\r\n    });\r\n    return this.getUserContext()\r\n      .then(userContext => {\r\n        return userContext.DB.bulkDocs(undoAppliedSurveys);\r\n      })\r\n      .then(result => {\r\n        Logger.debug(\"undo surveys\", result);\r\n        return this.getUserSurveys();\r\n      });\r\n  }\r\n  deleteUserPublishedSurvey(publishedSurvey) {\r\n    publishedSurvey = publishedSurvey.toJS();\r\n    publishedSurvey[\"_deleted\"] = true;\r\n    let userContext = null;\r\n    return this.getUserContext()\r\n      .then(uc => {\r\n        userContext = uc;\r\n        return userContext.save(\"publishedsurvey\", publishedSurvey);\r\n      })\r\n      .then(result => {\r\n        publishedSurvey._rev = result.rev;\r\n        userContext.triggerListener(publishedSurvey, \"delete\");\r\n        return result;\r\n      });\r\n  }\r\n  destroy() {\r\n    Logger.log(\"Logged off\");\r\n  }\r\n  initialSyncCompleted() {\r\n    Logger.debug(\"[SurveyDataProvider]: initialSyncCompleted\");\r\n  }\r\n  deltaSyncCompleted() {\r\n    Logger.debug(\"[SurveyDataProvider]: deltaSyncCompleted\");\r\n  }\r\n  initialSyncFailed() {\r\n    Logger.debug(\"[SurveyDataProvider]: initialSyncFailed\");\r\n  }\r\n  deltaSyncFailed() {\r\n    Logger.debug(\"[SurveyDataProvider]: deltaSyncFailed\");\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/publishedsurveys/publishedsurveyprovider/index.js","export default class CouchDBSurveyAdapter {\r\n    constructor(surveyModelBuilder) {\r\n        this.SurveyModelBuilder = surveyModelBuilder;\r\n    }\r\n    fromSurveyModel(surveyModelInstance) {\r\n        var docJSON = surveyModelInstance.toJS();\r\n        if (docJSON.hasOwnProperty('_ensureDefaults')) {\r\n            docJSON[\"ensureDefaults\"] = docJSON[\"_ensureDefaults\"];\r\n            delete docJSON[\"_ensureDefaults\"];\r\n        }\r\n        if (docJSON.hasOwnProperty('_schemaVersion')) {\r\n            docJSON[\"schemaVersion\"] = docJSON[\"_schemaVersion\"];\r\n            delete docJSON[\"_schemaVersion\"];\r\n        }\r\n        if(docJSON[\"_isDeleted\"] == false){\r\n            delete docJSON[\"_isDeleted\"];\r\n        }\r\n        docJSON[\"docType\"] = 'surveytemplate';\r\n        return docJSON;\r\n    }\r\n    toSurveyModel(docJSON) {\r\n        if (!docJSON) {\r\n            return this.SurveyModelBuilder.createDefaultModel();\r\n        }\r\n        if (docJSON.hasOwnProperty('ensureDefaults')) {\r\n            docJSON[\"_ensureDefaults\"] = docJSON[\"ensureDefaults\"];\r\n            delete docJSON[\"ensureDefaults\"];\r\n        }\r\n        if (docJSON.hasOwnProperty('schemaVersion')) {\r\n            docJSON[\"_schemaVersion\"] = docJSON[\"schemaVersion\"];\r\n            delete docJSON[\"schemaVersion\"];\r\n        }\r\n        return this.SurveyModelBuilder.fromModel(docJSON);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/couchdbsurveyadapter/index.js","import AbstractDataProvider from '../../abstractdataprovider';\r\nimport Logger from '../../logger.js';\r\nimport _ from 'lodash';\r\nexport default class ImageProvider extends AbstractDataProvider {\r\n    constructor(container) {\r\n        super(container);\r\n    }\r\n    getImages() {\r\n        return this.getUserContext()\r\n            .then((userContext) => {\r\n                return userContext.DB.query('getByDocType/typed', {\r\n                    key: 'image',\r\n                    include_docs: true,\r\n                    attachments: true\r\n                });\r\n            }).then((result) => {\r\n                return result;\r\n            });\r\n    }\r\n    getImage(id) {\r\n        return this.getUserContext()\r\n            .then((userContext) => {\r\n                return userContext.DB.allDocs({\r\n                    key: id,\r\n                    include_docs: true,\r\n                    attachments: true\r\n                });\r\n            }).then((imageDoc) => {\r\n                return imageDoc;\r\n            });\r\n    }\r\n    addImages(newImages) {\r\n        let keys = [];\r\n        newImages = newImages.map((newImage) => {\r\n            newImage._attachments.image.data = new Blob([new Buffer(newImage._attachments.image.data)], { type: newImage.mimeType });\r\n            //Logger.debug(newImage);\r\n            return _.merge(newImage, { \"docType\": 'image' })\r\n        });\r\n        return this.getUserContext()\r\n            .then((userContext) => {\r\n                return userContext.saveDocs(newImages);\r\n            }).then((results) => {\r\n                results.forEach((result) => {\r\n                    keys.push(result.id);\r\n                })\r\n                return this.getUserContext();\r\n            }).then((userContext) => {\r\n                return userContext.DB.allDocs({\r\n                    keys,\r\n                    include_docs: true,\r\n                    attachments: true\r\n                });\r\n            }).then((imageDoc) => {\r\n                return imageDoc;\r\n            });\r\n\r\n    }\r\n    deleteImage(image) {\r\n        image[\"_deleted\"] = true;\r\n        return this.getUserContext()\r\n            .then((userContext) => {\r\n                return userContext.save('image', image);\r\n            });\r\n    }\r\n    destroy() {\r\n        Logger.log(\"Logged off\");\r\n    }\r\n    initialSyncCompleted() {\r\n        Logger.debug(\"[ImageProvider]: initialSyncCompleted\");\r\n    }\r\n    deltaSyncCompleted() {\r\n        Logger.debug(\"[ImageProvider]: deltaSyncCompleted\");\r\n    }\r\n    initialSyncFailed() {\r\n        Logger.debug(\"[ImageProvider]: initialSyncFailed\");\r\n    }\r\n    deltaSyncFailed() {\r\n        Logger.debug(\"[ImageProvider]: deltaSyncFailed\");\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/image/imageprovider/index.js","import _ from 'lodash';\r\nimport immutable from 'immutable';\r\nimport AbstractDataProvider from '../../abstractdataprovider';\r\nimport Logger from '../../logger.js';\r\nimport i18n from '../../i18n.js';\r\nexport default class PublishedSurveyResponseProvider extends AbstractDataProvider {\r\n    constructor(container) {\r\n        super(container);\r\n    }\r\n    getResponse(responseId) {\r\n        return this.getUserContext()\r\n            .then((userContext) => {\r\n                return userContext.DB.allDocs({\r\n                    key: responseId,\r\n                    include_docs: true\r\n                });\r\n            }).then((result) => {\r\n                let [responseDoc] = result.rows;\r\n                return responseDoc && responseDoc.doc;\r\n            });\r\n    }\r\n    getResponsesByKey(keys) {\r\n        return this.getUserContext()\r\n            .then((userContext) => {\r\n                return userContext.DB.allDocs({\r\n                    keys,\r\n                    include_docs: true\r\n                });\r\n            }).then((result) => {\r\n                var respondedSurveys = {};\r\n                _.map(result.rows, (row) => {\r\n                    respondedSurveys[row.id] = row.doc;\r\n                });\r\n                return respondedSurveys;\r\n            });\r\n    }\r\n    setResponse(responseDoc) {\r\n        return this.getUserContext()\r\n            .then((userContext) => {\r\n                return userContext.save('surveyresponse', responseDoc);\r\n            });\r\n    }\r\n    destroy() {\r\n        Logger.debug(\"[GroupsAndRecipientsProvider]: destroy\");\r\n    }\r\n    initialSyncCompleted() {\r\n        Logger.debug(\"[GroupsAndRecipientsProvider]: initialSyncCompleted\");\r\n    }\r\n    deltaSyncCompleted() {\r\n        Logger.debug(\"[GroupsAndRecipientsProvider]: deltaSyncCompleted\");\r\n    }\r\n    initialSyncFailed() {\r\n        Logger.debug(\"[GroupsAndRecipientsProvider]: initialSyncFailed\");\r\n    }\r\n    deltaSyncFailed() {\r\n        Logger.debug(\"[GroupsAndRecipientsProvider]: deltaSyncFailed\");\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/publishedsurveys/publishedsurveyresponseprovider/index.js","export default {\r\n        \"name\": \"Anonymous\",\r\n        \"_id\": \"guest\",\r\n        \"providerId\": null,\r\n        \"email\": null,\r\n        \"thumbnail\": null,\r\n        \"language\": null,\r\n        \"isGuest\": true\r\n    };\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/guestprofile/index.js","import React from 'react';\r\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\r\nimport i18n from '../helpers/i18n.js';\r\nconst HelpPage = React.createClass({\r\n    mixins: [PureRenderMixin],\r\n    render: function () {\r\n        return (\r\n            <div className=\"row around-xs\">\r\n                <div className=\"col-xs-11 col-sm-10\">\r\n                    <div className=\"box\">\r\n                        <div className=\"row\">\r\n                            <div className=\"col-xs-12\">\r\n                                <div className=\"box\">\r\n                                    <h1>{i18n.t(\"Help\")}</h1>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n});\r\n\r\nexport default HelpPage;\n\n\n// WEBPACK FOOTER //\n// ./src/js/components/helppage.jsx","/**\r\n * Returns a number whose value is limited to the given range.\r\n *\r\n * @param {number} value The value to be clamped\r\n * @param {number} min The lower boundary of the output range\r\n * @param {number} max The upper boundary of the output range\r\n * @returns {number} A number in the range [min, max]\r\n */\r\nfunction clamp(value, min, max) {\r\n  if (value < min) {\r\n    return min;\r\n  }\r\n  if (value > max) {\r\n    return max;\r\n  }\r\n  return value;\r\n}\r\n\r\n/**\r\n * Converts a color object with type and values to a string.\r\n *\r\n * @param {object} color - Decomposed color\r\n * @param {string} color.type - One of, 'rgb', 'rgba', 'hsl', 'hsla'\r\n * @param {array} color.values - [n,n,n] or [n,n,n,n]\r\n * @returns {string} A CSS color string\r\n */\r\nexport function convertColorToString(color) {\r\n  const {type, values} = color;\r\n\r\n  if (type.indexOf('rgb') > -1) {\r\n    // Only convert the first 3 values to int (i.e. not alpha)\r\n    for (let i = 0; i < 3; i++) {\r\n      values[i] = parseInt(values[i]);\r\n    }\r\n  }\r\n\r\n  let colorString;\r\n\r\n  if (type.indexOf('hsl') > -1) {\r\n    colorString = `${color.type}(${values[0]}, ${values[1]}%, ${values[2]}%`;\r\n  } else {\r\n    colorString = `${color.type}(${values[0]}, ${values[1]}, ${values[2]}`;\r\n  }\r\n\r\n  if (values.length === 4) {\r\n    colorString += `, ${color.values[3]})`;\r\n  } else {\r\n    colorString += ')';\r\n  }\r\n\r\n  return colorString;\r\n}\r\n\r\n/**\r\n * Converts a color from CSS hex format to CSS rgb format.\r\n *\r\n *  @param {string} color - Hex color, i.e. #nnn or #nnnnnn\r\n *  @returns {string} A CSS rgb color string\r\n */\r\nexport function convertHexToRGB(color) {\r\n  if (color.length === 4) {\r\n    let extendedColor = '#';\r\n    for (let i = 1; i < color.length; i++) {\r\n      extendedColor += color.charAt(i) + color.charAt(i);\r\n    }\r\n    color = extendedColor;\r\n  }\r\n\r\n  const values = {\r\n    r:\tparseInt(color.substr(1, 2), 16),\r\n    g:\tparseInt(color.substr(3, 2), 16),\r\n    b:\tparseInt(color.substr(5, 2), 16),\r\n  };\r\n\r\n  return `rgb(${values.r}, ${values.g}, ${values.b})`;\r\n}\r\n\r\n/**\r\n * Returns an object with the type and values of a color.\r\n *\r\n * Note: Does not support rgb % values.\r\n *\r\n * @param {string} color - CSS color, i.e. one of: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla()\r\n * @returns {{type: string, values: number[]}} A MUI color object\r\n */\r\nexport function decomposeColor(color) {\r\n  if (color.charAt(0) === '#') {\r\n    return decomposeColor(convertHexToRGB(color));\r\n  }\r\n\r\n  const marker = color.indexOf('(');\r\n  const type = color.substring(0, marker);\r\n  let values = color.substring(marker + 1, color.length - 1).split(',');\r\n  values = values.map((value) => parseFloat(value));\r\n\r\n  return {type: type, values: values};\r\n}\r\n\r\n/**\r\n * Calculates the contrast ratio between two colors.\r\n *\r\n * Formula: http://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef\r\n *\r\n * @param {string} foreground - CSS color, i.e. one of: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla()\r\n * @param {string} background - CSS color, i.e. one of: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla()\r\n * @returns {number} A contrast ratio value in the range 0 - 21 with 2 digit precision.\r\n */\r\nexport function getContrastRatio(foreground, background) {\r\n  const lumA = getLuminance(foreground);\r\n  const lumB = getLuminance(background);\r\n  const contrastRatio = (Math.max(lumA, lumB) + 0.05) / (Math.min(lumA, lumB) + 0.05);\r\n\r\n  return Number(contrastRatio.toFixed(2)); // Truncate at two digits\r\n}\r\n\r\n/**\r\n * The relative brightness of any point in a color space,\r\n * normalized to 0 for darkest black and 1 for lightest white.\r\n *\r\n * Formula: https://www.w3.org/WAI/GL/wiki/Relative_luminance\r\n *\r\n * @param {string} color - CSS color, i.e. one of: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla()\r\n * @returns {number} The relative brightness of the color in the range 0 - 1\r\n */\r\nexport function getLuminance(color) {\r\n  color = decomposeColor(color);\r\n\r\n  if (color.type.indexOf('rgb') > -1) {\r\n    const rgb = color.values.map((val) => {\r\n      val /= 255; // normalized\r\n      return val <= 0.03928 ? val / 12.92 : Math.pow((val + 0.055) / 1.055, 2.4);\r\n    });\r\n    return Number((0.2126 * rgb[0] + 0.7152 * rgb[1] + 0.0722 * rgb[2]).toFixed(3)); // Truncate at 3 digits\r\n  } else if (color.type.indexOf('hsl') > -1) {\r\n    return color.values[2] / 100;\r\n  }\r\n}\r\n\r\n/**\r\n * Darken or lighten a colour, depending on its luminance.\r\n * Light colors are darkened, dark colors are lightened.\r\n *\r\n * @param {string} color - CSS color, i.e. one of: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla()\r\n * @param {number} coefficient=0.15 - multiplier in the range 0 - 1\r\n * @returns {string} A CSS color string. Hex input values are returned as rgb\r\n */\r\nexport function emphasize(color, coefficient = 0.15) {\r\n  return getLuminance(color) > 0.5 ?\r\n    darken(color, coefficient) :\r\n    lighten(color, coefficient);\r\n}\r\n\r\n/**\r\n * Set the absolute transparency of a color.\r\n * Any existing alpha values are overwritten.\r\n *\r\n * @param {string} color - CSS color, i.e. one of: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla()\r\n * @param {number} value - value to set the alpha channel to in the range 0 -1\r\n * @returns {string} A CSS color string. Hex input values are returned as rgb\r\n */\r\nexport function fade(color, value) {\r\n  color = decomposeColor(color);\r\n  value = clamp(value, 0, 1);\r\n\r\n  if (color.type === 'rgb' || color.type === 'hsl') {\r\n    color.type += 'a';\r\n  }\r\n  color.values[3] = value;\r\n\r\n  return convertColorToString(color);\r\n}\r\n\r\n/**\r\n * Darkens a color.\r\n *\r\n * @param {string} color - CSS color, i.e. one of: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla()\r\n * @param {number} coefficient - multiplier in the range 0 - 1\r\n * @returns {string} A CSS color string. Hex input values are returned as rgb\r\n */\r\nexport function darken(color, coefficient) {\r\n  color = decomposeColor(color);\r\n  coefficient = clamp(coefficient, 0, 1);\r\n\r\n  if (color.type.indexOf('hsl') > -1) {\r\n    color.values[2] *= 1 - coefficient;\r\n  } else if (color.type.indexOf('rgb') > -1) {\r\n    for (let i = 0; i < 3; i++) {\r\n      color.values[i] *= 1 - coefficient;\r\n    }\r\n  }\r\n  return convertColorToString(color);\r\n}\r\n\r\n/**\r\n * Lightens a color.\r\n *\r\n * @param {string} color - CSS color, i.e. one of: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla()\r\n * @param {number} coefficient - multiplier in the range 0 - 1\r\n * @returns {string} A CSS color string. Hex input values are returned as rgb\r\n */\r\nexport function lighten(color, coefficient) {\r\n  color = decomposeColor(color);\r\n  coefficient = clamp(coefficient, 0, 1);\r\n\r\n  if (color.type.indexOf('hsl') > -1) {\r\n    color.values[2] += (100 - color.values[2]) * coefficient;\r\n  } else if (color.type.indexOf('rgb') > -1) {\r\n    for (let i = 0; i < 3; i++) {\r\n      color.values[i] += (255 - color.values[i]) * coefficient;\r\n    }\r\n  }\r\n\r\n  return convertColorToString(color);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/customtheme/colorManipulator.js","import React from \"react\";\r\nimport connect from \"reflux/src/connect\";\r\nimport AppBar from \"material-ui/AppBar\";\r\nimport ToolbarGroup from \"material-ui/Toolbar/ToolbarGroup\";\r\nimport injectTapEventPlugin from \"react-tap-event-plugin\";\r\nimport PureRenderMixin from \"react-addons-pure-render-mixin\";\r\nimport getMuiTheme from \"material-ui/styles/getMuiTheme\";\r\nimport MuiThemeProvider from \"material-ui/styles/MuiThemeProvider\";\r\nimport i18n from \"./helpers/i18n.js\";\r\nimport CustomThemeProvider from \"./customtheme/customthemeprovider.js\";\r\nimport AuthStore from \"./stores/authstore.js\";\r\nimport TimeTrackerStore from \"./stores/timetrackerstore.js\";\r\nimport getCustomTheme from \"./customtheme/getcustomtheme.js\";\r\nimport UserProfile from \"./components/userprofile.jsx\";\r\nimport withTracker from \"./helpers/timetracker\";\r\nconst zIndex = {\r\n    zIndex: {\r\n      tooltip: 5000\r\n    }\r\n  },\r\n  RunAppBar = React.createClass({\r\n    render() {\r\n      return (\r\n        <AppBar\r\n          title={i18n.t(\"quizMe\")}\r\n          titleStyle={{\r\n            ...this.context.customTheme.siteHeader\r\n          }}\r\n          showMenuIconButton={false}\r\n          style={{ position: \"fixed\", top: 0 }}\r\n        >\r\n          {this.props.renderToolbar && (\r\n            <ToolbarGroup style={{ right: -12, top: 13 }}>\r\n              <UserProfile />\r\n            </ToolbarGroup>\r\n          )}\r\n        </AppBar>\r\n      );\r\n    }\r\n  }),\r\n  RunApp = React.createClass({\r\n    mixins: [PureRenderMixin, connect(AuthStore, \"Auth\")],\r\n    childContextTypes: {\r\n      location: React.PropTypes.object,\r\n      history: React.PropTypes.object\r\n    },\r\n    getChildContext: function() {\r\n      return { location: this.props.location, history: this.props.history };\r\n    },\r\n    render: function() {\r\n      let self = this,\r\n        childrenWithProps = React.Children.map(this.props.children, function(\r\n          child\r\n        ) {\r\n          return React.cloneElement(child, {\r\n            isMobile: self.props.isMobile\r\n          });\r\n        }),\r\n        {\r\n          authState,\r\n          AuthStates,\r\n          error,\r\n          userProfile\r\n        } = this.state.Auth.toJSON(),\r\n        { isMobile } = this.props;\r\n      return (\r\n        <MuiThemeProvider muiTheme={getMuiTheme({}, zIndex)}>\r\n          <CustomThemeProvider customTheme={getCustomTheme({}, isMobile)}>\r\n            <div className=\"runWr copyPrevent\">\r\n              <RunAppBar renderToolbar={authState == AuthStates.SIGNED_IN} />\r\n              <div className=\"row around-xs\" style={{ marginTop: 64 }}>\r\n                <div\r\n                  style={{ paddingTop: 40, paddingBottom: 20, width: \"100%\" }}\r\n                >\r\n                  {childrenWithProps}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </CustomThemeProvider>\r\n        </MuiThemeProvider>\r\n      );\r\n    }\r\n  });\r\n\r\n//injectTapEventPlugin();\r\nRunApp.contextTypes = {\r\n  customTheme: React.PropTypes.object\r\n};\r\nRunAppBar.contextTypes = {\r\n  customTheme: React.PropTypes.object\r\n};\r\n\r\nexport default withTracker(RunApp);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/runapp.jsx","import Reflux from 'reflux-core';\r\n\r\nconst AddActions = Reflux.createActions(\r\n\t\t[\"addQuestionDone\",\"addPageDone\",\"addSurveyDone\",\"dialogOpen\",\"dialogClose\",\"setIndex\", \"close\", \"addDecoratorDone\"]\r\n);\r\n\r\nexport default AddActions;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/actions/addactions.js","import createStore from \"reflux-core/lib/createStore\";\r\nimport _SurveyModelBuilder from \"../helpers/surveymodelbuilder\";\r\nimport ObjectID from \"bson-objectid\";\r\nimport { shuffle } from \"lodash\";\r\nimport createHashHistory from \"history/lib/createHashHistory\";\r\nimport Immutable from \"immutable\";\r\nimport AddActions from \"../actions/addactions.js\";\r\nimport SurveysActions from \"../actions/surveysactions.js\";\r\nimport SurveyRunnerActions from \"../actions/surveyrunneractions.js\";\r\nimport {\r\n  DataStorageActions,\r\n  DataStorageClientActions\r\n} from \"../actions/datastorageactions.js\";\r\nimport { SurveyModelDefaults } from \"../appsettings.json\";\r\nimport NotificationActions from \"../actions/notificationactions.js\";\r\nimport SettingsDefinitionBuilder from \"../helpers/settingdefinitionbuilder.js\";\r\nimport SettingsActions from \"../actions/settingsactions.js\";\r\nimport i18n from \"../helpers/i18n.js\";\r\nimport { Notifications } from \"../appsettings.json\";\r\nimport AuthActions from \"../actions/authactions.js\";\r\nimport AppActions from \"../actions/appactions.js\";\r\nimport SurveyDataProvider from \"../helpers/surveydataprovider\";\r\nimport DIService from \"../helpers/diservice\";\r\nimport Logger from \"../helpers/logger.js\";\r\nimport _ from \"lodash\";\r\nimport axios from \"axios\";\r\nimport FileSaver from \"file-saver\";\r\nimport PouchDB from \"pouchdb-core\";\r\nconst SurveyModelBuilder = _SurveyModelBuilder(),\r\n  SurveysStore = createStore({\r\n    listenables: [SurveysActions, AuthActions],\r\n    lastState: null,\r\n    currentSurvey: null,\r\n    _currentProfile: null,\r\n    _surveyProvider: null,\r\n    _delAttributes: [\r\n      \"_ensureDefaults\",\r\n      \"_id\",\r\n      \"_isDeleted\",\r\n      \"_rev\",\r\n      \"_schemaVersion\"\r\n    ],\r\n    init: function() {\r\n      this.state = Immutable.Map({\r\n        userSurveys: Immutable.Map(),\r\n        showLoader: false,\r\n        currentSurvey: null\r\n      });\r\n    },\r\n    getInitialState: function() {\r\n      return this.state;\r\n    },\r\n    userChanged: function(prevProfile, newProfile) {\r\n      this._currentProfile = newProfile;\r\n      this._surveyProvider = DIService.get(\"SurveyDataProvider\");\r\n    },\r\n    getUserSurvey: function(id) {\r\n      let survey = this.state.getIn([\"userSurveys\", id]);\r\n      if (survey) {\r\n        return Promise.resolve(survey);\r\n      }\r\n      return this._surveyProvider.getUserSurvey(id).then(survey => {\r\n        this.updateState(this.state.setIn([\"userSurveys\", id], survey), true);\r\n        return survey;\r\n      });\r\n    },\r\n    updateSurveyState: function(newSurveyState, suppressTrigger) {\r\n      if (!newSurveyState && newSurveyState.equals(this.currentSurvey)) {\r\n        return Promise.resolve(null);\r\n      }\r\n      return this._surveyProvider\r\n        .updateUserSurvey(\r\n          newSurveyState,\r\n          this._currentProfile ? this._currentProfile.isGuest : true\r\n        )\r\n        .then(result => {\r\n          newSurveyState = newSurveyState.setRevision(result.rev);\r\n          this.currentSurvey = newSurveyState;\r\n          this.updateState(\r\n            this.state\r\n              .setIn(\r\n                [\"userSurveys\", this.currentSurvey.getId()],\r\n                this.currentSurvey\r\n              )\r\n              .set(\"currentSurvey\", this.currentSurvey)\r\n          );\r\n          return result;\r\n        })\r\n        .catch(err => {\r\n          if (err.status == 409) {\r\n            return this.getUserSurvey(this.currentSurvey.getId()).then(\r\n              survey => {\r\n                return (this.currentSurvey = survey);\r\n              }\r\n            );\r\n          }\r\n          throw err;\r\n        });\r\n    },\r\n    updateState: function(newState, suppressTrigger) {\r\n      if (this.state.equals(newState)) {\r\n        return;\r\n      }\r\n      if (newState) {\r\n        this.state = newState;\r\n      }\r\n\r\n      if (!suppressTrigger) {\r\n        this.trigger(this.state);\r\n      }\r\n    },\r\n    addNewSurvey: function() {\r\n      this._surveyProvider\r\n        .addUserSurvey(\r\n          null,\r\n          this._currentProfile ? this._currentProfile.isGuest : true\r\n        )\r\n        .then(newSurvey => {\r\n          Logger.debug(\"survey added.\");\r\n          this.currentSurvey = newSurvey;\r\n          let surveyId = newSurvey.getId();\r\n          this.updateState(\r\n            this.state.setIn([\"userSurveys\", surveyId], newSurvey),\r\n            true\r\n          );\r\n          this.routeToSurvey(surveyId);\r\n        });\r\n    },\r\n    exportToJSON: function(id) {\r\n      this.getUserSurvey(id).then(surveyToExport => {\r\n        let surveyTitle = surveyToExport.getTitle(),\r\n          surveyJSON = surveyToExport.toJS();\r\n        this._delAttributes.forEach(key => {\r\n          delete surveyJSON[key];\r\n        });\r\n        surveyJSON = this.validateSurveyIds(surveyJSON);\r\n        let blob = new Blob([JSON.stringify(surveyJSON)], {\r\n          type: \"JSON\"\r\n        });\r\n        FileSaver.saveAs(blob, `${surveyTitle}.json`);\r\n      });\r\n    },\r\n    uploadSurvey: function(acceptedFiles) {\r\n      this.updateState(this.state.setIn([\"showLoader\"], true));\r\n      let self = this;\r\n      if (acceptedFiles) {\r\n        let file = acceptedFiles[0],\r\n          reader = new FileReader(),\r\n          fileName = file.name;\r\n        reader.onload = function(event) {\r\n          self\r\n            .validateJSONFile(event.target.result)\r\n            .then(result => {\r\n              self._delAttributes.forEach(key => {\r\n                if (result.hasOwnProperty(key)) delete result[key];\r\n              });\r\n              return result;\r\n            })\r\n            .then(result => {\r\n              self.importSurvey(result);\r\n            })\r\n            .catch(err => {\r\n              self.state = self.state.setIn([\"showLoader\"], false);\r\n              self.updateState(self.state);\r\n              NotificationActions.notify(\r\n                Notifications.ERROR,\r\n                i18n.t(\r\n                  `File ${fileName} contains syntactically invalid JSON data.`\r\n                )\r\n              );\r\n            });\r\n        };\r\n        reader.readAsText(file);\r\n      }\r\n    },\r\n    validateJSONFile: function(surveyJson) {\r\n      return new Promise((resolve, reject) => {\r\n        try {\r\n          surveyJson = JSON.parse(surveyJson);\r\n          resolve(surveyJson);\r\n        } catch (err) {\r\n          reject();\r\n        }\r\n      });\r\n    },\r\n    importSurvey: function(surveyJson) {\r\n      surveyJson = _.merge(surveyJson, {\r\n        _id: ObjectID().str,\r\n        _rev: null,\r\n        _ensureDefaults: true\r\n      });\r\n      surveyJson = this.validateSurveyIds(surveyJson);\r\n      surveyJson = SurveyModelBuilder.fromModel(surveyJson);\r\n      let surveyName = surveyJson.getTitle();\r\n      this._surveyProvider\r\n        .addUserSurvey(\r\n          surveyJson,\r\n          this._currentProfile ? this._currentProfile.isGuest : true\r\n        )\r\n        .then(newSurvey => {\r\n          this.currentSurvey = newSurvey;\r\n          let surveyId = newSurvey.getId();\r\n          this.updateState(\r\n            this.state.setIn([\"userSurveys\", surveyId], newSurvey)\r\n          );\r\n          this.updateState(this.state.setIn([\"showLoader\"], false), true);\r\n          this.routeToSurvey(surveyId);\r\n          NotificationActions.notify(\r\n            Notifications.INFO,\r\n            i18n.t(`The Survey ${surveyName} has been imported successfully`)\r\n          );\r\n        });\r\n    },\r\n    validateSurveyIds: function(surveyJson) {\r\n      let pages = _.get(surveyJson, \"pages\"),\r\n        pageItems = _.get(surveyJson, \"pageItems\"),\r\n        newPages = [],\r\n        newPageItems = {};\r\n\r\n      pages.forEach(function(page, index) {\r\n        let newPageId = ObjectID().str,\r\n          oldPageItemRefs = _.get(page, \"pageItemRefs\"),\r\n          newPageItemRefs = [];\r\n        page._id = newPageId;\r\n        oldPageItemRefs.forEach(function(pageItemRef, index) {\r\n          let pageItem = _.get(pageItems, pageItemRef);\r\n          pageItem._id = ObjectID().str;\r\n          pageItem.parentPageId = newPageId;\r\n          newPageItems[pageItem._id] = pageItem;\r\n          newPageItemRefs.push(pageItem._id);\r\n        });\r\n        page.pageItemRefs = newPageItemRefs;\r\n        newPages.push(page);\r\n      });\r\n      surveyJson._id = ObjectID().str;\r\n      surveyJson.pages = newPages;\r\n      surveyJson.pageItems = newPageItems;\r\n      return surveyJson;\r\n    },\r\n\r\n    cloneSurvey: function(surveyId) {\r\n      this.getUserSurvey(surveyId)\r\n        .then(survey => {\r\n          let cloned = survey.clone().setTitle(`Copy of ${survey.getTitle()}`);\r\n          cloned = cloned.setRevision(null);\r\n          cloned = this.validateSurveyIds(cloned.toJS());\r\n          cloned = SurveyModelBuilder.fromModel(cloned);\r\n          return this._surveyProvider.addUserSurvey(\r\n            cloned,\r\n            this._currentProfile ? this._currentProfile.isGuest : true\r\n          );\r\n        })\r\n        .then(newSurvey => {\r\n          Logger.debug(\"survey clonned.\");\r\n          this.currentSurvey = newSurvey;\r\n          let surveyId = newSurvey.getId();\r\n          this.updateState(\r\n            this.state\r\n              .setIn([\"userSurveys\", surveyId], newSurvey)\r\n              .set(\"currentSurvey\", this.currentSurvey),\r\n            true\r\n          );\r\n          this.routeToSurvey(surveyId);\r\n        });\r\n    },\r\n    deleteSurvey: function(id) {\r\n      let survey = null;\r\n      this.getUserSurvey(id)\r\n        .then(doc => {\r\n          survey = doc;\r\n          return this._surveyProvider.deleteUserSurvey(survey);\r\n        })\r\n        .then(result => {\r\n          let surveyName = survey.getTitle();\r\n          Logger.debug(\"survey deleted.\", result);\r\n          this.updateState(this.state.deleteIn([\"userSurveys\", id]), true);\r\n          survey = survey.setRevision(result.rev);\r\n          NotificationActions.notify(\r\n            Notifications.INFO,\r\n            i18n.t(`The Survey ${surveyName} has been deleted`),\r\n            i18n.t(\"undo\"),\r\n            SurveysActions.undoSurvey.bind(null, survey)\r\n          );\r\n        });\r\n    },\r\n    undoSurvey: function(survey) {\r\n      this._surveyProvider.undoSurvey(survey).then(result => {\r\n        survey = survey.setRevision(result.rev);\r\n        this.updateState(\r\n          this.state.setIn([\"userSurveys\", survey.getId()], survey)\r\n        );\r\n      });\r\n    },\r\n    getSurvey: function(collectionState, id) {\r\n      return collectionState.getIn([\"userSurveys\", id]);\r\n    },\r\n    dialogOpen: function(index, refIndex, type) {\r\n      AddActions.dialogOpen(index, refIndex, type);\r\n    },\r\n    undo: function() {\r\n      let undoModifiedSurveys = [];\r\n      this.lastState.get(\"userSurveys\").map(survey => {\r\n        let latestSurvey = this.state.getIn([\"userSurveys\", survey.getId()]);\r\n        if (survey != latestSurvey) {\r\n          survey = survey.setRevision(latestSurvey.getRevision());\r\n          undoModifiedSurveys.push(survey);\r\n        }\r\n      });\r\n      this._surveyProvider\r\n        .undoUserSurveys(undoModifiedSurveys)\r\n        .then(surveys => {\r\n          let id = this.currentSurvey.getId();\r\n          if (this.currentSurvey && surveys[id]) {\r\n            this.currentSurvey = surveys[id];\r\n          }\r\n          this.updateState(\r\n            this.state\r\n              .set(\r\n                \"userSurveys\",\r\n                this.state.get(\"userSurveys\").merge(Immutable.fromJS(surveys))\r\n              )\r\n              .set(\"currentSurvey\", this.currentSurvey)\r\n          );\r\n        });\r\n    },\r\n    routeToSurvey: function(id) {\r\n      let history = createHashHistory({\r\n          queryKey: false\r\n        }),\r\n        location = history.createLocation(`/surveys/design/edit/${id}`);\r\n      history.push(location);\r\n    },\r\n    routeToSurveys: function() {\r\n      let history = createHashHistory({\r\n          queryKey: false\r\n        }),\r\n        location = history.createLocation(\"/surveys\");\r\n      history.push(location);\r\n    },\r\n    reset: function() {\r\n      this.updateState(this.state.set(\"currentSurvey\", null));\r\n    },\r\n    loadSurvey: function(id) {\r\n      this.getUserSurvey(id).then(survey => {\r\n        this.currentSurvey = survey;\r\n        this.updateState(this.state.set(\"currentSurvey\", survey));\r\n      });\r\n    },\r\n    _getSurveyById: function(id) {\r\n      let currentReference = this;\r\n      return new Promise(function(resolve, reject) {\r\n        currentReference._surveyProvider = DIService.get(\"SurveyDataProvider\", {\r\n          SurveyModelBuilder\r\n        });\r\n        currentReference._surveyProvider.getUserSurvey(id).then(survey => {\r\n          return resolve(survey);\r\n        });\r\n      });\r\n    },\r\n    optionsSurveyHeaderOpen: function(options) {\r\n      let settingsDef = SettingsDefinitionBuilder(),\r\n        settingsValues = {\r\n          showHeader: this.currentSurvey.getShowHeader(),\r\n          title: this.currentSurvey.getTitle(),\r\n          description: this.currentSurvey.getDescription(),\r\n          questionDisplay: this.currentSurvey.getQuestionDisplay(),\r\n          minimumMarks: this.currentSurvey.getMinimumMarks() || 0\r\n        };\r\n      settingsDef\r\n        .addSettingsGroup(i18n.t(\"General\"))\r\n        .addSetting(\"showHeader\", \"bool\", i18n.t(\"Show survey header?\"))\r\n        .addSetting(\"logo\", \"imagepicker\", i18n.t(\"Logo\"))\r\n        .addSetting(\"title\", \"string\", i18n.t(\"Survey title\"), {\r\n          required: true,\r\n          maxLength: SurveyModelDefaults.MaxSurveyTitleLength\r\n        })\r\n        .addSetting(\"description\", \"string\", i18n.t(\"Survey description\"), {\r\n          multiLine: true,\r\n          rows: 1,\r\n          rowsMax: 5,\r\n          maxLength: SurveyModelDefaults.MaxSurveySubTitleLength\r\n        })\r\n        .addSetting(\"questionDisplay\", \"choice\", i18n.t(\"Question display\"), {\r\n          choice: {\r\n            question: i18n.t(\"One question at a time\"),\r\n            page: i18n.t(\"One page at a time\"),\r\n            all: i18n.t(\"Show all questions in one screen\")\r\n          }\r\n        })\r\n        .addSetting(\"minimumMarks\", \"string\", i18n.t(\"Minimum marks\"), {\r\n          type: \"number\"\r\n        });\r\n      SettingsActions.open(\r\n        settingsDef.getSettingsDefinition(),\r\n        settingsValues,\r\n        SurveysActions.optionsSurveyHeaderDone,\r\n        null,\r\n        options\r\n      );\r\n    },\r\n    optionsSurveyHeaderDone: function(values) {\r\n      if (!this.currentSurvey) return;\r\n      let {\r\n        title,\r\n        questionDisplay,\r\n        minimumMarks,\r\n        timer,\r\n        timeout,\r\n        startFrom,\r\n        showMarksRunMode,\r\n        restrictPrevious\r\n      } = values;\r\n      title = _.trim(title);\r\n      this.updateSurveyState(\r\n        this.currentSurvey\r\n          .setTitle(title)\r\n          .setQuestionDisplay(questionDisplay)\r\n          .setMinimumMarks(minimumMarks)\r\n          .setIsTimer(timer)\r\n          .setTimeout(timeout)\r\n          .setStartFrom(startFrom)\r\n          .setShowMarksRunMode(showMarksRunMode)\r\n          .setRestrictPrevious(restrictPrevious)\r\n      );\r\n    },\r\n    setQuestionDisplay: function(questionDisplay) {\r\n      this.updateSurveyState(\r\n        this.currentSurvey.setQuestionDisplay(questionDisplay)\r\n      );\r\n    },\r\n    setSurveyTitle: function(title) {\r\n      if (title != this.currentSurvey.getTitle())\r\n        this.updateSurveyState(this.currentSurvey.setTitle(title));\r\n    },\r\n    setSectionTitleDescription: function(\r\n      sectionTitle,\r\n      sectionDescription,\r\n      pageNo\r\n    ) {\r\n      let title = _.trim(sectionTitle);\r\n      let description = _.trim(sectionDescription);\r\n      if (pageNo != -1) {\r\n        let page = this.currentSurvey.getPage(pageNo);\r\n        page = page.setTitle(title).setDescription(description);\r\n\r\n        this.updateSurveyState(this.currentSurvey.updatePage(pageNo, page));\r\n      }\r\n    },\r\n\r\n    optionPageOpen: function(pageNumber, options) {\r\n      let settingsDef = SettingsDefinitionBuilder(),\r\n        page = this.currentSurvey.getPage(pageNumber),\r\n        settingsValues = {\r\n          showHeader: page.getShowHeader(),\r\n          title: page.getTitle(),\r\n          description: page.getDescription(),\r\n          randomizeQuestions: page.getRandomizeQuestions(),\r\n          logic: page.getLogic(),\r\n          skipTo: page.getSkipTo()\r\n        };\r\n      settingsDef\r\n        .addSettingsGroup(\"Advance settings\")\r\n        .addSetting(\"showHeader\", \"bool\", i18n.t(\"Show page header?\"), {\r\n          isPrimary: true\r\n        })\r\n        .addSetting(\r\n          \"randomizeQuestions\",\r\n          \"bool\",\r\n          i18n.t(\"Randomize questions?\"),\r\n          {\r\n            isPrimary: true\r\n          }\r\n        )\r\n        .addSetting(\"logic\", \"bool\", i18n.t(\"Use Logic?\"), {\r\n          isPrimary: true\r\n        })\r\n        .addSetting(\"skipTo\", \"choice\", i18n.t(\"Skip to\"), {\r\n          choice: this.getChoice(pageNumber)\r\n        });\r\n      SettingsActions.open(\r\n        settingsDef.getSettingsDefinition(),\r\n        settingsValues,\r\n        SurveysActions.optionPageDone.bind(SurveysActions, pageNumber),\r\n        null,\r\n        options\r\n      );\r\n    },\r\n    getChoice: function(pageNumber) {\r\n      let pageLength = this.currentSurvey.getPagesSize(),\r\n        choice = {};\r\n      for (let i = pageNumber + 1; i < pageLength; i++) {\r\n        choice[i] = `Section ${i + 1}`;\r\n      }\r\n      choice[\"eos\"] = i18n.t(\"End of Survey\");\r\n      return choice;\r\n    },\r\n    optionPageDone: function(pageNumber, values) {\r\n      if (!this.currentSurvey) return;\r\n      let { title, description, logic, skipTo, maxPageItemsAllowed } = values;\r\n      title = _.trim(title);\r\n      description = _.trim(description);\r\n      if (pageNumber != -1) {\r\n        let page = this.currentSurvey.getPage(pageNumber);\r\n        page = page\r\n          .setTitle(title)\r\n          .setDescription(description)\r\n          .setMaxPageItemsAllowed(maxPageItemsAllowed)\r\n          .setLogic(logic);\r\n        if (logic) {\r\n          page = page.setSkipTo(skipTo);\r\n        }\r\n        this.updateSurveyState(this.currentSurvey.updatePage(pageNumber, page));\r\n      }\r\n    },\r\n    randomizePageItems: function(pageNo, randomize) {\r\n      let page = this.currentSurvey.getPage(pageNo);\r\n      page = page.setRandomizeQuestions(randomize);\r\n      this.updateSurveyState(this.currentSurvey.updatePage(pageNo, page));\r\n    },\r\n    validateCode: function(code) {\r\n      return axios({\r\n        url: `/validate/code`,\r\n        method: \"POST\",\r\n        data: { code }\r\n      })\r\n        .then(response => {\r\n          if (response.data.status) {\r\n            return Promise.reject(response.data.error);\r\n          }\r\n          return Promise.resolve();\r\n        })\r\n        .catch(err => {\r\n          throw err;\r\n        });\r\n    },\r\n    optionsPageItemOpen: function(pageItemNumber, options) {\r\n      let settingsDef = SettingsDefinitionBuilder(),\r\n        pageItem = this.currentSurvey.getPageItem(pageItemNumber);\r\n      if (!pageItem) {\r\n        return;\r\n      }\r\n      if (pageItem.getType() == \"question\") {\r\n        let settingsValues = {\r\n          title: pageItem.getTitle(),\r\n          required:\r\n            pageItem.getSubType() != \"yesno\" &&\r\n            pageItem.getSubType() != \"code\" &&\r\n            pageItem.getRequired(),\r\n          quizMode:\r\n            (pageItem.getSubType() == \"yesno\" ||\r\n              pageItem.getSubType() == \"multivalue\") &&\r\n            pageItem.getQuizMode(),\r\n          options:\r\n            pageItem.getSubType() == \"multivalue\" && pageItem.getOptions(),\r\n          questionDisplayType:\r\n            pageItem.getSubType() == \"multivalue\" && pageItem.getDisplayType(),\r\n          answer:\r\n            (pageItem.getSubType() == \"yesno\" ||\r\n              pageItem.getSubType() == \"multivalue\") &&\r\n            pageItem.getAnswer(),\r\n          codeValidator:\r\n            pageItem.getSubType() == \"code\" && pageItem.getCodeValidator(),\r\n          marks:\r\n            (pageItem.getSubType() == \"yesno\" ||\r\n              pageItem.getSubType() == \"multivalue\") &&\r\n            pageItem.getMarks(),\r\n          logic:\r\n            (pageItem.getSubType() == \"yesno\" ||\r\n              pageItem.getSubType() == \"multivalue\") &&\r\n            pageItem.getLogic(),\r\n          skipTo:\r\n            (pageItem.getSubType() == \"yesno\" ||\r\n              pageItem.getSubType() == \"multivalue\") &&\r\n            this.getModifiedValue(pageItem.getSkipTo().toJS()),\r\n          markdown:\r\n            (pageItem.getSubType() == \"multivalue\" ||\r\n              pageItem.getSubType() == \"code\") &&\r\n            pageItem.getMarkdown(),\r\n          defaultTemplate:\r\n            pageItem.getSubType() == \"code\" && pageItem.getDefaultTemplate(),\r\n          language: pageItem.getSubType() == \"code\" && pageItem.getLanguage(),\r\n          questionTimeOut: pageItem.getQuestionTimeOut()\r\n        };\r\n\r\n        if (pageItem[\"subType\"] == \"code\") {\r\n          settingsDef\r\n            .addSettingsGroup(\"General\")\r\n            .addSetting(\"title\", \"string\", i18n.t(\"Question title\"), {\r\n              required: true,\r\n              multiLine: true,\r\n              focusFirst: true\r\n            })\r\n            .addSetting(\"markdown\", \"bool\", i18n.t(\"markdown\"), {\r\n              isPrimary: true,\r\n              icon: \"icon-embed2\"\r\n            })\r\n            .addSetting(\r\n              \"questionTimeOut\",\r\n              \"string\",\r\n              i18n.t(\"Question timeout (minutes)\"),\r\n              {\r\n                type: \"number\",\r\n                textOnly: true\r\n              }\r\n            );\r\n\r\n          settingsDef\r\n            .addSettingsGroup(\"Code\")\r\n            .addSetting(\"defaultTemplate\", \"code\", i18n.t(\"Sample code\"))\r\n            .addSetting(\"language\", \"choice\", i18n.t(\"Select language\"), {\r\n              choice: {\r\n                javascript: i18n.t(\"Javascript\"),\r\n                c: i18n.t(\"C\"),\r\n                cpp: i18n.t(\"C++\"),\r\n                csharp: i18n.t(\"C#\"),\r\n                java: i18n.t(\"Java\"),\r\n                html: i18n.t(\"HTML\")\r\n              },\r\n              isOtherHeader: true\r\n            });\r\n\r\n          settingsDef\r\n            .addSettingsGroup(\"Code validation\")\r\n            .addSetting(\r\n              \"codeValidator\",\r\n              \"code\",\r\n              i18n.t(\"Code validation test\"),\r\n              {\r\n                customValidation: this.validateCode\r\n              }\r\n            )\r\n            .addSetting(\"validator\", \"codeValidator\");\r\n        }\r\n        if (\r\n          pageItem[\"subType\"] == \"singletext\" ||\r\n          pageItem[\"subType\"] == \"datepicker\"\r\n        ) {\r\n          settingsDef\r\n            .addSettingsGroup(\"General\")\r\n            .addSetting(\"title\", \"string\", i18n.t(\"Question title\"), {\r\n              required: true,\r\n              maxLength: SurveyModelDefaults.MaxPageTitleLength,\r\n              focusFirst: true\r\n            })\r\n            .addSetting(\"required\", \"bool\", i18n.t(\"Required\"), {\r\n              isPrimary: true,\r\n              icon: \"icon-asterisk\"\r\n            })\r\n            .addSetting(\r\n              \"questionTimeOut\",\r\n              \"string\",\r\n              i18n.t(\"Question timeout (minutes)\"),\r\n              {\r\n                type: \"number\",\r\n                textOnly: true\r\n              }\r\n            );\r\n        }\r\n        if (pageItem[\"subType\"] == \"yesno\") {\r\n          settingsDef\r\n            .addSettingsGroup(\"General\")\r\n            .addSetting(\"title\", \"string\", i18n.t(\"Question title\"), {\r\n              required: true,\r\n              maxLength: SurveyModelDefaults.MaxPageTitleLength,\r\n              focusFirst: true\r\n            })\r\n            .addSetting(\"quizMode\", \"bool\", i18n.t(\"Quiz\"), {\r\n              isPrimary: true,\r\n              icon: \"icon-quiz_Q_A\"\r\n            })\r\n            .addSetting(\"answer\", \"answer\", i18n.t(\"Correct answer\"))\r\n            .addSetting(\"marks\", \"string\", i18n.t(\"Marks\"), {\r\n              type: \"number\",\r\n              textOnly: true\r\n            })\r\n            .addSetting(\"markdown\", \"bool\", i18n.t(\"markdown\"), {\r\n              isPrimary: true,\r\n              icon: \"icon-embed2\"\r\n            })\r\n            .addSetting(\r\n              \"questionTimeOut\",\r\n              \"string\",\r\n              i18n.t(\"Question timeout (minutes)\"),\r\n              {\r\n                type: \"number\",\r\n                textOnly: true\r\n              }\r\n            );\r\n        }\r\n        if (pageItem[\"subType\"] == \"multivalue\") {\r\n          settingsDef\r\n            .addSettingsGroup(\"General\")\r\n            .addSetting(\"title\", \"string\", i18n.t(\"Question title\"), {\r\n              required: true,\r\n              focusFirst: true,\r\n              multiLine: true\r\n            })\r\n            .addSetting(\r\n              \"questionDisplayType\",\r\n              \"choice\",\r\n              i18n.t(\"Display choices as\"),\r\n              {\r\n                choice: {\r\n                  dropdown: i18n.t(\"Dropdown\"),\r\n                  radio: i18n.t(\"Radio\"),\r\n                  checkbox: i18n.t(\"Checkbox\")\r\n                },\r\n                isOtherHeader: true\r\n              }\r\n            )\r\n            .addSetting(\"required\", \"bool\", i18n.t(\"Required\"), {\r\n              isPrimary: true,\r\n              icon: \"icon-asterisk\"\r\n            })\r\n            .addSetting(\"quizMode\", \"bool\", i18n.t(\"Quiz\"), {\r\n              isPrimary: true,\r\n              icon: \"icon-quiz_Q_A\"\r\n            })\r\n            .addSetting(\"options\", \"array\", i18n.t(\"Options\"), {\r\n              options: pageItem[\"options\"],\r\n              answer: pageItem.getAnswer()\r\n            })\r\n            .addSetting(\"marks\", \"string\", i18n.t(\"Marks\"), {\r\n              type: \"number\",\r\n              textOnly: true\r\n            })\r\n            .addSetting(\"logic\", \"bool\", i18n.t(\"Logic\"), {\r\n              isPrimary: true,\r\n              icon: \"icon-bulb\"\r\n            })\r\n            .addSetting(\"skipTo\", \"linkedchoice\", i18n.t(\"Skip to\"), {\r\n              linkedchoice: this.getLinkedChoice(pageItemNumber),\r\n              options: pageItem[\"options\"].toArray()\r\n            })\r\n            .addSetting(\"markdown\", \"bool\", i18n.t(\"markdown\"), {\r\n              isPrimary: true,\r\n              icon: \"icon-embed2\"\r\n            })\r\n            .addSetting(\r\n              \"questionTimeOut\",\r\n              \"string\",\r\n              i18n.t(\"Question timeout (minutes)\"),\r\n              {\r\n                type: \"number\",\r\n                textOnly: true\r\n              }\r\n            );\r\n        }\r\n        SettingsActions.open(\r\n          settingsDef.getSettingsDefinition(),\r\n          settingsValues,\r\n          SurveysActions.optionsPageItemDone.bind(\r\n            SurveysActions,\r\n            pageItemNumber\r\n          ),\r\n          null,\r\n          options\r\n        );\r\n      } else {\r\n        let settingsValues = {};\r\n        if (pageItem.getSubType() == \"text\") {\r\n          settingsValues = {\r\n            title: pageItem.getTitle(),\r\n            description: pageItem.getDescription()\r\n          };\r\n          settingsDef\r\n            .addSettingsGroup()\r\n            .addSetting(\"title\", \"string\", i18n.t(\"Section title\"), {\r\n              maxLength: SurveyModelDefaults.MaxPageTitleLength,\r\n              focusFirst: true\r\n            })\r\n            .addSetting(\r\n              \"description\",\r\n              \"string\",\r\n              i18n.t(\"Section description\"),\r\n              {\r\n                multiLine: true,\r\n                rows: 1,\r\n                rowsMax: 5,\r\n                maxLength: SurveyModelDefaults.MaxPageSubTitleLength\r\n              }\r\n            );\r\n        }\r\n\r\n        SettingsActions.open(\r\n          settingsDef.getSettingsDefinition(),\r\n          settingsValues,\r\n          SurveysActions.optionsPageItemDone.bind(\r\n            SurveysActions,\r\n            pageItemNumber\r\n          ),\r\n          null,\r\n          options\r\n        );\r\n      }\r\n    },\r\n    getModifiedValue: function(skipTo) {\r\n      let modifiedValue = {};\r\n      _.forIn(skipTo, (value, key) => {\r\n        modifiedValue[key] = {\r\n          title: value.pageNo,\r\n          linked: value.questionNo\r\n        };\r\n      });\r\n      return modifiedValue;\r\n    },\r\n    getLinkedChoice: function(id) {\r\n      let pageLength = this.currentSurvey.getPagesSize(),\r\n        flag = false,\r\n        found = false,\r\n        choice = {};\r\n      for (let i = 0; i < pageLength; i++) {\r\n        //choice[i] = `Page ${i + 1}`\r\n        let page = this.currentSurvey.getPage(i),\r\n          refIndex = page.getPageItemRefIndex(id);\r\n        if (found) {\r\n          flag = true;\r\n        }\r\n        if (refIndex != -1) {\r\n          if (refIndex != page.getPageItemRefsSize() - 1) flag = true;\r\n          found = true;\r\n        }\r\n        if (flag) {\r\n          let linked = this.getQuestionChoice(\r\n            page.getPageItemRefs().toArray(),\r\n            refIndex\r\n          );\r\n          choice[i] = {\r\n            title: `Section ${i + 1}`,\r\n            linked\r\n          };\r\n        }\r\n      }\r\n      choice[\"eos\"] = {\r\n        title: i18n.t(`End of Survey`)\r\n      };\r\n      return choice;\r\n    },\r\n    getQuestionChoice: function(refs, refIndex) {\r\n      let choice = {},\r\n        count = 0;\r\n      for (let i = 0; i < refs.length; i++) {\r\n        let pageItem = this.currentSurvey.getPageItem(refs[i]);\r\n        if (pageItem.isQuestion) {\r\n          ++count;\r\n          if (refIndex >= i) {\r\n            continue;\r\n          }\r\n          choice[count] = `Question ${count}`;\r\n        }\r\n      }\r\n      return choice;\r\n    },\r\n    optionsPageItemDone: function(pageItemNumber, values) {\r\n      if (!this.currentSurvey) return;\r\n      let {\r\n        title,\r\n        description,\r\n        required,\r\n        quizMode,\r\n        answer,\r\n        marks,\r\n        questionDisplayType,\r\n        logic,\r\n        skipTo,\r\n        markdown,\r\n        codeValidator,\r\n        defaultTemplate,\r\n        language,\r\n        questionTimeOut\r\n      } = values;\r\n      title = _.trim(title);\r\n      description = _.trim(description);\r\n      codeValidator = _.trim(codeValidator);\r\n      defaultTemplate = _.trim(defaultTemplate);\r\n      language = _.trim(language);\r\n      let pageItem = this.currentSurvey.getPageItem(pageItemNumber);\r\n      pageItem = pageItem.setTitle(title);\r\n      //Logger.debug(pageItem.getSubType());\r\n      if (!pageItem) {\r\n        return;\r\n      }\r\n      if (pageItem.getType() == \"question\") {\r\n        pageItem = pageItem.setQuestionTimeOut(questionTimeOut);\r\n        if (\r\n          pageItem.getSubType() != \"yesno\" &&\r\n          pageItem.getSubType() != \"code\"\r\n        ) {\r\n          pageItem = pageItem.setRequired(required);\r\n        }\r\n        if (pageItem.getSubType() == \"code\") {\r\n          pageItem = pageItem\r\n            .setCodeValidator(codeValidator)\r\n            .setDefaultTemplate(defaultTemplate)\r\n            .setMarkdown(markdown)\r\n            .setLanguage(language);\r\n        }\r\n        if (pageItem.getSubType() == \"yesno\") {\r\n          pageItem = pageItem\r\n            .setQuizMode(quizMode)\r\n            .setAnswer(answer)\r\n            .setMarks(marks)\r\n            .setLogic(logic);\r\n          pageItem = this.setSkipTo(pageItem, skipTo);\r\n        }\r\n        if (pageItem.getSubType() == \"multivalue\") {\r\n          pageItem = pageItem\r\n            .setOptions(values.options)\r\n            .setQuizMode(quizMode)\r\n            .setAnswer(answer)\r\n            .setMarks(marks)\r\n            .setDisplayType(questionDisplayType)\r\n            .setLogic(logic)\r\n            .setMarkdown(markdown);\r\n          pageItem = this.setSkipTo(pageItem, skipTo);\r\n        }\r\n        this.updateSurveyState(\r\n          this.currentSurvey.updatePageItem(pageItem)\r\n        ).then(() => this.calculateSectionMarks());\r\n      } else {\r\n        pageItem = pageItem.setDescription(description);\r\n        this.updateSurveyState(\r\n          this.currentSurvey.updatePageItem(pageItem)\r\n        ).then(() => this.calculateSectionMarks());\r\n      }\r\n    },\r\n    calculateSectionMarks: function() {\r\n      let currentSurvey = this.currentSurvey,\r\n        pages = this.currentSurvey.getPages(),\r\n        surveyMarks = 0;\r\n      pages.forEach((page, i) => {\r\n        let pageItemRefs = page.getPageItemRefs(),\r\n          totalSectionMarks = 0,\r\n          pageItem;\r\n        pageItemRefs.forEach(pageItemRef => {\r\n          pageItem = currentSurvey.getPageItem(pageItemRef);\r\n          let pageItemType = pageItem.getSubType(),\r\n            quizMode,\r\n            marks;\r\n          if (pageItemType == \"multivalue\" || pageItemType == \"yesno\") {\r\n            quizMode = pageItem.getQuizMode();\r\n            marks = pageItem.getMarks();\r\n          }\r\n          if (quizMode) totalSectionMarks += parseInt(marks);\r\n        });\r\n        surveyMarks += totalSectionMarks;\r\n        page = page.setPageMarksTotal(totalSectionMarks);\r\n        currentSurvey = currentSurvey.updatePage(i, page);\r\n      });\r\n      return this.updateSurveyState(\r\n        currentSurvey.setSurveyMarksTotal(surveyMarks)\r\n      );\r\n    },\r\n    setSkipTo: function(pageItem, skipTo) {\r\n      _.forIn(skipTo, (value, key) => {\r\n        let skipObj = {\r\n          pageNo: value.title,\r\n          questionNo: value.linked\r\n        };\r\n        pageItem = pageItem.setSkipTo(key, skipObj);\r\n      });\r\n      return pageItem;\r\n    },\r\n    setUpdatedSurvey: function(surveyId) {\r\n      this._surveyProvider.getUserSurvey(surveyId).then(updatedSurvey => {\r\n        this.updateState(\r\n          this.state\r\n            .setIn([\"userSurveys\", updatedSurvey.getId()], updatedSurvey)\r\n            .set(\"currentSurvey\", updatedSurvey)\r\n        );\r\n      });\r\n    },\r\n    addQuestionDone: function(value, pageNumber, refIndex) {\r\n      let page = this.currentSurvey.getPage(\r\n          _.isNumber(pageNumber)\r\n            ? pageNumber\r\n            : this.currentSurvey.getPagesSize() - 1\r\n        ),\r\n        pageItem = SurveyModelBuilder.PageItemFactory.question(\r\n          SurveyModelBuilder.PageItemFactory.QuestionTypes[value.subType]\r\n        );\r\n      if (refIndex + 1 < page.getPageItemRefsSize() && _.isNumber(pageNumber)) {\r\n        this.updateSurveyState(\r\n          this.currentSurvey.addPageItemToPageAndSurvey(\r\n            page,\r\n            pageItem,\r\n            refIndex + 1\r\n          )\r\n        );\r\n      } else {\r\n        this.updateSurveyState(\r\n          this.currentSurvey.addPageItemToPageAndSurvey(page, pageItem)\r\n        );\r\n      }\r\n    },\r\n    addDecoratorDone: function(value, pageNumber, refIndex) {\r\n      let page = this.currentSurvey.getPage(\r\n        _.isNumber(pageNumber)\r\n          ? pageNumber\r\n          : this.currentSurvey.getPagesSize() - 1\r\n      );\r\n      let pageItem = SurveyModelBuilder.PageItemFactory.decorator(\r\n        SurveyModelBuilder.PageItemFactory.DecoratorTypes[value.subType],\r\n        value\r\n      );\r\n      pageItem =\r\n        value.title || value.description\r\n          ? pageItem.setTitle(value.title).setDescription(value.description)\r\n          : pageItem;\r\n      if (refIndex + 1 < page.getPageItemRefsSize() && _.isNumber(pageNumber)) {\r\n        this.updateSurveyState(\r\n          this.currentSurvey.addPageItemToPageAndSurvey(\r\n            page,\r\n            pageItem,\r\n            refIndex + 1\r\n          )\r\n        );\r\n      } else {\r\n        this.updateSurveyState(\r\n          this.currentSurvey.addPageItemToPageAndSurvey(page, pageItem)\r\n        );\r\n      }\r\n    },\r\n    addPageDone: function(index) {\r\n      let page = SurveyModelBuilder.PageFactory._createDefaultPage();\r\n      if (index < this.currentSurvey.getPagesSize()) {\r\n        this.updateSurveyState(this.currentSurvey.insertPage(index, page));\r\n      } else {\r\n        this.updateSurveyState(this.currentSurvey.pushPage(page));\r\n      }\r\n    },\r\n    deleteQuestion: function(pageNumber, id) {\r\n      this.storeLastState();\r\n      this.updateSurveyState(this.currentSurvey.removePageItem(id)).then(\r\n        result => {\r\n          if (result) {\r\n            Logger.debug(\"survey deleted.\", result);\r\n            SettingsActions.close();\r\n            NotificationActions.notify(\r\n              Notifications.INFO,\r\n              i18n.t(\"The Question has been deleted\"),\r\n              i18n.t(\"undo\"),\r\n              SurveysActions.undo\r\n            );\r\n          }\r\n        }\r\n      );\r\n    },\r\n    changeQuestion: function(pageNumber, id, index, subType) {\r\n      let oldPageItem = this.currentSurvey.getPageItem(id),\r\n        newPageItem = SurveyModelBuilder.PageItemFactory.question(\r\n          SurveyModelBuilder.PageItemFactory.QuestionTypes[subType]\r\n        );\r\n      if (oldPageItem.getSubType() == subType) return;\r\n      let title = oldPageItem.getTitle(),\r\n        required =\r\n          oldPageItem.getSubType() != \"yesno\" &&\r\n          oldPageItem.getSubType() != \"code\" &&\r\n          oldPageItem.getRequired();\r\n      newPageItem = newPageItem.setTitle(title);\r\n      if (\r\n        newPageItem.getSubType() != \"yesno\" &&\r\n        newPageItem.getSubType() != \"code\"\r\n      )\r\n        newPageItem = newPageItem.setRequired(required);\r\n      let page = this.currentSurvey.getPage(pageNumber);\r\n      this.currentSurvey = this.currentSurvey.addPageItemToPageAndSurvey(\r\n        page,\r\n        newPageItem,\r\n        index\r\n      );\r\n      this.currentSurvey = this.currentSurvey.removePageItem(id);\r\n      this.updateSurveyState(this.currentSurvey);\r\n    },\r\n    deletePage: function(pageNumber) {\r\n      this.storeLastState();\r\n      this.updateSurveyState(this.currentSurvey.removePage(pageNumber)).then(\r\n        result => {\r\n          if (result) {\r\n            Logger.debug(\"survey deleted.\", result);\r\n            NotificationActions.notify(\r\n              Notifications.INFO,\r\n              i18n.t(\"The Page has been deleted\"),\r\n              i18n.t(\"undo\"),\r\n              SurveysActions.undo\r\n            );\r\n          }\r\n        }\r\n      );\r\n    },\r\n    movePageItem: function(\r\n      id,\r\n      newPageIndex,\r\n      newQuestionIndex,\r\n      oldPageIndex,\r\n      oldQuestionIndex\r\n    ) {\r\n      let page = this.currentSurvey.getPage(newPageIndex);\r\n      if (newPageIndex === oldPageIndex) {\r\n        this.updateSurveyState(\r\n          this.currentSurvey.updatePage(\r\n            newPageIndex,\r\n            page.movePageItemRef(oldQuestionIndex, newQuestionIndex)\r\n          )\r\n        );\r\n      } else {\r\n        let survey = this.currentSurvey,\r\n          pageItem = survey.getPageItem(id);\r\n        survey = survey.removePageItem(pageItem);\r\n        survey = survey.addPageItemToPageAndSurvey(\r\n          page,\r\n          pageItem,\r\n          newQuestionIndex\r\n        );\r\n\r\n        this.updateSurveyState(survey);\r\n      }\r\n    },\r\n    moveQuestion: function(moveTo, pageIndex, questionId, questionIndex) {\r\n      let page = this.currentSurvey.getPage(pageIndex);\r\n      if (questionId) {\r\n        let survey = this.currentSurvey,\r\n          destPage = survey.getPage(moveTo),\r\n          pageItem = survey.getPageItem(questionId);\r\n        survey = survey.removePageItem(pageItem);\r\n\r\n        if (moveTo < pageIndex) {\r\n          survey = survey.addPageItemToPageAndSurvey(destPage, pageItem);\r\n        } else {\r\n          survey = survey.addPageItemToPageAndSurvey(destPage, pageItem, 0);\r\n        }\r\n\r\n        this.updateSurveyState(survey);\r\n      } else {\r\n        this.updateSurveyState(\r\n          this.currentSurvey.updatePage(\r\n            this.currentSurvey.getPageIndex(page),\r\n            page.movePageItemRef(questionIndex, moveTo)\r\n          )\r\n        );\r\n      }\r\n    },\r\n    movePage: function(oldIndex, newIndex) {\r\n      this.updateSurveyState(this.currentSurvey.movePage(oldIndex, newIndex));\r\n    },\r\n    storeLastState: function() {\r\n      this.lastState = this.state;\r\n    },\r\n    shuffleQuestions: function(pageIndex) {\r\n      let page = this.currentSurvey.getPage(pageIndex),\r\n        pageItemRefs = page.getPageItemRefs(),\r\n        pageItemRefsSize = page.getPageItemRefsSize(),\r\n        shuffledArray = shuffle(pageItemRefs.toArray());\r\n      for (let i = 0; i < pageItemRefsSize; i++) {\r\n        page = page.removePageItemRef(0);\r\n      }\r\n      for (let i = 0; i < pageItemRefsSize; i++) {\r\n        page = page.addPageItemRef(shuffledArray[i]);\r\n      }\r\n      this.updateSurveyState(this.currentSurvey.updatePage(pageIndex, page));\r\n    },\r\n    startTest: function(id) {\r\n      let surveyStoreObject = this;\r\n      if (this.currentSurvey) {\r\n        SurveyRunnerActions.startTest(this.currentSurvey);\r\n      } else {\r\n        this._getSurveyById(id).then(survey => {\r\n          surveyStoreObject.currentSurvey = survey;\r\n          SurveyRunnerActions.startTest(survey);\r\n        });\r\n      }\r\n    },\r\n    stopTest: function(surveyRunnerModel) {\r\n      let db = new PouchDB(\"test\");\r\n      db.close().then(() => {\r\n        let id = this.currentSurvey.getId();\r\n        this.routeToSurvey(id);\r\n      });\r\n    }\r\n  });\r\n\r\nexport default SurveysStore;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/stores/surveysstore.js","import createStore from \"reflux-core/lib/createStore\";\r\nimport SurveyModelBuilder from \"../helpers/surveymodelbuilder\";\r\nimport ContactBuilder from \"../helpers/contacts/contactbuilder\";\r\nimport settleAll from \"../helpers/settleAll\";\r\nimport ObjectID from \"bson-objectid\";\r\nimport Immutable from \"immutable\";\r\nimport _ from \"lodash\";\r\nimport createHashHistory from \"history/lib/createHashHistory\";\r\nimport NotificationActions from \"../actions/notificationactions.js\";\r\nimport {\r\n  contactView,\r\n  Notifications,\r\n  distributionTypes,\r\n  OAuth,\r\n  defaultMapCenter,\r\n  googleMap,\r\n  locationSelecteionLimit\r\n} from \"../appsettings.json\";\r\nimport i18n from \"../helpers/i18n.js\";\r\nimport DIService from \"../helpers/diservice\";\r\nimport PublishSurveyActions from \"../actions/publishsurveyactions.js\";\r\nimport AuthActions from \"../actions/authactions.js\";\r\nimport Logger from \"../helpers/logger.js\";\r\nimport axios from \"axios\";\r\nimport Promise from \"bluebird\";\r\nimport ClientSurveyResponseModelProvider from \"../helpers/clientsurveyresponsemodelprovider\";\r\nimport SettingsDefinitionBuilder from \"../helpers/settingdefinitionbuilder.js\";\r\nimport SettingsActions from \"../actions/settingsactions.js\";\r\nconst surveyModelBuilder = SurveyModelBuilder(),\r\n  contactBuilder = ContactBuilder(),\r\n  PublishSurveyStore = createStore({\r\n    listenables: [PublishSurveyActions, AuthActions],\r\n    limit: contactView.navigation.pageSize,\r\n    skip: 0,\r\n    key: \"\",\r\n    totalRows: null,\r\n    allSelectedContacts: Immutable.Map(),\r\n    _allResponses: Immutable.Map(),\r\n    getProviders: function() {\r\n      let providers = [];\r\n      _.forIn(OAuth, (provider, key) => {\r\n        providers.push(key);\r\n      });\r\n      return providers;\r\n    },\r\n    init: function() {\r\n      this.state = Immutable.fromJS({\r\n        //publishedSurveys\r\n        publishedSurveys: Immutable.Map(),\r\n        currentPublishedSurveysPage: null,\r\n        totalPublishedSurveysPage: 0,\r\n        //other\r\n        isAuthorizedUser: false,\r\n        selectedSurveyId: null,\r\n        surveys: Immutable.Set(),\r\n        stepIndex: null,\r\n        //selected Contacts\r\n        selectedContacts: Immutable.Map(),\r\n        currentSelectedContactsPage: null,\r\n        totalSelectedContactsPage: 0,\r\n        allSelectedContactsIds: Immutable.Map(),\r\n        //selected provider info\r\n        selectedProviders: Immutable.Set(this.getProviders()),\r\n        //location settings\r\n        askLocation: false,\r\n        locationRestrict: false,\r\n        locationRequired: false,\r\n        currentLocation: {},\r\n        errorMessage: null,\r\n        //survey Valid Timespan details\r\n        isSurveyAvailabilitySet: false,\r\n        surveyStartDateTime: null,\r\n        surveyEndDateTime: null,\r\n        //setting Locations while survey design\r\n        myLocation: { latitude: null, longitude: null },\r\n        selectedLocations: Immutable.Set(),\r\n        mapCenterLocation: {},\r\n        currentFocusedLocation: {},\r\n        zoomLevel: null,\r\n        blink: false,\r\n        //selected for notification\r\n        selectedForNotification: Immutable.Set(),\r\n        userProfile: {},\r\n        //currentPublishedSurveys\r\n        currentPublishedSurvey: null,\r\n        //currentresponses\r\n        totalResponsePage: 0,\r\n        currentResponsePage: 0,\r\n        currentResponses: Immutable.Map()\r\n      });\r\n    },\r\n    getInitialState: function() {\r\n      return this.state;\r\n    },\r\n    updateState: function(newState, suppress) {\r\n      if (this.state.equals(newState)) return;\r\n      this.state = newState;\r\n      if (!suppress) {\r\n        this.trigger(this.state);\r\n      }\r\n    },\r\n    getPublishedSurvey: function(id) {\r\n      let publishedSurvey = this.state.getIn([\"publishedSurveys\", id]);\r\n      if (publishedSurvey) {\r\n        return Promise.resolve(publishedSurvey);\r\n      }\r\n      return this._publishedSurveyProvider.getUserPublishedSurvey(id);\r\n    },\r\n    initCurrentPublishedSurvey: function(id) {\r\n      this.getPublishedSurvey(id).then(publishedSurvey => {\r\n        this.updateState(\r\n          this.state\r\n            .set(\"currentPublishedSurvey\", publishedSurvey)\r\n            .set(\"askLocation\", publishedSurvey.getAskLocation())\r\n            .set(\"locationRequired\", publishedSurvey.getLocationRequired())\r\n            .set(\"locationRestrict\", publishedSurvey.getLocationRestrict())\r\n            .set(\r\n              \"selectedLocations\",\r\n              Immutable.Set(publishedSurvey.getSelectedLocations())\r\n            )\r\n            .setIn([\"publishedSurveys\", id], publishedSurvey)\r\n            .set(\r\n              \"isSurveyAvailabilitySet\",\r\n              publishedSurvey.getIsSurveyAvailabilitySet()\r\n            )\r\n            .set(\r\n              \"surveyEndDateTime\",\r\n              new Date(publishedSurvey.getSurveyEndDateTime())\r\n            )\r\n            .set(\r\n              \"surveyStartDateTime\",\r\n              new Date(publishedSurvey.getSurveyStartDateTime())\r\n            )\r\n        );\r\n      });\r\n    },\r\n    enableNotifications: function(value) {\r\n      this.updateState(\r\n        this.state.set(\r\n          \"currentPublishedSurvey\",\r\n          this.state.getIn([\"currentPublishedSurvey\"]).setNotification(value)\r\n        )\r\n      );\r\n    },\r\n    setRecipientsForNotifications: function(recipients) {\r\n      this.updateState(\r\n        this.state.set(\r\n          \"currentPublishedSurvey\",\r\n          this.state\r\n            .getIn([\"currentPublishedSurvey\"])\r\n            .setRecipientsForNotification(recipients)\r\n        )\r\n      );\r\n    },\r\n    setLocationSettings: function(currentPublishedSurvey) {\r\n      return currentPublishedSurvey\r\n        .set(\"askLocation\", this.state.get(\"askLocation\"))\r\n        .set(\"locationRequired\", this.state.get(\"locationRequired\"))\r\n        .set(\"locationRestrict\", this.state.get(\"locationRestrict\"))\r\n        .set(\"selectedLocations\", this.state.get(\"selectedLocations\").toJS());\r\n    },\r\n    setSurveyAvailibilitySettings: function(currentPublishedSurvey) {\r\n      return currentPublishedSurvey\r\n        .set(\r\n          \"isSurveyAvailabilitySet\",\r\n          this.state.get(\"isSurveyAvailabilitySet\")\r\n        )\r\n        .set(\"surveyStartDateTime\", this.state.get(\"surveyStartDateTime\"))\r\n        .set(\"surveyEndDateTime\", this.state.get(\"surveyEndDateTime\"));\r\n    },\r\n    updateCurrentPublishedSurvey: function() {\r\n      if (this.updating) {\r\n        return;\r\n      }\r\n      this.updating = true;\r\n      let currentPublishedSurvey = this.state.getIn([\"currentPublishedSurvey\"]);\r\n      currentPublishedSurvey = this.setLocationSettings(currentPublishedSurvey);\r\n      currentPublishedSurvey = this.setSurveyAvailibilitySettings(\r\n        currentPublishedSurvey\r\n      );\r\n      this._publishedSurveyProvider\r\n        .updateUserPublishedSurvey(currentPublishedSurvey)\r\n        .then(publishedSurvey => {\r\n          this.updateState(\r\n            this.state\r\n              .set(\"currentPublishedSurvey\", publishedSurvey)\r\n              .setIn(\r\n                [\"publishedSurveys\", publishedSurvey.getId()],\r\n                publishedSurvey\r\n              )\r\n              .set(\"askLocation\", publishedSurvey.getAskLocation())\r\n              .set(\"locationRequired\", publishedSurvey.getLocationRequired())\r\n              .set(\"locationRestrict\", publishedSurvey.getLocationRestrict())\r\n              .set(\r\n                \"isSurveyAvailabilitySet\",\r\n                publishedSurvey.getIsSurveyAvailabilitySet()\r\n              )\r\n              .set(\r\n                \"surveyStartDateTime\",\r\n                publishedSurvey.getSurveyStartDateTime()\r\n              )\r\n              .set(\"surveyEndDateTime\", publishedSurvey.getSurveyEndDateTime())\r\n              .set(\r\n                \"selectedLocations\",\r\n                Immutable.Set(publishedSurvey.getSelectedLocations())\r\n              )\r\n          );\r\n          this.updating = false;\r\n          NotificationActions.notify(\r\n            Notifications.INFO,\r\n            i18n.t(\"Published survey updated\")\r\n          );\r\n        });\r\n    },\r\n    userChanged: function(prevProfile, newProfile) {\r\n      this._userProfile = newProfile;\r\n      this._surveyProvider = DIService.get(\"SurveyDataProvider\", {\r\n        SurveyModelBuilder: surveyModelBuilder\r\n      });\r\n      this._groupsAndRecipientsProvider = DIService.get(\r\n        \"GroupsAndRecipientsProvider\",\r\n        { ContactBuilder: contactBuilder }\r\n      );\r\n      this._publishedSurveyProvider = DIService.get(\"PublishedSurveyProvider\");\r\n      this.updateState(\r\n        this.state\r\n          .set(\"isAuthorizedUser\", !newProfile.isGuest)\r\n          .set(\"userProfile\", newProfile)\r\n      );\r\n    },\r\n    setSurveyId: function(surveyId) {\r\n      //Logger.log(surveyId);\r\n      if (surveyId) {\r\n        this.updateState(this.state.set(\"selectedSurveyId\", surveyId), true);\r\n      }\r\n    },\r\n    addContact: function(contact) {\r\n      this.allSelectedContacts = this.allSelectedContacts.setIn(\r\n        [contact._id],\r\n        contact\r\n      );\r\n      this.updateNavigationAndSelectedContactsState(\r\n        this.state.get(\"currentSelectedContactsPage\")\r\n      );\r\n      this.configureSelectedIds();\r\n    },\r\n    optionsInvitationOpen: function(link, options) {\r\n      let settingsDef = SettingsDefinitionBuilder(),\r\n        settingsValues = {\r\n          to: [],\r\n          cc: [],\r\n          bcc: [],\r\n          subject: \"\",\r\n          link,\r\n          html: \"\"\r\n        };\r\n      settingsDef\r\n        .addSettingsGroup(i18n.t(\"Invite people\"))\r\n        .addSetting(\"to\", \"groups\", i18n.t(\"Send invitation to\"), {\r\n          required: true,\r\n          requiredText: i18n.t(\"At least one email id is required\"),\r\n          hintText: `someone@domain.com`,\r\n          showRequiredStatus: true\r\n        })\r\n        .addSetting(\"cc\", \"groups\", i18n.t(\"CC\"), {\r\n          hintText: `someone@domain.com`,\r\n          showRequiredStatus: false\r\n        })\r\n        .addSetting(\"bcc\", \"groups\", i18n.t(\"BCC\"), {\r\n          hintText: `someone@domain.com`,\r\n          showRequiredStatus: false\r\n        })\r\n        .addSetting(\"subject\", \"string\", i18n.t(\"Subject\"), {\r\n          required: true,\r\n          hintText: i18n.t(\"A short subject for the invite mail\"),\r\n          showRequiredStatus: true\r\n        })\r\n        .addSetting(\"link\", \"copy\", i18n.t(\"Survey link\"), {\r\n          required: true,\r\n          disabled: true\r\n        })\r\n        .addSetting(\"html\", \"richText\", i18n.t(\"Message\"), {\r\n          required: true,\r\n          showRequiredStatus: true,\r\n          rteDefault: `<p>Hi,</p><p>Please click here to start exam <a href=\"${link}\">${link}</a></p><p>Thanks and regards,</p>`,\r\n          textDefault: `Hi,\r\n          Please click here to start exam ${link}\r\n          Thanks and regards,`\r\n        });\r\n      SettingsActions.open(\r\n        settingsDef.getSettingsDefinition(),\r\n        settingsValues,\r\n        PublishSurveyActions.optionsInvitationDone,\r\n        null,\r\n        options\r\n      );\r\n    },\r\n    optionsInvitationDone: function(invitation) {\r\n      let { to } = invitation;\r\n      if (to.length) {\r\n        invitation = _.omit(invitation, \"link\");\r\n        axios({\r\n          url: `/invite`,\r\n          method: \"POST\",\r\n          data: {\r\n            invitation\r\n          }\r\n        }).then(() => {\r\n          NotificationActions.notify(\r\n            Notifications.INFO,\r\n            i18n.t(\"Invitation completed\")\r\n          );\r\n        });\r\n      }\r\n    },\r\n    addContactsByGroup: function(groupName) {\r\n      this._groupsAndRecipientsProvider\r\n        .getRecipientsByGroup(groupName, true)\r\n        .then(result => {\r\n          _.forIn(result.docs, contact => {\r\n            this.allSelectedContacts = this.allSelectedContacts.setIn(\r\n              [contact._id],\r\n              contact\r\n            );\r\n          });\r\n          this.configureSelectedIds();\r\n          this.updateNavigationAndSelectedContactsState(\r\n            this.state.get(\"currentSelectedContactsPage\")\r\n          );\r\n        });\r\n    },\r\n    removeContact: function(contactId) {\r\n      this.allSelectedContacts = this.allSelectedContacts.deleteIn([contactId]);\r\n      this.configureSelectedIds();\r\n      this.updateNavigationAndSelectedContactsState(\r\n        this.state.get(\"currentSelectedContactsPage\")\r\n      );\r\n    },\r\n    configureSelectedIds: function() {\r\n      let ids = this.allSelectedContacts.map(contact => contact._id);\r\n      this.updateState(this.state.set(\"allSelectedContactsIds\", ids));\r\n    },\r\n    startPublish: function(surveyId) {\r\n      if (this.state.get(\"isAuthorizedUser\")) {\r\n        return this._surveyProvider\r\n          .getUserSurveysIdWithTitle()\r\n          .then(surveys => {\r\n            this.updateState(this.state.set(\"surveys\", Immutable.Set(surveys)));\r\n            if (!surveyId) {\r\n              this.updateState(this.state.set(\"selectedSurveyId\", surveyId));\r\n              this.routeToPublish();\r\n              return;\r\n            }\r\n            this.setSurveyId(surveyId);\r\n            //this.routeToPublish();\r\n            this.next();\r\n          });\r\n      }\r\n      NotificationActions.notify(\r\n        Notifications.INFO,\r\n        i18n.t(\"You can publish your surveys after you login\")\r\n      );\r\n    },\r\n    routeToPublish: function(step) {\r\n      if (_.isNull(step) || _.isNaN(step) || _.isUndefined(step)) {\r\n        step = 0;\r\n      }\r\n      this.updateState(this.state.set(\"stepIndex\", step));\r\n      let history = createHashHistory({\r\n          queryKey: false\r\n        }),\r\n        location = history.createLocation(`/surveys/publish/step${step + 1}`);\r\n      history.push(location);\r\n    },\r\n    routeToSurveys: function() {\r\n      let history = createHashHistory({\r\n          queryKey: false\r\n        }),\r\n        location = history.createLocation(`/surveys`);\r\n      history.push(location);\r\n    },\r\n    next: function() {\r\n      if (!this.state.get(\"selectedSurveyId\")) {\r\n        NotificationActions.notify(\r\n          Notifications.WARNING,\r\n          i18n.t(\"You must select survey.\")\r\n        );\r\n        return;\r\n      }\r\n      if (this.allSelectedContacts.size) {\r\n        this.updateState(\r\n          this.state\r\n            .set(\"currentSelectedContactsPage\", null)\r\n            .set(\"totalSelectedContactsPage\", 0)\r\n        );\r\n        this.updateNavigationAndSelectedContactsState();\r\n      }\r\n      this.routeToPublish(this.state.get(\"stepIndex\") + 1);\r\n    },\r\n    prev: function() {\r\n      if (this.allSelectedContacts.size) {\r\n        this.updateState(\r\n          this.state\r\n            .set(\"currentSelectedContactsPage\", null)\r\n            .set(\"totalSelectedContactsPage\", 0)\r\n        );\r\n        this.updateNavigationAndSelectedContactsState();\r\n      }\r\n      this.routeToPublish(this.state.get(\"stepIndex\") - 1);\r\n    },\r\n    reset: function() {\r\n      this.allSelectedContacts = Immutable.Map();\r\n      this.updateState(\r\n        this.state\r\n          .set(\"stepIndex\", 0)\r\n          .set(\"selectedSurveyId\", null)\r\n          .set(\"allSelectedContactsIds\", Immutable.Map())\r\n          .set(\"selectedContacts\", Immutable.Map())\r\n          .set(\"currentPublishedSurvey\", null)\r\n          .set(\"askLocation\", null)\r\n          .set(\"locationRequired\", null)\r\n          .set(\"locationRestrict\", null)\r\n          .set(\"isSurveyAvailabilitySet\", null)\r\n          .set(\"surveyStartDateTime\", null)\r\n          .set(\"surveyEndDateTime\", null)\r\n          .set(\"selectedLocations\", Immutable.Set())\r\n      );\r\n    },\r\n    cancel: function() {\r\n      this.reset();\r\n      this.routeToSurveys();\r\n    },\r\n    getPublishSurvey: function(survey, selectedDistibutionType) {\r\n      let publishedSurvey = {};\r\n      publishedSurvey[\"surveyId\"] = survey.getId();\r\n      publishedSurvey[\"survey\"] = survey.toJS();\r\n      if (selectedDistibutionType != distributionTypes.commonlink) {\r\n        if (!this.state.get(\"selectedContacts\").size) {\r\n          NotificationActions.notify(\r\n            Notifications.WARNING,\r\n            i18n.t(\"You must select contacts\")\r\n          );\r\n          return;\r\n        }\r\n        publishedSurvey[\"contacts\"] = this.state\r\n          .get(\"selectedContacts\")\r\n          .map(contact => {\r\n            return {\r\n              email: contact.email,\r\n              name: contact.fullName,\r\n              responseId: ObjectID().str\r\n            };\r\n          })\r\n          .toJS();\r\n      } else {\r\n        publishedSurvey[\"contacts\"] = Immutable.Map();\r\n      }\r\n      publishedSurvey[\"providers\"] = this.state\r\n        .get(\"selectedProviders\")\r\n        .toArray();\r\n      let recipients = this.state.get(\"selectedForNotification\").toArray();\r\n      publishedSurvey[\"askLocation\"] = this.state.get(\"askLocation\");\r\n      publishedSurvey[\"locationRequired\"] = this.state.get(\"locationRequired\");\r\n      publishedSurvey[\"locationRestrict\"] = this.state.get(\"locationRestrict\");\r\n      publishedSurvey[\"isSurveyAvailabilitySet\"] = this.state.get(\r\n        \"isSurveyAvailabilitySet\"\r\n      );\r\n      publishedSurvey[\"surveyStartDateTime\"] =\r\n        this.state.get(\"surveyStartDateTime\") &&\r\n        this.state.get(\"surveyStartDateTime\").toISOString();\r\n      publishedSurvey[\"surveyEndDateTime\"] =\r\n        this.state.get(\"surveyEndDateTime\") &&\r\n        this.state.get(\"surveyEndDateTime\").toISOString();\r\n      publishedSurvey[\"selectedLocations\"] = this.state\r\n        .get(\"selectedLocations\")\r\n        .toJS();\r\n      publishedSurvey[\"notification\"] = !!recipients.length;\r\n      publishedSurvey[\"recipientsForNotification\"] = recipients;\r\n      return publishedSurvey;\r\n    },\r\n    setMailsForNotification: function(mails) {\r\n      this.updateState(\r\n        this.state.set(\"selectedForNotification\", Immutable.Set(mails))\r\n      );\r\n    },\r\n    finish: function(selectedDistibutionType) {\r\n      if (!selectedDistibutionType) {\r\n        this.routeToPublish(1);\r\n        return;\r\n      }\r\n      if (!this.state.get(\"selectedSurveyId\")) {\r\n        NotificationActions.notify(\r\n          Notifications.WARNING,\r\n          i18n.t(\"You must select survey.\")\r\n        );\r\n        return;\r\n      }\r\n      this._surveyProvider\r\n        .getUserSurvey(this.state.get(\"selectedSurveyId\"))\r\n        .then(survey => {\r\n          let publishedSurvey = this.getPublishSurvey(\r\n            survey,\r\n            selectedDistibutionType\r\n          );\r\n          return this._publishedSurveyProvider.addUserPublishedSurvey(\r\n            publishedSurvey\r\n          );\r\n        })\r\n        .then(publishedSurvey => {\r\n          this.updateState(\r\n            this.state.setIn(\r\n              [\"publishedSurveys\", publishedSurvey.getId()],\r\n              publishedSurvey\r\n            ),\r\n            true\r\n          );\r\n          this.reset();\r\n          this.routeToSurveys();\r\n        });\r\n    },\r\n    removeSharedLinks: function(contacts) {\r\n      this._publishedSurveyResponseProvider = DIService.get(\r\n        \"PublishedSurveyResponeseProvider\"\r\n      );\r\n      let promises = contacts\r\n        .map(contact =>\r\n          Promise.try(() => {\r\n            if (!contact.completed) {\r\n              return Promise.try(() => Promise.resolve());\r\n            }\r\n            return this._publishedSurveyResponseProvider\r\n              .getResponse(contact.responseId)\r\n              .then(doc => {\r\n                if (!doc) {\r\n                  return Promise.try(() =>\r\n                    Promise.reject({ error: i18n(\"Document not found\") })\r\n                  );\r\n                }\r\n                if (!doc.sharedInformation) {\r\n                  return Promise.try(() =>\r\n                    Promise.reject({\r\n                      error: i18n(\"No shared information contain\")\r\n                    })\r\n                  );\r\n                }\r\n                let { id } = doc.sharedInformation;\r\n                if (!id) {\r\n                  return Promise.try(() =>\r\n                    Promise.reject({\r\n                      error: i18n(\"No shared information contain\")\r\n                    })\r\n                  );\r\n                }\r\n                return Promise.try(() =>\r\n                  axios({\r\n                    url: `/sharedContent/${id}`,\r\n                    method: \"DELETE\"\r\n                  }).then(() => {\r\n                    doc[\"sharedInformation\"] = { link: \"\", id: \"\" };\r\n                    return this._publishedSurveyResponseProvider.setResponse(\r\n                      doc\r\n                    );\r\n                  })\r\n                );\r\n              });\r\n          })\r\n        )\r\n        .toArray();\r\n      return settleAll(promises);\r\n    },\r\n    deletePublishedSurvey: function(id) {\r\n      let publishedSurvey = null;\r\n      this.getPublishedSurvey(id)\r\n        .then(pSurvey => {\r\n          publishedSurvey = pSurvey;\r\n          return this.removeSharedLinks(publishedSurvey.getContacts());\r\n        })\r\n        .then(() => {\r\n          return this._publishedSurveyProvider.deleteUserPublishedSurvey(\r\n            publishedSurvey\r\n          );\r\n        })\r\n        .then(() => {\r\n          this.updateState(this.state.deleteIn([\"publishedSurveys\", id]), true);\r\n          NotificationActions.notify(\r\n            Notifications.INFO,\r\n            i18n.t(\"Published survey has been deleted\")\r\n          );\r\n        });\r\n    },\r\n    tabChanged: function() {\r\n      this.reset();\r\n    },\r\n    nextSelectedContactsPage: function() {\r\n      let newPageNo = this.state.get(\"currentSelectedContactsPage\") + 1;\r\n      this.updateNavigationAndSelectedContactsState(newPageNo);\r\n    },\r\n    prevSelectedContactsPage: function() {\r\n      let newPageNo = this.state.get(\"currentSelectedContactsPage\") - 1;\r\n      this.updateNavigationAndSelectedContactsState(newPageNo);\r\n    },\r\n    jumpToSelectedContactsPage: function(newPageNo) {\r\n      this.updateNavigationAndSelectedContactsState(newPageNo);\r\n    },\r\n    updateNavigationAndSelectedContactsState: function(pageNo) {\r\n      let totalPage = Math.ceil(this.allSelectedContacts.size / this.limit),\r\n        sortedContacts = this.allSelectedContacts.sortBy(contact =>\r\n          contact.fullName.toLowerCase()\r\n        ),\r\n        currentContactsPage = pageNo || (totalPage && 0);\r\n      if (currentContactsPage + 1 > totalPage) {\r\n        currentContactsPage = totalPage - 1;\r\n      }\r\n      this.updateState(\r\n        this.state\r\n          .set(\"totalSelectedContactsPage\", totalPage)\r\n          .set(\"currentSelectedContactsPage\", currentContactsPage)\r\n          .set(\r\n            \"selectedContacts\",\r\n            sortedContacts\r\n              .skip(Math.floor(currentContactsPage * this.limit))\r\n              .take(this.limit)\r\n          )\r\n      );\r\n    },\r\n    updateProviders: function(provider, isAdd) {\r\n      let selectedProviders = this.state.get(\"selectedProviders\");\r\n      if (isAdd && !selectedProviders.has(provider)) {\r\n        selectedProviders = selectedProviders.add(provider);\r\n      }\r\n      if (!isAdd && selectedProviders.has(provider)) {\r\n        selectedProviders = selectedProviders.remove(provider);\r\n      }\r\n      if (selectedProviders.size == 0) {\r\n        NotificationActions.notify(\r\n          Notifications.WARNING,\r\n          i18n.t(\"At least one provider is require\")\r\n        );\r\n        return;\r\n      }\r\n      this.updateState(this.state.set(\"selectedProviders\", selectedProviders));\r\n    },\r\n    updateAskLocation: function() {\r\n      let locationRequired = this.state.get(\"locationRequired\"),\r\n        locationRestrict = this.state.get(\"locationRestrict\"),\r\n        askLocation = this.state.get(\"askLocation\");\r\n\r\n      if (locationRequired || locationRestrict) {\r\n        this.updateState(this.state.set(\"askLocation\", true));\r\n      } else {\r\n        this.updateState(this.state.set(\"askLocation\", !askLocation));\r\n      }\r\n    },\r\n    updateSurveyAvailability: function() {\r\n      let isSurveyAvailabilitySet = this.state.get(\"isSurveyAvailabilitySet\");\r\n      this.updateState(\r\n        this.state.set(\"isSurveyAvailabilitySet\", !isSurveyAvailabilitySet)\r\n      );\r\n    },\r\n    updateLocationRequired: function() {\r\n      let locationRequired = this.state.get(\"locationRequired\"),\r\n        locationRestrict = this.state.get(\"locationRestrict\");\r\n      if (!locationRequired) {\r\n        this.updateState(\r\n          this.state\r\n            .set(\"askLocation\", true)\r\n            .set(\"locationRequired\", !locationRequired)\r\n        );\r\n      } else {\r\n        if (locationRestrict) return;\r\n        this.updateState(this.state.set(\"locationRequired\", !locationRequired));\r\n      }\r\n    },\r\n    updateSurveyStartDateTime: function(surveyStartDateTime) {\r\n      this.updateState(\r\n        this.state.set(\"surveyStartDateTime\", surveyStartDateTime)\r\n      );\r\n    },\r\n    updateSurveyEndDateTime: function(surveyEndDateTime) {\r\n      this.updateState(this.state.set(\"surveyEndDateTime\", surveyEndDateTime));\r\n    },\r\n    updateLocationRestrict: function() {\r\n      let locationRestrict = this.state.get(\"locationRestrict\");\r\n      if (!locationRestrict) {\r\n        this.updateState(\r\n          this.state\r\n            .set(\"askLocation\", true)\r\n            .set(\"locationRequired\", true)\r\n            .set(\"locationRestrict\", true)\r\n        );\r\n      } else {\r\n        this.updateState(this.state.set(\"locationRestrict\", !locationRestrict));\r\n      }\r\n    },\r\n    jumpToResponses: function(pageNo) {\r\n      this.updateState(this.state.set(\"currentResponsePage\", pageNo), true);\r\n      this.updateCurrentResponses();\r\n    },\r\n    nextResponses: function() {\r\n      let pageNo = this.state.get(\"currentResponsePage\"),\r\n        totalPage = this.state.get(\"totalResponsePage\");\r\n      this.updateState(\r\n        this.state.set(\"currentResponsePage\", Math.min(pageNo + 1, totalPage)),\r\n        true\r\n      );\r\n      this.updateCurrentResponses();\r\n    },\r\n    previousResponses: function() {\r\n      let pageNo = this.state.get(\"currentResponsePage\");\r\n      this.updateState(\r\n        this.state.set(\"currentResponsePage\", Math.max(pageNo - 1, 0)),\r\n        true\r\n      );\r\n      this.updateCurrentResponses();\r\n    },\r\n    updateCurrentResponses: function() {\r\n      let pageNo = this.state.get(\"currentResponsePage\"),\r\n        skip = this.limit * pageNo;\r\n      this.updateState(\r\n        this.state.set(\r\n          \"currentResponses\",\r\n          this._allResponses.skip(skip).take(this.limit)\r\n        )\r\n      );\r\n    },\r\n    initializeSurveysResponses: function(id) {\r\n      this.ensurePublishedSurvey().then(() => {\r\n        let publishedSurvey = this.state.getIn([\"publishedSurveys\", id]);\r\n        if (!publishedSurvey) {\r\n          return;\r\n        }\r\n        this._allResponses = publishedSurvey\r\n          .getContacts()\r\n          .sortBy(contact => contact.obtainedMarks || 0);\r\n        this._allResponses = this._allResponses.reverse();\r\n        this.updateState(\r\n          this.state.set(\r\n            \"totalResponsePage\",\r\n            Math.ceil(this._allResponses.size / this.limit)\r\n          ),\r\n          true\r\n        );\r\n        this.updateCurrentResponses();\r\n      });\r\n    },\r\n    resetResponses: function() {\r\n      this._allResponses = Immutable.Map();\r\n      this.updateState(\r\n        this.state\r\n          .set(\"currentResponsePage\", 0)\r\n          .set(\"totalResponsePage\", 0)\r\n          .set(\"currentResponses\", Immutable.Map())\r\n      );\r\n    },\r\n    //location based APIs\r\n    setCurrentLocation: function(currentLocation, supressTrigger) {\r\n      this.updateState(\r\n        this.state.set(\"currentLocation\", Immutable.Map(currentLocation)),\r\n        supressTrigger\r\n      );\r\n    },\r\n    setSelectedLocations: function(\r\n      selectedLocations,\r\n      supressTrigger,\r\n      mapFocusLocation\r\n    ) {\r\n      this.updateState(\r\n        this.state.set(\"selectedLocations\", Immutable.Set(selectedLocations)),\r\n        supressTrigger\r\n      );\r\n      if (mapFocusLocation) this.setMapCenterLocation(mapFocusLocation);\r\n    },\r\n    setMapCenterLocation: function(centerLocation) {\r\n      let { latitude, longitude } = centerLocation;\r\n      this.updateState(\r\n        this.state\r\n          .set(\"mapCenterLocation\", Immutable.Map({ latitude, longitude }))\r\n          .set(\"zoomLevel\", 16)\r\n      );\r\n    },\r\n    setCurrentFocusedLocation: function(focusLocation, supressTrigger) {\r\n      let { latitude, longitude } = focusLocation;\r\n      this.updateState(\r\n        this.state.set(\r\n          \"currentFocusedLocation\",\r\n          Immutable.Map({ latitude, longitude })\r\n        ),\r\n        supressTrigger\r\n      );\r\n    },\r\n    getCurrentLocation: function() {\r\n      if (navigator.geolocation) {\r\n        this.updateState(this.state.set(\"blink\", true));\r\n        navigator.geolocation.getCurrentPosition(\r\n          this.currentPosition,\r\n          this.handleLocationError\r\n        );\r\n      } else {\r\n        this.updateState(\r\n          this.state.set(\r\n            \"errorMessage\",\r\n            i18n.t(\"Geolocation is not supported by this browser\")\r\n          )\r\n        );\r\n      }\r\n    },\r\n    handleLocationError: function(err) {\r\n      let errorMessage = this.decideErrorMessage(err);\r\n      this.updateState(\r\n        this.state.set(\"errorMessage\", errorMessage).set(\"blink\", false)\r\n      );\r\n      NotificationActions.notify(Notifications.LONGINFO, errorMessage);\r\n    },\r\n    currentPosition: function(position) {\r\n      let { latitude, longitude } = position.coords;\r\n      this.setCurrentLocation(\r\n        {\r\n          latitude,\r\n          longitude\r\n        },\r\n        true\r\n      );\r\n      this.setMapCenterLocation(\r\n        {\r\n          latitude,\r\n          longitude\r\n        },\r\n        true\r\n      );\r\n      this.updateState(this.state.set(\"blink\", false));\r\n    },\r\n    decideErrorMessage: function(error) {\r\n      let { code } = error,\r\n        errorMessage;\r\n      switch (code) {\r\n        case error.PERMISSION_DENIED:\r\n          errorMessage = i18n.t(\r\n            `Sharing your location is mandatory to proceed, please allow it in your browser settings and then try again`\r\n          );\r\n          break;\r\n        case error.POSITION_UNAVAILABLE:\r\n          errorMessage = i18n.t(\r\n            `Location details are not available at this moment`\r\n          );\r\n          break;\r\n        case error.TIMEOUT:\r\n          errorMessage = i18n.t(`Location-timeout occured`);\r\n          break;\r\n        case error.UNKNOWN_ERROR:\r\n          errorMessage = i18n.t(`Something went wrong`);\r\n          break;\r\n      }\r\n      return errorMessage;\r\n    },\r\n    getAddressOfLocation: function(location) {\r\n      let { latitude, longitude } = location;\r\n      return new Promise((resolve, reject) => {\r\n        axios\r\n          .get(\r\n            `https://maps.googleapis.com/maps/api/geocode/json?latlng=${latitude},${longitude}&key=${googleMap.apiKey}`\r\n          )\r\n          .then(function(response) {\r\n            resolve(response);\r\n          })\r\n          .catch(function(error) {\r\n            reject(error);\r\n          });\r\n      });\r\n    },\r\n    onDistanceChange: function(locationWithUpdatedDistance) {\r\n      let selectedLocations = this.state.get(\"selectedLocations\").toJS();\r\n      let {\r\n        latitude,\r\n        longitude,\r\n        distance,\r\n        address\r\n      } = locationWithUpdatedDistance;\r\n      selectedLocations = _.map(\r\n        selectedLocations,\r\n        inst =>\r\n          inst.latitude == latitude && inst.longitude == longitude\r\n            ? {\r\n                latitude: Number(latitude),\r\n                longitude: Number(longitude),\r\n                distance: Number(distance),\r\n                address: address\r\n              }\r\n            : inst\r\n      );\r\n      this.setCurrentFocusedLocation(\r\n        {\r\n          latitude: locationWithUpdatedDistance.latitude,\r\n          longitude: locationWithUpdatedDistance.longitude\r\n        },\r\n        true\r\n      );\r\n      this.setSelectedLocations(\r\n        selectedLocations,\r\n        false,\r\n        locationWithUpdatedDistance\r\n      );\r\n    },\r\n    onSuggestSelect: function(suggestedArea) {\r\n      let { location: { lat: latitude, lng: longitude } } = suggestedArea;\r\n      this.setCurrentLocation(\r\n        {\r\n          latitude,\r\n          longitude\r\n        },\r\n        true\r\n      );\r\n      this.setMapCenterLocation({\r\n        latitude,\r\n        longitude\r\n      });\r\n    },\r\n    onLocationCardClick: function(locToFocus) {\r\n      this.setCurrentFocusedLocation(\r\n        {\r\n          latitude: locToFocus.latitude,\r\n          longitude: locToFocus.longitude\r\n        },\r\n        true\r\n      );\r\n      this.setMapCenterLocation({\r\n        latitude: locToFocus.latitude,\r\n        longitude: locToFocus.longitude\r\n      });\r\n    },\r\n    oncurrentLocationDragEnd: function(e) {\r\n      let { latLng } = e;\r\n      this.setCurrentLocation({\r\n        latitude: latLng.lat(),\r\n        longitude: latLng.lng()\r\n      });\r\n    },\r\n    onSelectedMarkerDelete: function(location) {\r\n      let { latitude, longitude } = location,\r\n        selectedLocations = this.state.get(\"selectedLocations\").toJS(),\r\n        locToRemove = { latitude, longitude },\r\n        updatedSelectedLocations = [];\r\n      selectedLocations.forEach(location => {\r\n        !(\r\n          location.latitude == locToRemove.latitude &&\r\n          location.longitude == locToRemove.longitude\r\n        ) && updatedSelectedLocations.push(location);\r\n      });\r\n      this.setSelectedLocations(updatedSelectedLocations);\r\n    },\r\n    onSelectedLocMarkerClick: function(e) {\r\n      let { latLng } = e,\r\n        locToFocus = { latitude: latLng.lat(), longitude: latLng.lng() };\r\n      this.setCurrentFocusedLocation({\r\n        latitude: locToFocus.latitude,\r\n        longitude: locToFocus.longitude\r\n      });\r\n    },\r\n    onCurrentLocMarkerClick: function(e) {\r\n      let { latLng } = e,\r\n        locToAdd = { latitude: latLng.lat(), longitude: latLng.lng() },\r\n        selectedLocations = this.state.get(\"selectedLocations\").toJS();\r\n      if (selectedLocations.length == locationSelecteionLimit) {\r\n        NotificationActions.notify(\r\n          Notifications.WARNING,\r\n          i18n.t(`Only ${locationSelecteionLimit} locations are allowed.`)\r\n        );\r\n        return;\r\n      }\r\n      this.getAddressOfLocation(locToAdd).then(response => {\r\n        let { data: { results } } = response;\r\n        let address = results[0].formatted_address;\r\n        selectedLocations.push({\r\n          latitude: locToAdd.latitude,\r\n          longitude: locToAdd.longitude,\r\n          address,\r\n          distance: 50\r\n        });\r\n        this.setSelectedLocations(selectedLocations, true);\r\n        this.setCurrentFocusedLocation(locToAdd, true);\r\n        this.setCurrentLocation({});\r\n      });\r\n    }\r\n  });\r\n\r\nexport default PublishSurveyStore;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/stores/publishsurveystore.js","import differenceInMinutes from 'date-fns/difference_in_minutes';\r\nimport differenceInHours from 'date-fns/difference_in_hours';\r\nimport differenceInSeconds from 'date-fns/difference_in_seconds';\r\n\r\nexport default function getTimeDifference(startTime, EndTime) {\r\n    let Hdiff = differenceInHours(EndTime, startTime),\r\n        Mdiff = differenceInMinutes(EndTime, startTime),\r\n        Sdiff = differenceInSeconds(EndTime, startTime),\r\n        hours = Hdiff,\r\n        minutes = Mdiff - (Hdiff * 60),\r\n        seconds = Sdiff - (Mdiff * 60);\r\n    return { hours, minutes, seconds };\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/timedifference/index.js","import Reflux from \"reflux-core\";\r\nconst RecipientsActions = Reflux.createActions([\r\n  \"addRecipient\",\r\n  \"deleteRecipient\",\r\n  \"updateRecipient\",\r\n  \"optionsContactOpen\",\r\n  \"optionsContactDone\",\r\n  \"removeGroup\",\r\n  \"undo\",\r\n  \"undoRecipent\"\r\n]);\r\n\r\nexport default RecipientsActions;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/actions/recipientsactions.js","import createStore from \"reflux-core/lib/createStore\";\r\nimport ObjectID from \"bson-objectid\";\r\nimport createHashHistory from \"history/lib/createHashHistory\";\r\nimport useQueries from \"history/lib/useQueries\";\r\nimport PouchDB from \"pouchdb-core\";\r\nimport Immutable from \"immutable\";\r\nimport _ from \"lodash\";\r\nimport NotificationActions from \"../actions/notificationactions.js\";\r\nimport { Notifications } from \"../appsettings.json\";\r\nimport axios from \"axios\";\r\nimport platform from \"platform\";\r\nimport Fingerprint2 from \"fingerprintjs2\";\r\nimport ClientSurveyResponseModelProvider from \"../helpers/clientsurveyresponsemodelprovider\";\r\nimport i18n from \"../helpers/i18n.js\";\r\nimport Logger from \"../helpers/logger.js\";\r\nimport ClientSurveyActions from \"../actions/clientsurveyactions.js\";\r\nimport AuthActions from \"../actions/authactions.js\";\r\nimport SurveysActions from \"../actions/surveysactions.js\";\r\nimport TimeDifference from \"../helpers/timedifference\";\r\nimport TimeTrackerActions from \"../actions/timetrackeractions.js\";\r\nconst clientSurveyResponseModelProvider = ClientSurveyResponseModelProvider(),\r\n  defaultDB = {\r\n    _id: null,\r\n    survey: null,\r\n    responses: {},\r\n    currentPageKey: null,\r\n    nextPageKey: null,\r\n    prevPageKey: null,\r\n    currentQuestionKey: null,\r\n    nextQuestionKey: null,\r\n    prevQuestionKey: null,\r\n    callStack: [],\r\n    jumpToStack: [],\r\n    ignoredKeys: [],\r\n    serverStartTime: \"\",\r\n    timeTrackers: {},\r\n    clientTime: \"\",\r\n    surveyStartTime: \"\",\r\n    completed: false,\r\n    isCommonLink: false,\r\n    userProfile: {}\r\n  },\r\n  defaultTimeTracker = {\r\n    timeTrail: [],\r\n    switchTrail: [],\r\n    finalResponseTime: \"\"\r\n  },\r\n  ClientSurveyStore = createStore({\r\n    listenables: [ClientSurveyActions, AuthActions],\r\n    currentPageKey: null,\r\n    nextPageKey: null,\r\n    prevPageKey: null,\r\n    currentQuestionKey: null,\r\n    nextQuestionKey: null,\r\n    prevQuestionKey: null,\r\n    _clientSurvey: null,\r\n    _allPages: Immutable.Map(),\r\n    _callStack: [],\r\n    _pageSkipInfo: {},\r\n    _questionSkipInfo: {},\r\n    _ignoredKeys: [],\r\n    _db: null,\r\n    _jumpToStack: [],\r\n    //timers\r\n    timeTrackers: {},\r\n    clientTime: \"\",\r\n    surveyStartTime: \"\",\r\n    _totalSurveyQuestions: null,\r\n    _isSurveyTimeValid: false,\r\n    questionTimer: {},\r\n    init: function() {\r\n      this.state = Immutable.Map({\r\n        pages: Immutable.Map(),\r\n        responses: Immutable.Map(),\r\n        startTime: \"\",\r\n        showNext: false,\r\n        showPrev: false,\r\n        showFinish: false,\r\n        header: {},\r\n        disabled: Immutable.Map(),\r\n        percentSurveyCompleted: 0,\r\n        timeRemain: {},\r\n        questionTimeRemain: {},\r\n        showQuestionTimer: false,\r\n        surveyStarted: false,\r\n        current: {},\r\n        last: {},\r\n        showLoader: true,\r\n        showMarks: false,\r\n        attempted: [],\r\n        totalQuestionCount: null,\r\n        isTimerEnabled: null,\r\n        userProfile: null,\r\n        providers: Immutable.Set(),\r\n        onSubmission: false,\r\n        isQuestionTimer: false\r\n      });\r\n    },\r\n    getInitialState: function() {\r\n      return this.state;\r\n    },\r\n    processLoggedUser: function(profile, migrate) {\r\n      this._currentProfile = profile;\r\n      this._isCommonLink = true;\r\n      this._migrate = migrate;\r\n      this._db\r\n        .allDocs({\r\n          include_docs: true,\r\n          key: profile.email\r\n        })\r\n        .then(result => {\r\n          if (result.rows.length && result.rows[0].doc) {\r\n            let { doc } = result.rows[0];\r\n            this._URL = doc.URL;\r\n            this.routeTo(this._URL);\r\n            return null;\r\n          }\r\n          this._URL = `/run/${this._instanceId}/${ObjectID().str}`;\r\n          return this._db.put({\r\n            _id: profile.email,\r\n            URL: this._URL\r\n          });\r\n        })\r\n        .then(result => {\r\n          if (result) {\r\n            this.routeTo(this._URL);\r\n          }\r\n        });\r\n    },\r\n    userChanged: function(prevProfile, newProfile, alreadyLogged) {\r\n      if (!newProfile.isGuest) {\r\n        TimeTrackerActions.recordTime(`Login Successful`);\r\n      }\r\n      this.updateState(\r\n        this.state.set(\"userProfile\", newProfile.isGuest ? null : newProfile)\r\n      );\r\n      if (!newProfile.isGuest && this._instanceId && !this._responseId) {\r\n        this._currentProfile = newProfile;\r\n        this._isCommonLink = true;\r\n        //this.routeTo(`/run/${this._instanceId}/${newProfile.email}`);\r\n        if (!alreadyLogged) {\r\n          this.processLoggedUser(newProfile);\r\n        }\r\n      }\r\n      //this.loadPublishedSurvey(this._instanceId, this._responseId, newProfile.email);\r\n    },\r\n    updateState: function(newState, suppress) {\r\n      this.state = newState;\r\n      if (!suppress) {\r\n        this.trigger(this.state);\r\n      }\r\n    },\r\n    prepareState: function(isPrev) {\r\n      if (this._questionDisplay == \"page\") {\r\n        this.nextPageController();\r\n      }\r\n      if (this._questionDisplay == \"question\") {\r\n        this.nextQuestionController(isPrev);\r\n      }\r\n    },\r\n    nextPageController: function() {\r\n      //question skip logic\r\n      let lastKey = this._callStack[this._callStack.length - 1],\r\n        flag = false;\r\n      if (lastKey) {\r\n        let page = this._allPages.get(lastKey.pageKey);\r\n        for (let i = 0; i < page.get(\"count\"); i++) {\r\n          flag = this.skipQuestion({\r\n            pageKey: lastKey.pageKey,\r\n            questionKey: i + 1\r\n          });\r\n          if (flag) {\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      /***************** ******************/\r\n      if (this.prevPageKey + 1 != this.currentPageKey) {\r\n        this.setIgnoreKeys(this.prevPageKey, this.currentPageKey);\r\n      }\r\n      if (this._clientSurvey.getSurvey().getRestrictPrevious()) {\r\n        this.updateState(this.state.set(\"showPrev\", false), true);\r\n      } else {\r\n        if (this.currentPageKey != 0) {\r\n          this.updateState(this.state.set(\"showPrev\", true), true);\r\n        } else {\r\n          this.updateState(this.state.set(\"showPrev\", false), true);\r\n        }\r\n      }\r\n      let page = this._allPages.get(this.currentPageKey);\r\n      if (this._totalPage > this.currentPageKey + 1) {\r\n        let showNext = true,\r\n          nextKey = this.currentPageKey + 1;\r\n        //page skip logic\r\n        if (page.get(\"page\").getLogic()) {\r\n          nextKey = page.get(\"page\").getSkipTo();\r\n          if (nextKey == \"eos\") {\r\n            showNext = false;\r\n            this.updateState(this.state.set(\"showFinish\", true), true);\r\n          } else {\r\n            nextKey = parseInt(nextKey);\r\n          }\r\n        }\r\n        /***************** ******************/\r\n        this.nextPageKey = nextKey;\r\n        this.updateState(this.state.set(\"showNext\", showNext), true);\r\n      } else {\r\n        this.updateState(\r\n          this.state.set(\"showNext\", false).set(\"showFinish\", true),\r\n          true\r\n        );\r\n      }\r\n      let currentPage = _.clone(this._allPages.get(this.currentPageKey));\r\n      if (flag) {\r\n        let newPage = {};\r\n        for (let i = 1; i <= currentPage.get(\"count\"); i++) {\r\n          if (i >= this.currentQuestionKey) {\r\n            newPage[i - (this.currentQuestionKey - 1)] = currentPage.getIn([\r\n              \"questions\",\r\n              i\r\n            ]);\r\n            newPage[i - (this.currentQuestionKey - 1)].index =\r\n              i - (this.currentQuestionKey - 1);\r\n          } else {\r\n            let id = currentPage.getIn([\"questions\", i]).pageItem.getId();\r\n            this.updateState(this.state.setIn([\"responses\", id], \"\"));\r\n          }\r\n        }\r\n        currentPage = currentPage.delete(\"questions\");\r\n        _.forIn(newPage, (value, key) => {\r\n          currentPage = currentPage.setIn([\"questions\", key], value);\r\n        });\r\n        currentPage = currentPage.set(\r\n          \"count\",\r\n          currentPage.get(\"count\") - (this.currentQuestionKey - 1)\r\n        );\r\n      }\r\n      this.updateState(this.state.setIn([\"pages\", \"current\"], currentPage));\r\n      this.updateLast();\r\n      this.updateCurrent();\r\n      this.updateDBSurvey();\r\n      this.putDBSurvey().then(result => {\r\n        this.navigate(this._clientSurvey.getSurvey().getId(), {\r\n          page: page.getIn([\"page\"]).getId()\r\n        });\r\n      });\r\n    },\r\n    //calculate total questions attempted by user\r\n    _getSurveyStatus: function() {\r\n      let currentPageIndex = this.currentPageKey,\r\n        currentQuestionIndex = this.currentQuestionKey,\r\n        totalAtteptedQuestions = 0;\r\n\r\n      if (!currentPageIndex) {\r\n        totalAtteptedQuestions = currentQuestionIndex;\r\n      } else {\r\n        let index = 0;\r\n        while (index < currentPageIndex) {\r\n          totalAtteptedQuestions += this._clientSurvey\r\n            .getSurvey()\r\n            .getPage(index)\r\n            .getPageItemRefsSize();\r\n          index++;\r\n        }\r\n        totalAtteptedQuestions += currentQuestionIndex;\r\n      }\r\n      this._setSurveyProgressPercentages(totalAtteptedQuestions);\r\n      this.updateState(\r\n        this.state.set(\"totalQuestionCount\", this._totalSurveyQuestions)\r\n      );\r\n      this.updateState(\r\n        this.state.set(\r\n          \"isTimerEnabled\",\r\n          this._clientSurvey.getSurvey().getIsTimer()\r\n        )\r\n      );\r\n    },\r\n    //calculate total questions attempted percentage value against total survey questions\r\n    _setSurveyProgressPercentages: function(totalAtteptedQuestions) {\r\n      let percentSurveyCompleted = Math.ceil(\r\n        totalAtteptedQuestions / this._totalSurveyQuestions * 100\r\n      );\r\n      this.updateState(\r\n        this.state.set(\"percentSurveyCompleted\", percentSurveyCompleted)\r\n      );\r\n    },\r\n    nextQuestionController: function(isPrev) {\r\n      //question skip logic\r\n      let lastKey = this._callStack[this._callStack.length - 1];\r\n      if (lastKey) {\r\n        this.skipQuestion(lastKey);\r\n      }\r\n      /***************** ******************/\r\n      let page = this._allPages.get(this.currentPageKey);\r\n      if (this._clientSurvey.getSurvey().getRestrictPrevious()) {\r\n        this.updateState(this.state.set(\"showPrev\", false), true);\r\n      } else {\r\n        if (this.currentPageKey == 0 && this.currentQuestionKey == 1) {\r\n          this.updateState(this.state.set(\"showPrev\", false), true);\r\n        } else {\r\n          this.updateState(this.state.set(\"showPrev\", true), true);\r\n        }\r\n      }\r\n\r\n      page = page\r\n        .setIn([\"questions\"], Immutable.Map())\r\n        .setIn(\r\n          [\"questions\", \"current\"],\r\n          this._allPages.getIn([\r\n            this.currentPageKey,\r\n            \"questions\",\r\n            this.currentQuestionKey\r\n          ])\r\n        );\r\n      if (this._totalPage > this.currentPageKey + 1) {\r\n        if (page.get(\"count\") != this.currentQuestionKey) {\r\n          this.nextPageKey = this.currentPageKey;\r\n          this.nextQuestionKey = this.currentQuestionKey + 1;\r\n          this.updateState(\r\n            this.state.set(\"showNext\", true).set(\"showFinish\", false),\r\n            true\r\n          );\r\n        } else {\r\n          let page = this._allPages.get(this.currentPageKey),\r\n            showNext = true,\r\n            showFinish = false,\r\n            nextPageKey = this.currentPageKey + 1;\r\n          //page skip logic\r\n          if (page.get(\"page\").getLogic()) {\r\n            nextPageKey = page.get(\"page\").getSkipTo();\r\n            if (nextPageKey == \"eos\") {\r\n              showNext = false;\r\n              showFinish = true;\r\n            } else {\r\n              nextPageKey = parseInt(nextPageKey);\r\n            }\r\n          }\r\n          /***************** ******************/\r\n          this.nextPageKey = nextPageKey;\r\n          this.nextQuestionKey = 1;\r\n          this.updateState(\r\n            this.state.set(\"showNext\", showNext).set(\"showFinish\", showFinish),\r\n            true\r\n          );\r\n        }\r\n      } else {\r\n        if (page.get(\"count\") == this.currentQuestionKey) {\r\n          this.updateState(\r\n            this.state.set(\"showNext\", false).set(\"showFinish\", true),\r\n            true\r\n          );\r\n        } else {\r\n          this.nextPageKey = this.currentPageKey;\r\n          this.nextQuestionKey = this.currentQuestionKey + 1;\r\n          this.updateState(\r\n            this.state.set(\"showNext\", true).set(\"showFinish\", false),\r\n            true\r\n          );\r\n        }\r\n      }\r\n      this.updateState(this.state.setIn([\"pages\", 0], page));\r\n\r\n      if (!this.surveyStartTime) {\r\n        let startFrom = this._clientSurvey.getSurvey().getStartFrom();\r\n        if (\r\n          startFrom == this.currentPageKey &&\r\n          this._clientSurvey.getSurvey().getIsTimer()\r\n        ) {\r\n          this.surveyStartTime = new Date().toISOString();\r\n        }\r\n      }\r\n      this.updateTracker(isPrev);\r\n      this.setQuestionTimer();\r\n      //To check progress of a candidate\r\n      this._getSurveyStatus();\r\n      !isPrev && this.updateLast();\r\n      this.updateCurrent();\r\n      this.updateDBSurvey();\r\n      this.putDBSurvey().then(result => {\r\n        this.navigate({\r\n          question: page.getIn([\"questions\", \"current\"]).pageItem.getId()\r\n        });\r\n      });\r\n    },\r\n    //skip question for page mode API\r\n    skipQuestion: function(lastKey) {\r\n      let queCount = this._allPages.getIn([lastKey.pageKey, \"count\"]),\r\n        flag = false,\r\n        index = this._ignoredKeys.pop();\r\n      if (this._questionDisplay == \"page\") {\r\n        for (let i = index || 1; i <= queCount; i++) {\r\n          let lastPageItem = this._allPages.getIn([\r\n            lastKey.pageKey,\r\n            \"questions\",\r\n            i\r\n          ]).pageItem;\r\n          if (\r\n            (lastPageItem.getSubType() == \"yesno\" ||\r\n              lastPageItem.getSubType() == \"multivalue\") &&\r\n            lastPageItem.getLogic()\r\n          ) {\r\n            let skipToObj = lastPageItem.getSkipTo(),\r\n              response = this.state.getIn([\"responses\", lastPageItem.getId()]),\r\n              skipTo = skipToObj.get(response);\r\n            if (skipTo) {\r\n              if (!(skipTo.pageNo == \"eos\")) {\r\n                let skipToPage = parseInt(skipTo.pageNo),\r\n                  skipToQuestion = parseInt(skipTo.questionNo),\r\n                  pageItem = this._allPages.getIn([\r\n                    skipToPage,\r\n                    \"questions\",\r\n                    skipToQuestion\r\n                  ]);\r\n                if (skipToQuestion != pageItem.index) {\r\n                  this._allPages\r\n                    .getIn([skipToPage, \"questions\"])\r\n                    .forEach((question, index) => {\r\n                      if (question.index == skipToQuestion) {\r\n                        skipToQuestion = index;\r\n                        return false;\r\n                      }\r\n                    });\r\n                }\r\n                this.currentPageKey = skipToPage;\r\n                this.currentQuestionKey = skipToQuestion;\r\n                flag = true;\r\n                break;\r\n              }\r\n            } else {\r\n              this.currentQuestionKey = 1;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      if (this._questionDisplay == \"question\") {\r\n        let lastPageItem = this._allPages.getIn([\r\n          lastKey.pageKey,\r\n          \"questions\",\r\n          lastKey.questionKey\r\n        ]).pageItem;\r\n        if (\r\n          (lastPageItem.getSubType() == \"yesno\" ||\r\n            lastPageItem.getSubType() == \"multivalue\") &&\r\n          lastPageItem.getLogic()\r\n        ) {\r\n          let skipToObj = lastPageItem.getSkipTo(),\r\n            response = this.state.getIn([\"responses\", lastPageItem.getId()]),\r\n            skipTo = skipToObj.get(response);\r\n          if (skipTo) {\r\n            if (!(skipTo.pageNo == \"eos\")) {\r\n              let skipToPage = parseInt(skipTo.pageNo),\r\n                skipToQuestion = parseInt(skipTo.questionNo),\r\n                pageItem = this._allPages.getIn([\r\n                  skipToPage,\r\n                  \"questions\",\r\n                  skipToQuestion\r\n                ]);\r\n              if (skipToQuestion != pageItem.index) {\r\n                this._allPages\r\n                  .getIn([skipToPage, \"questions\"])\r\n                  .forEach((question, index) => {\r\n                    if (question.index == skipToQuestion) {\r\n                      skipToQuestion = index;\r\n                      return false;\r\n                    }\r\n                  });\r\n              }\r\n              this.currentPageKey = skipToPage;\r\n              this.currentQuestionKey = skipToQuestion;\r\n              //this._ignoredKeys.push(parseInt(skipTo.questionNo));\r\n              flag = true;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return flag;\r\n    },\r\n    updateDBSurvey: function() {\r\n      this._dbSurvey.responses = this.state.get(\"responses\").toJS();\r\n      this._dbSurvey.currentPageKey = this.currentPageKey;\r\n      this._dbSurvey.nextPageKey = this.nextPageKey;\r\n      this._dbSurvey.prevPageKey = this.prevPageKey;\r\n      this._dbSurvey.currentQuestionKey = this.currentQuestionKey;\r\n      this._dbSurvey.nextQuestionKey = this.nextQuestionKey;\r\n      this._dbSurvey.prevQuestionKey = this.prevQuestionKey;\r\n      this._dbSurvey.callStack = this._callStack;\r\n      this._dbSurvey.jumpToStack = this._jumpToStack;\r\n      this._dbSurvey.ignoredKeys = this._ignoredKeys;\r\n      this._dbSurvey.timeTrackers = this.timeTrackers;\r\n      this._dbSurvey.surveyStartTime = this.surveyStartTime;\r\n      this._dbSurvey.questionTimer = this.questionTimer;\r\n    },\r\n    ignoringQuestionKeys: function() {\r\n      let survey = this._clientSurvey.getSurvey(),\r\n        pageSize = survey.getPagesSize(),\r\n        pageSkipper = null,\r\n        questionSkipper = null;\r\n      this._ignoredKeys = [];\r\n      for (let i = 0; i < pageSize; i++) {\r\n        let page = survey.getPage(i),\r\n          pageItemRefs = page.getPageItemRefs().toArray();\r\n        for (let j = 0; j < pageItemRefs.length; j++) {\r\n          let pageItem = survey.getPageItem(pageItemRefs[j]);\r\n          if (!pageItem.isQuestion) {\r\n            this._ignoredKeys.push(pageItem.getId());\r\n            continue;\r\n          }\r\n          if (i == pageSkipper) {\r\n            if (j < questionSkipper) {\r\n              this._ignoredKeys.push(pageItem.getId());\r\n            }\r\n            continue;\r\n          }\r\n          if (i < pageSkipper) {\r\n            this._ignoredKeys.push(pageItem.getId());\r\n            continue;\r\n          }\r\n          if (\r\n            (pageItem.getSubType() == \"yesno\" ||\r\n              pageItem.getSubType() == \"multivalue\") &&\r\n            pageItem.getLogic()\r\n          ) {\r\n            let skipToObj = pageItem.getSkipTo(),\r\n              response = this.state.getIn([\"responses\", pageItem.getId()]),\r\n              skipTo = skipToObj.get(response);\r\n            if (skipTo) {\r\n              pageSkipper = parseInt(skipTo.pageNo);\r\n              questionSkipper = parseInt(skipTo.questionNo) - 1;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    _getQuestionKeys: function() {\r\n      let survey = this._clientSurvey.getSurvey();\r\n      if (this._questionDisplay == \"all\") {\r\n        this.ignoringQuestionKeys();\r\n        let keys = survey.getPageItemsKeys().toArray();\r\n        if (this._ignoredKeys.length) {\r\n          _.remove(keys, key => {\r\n            return _.indexOf(this._ignoredKeys, key) != -1;\r\n          });\r\n        }\r\n        return keys;\r\n      }\r\n      if (this._questionDisplay == \"page\") {\r\n        let keys = survey\r\n          .getPage(this.currentPageKey)\r\n          .getPageItemRefs()\r\n          .toArray();\r\n        if (this._ignoredKeys.length) {\r\n          let ignoredKeysIds = [];\r\n          this._ignoredKeys.forEach(index => {\r\n            ignoredKeysIds.push(keys[index - 1]);\r\n          });\r\n          _.remove(keys, key => {\r\n            return _.indexOf(ignoredKeysIds, key) != -1;\r\n          });\r\n        }\r\n        return keys;\r\n      }\r\n      if (this._questionDisplay == \"question\") {\r\n        let pageItem = this._allPages.getIn([\r\n          this.currentPageKey,\r\n          \"questions\",\r\n          this.currentQuestionKey\r\n        ]).pageItem;\r\n        if (!pageItem.isQuestion) {\r\n          return [];\r\n        }\r\n        return [pageItem.getId()];\r\n      }\r\n    },\r\n    navigate: function(query) {\r\n      var history = useQueries(createHashHistory)({\r\n        queryKey: false\r\n      });\r\n      history.push({\r\n        pathname: `run/${this._instanceId}/${this._responseId}`,\r\n        query\r\n      });\r\n    },\r\n    next: function() {\r\n      let questionKeys = this._getQuestionKeys();\r\n      this._clientSurvey\r\n        .validateSurvey(questionKeys, this.state.get(\"responses\").toJS())\r\n        .then(result => {\r\n          this.updateTracker();\r\n          this._callStack.push({\r\n            pageKey: this.currentPageKey,\r\n            questionKey: this.currentQuestionKey,\r\n            id: this.getIds()\r\n          });\r\n          this.updateAttempted();\r\n          this.prevPageKey = this.currentPageKey;\r\n          this.currentPageKey = this.nextPageKey;\r\n          if (this._questionDisplay == \"question\") {\r\n            this.prevQuestionKey = this.currentQuestionKey;\r\n            this.currentQuestionKey = this.nextQuestionKey;\r\n          }\r\n          this.prepareState();\r\n        })\r\n        .catch(err => {\r\n          if (err) {\r\n            NotificationActions.notify(\r\n              Notifications.WARNING,\r\n              i18n.t(`Please fix the errors shown on this page and try again`)\r\n            );\r\n          }\r\n        });\r\n    },\r\n    getIds: function() {\r\n      if (this._questionDisplay == \"page\") {\r\n        return this._clientSurvey\r\n          .getSurvey()\r\n          .getPageItemRefs(this.currentPageKey)\r\n          .toArray();\r\n      }\r\n      if (this._questionDisplay == \"question\") {\r\n        return [\r\n          this._allPages\r\n            .getIn([this.currentPageKey, \"questions\", this.currentQuestionKey])\r\n            .pageItem.getId()\r\n        ];\r\n      }\r\n    },\r\n    previous: function() {\r\n      this.updateTracker();\r\n      let prevKey = this._callStack.pop();\r\n      this.currentPageKey = prevKey.pageKey;\r\n      if (this._questionDisplay == \"question\") {\r\n        this.currentQuestionKey = prevKey.questionKey;\r\n      }\r\n      this.prepareState(true);\r\n    },\r\n    jumpTo: function(obj) {\r\n      if (!this._clientSurvey.getSurvey().getRestrictPrevious()) {\r\n        if (!obj) return;\r\n        if (this._jumpToStack.length < this._callStack.length) {\r\n          this._jumpToStack = _.cloneDeep(this._callStack);\r\n        }\r\n        this._callStack = _.takeWhile(this._jumpToStack, element => {\r\n          return !_.isEqual(element, obj);\r\n        });\r\n        this.updateDBSurvey();\r\n        this.updateTracker();\r\n        this.updateAttempted();\r\n        this.currentPageKey = obj.pageKey;\r\n        if (this._questionDisplay == \"question\") {\r\n          this.currentQuestionKey = obj.questionKey;\r\n        }\r\n        this.prepareState(true);\r\n      }\r\n    },\r\n    updateAttempted: function(supress) {\r\n      if (this._jumpToStack.length < this._callStack.length) {\r\n        this._jumpToStack = _.cloneDeep(this._callStack);\r\n      }\r\n      this.updateState(this.state.set(\"attempted\", this._jumpToStack), supress);\r\n    },\r\n    updateLast: function() {\r\n      let last = this.state.get(\"last\");\r\n      if (last.pageKey > this.currentPageKey) {\r\n        return;\r\n      }\r\n      if (\r\n        last.pageKey == this.currentPageKey &&\r\n        last.questionKey > this.currentQuestionKey\r\n      ) {\r\n        return;\r\n      }\r\n      this.updateState(\r\n        this.state.set(\"last\", {\r\n          pageKey: this.currentPageKey,\r\n          questionKey: this.currentQuestionKey,\r\n          id: this.getIds()\r\n        })\r\n      );\r\n    },\r\n    updateCurrent: function() {\r\n      this.updateState(\r\n        this.state.set(\"current\", {\r\n          pageKey: this.currentPageKey,\r\n          questionKey: this.currentQuestionKey,\r\n          id: this.getIds()\r\n        })\r\n      );\r\n    },\r\n    setIgnoreKeys: function(prevPageKey, currentPageKey) {\r\n      for (let i = prevPageKey + 1; i < currentPageKey; i++) {\r\n        let page = this._allPages.getIn([i, \"page\"]),\r\n          pageItemRefs = page.getPageItemRefs().toArray();\r\n        _.forIn(pageItemRefs, key => {\r\n          this.updateState(this.state.setIn([\"responses\", key], \"\"));\r\n        });\r\n      }\r\n    },\r\n    getDataFromServer: function() {\r\n      return axios({\r\n        url: `/survey`,\r\n        method: \"POST\",\r\n        data: {\r\n          responseId: this._responseId,\r\n          isCommonLink: this._isCommonLink,\r\n          instanceId: this._instanceId,\r\n          userProfile: this._currentProfile,\r\n          migrate: this._migrate\r\n        }\r\n      });\r\n    },\r\n    getProfileDetails: function() {\r\n      if (!this._currentProfile) {\r\n        return Promise.resolve({ isProfileAbsent: true });\r\n      }\r\n      return this._db.allDocs({\r\n        include_docs: true,\r\n        key: this._currentProfile.email\r\n      });\r\n    },\r\n    validateUserTimeWithSurveyTime: function(instanceId, responseId) {\r\n      let userRequestDateTime = new Date().toISOString(),\r\n        invitationLink = responseId ? responseId : instanceId;\r\n      if (responseId) {\r\n        return this.getProfileDetails()\r\n          .then(result => {\r\n            if (!result.isProfileAbsent && result.rows.length) {\r\n              let [{ doc }] = result.rows,\r\n                urlArray = doc.URL.split(\"/\"),\r\n                resID = urlArray[urlArray.length - 1];\r\n              if (resID == responseId) {\r\n                return Promise.resolve({ isSurveyAvailable: true });\r\n              }\r\n            }\r\n            return this._db.allDocs({\r\n              include_docs: true,\r\n              key: responseId\r\n            });\r\n          })\r\n          .then(result => {\r\n            if (result.isSurveyAvailable) {\r\n              return Promise.resolve();\r\n            }\r\n            if (result.rows.length && result.rows[0].doc) {\r\n              return Promise.resolve();\r\n            }\r\n            return axios({\r\n              url: `/validatesurveytime`,\r\n              method: \"POST\",\r\n              data: {\r\n                responseId,\r\n                invitationLink,\r\n                instanceId,\r\n                userRequestDateTime\r\n              }\r\n            });\r\n          });\r\n      }\r\n      //call to server\r\n      return axios({\r\n        url: `/validatesurveytime`,\r\n        method: \"POST\",\r\n        data: {\r\n          responseId,\r\n          invitationLink,\r\n          instanceId,\r\n          userRequestDateTime\r\n        }\r\n      });\r\n    },\r\n    loadPublishedSurvey: function(instanceId, responseId) {\r\n      this._db = new PouchDB(instanceId);\r\n      this._responseId = responseId;\r\n      this._instanceId = instanceId;\r\n      return this.validateUserTimeWithSurveyTime(instanceId, responseId)\r\n        .then(response => {\r\n          let data = (response && response.data) || {},\r\n            {\r\n              error,\r\n              isBefore,\r\n              surveyStartDateTime,\r\n              surveyEndDateTime,\r\n              isQuiz,\r\n              surveyTitle\r\n            } = data;\r\n          if (error) {\r\n            return this._db\r\n              .allDocs({ key: \"surveyavaililitymessage\", include_docs: true })\r\n              .then(result => {\r\n                let doc = result.rows[0] ? result.rows[0].doc : {};\r\n                doc = _.merge(doc, {\r\n                  _id: \"surveyavaililitymessage\",\r\n                  isBefore,\r\n                  surveyStartDateTime,\r\n                  surveyEndDateTime,\r\n                  isQuiz,\r\n                  surveyTitle\r\n                });\r\n                return this._db.put(doc);\r\n              })\r\n              .then(() => {\r\n                this.routeTo(`surveyavailibility/${this._instanceId}`);\r\n                return Promise.reject({ skip: true });\r\n              })\r\n              .catch();\r\n          }\r\n          if (!this._responseId && this._instanceId) {\r\n            this.routeTo(`message/login/${this._instanceId}`);\r\n            return Promise.reject({ skip: true });\r\n          }\r\n          return this._db.allDocs({\r\n            include_docs: true,\r\n            key: this._responseId\r\n          });\r\n        })\r\n        .then(result => {\r\n          if (result.rows.length && result.rows[0].doc) {\r\n            this._dbSurvey = result.rows[0].doc;\r\n            if (this._dbSurvey.completed) {\r\n              return Promise.reject({ completed: true });\r\n            }\r\n            if (this._dbSurvey.migrated) {\r\n              return Promise.reject({ migrated: true });\r\n            }\r\n            NotificationActions.notify(\r\n              Notifications.INFO,\r\n              i18n.t(`We have restored your previous session`),\r\n              i18n.t(\"Got it\"),\r\n              null\r\n            );\r\n            return { data: result.rows[0].doc.survey, isLocal: true };\r\n          }\r\n          return this.getDataFromServer();\r\n        })\r\n        .then(response => {\r\n          if (!response.isLocal) {\r\n            let { data } = response;\r\n            if (data.error) {\r\n              return Promise.reject(data);\r\n            }\r\n            this._dbSurvey = _.merge(defaultDB, {\r\n              _id: this._responseId,\r\n              survey: data.survey,\r\n              serverStartTime: data.startTime,\r\n              clientTime: new Date().toISOString(),\r\n              isCommonLink: this._isCommonLink,\r\n              userProfile: this._currentProfile,\r\n              otherDetails: data.otherDetails\r\n            });\r\n            return this.putDBSurvey();\r\n          }\r\n          return {};\r\n        })\r\n        .then(result => {\r\n          let askLocation,\r\n            locationRequired,\r\n            isGeolocationAvailable = this._dbSurvey.isGeolocationAvailable;\r\n          if (this._dbSurvey.otherDetails) {\r\n            askLocation = this._dbSurvey.otherDetails.askLocation;\r\n            locationRequired = this._dbSurvey.otherDetails.locationRequired;\r\n          }\r\n          this._clientSurvey = clientSurveyResponseModelProvider.getClientSurveyResponseModel(\r\n            {\r\n              responseId: this._responseId,\r\n              survey: this._dbSurvey.survey\r\n            }\r\n          );\r\n          this._clientSurvey = this._clientSurvey.setSessionStartTime(\r\n            this._dbSurvey.serverStartTime\r\n          );\r\n          //get the total survey question count for progress bar calculation\r\n          this._totalSurveyQuestions = this._clientSurvey\r\n            .getSurvey()\r\n            .getPageItemsSize();\r\n          this.updateState(\r\n            this.state\r\n              .set(\"showLoader\", false)\r\n              .set(\"showMarks\", this._dbSurvey.survey.showMarksRunMode)\r\n          );\r\n          if ((askLocation || locationRequired) && !isGeolocationAvailable) {\r\n            //route to location detection.\r\n            this.routeTo({\r\n              pathname: `geolocation/${this._instanceId}/${this._responseId}`\r\n            });\r\n            return;\r\n          }\r\n          this.prepareSurveyStart(!result.rev);\r\n        })\r\n        .catch(err => {\r\n          if (err.skip) {\r\n            return;\r\n          }\r\n          if (err.response) {\r\n            err = err.response.data;\r\n          }\r\n          if (err.completed) {\r\n            this.routeToCompleted();\r\n            return;\r\n          }\r\n          if (err.migrated) {\r\n            this.routeTo({ pathname: \"message/migration/failed\" });\r\n            return;\r\n          }\r\n          if (err.status == 208) {\r\n            this.routeTo({ pathname: `message/migration/${this._instanceId}` });\r\n            return;\r\n          }\r\n          throw err;\r\n        });\r\n    },\r\n    setSurveyTimer: function() {\r\n      if (this.surveyStartTime && Object.keys(this.questionTimer).length == 0) {\r\n        let currentSurvey = this._clientSurvey.getSurvey(),\r\n          timeSpent = TimeDifference(\r\n            this.surveyStartTime,\r\n            new Date().toISOString()\r\n          ),\r\n          timeRemain = TimeDifference(\r\n            new Date(\r\n              0,\r\n              0,\r\n              0,\r\n              timeSpent.hours,\r\n              timeSpent.minutes,\r\n              timeSpent.seconds\r\n            ).toISOString(),\r\n            new Date(0, 0, 0, 0, currentSurvey.getTimeout(), 0).toISOString()\r\n          );\r\n        this.updateState(\r\n          this.state.set(\"timeRemain\", timeRemain).set(\"surveyStarted\", true)\r\n        );\r\n      } else {\r\n        this.updateQuestionTimer();\r\n      }\r\n    },\r\n    timeConverterFromSeconds: function(sec) {\r\n      let hours = Math.floor(sec / (60 * 60)),\r\n        minutes = Math.floor(sec / 60) - 60 * hours,\r\n        seconds = sec - (hours * 60 * 60 + minutes * 60);\r\n      return { hours, minutes, seconds };\r\n    },\r\n    setQuestionTimer: function() {\r\n      let page = this._allPages.get(this.currentPageKey);\r\n      if (!page) {\r\n        return;\r\n      }\r\n      let id = page\r\n        .getIn([\"questions\", this.currentQuestionKey])\r\n        .pageItem.getId();\r\n      if (this.questionTimer[id]) {\r\n        this.updateState(\r\n          this.state\r\n            .set(\"questionTimeRemain\", this.questionTimer[id].remaining)\r\n            .set(\"isQuestionTimer\", true)\r\n        );\r\n      }\r\n    },\r\n    decreseTimeToSec: function(time) {\r\n      let { hours, minutes, seconds } = time;\r\n      if (seconds) {\r\n        return { hours, minutes, seconds: seconds - 1 };\r\n      }\r\n      if (minutes) {\r\n        return { hours, minutes: minutes - 1, seconds: 59 };\r\n      }\r\n      if (hours) {\r\n        return { hours: hours - 1, minutes: 59, seconds: 59 };\r\n      }\r\n      return { hours: 0, minutes: 0, seconds: 0 };\r\n    },\r\n    handleProceed: function() {\r\n      if (this.state.get(\"showFinish\")) {\r\n        if (!this.state.get(\"onSubmission\")) {\r\n          this.finish();\r\n        }\r\n      } else {\r\n        this.next();\r\n      }\r\n    },\r\n    updateQuestionTimer: function() {\r\n      let page = this._allPages.get(this.currentPageKey);\r\n      if (!page) {\r\n        return;\r\n      }\r\n      let id = page\r\n        .getIn([\"questions\", this.currentQuestionKey])\r\n        .pageItem.getId();\r\n      if (this.questionTimer[id]) {\r\n        let { remaining } = this.questionTimer[id];\r\n        remaining = this.decreseTimeToSec(remaining);\r\n        this._dbSurvey.questionTimer[id].remaining = remaining;\r\n        let { hours, minutes, seconds } = remaining;\r\n        if (seconds == 0 && minutes == 0 && hours == 0) {\r\n          this.handleProceed();\r\n        }\r\n        this.putDBSurvey();\r\n        this.updateState(\r\n          this.state\r\n            .set(\"questionTimeRemain\", remaining)\r\n            .set(\"showQuestionTimer\", true)\r\n            .set(\"isQuestionTimer\", true)\r\n        );\r\n      } else {\r\n        this.updateState(\r\n          this.state\r\n            .set(\"showQuestionTimer\", false)\r\n            .set(\"isQuestionTimer\", true)\r\n        );\r\n      }\r\n    },\r\n    stopTest: function() {\r\n      this.reset();\r\n      SurveysActions.stopTest(this._clientSurvey);\r\n    },\r\n    addResponseToServer: function() {\r\n      return axios({\r\n        url: `/response`,\r\n        method: \"POST\",\r\n        data: {\r\n          surveyresponse: this._clientSurvey.toJS(),\r\n          instanceId: this._instanceId,\r\n          isCommonLink: this._dbSurvey.isCommonLink,\r\n          userProfile: this._dbSurvey.userProfile\r\n        }\r\n      });\r\n    },\r\n    putDBSurvey: function() {\r\n      return this._db\r\n        .put(this._dbSurvey)\r\n        .then(result => {\r\n          this._dbSurvey._rev = result.rev;\r\n          return result;\r\n        })\r\n        .catch(err => {\r\n          if (err.status == 409) {\r\n            return this._db\r\n              .allDocs({\r\n                include_docs: true,\r\n                key: this._responseId\r\n              })\r\n              .then(result => {\r\n                let [{ doc }] = result.rows;\r\n                if (doc._rev != this._dbSurvey._rev) {\r\n                  this._dbSurvey = doc;\r\n                }\r\n              });\r\n          }\r\n          throw err;\r\n        });\r\n    },\r\n    finish: function() {\r\n      //console.debug(this._dbSurvey);\r\n      if (this._dbSurvey.completed) {\r\n        this.routeToCompleted();\r\n        return;\r\n      }\r\n      if (this._dbSurvey.migrated) {\r\n        this.routeTo({ pathname: \"message/migration/failed\" });\r\n        return;\r\n      }\r\n      this.updateState(this.state.set(\"onSubmission\", true));\r\n      let questionKeys = this._getQuestionKeys();\r\n      this._clientSurvey\r\n        .validateSurvey(questionKeys, this.state.get(\"responses\").toJS())\r\n        .then(result => {\r\n          this.updateTracker();\r\n          Logger.log(result);\r\n          this._dbSurvey.responses = this.state.get(\"responses\").toJS();\r\n          this.putDBSurvey().then(result => {\r\n            this._clientSurvey = this._clientSurvey\r\n              .setPublishedInstanceId(this._instanceId)\r\n              .setResponses(this.state.get(\"responses\").toJS())\r\n              .setName(this._dbSurvey.userProfile.name)\r\n              .setEmail(this._dbSurvey.userProfile.email)\r\n              .setSurveyArriveTime(this._dbSurvey.clientTime)\r\n              .setClientTracker(this._dbSurvey.timeTrackers)\r\n              .setClientStartTime(this.surveyStartTime)\r\n              .setClientEndTime(new Date().toISOString())\r\n              .setUserLocations(this._dbSurvey.userLocations);\r\n            new Fingerprint2().get((result, components) => {\r\n              Logger.log(result); //a hash, representing your device fingerprint\r\n              Logger.log(components); // an array of FP components\r\n              let componentObj = {};\r\n              _.forIn(components, component => {\r\n                componentObj[component.key] = component.value;\r\n              });\r\n              let serverResult = {};\r\n              this._clientSurvey = this._clientSurvey\r\n                .setDeviceId(result)\r\n                .setDeviceScreenResolution(componentObj[\"resolution\"])\r\n                .setDeviceTimeZoneOffset(componentObj[\"timezone_offset\"])\r\n                .setOS(platform.os.toString())\r\n                .setBrowserName(platform.name)\r\n                .setBrowserVersion(platform.version);\r\n              return this.addResponseToServer()\r\n                .then(response => {\r\n                  let { data } = response;\r\n                  if (data.error) {\r\n                    return Promise.reject(data);\r\n                  }\r\n                  serverResult = data;\r\n                  this.reset();\r\n                  this._dbSurvey.completed = true;\r\n                  this._dbSurvey.surveyResult = serverResult;\r\n                  return this.putDBSurvey();\r\n                })\r\n                .then(() => {\r\n                  this.updateState(this.state.set(\"onSubmission\", false));\r\n                  if (this._dbSurvey.surveyResult.totalMarks)\r\n                    this.routeTo({\r\n                      pathname: `message/acknowledgement/${this\r\n                        ._instanceId}/${this._responseId}`\r\n                    });\r\n                  else this.routeTo({ pathname: \"message/thankyou\" });\r\n                })\r\n                .catch(err => {\r\n                  this.updateState(this.state.set(\"onSubmission\", false));\r\n                  if (err.response) {\r\n                    err = err.response.data;\r\n                  }\r\n                  if (err.status == 409) {\r\n                    this._dbSurvey.completed = true;\r\n                    return this.putDBSurvey().then(() => {\r\n                      this.routeTo({\r\n                        pathname: `message/acknowledgement/${this\r\n                          ._instanceId}/${this._responseId}`\r\n                      });\r\n                    });\r\n                  }\r\n                  if (err.status == 422) {\r\n                    this._dbSurvey.migrated = true;\r\n                    return this.putDBSurvey().then(() => {\r\n                      this.routeTo({ pathname: \"message/migration/failed\" });\r\n                    });\r\n                  }\r\n                  throw err;\r\n                });\r\n            });\r\n          });\r\n        });\r\n    },\r\n    routeToThankYou: function(result) {\r\n      let history = useQueries(createHashHistory)({\r\n        queryKey: false\r\n      });\r\n      history.push({\r\n        pathname: \"/thankyou\",\r\n        query: {\r\n          total: result.totalMarks,\r\n          obtained: result.obtainedMarks,\r\n          pass: result.pass\r\n        }\r\n      });\r\n    },\r\n    routeTo: function(path) {\r\n      let history = useQueries(createHashHistory)({\r\n        queryKey: false\r\n      });\r\n      history.push(path);\r\n    },\r\n    routeToCompleted: function(result) {\r\n      let history = useQueries(createHashHistory)({\r\n        queryKey: false\r\n      });\r\n      history.push(\"message/completed\");\r\n    },\r\n    initQuestionTimer: function(survey, isLocal) {\r\n      if (\r\n        isLocal &&\r\n        this._dbSurvey.questionTimer &&\r\n        Object.keys(this._dbSurvey.questionTimer).length\r\n      ) {\r\n        this.questionTimer = this._dbSurvey.questionTimer;\r\n        return;\r\n      }\r\n      if (!survey) {\r\n        return;\r\n      }\r\n      let keys = survey.getPageItemsKeys().toArray();\r\n      keys.forEach(pageItemID => {\r\n        let pageItem = survey.getPageItem(pageItemID);\r\n        if (pageItem.getType() == \"question\") {\r\n          let timeout = pageItem.getQuestionTimeOut();\r\n          if (timeout) {\r\n            this.questionTimer[pageItem.getId()] = {\r\n              total: timeout,\r\n              remaining: this.timeConverterFromSeconds(timeout * 60)\r\n            };\r\n          }\r\n        }\r\n      });\r\n      this._dbSurvey.questionTimer = this.questionTimer;\r\n    },\r\n    prepareSurveyStart: function(isLocal) {\r\n      TimeTrackerActions.updateTimerInformation(\r\n        isLocal,\r\n        this.state.get(\"userProfile\")\r\n      );\r\n      this.reset(true);\r\n      let survey = this._clientSurvey.getSurvey();\r\n      this._questionDisplay = survey.getQuestionDisplay();\r\n      let title = survey.getTitle(),\r\n        description = survey.getDescription(),\r\n        showHeader = survey.getShowHeader(),\r\n        header = { title, description, showHeader },\r\n        pageSize = survey.getPagesSize();\r\n      this.updateState(\r\n        this.state\r\n          .set(\"header\", header)\r\n          .set(\"responses\", Immutable.Map(this._dbSurvey.responses)),\r\n        true\r\n      );\r\n      this.initQuestionTimer(survey, isLocal);\r\n      for (let i = 0; i < pageSize; i++) {\r\n        let page = survey.getPage(i),\r\n          count = 0,\r\n          decorator = 0,\r\n          canSkipIf = [];\r\n        this._allPages = this._allPages.setIn([i, \"page\"], page);\r\n        //page skip info logic\r\n        if (this._questionDisplay == \"all\") {\r\n          _.forIn(this._pageSkipInfo, (value, key) => {\r\n            if (_.indexOf(value, i) != -1) {\r\n              canSkipIf.push(parseInt(key) + 1);\r\n            }\r\n          });\r\n          this._allPages = this._allPages.setIn(\r\n            [i, \"info\"],\r\n            !!canSkipIf.length &&\r\n              `You can ignore this page if you attempted questions in page number ${canSkipIf}`\r\n          );\r\n        }\r\n        /***************** ******************/\r\n        //Page logic checker\r\n        if (page.getLogic()) {\r\n          this._pageSkipInfo[i] = [];\r\n          let skipTo =\r\n            page.getSkipTo() == \"eos\" ? pageSize : parseInt(page.getSkipTo());\r\n          for (let j = i + 1; j < skipTo; j++) {\r\n            this._pageSkipInfo[`${i}`].push(j);\r\n          }\r\n        }\r\n        /***************** ******************/\r\n        page\r\n          .getPageItemRefs()\r\n          .toArray()\r\n          .forEach((key, index) => {\r\n            let pageItem = survey.getPageItem(key),\r\n              canSkipIf = {},\r\n              disableIf = {};\r\n            if (pageItem.isQuestion) {\r\n              count++;\r\n            } else {\r\n              decorator++;\r\n            }\r\n            //question disable logic\r\n            _.forIn(this._questionSkipInfo, (value, key) => {\r\n              _.forIn(value, (value, questionNo) => {\r\n                _.forIn(value.skipTo.toJS(), (skipObj, choice) => {\r\n                  if (skipObj.pageNo != \"eos\") {\r\n                    if (parseInt(key) == i) {\r\n                      if (parseInt(questionNo) < count + decorator) {\r\n                        if (parseInt(skipObj.pageNo) == i) {\r\n                          if (parseInt(skipObj.questionNo) > count) {\r\n                            disableIf[value.id] = disableIf[value.id] || [];\r\n                            disableIf[value.id].push(choice);\r\n                          }\r\n                        }\r\n                        if (parseInt(skipObj.pageNo) > i) {\r\n                          disableIf[value.id] = disableIf[value.id] || [];\r\n                          disableIf[value.id].push(choice);\r\n                        }\r\n                      }\r\n                    }\r\n                    if (parseInt(key) < i) {\r\n                      if (parseInt(skipObj.pageNo) == i) {\r\n                        if (parseInt(skipObj.questionNo) > count) {\r\n                          disableIf[value.id] = disableIf[value.id] || [];\r\n                          disableIf[value.id].push(choice);\r\n                        }\r\n                      }\r\n                      if (parseInt(skipObj.pageNo) > i) {\r\n                        disableIf[value.id] = disableIf[value.id] || [];\r\n                        disableIf[value.id].push(choice);\r\n                      }\r\n                    }\r\n                  } else {\r\n                    disableIf[value.id] = disableIf[value.id] || [];\r\n                    disableIf[value.id].push(choice);\r\n                  }\r\n                });\r\n              });\r\n            });\r\n            /***************** ******************/\r\n            if (pageItem.isQuestion) {\r\n              this._allPages = this._allPages\r\n                .setIn([i, \"questions\", count + decorator], {\r\n                  index: count,\r\n                  pageItem: pageItem,\r\n                  disableIf\r\n                })\r\n                .setIn([i, \"count\"], count + decorator);\r\n            } else {\r\n              this._allPages = this._allPages\r\n                .setIn([i, \"questions\", count + decorator], {\r\n                  pageItem: pageItem,\r\n                  disableIf\r\n                })\r\n                .setIn([i, \"count\"], count + decorator);\r\n              this._ignoredKeys.push(count + decorator);\r\n            }\r\n            //Question logic checker\r\n            if (\r\n              (pageItem.getSubType() == \"yesno\" ||\r\n                pageItem.getSubType() == \"multivalue\") &&\r\n              pageItem.getLogic()\r\n            ) {\r\n              this._questionSkipInfo[i] = this._questionSkipInfo[i] || {};\r\n              this._questionSkipInfo[i][count] = {\r\n                skipTo: pageItem.getSkipTo(),\r\n                id: pageItem.getId()\r\n              };\r\n            }\r\n            /***************** ******************/\r\n          });\r\n      }\r\n      this._totalPage = this._allPages.size;\r\n      if (this._questionDisplay == \"all\") {\r\n        this.updateState(\r\n          this.state.set(\"pages\", this._allPages).set(\"showFinish\", true)\r\n        );\r\n        this.navigateToAll(survey.getId());\r\n      }\r\n      if (this._questionDisplay == \"page\") {\r\n        this.currentPageKey = this._dbSurvey.currentPageKey || 0;\r\n        if (this._totalPage > this.currentPageKey + 1) {\r\n          let page = this._allPages.get(this.currentPageKey),\r\n            showNext = true,\r\n            nextKey = this.currentPageKey + 1;\r\n          //page skip logic\r\n          if (page.get(\"page\").getLogic()) {\r\n            nextKey = page.get(\"page\").getSkipTo();\r\n            if (nextKey == \"eos\") {\r\n              showNext = false;\r\n              this.updateState(this.state.set(\"showFinish\", true), true);\r\n            } else {\r\n              nextKey = parseInt(nextKey);\r\n            }\r\n          }\r\n          /***************** ******************/\r\n          this.nextPageKey = nextKey;\r\n          this.updateState(this.state.set(\"showNext\", showNext), true);\r\n        } else {\r\n          this.updateState(this.state.set(\"showFinish\", true), true);\r\n        }\r\n        this.updateState(\r\n          this.state\r\n            .setIn(\r\n              [\"pages\", \"current\"],\r\n              this._allPages.get(this.currentPageKey)\r\n            )\r\n            .set(\r\n              \"showPrev\",\r\n              this._clientSurvey.getSurvey().getRestrictPrevious()\r\n                ? false\r\n                : !!this.currentPageKey\r\n            )\r\n        );\r\n        if (isLocal) {\r\n          this.nextPageKey = this._dbSurvey.nextPageKey || this.nextPageKey;\r\n          this.prevPageKey = this._dbSurvey.prevPageKey || this.prevPageKey;\r\n          this._callStack = this._dbSurvey.callStack;\r\n          this._ignoredKeys = this._dbSurvey.ignoredKeys;\r\n          this.navigate({ page: page.getIn([\"page\"]).getId() });\r\n        } else {\r\n          this.navigateToAll(survey.getId());\r\n        }\r\n      }\r\n      if (this._questionDisplay == \"question\") {\r\n        this.currentPageKey = this._dbSurvey.currentPageKey || 0;\r\n        this.currentQuestionKey = this._dbSurvey.currentQuestionKey || 1;\r\n        let page = this._allPages.get(this.currentPageKey);\r\n        page = page\r\n          .setIn([\"questions\"], Immutable.Map())\r\n          .setIn(\r\n            [\"questions\", \"current\"],\r\n            this._allPages.getIn([\r\n              this.currentPageKey,\r\n              \"questions\",\r\n              this.currentQuestionKey\r\n            ])\r\n          );\r\n        if (this._totalPage > this.currentPageKey + 1) {\r\n          if (page.get(\"count\") != this.currentQuestionKey) {\r\n            this.nextPageKey = this.currentPageKey;\r\n            this.nextQuestionKey = this.currentQuestionKey + 1;\r\n            this.updateState(this.state.set(\"showNext\", true), true);\r\n          } else {\r\n            let showNext = true,\r\n              showFinish = false,\r\n              nextPageKey = this.currentPageKey + 1;\r\n            //page skip logic\r\n            if (page.get(\"page\").getLogic()) {\r\n              nextPageKey = page.get(\"page\").getSkipTo();\r\n              if (nextPageKey == \"eos\") {\r\n                showNext = false;\r\n                showFinish = true;\r\n              } else {\r\n                nextPageKey = parseInt(nextPageKey);\r\n              }\r\n            }\r\n            /***************** ******************/\r\n            this.nextPageKey = nextPageKey;\r\n            this.nextQuestionKey = this.currentQuestionKey + 1;\r\n            this.updateState(\r\n              this.state\r\n                .set(\"showNext\", showNext)\r\n                .set(\"showFinish\", showFinish),\r\n              true\r\n            );\r\n          }\r\n        } else {\r\n          if (page.get(\"count\") == this.currentQuestionKey) {\r\n            this.updateState(this.state.set(\"showFinish\", true), true);\r\n          } else {\r\n            this.nextPageKey = this.currentPageKey;\r\n            this.nextQuestionKey = this.currentQuestionKey + 1;\r\n            this.updateState(this.state.set(\"showNext\", true), true);\r\n          }\r\n        }\r\n        this.updateState(\r\n          this.state\r\n            .setIn([\"pages\", 0], page)\r\n            .set(\r\n              \"showPrev\",\r\n              this._clientSurvey.getSurvey().getRestrictPrevious()\r\n                ? false\r\n                : !!this.currentPageKey ||\r\n                  (this._dbSurvey.currentQuestionKey &&\r\n                    this._dbSurvey.currentQuestionKey != 1)\r\n            )\r\n        );\r\n        if (isLocal) {\r\n          this.nextPageKey = this._dbSurvey.nextPageKey || this.nextPageKey;\r\n          this.prevPageKey = this._dbSurvey.prevPageKey || this.prevPageKey;\r\n          this.nextQuestionKey =\r\n            this._dbSurvey.nextQuestionKey || this.nextQuestionKey;\r\n          this.prevQuestionKey =\r\n            this._dbSurvey.prevQuestionKey || this.prevQuestionKey;\r\n          this._callStack = this._dbSurvey.callStack || [];\r\n          this._jumpToStack = this._dbSurvey.jumpToStack || [];\r\n          this._ignoredKeys = this._dbSurvey.ignoredKeys;\r\n          this.timeTrackers = this._dbSurvey.timeTrackers;\r\n          this.clientTime = this._dbSurvey.clientTime;\r\n          this.surveyStartTime = this._dbSurvey.surveyStartTime;\r\n          this.updateAttempted(true);\r\n          this.updateLast();\r\n          this.updateCurrent();\r\n          this._getSurveyStatus();\r\n          this.setQuestionTimer();\r\n          this.navigate({\r\n            question: page.getIn([\"questions\", \"current\"]).pageItem.getId()\r\n          });\r\n        } else {\r\n          let startFrom = survey.getStartFrom();\r\n          if (startFrom == this.currentPageKey && survey.getIsTimer()) {\r\n            this.surveyStartTime = new Date().toISOString();\r\n            this.updateTracker();\r\n          }\r\n          this._getSurveyStatus();\r\n          this.updateLast();\r\n          this.updateCurrent();\r\n          this.updateDBSurvey();\r\n          this.setQuestionTimer();\r\n          this.navigateToAll(this._questionDisplay);\r\n        }\r\n      }\r\n    },\r\n    updateTracker: function(isPrev) {\r\n      if (!this.surveyStartTime) return;\r\n      let page = this._allPages.get(this.currentPageKey),\r\n        id = page\r\n          .getIn([\"questions\", this.currentQuestionKey])\r\n          .pageItem.getId();\r\n      if (isPrev) {\r\n        if (!this.timeTrackers[id]) return;\r\n      }\r\n      if (!this.timeTrackers[id])\r\n        this.timeTrackers[id] = {\r\n          timeTrail: [],\r\n          switchTrail: [],\r\n          finalResponseTime: \"\"\r\n        };\r\n      this.timeTrackers[id].timeTrail.push(new Date().toISOString());\r\n    },\r\n    reset: function(supress) {\r\n      this._allPages = Immutable.Map();\r\n      this._callStack = [];\r\n      this._pageSkipInfo = {};\r\n      this._questionSkipInfo = {};\r\n      this._ignoredKeys = [];\r\n      this._allPages = Immutable.Map();\r\n      this.currentPageKey = null;\r\n      this.currentQuestionKey = null;\r\n      this.prevPageKey = null;\r\n      this.prevQuestionKey = null;\r\n      this.nextPageKey = null;\r\n      this.nextQuestionKey = null;\r\n      this.updateState(\r\n        this.state\r\n          .set(\"pages\", Immutable.Map())\r\n          .set(\"showNext\", false)\r\n          .set(\"showPrev\", false)\r\n          .set(\"showFinish\", false)\r\n          .set(\"header\", {})\r\n          .set(\"questionTimer\", Immutable.Map())\r\n          .set(\"responses\", Immutable.Map()),\r\n        supress\r\n      );\r\n    },\r\n    setResponse: function(questionId, response) {\r\n      //this._clientSurvey = this._clientSurvey.setResponse(questionId, response)\r\n      if (this.timeTrackers[questionId]) {\r\n        this.timeTrackers[\r\n          questionId\r\n        ].finalResponseTime = new Date().toISOString();\r\n      }\r\n      this.updateState(this.state.setIn([\"responses\", questionId], response));\r\n      this.checkEOS(questionId);\r\n    },\r\n    checkEOS: function(questionId) {\r\n      if (this._questionDisplay == \"all\") {\r\n        return;\r\n      }\r\n      let pageItem = null;\r\n      if (this._questionDisplay == \"question\") {\r\n        pageItem = this._allPages.getIn([\r\n          this.currentPageKey,\r\n          \"questions\",\r\n          this.currentQuestionKey\r\n        ]).pageItem;\r\n      }\r\n      if (this._questionDisplay == \"page\") {\r\n        pageItem = this._clientSurvey.getSurvey().getPageItem(questionId);\r\n      }\r\n      if (pageItem) {\r\n        if (\r\n          (pageItem.getSubType() == \"yesno\" ||\r\n            pageItem.getSubType() == \"multivalue\") &&\r\n          pageItem.getLogic()\r\n        ) {\r\n          let skipToObj = pageItem.getSkipTo(),\r\n            response = this.state.getIn([\"responses\", pageItem.getId()]),\r\n            skipTo = skipToObj.get(response);\r\n          if (skipTo) {\r\n            if (skipTo.pageNo == \"eos\") {\r\n              this.updateState(\r\n                this.state.set(\"showNext\", false).set(\"showFinish\", true)\r\n              );\r\n            } else {\r\n              let showNext = true,\r\n                showFinish = false;\r\n              if (this._totalPage == this.currentPageKey + 1) {\r\n                showNext = false;\r\n                showFinish = true;\r\n                if (this._questionDisplay == \"question\") {\r\n                  let count = this._allPages.getIn([\r\n                    this.currentPageKey,\r\n                    \"count\"\r\n                  ]);\r\n                  if (count > this.currentQuestionKey) {\r\n                    showNext = true;\r\n                    showFinish = false;\r\n                  }\r\n                }\r\n              }\r\n              this.updateState(\r\n                this.state\r\n                  .set(\"showNext\", showNext)\r\n                  .set(\"showFinish\", showFinish)\r\n              );\r\n            }\r\n          } else {\r\n            let showNext = true,\r\n              showFinish = false;\r\n            if (this._totalPage == this.currentPageKey + 1) {\r\n              showNext = false;\r\n              showFinish = true;\r\n              if (this._questionDisplay == \"question\") {\r\n                let count = this._allPages.getIn([\r\n                  this.currentPageKey,\r\n                  \"count\"\r\n                ]);\r\n                if (count > this.currentQuestionKey) {\r\n                  showNext = true;\r\n                  showFinish = false;\r\n                }\r\n              }\r\n            }\r\n            this.updateState(\r\n              this.state.set(\"showNext\", showNext).set(\"showFinish\", showFinish)\r\n            );\r\n          }\r\n        }\r\n      }\r\n    },\r\n    setDisable: function(key, disable) {\r\n      this.updateState(this.state.setIn([\"disabled\", key], disable));\r\n    },\r\n    navigateToAll: function() {\r\n      var history = useQueries(createHashHistory)({\r\n        queryKey: false\r\n      });\r\n      history.push(`run/${this._instanceId}/${this._responseId}`);\r\n    },\r\n    tabSwitch: function(visibilityStatus) {\r\n      if (!this._clientSurvey) return;\r\n      let page = this._allPages.get(this.currentPageKey),\r\n        id = page\r\n          .getIn([\"questions\", this.currentQuestionKey])\r\n          .pageItem.getId();\r\n      if (this.timeTrackers[id])\r\n        this.timeTrackers[id].switchTrail.push(new Date().toISOString());\r\n    },\r\n    setInstanceId: function(instanceId) {\r\n      if (this._instanceId && this._providers && this._currentProfile) {\r\n        return;\r\n      }\r\n      if (instanceId) {\r\n        axios({\r\n          url: `/providers`,\r\n          method: \"POST\",\r\n          data: { instanceId }\r\n        }).then(response => {\r\n          this._db = new PouchDB(instanceId);\r\n          this._instanceId = instanceId;\r\n          this._providers = response.data.providers;\r\n          this.updateState(\r\n            this.state.set(\"providers\", Immutable.Set(response.data.providers))\r\n          );\r\n        });\r\n      }\r\n    }\r\n  });\r\n\r\nexport default ClientSurveyStore;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/stores/clientsurveystore.js","import Reflux from 'reflux-core';\r\n\r\nconst ClientSurveyActions = Reflux.createActions(\r\n    [\r\n        \"loadPublishedSurvey\",\r\n        \"setResponse\",\r\n        \"next\",\r\n        \"previous\",\r\n        \"finish\",\r\n        \"setDisable\",\r\n        \"tabSwitch\",\r\n        \"setSurveyTimer\",\r\n        \"setInstanceId\",\r\n        \"jumpTo\",\r\n        \"processLoggedUser\"\r\n    ]\r\n);\r\n\r\nexport default ClientSurveyActions;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/actions/clientsurveyactions.js","import dependable from \"../dependable\";\r\nimport PreferenceProvider from \"../preferenceprovider\";\r\nimport DefaultPaginatorProvider from \"../paginatorprovider\";\r\nimport GroupsPaginatorProvider from \"../groupspaginatorprovider\";\r\nimport ResponsesPaginatorProvider from \"../responsespaginatorprovider\";\r\nimport ErrorProvider from \"../errors/errorsprovider\";\r\nimport TimeTrackerProvider from \"../timetrackerprovider\";\r\nimport GroupsAndRecipientsProvider from \"../contacts/groupsandrecipientsprovider\";\r\n\r\nimport ContextProvider from \"../contexts/contextprovider\";\r\n\r\nimport ContactBuilder from \"../contacts/contactbuilder\";\r\nimport SurveyModelBuilder from \"../surveymodelbuilder\";\r\nimport PublishedSurveyModelProvider from \"../publishedsurveys/publishedsurveymodelprovider\";\r\nimport PublishedSurveyProvider from \"../publishedsurveys/publishedsurveyprovider\";\r\nimport ImageProvider from \"../image/imageprovider\";\r\nimport PublishedSurveyResponeseProvider from \"../publishedsurveys/publishedsurveyresponseprovider\";\r\nimport SurveyDataProvider from \"../surveydataprovider\";\r\nimport GuestProfile from \"../guestprofile\";\r\n\r\nimport SurveyStore from \"../../stores/surveysstore.js\";\r\nimport SurveyRunnerStore from \"../../stores/surveyrunnerstore.js\";\r\nimport GroupsandRecipientsStore from \"../../stores/groupsandrecipientsstore.js\";\r\nimport PublishSurveyStore from \"../../stores/publishsurveystore.js\";\r\nimport AppStore from \"../../stores/appstore.js\";\r\nimport AnalysisStore from \"../../stores/analysisstore.js\";\r\nimport ImageStore from \"../../stores/imagesstore.js\";\r\nimport ClientSurveyStore from \"../../stores/clientsurveystore\";\r\nimport ErrorStore from \"../../stores/errorstore.js\";\r\n\r\nlet contactBuilder = ContactBuilder(),\r\n  surveyModelBuilder = SurveyModelBuilder(),\r\n  publishedSurveyModelProvider = PublishedSurveyModelProvider(),\r\n  DIService = {\r\n    container: dependable.container(),\r\n    initialize: function() {\r\n      this.container.register(\r\n        \"UserContext\",\r\n        ContextProvider.getUserContext(GuestProfile)\r\n      );\r\n      this.container.register(\r\n        \"GroupsAndRecipientsProvider\",\r\n        new GroupsAndRecipientsProvider(this.container, contactBuilder)\r\n      );\r\n      this.container.register(\r\n        \"SurveyDataProvider\",\r\n        new SurveyDataProvider(this.container, surveyModelBuilder)\r\n      );\r\n      this.container.register(\r\n        \"PublishedSurveyProvider\",\r\n        new PublishedSurveyProvider(\r\n          this.container,\r\n          publishedSurveyModelProvider\r\n        )\r\n      );\r\n      this.container.register(\r\n        \"PreferenceProvider\",\r\n        new PreferenceProvider(this.container)\r\n      );\r\n      this.container.register(\r\n        \"ErrorProvider\",\r\n        new ErrorProvider(this.container)\r\n      );\r\n      this.container.register(\r\n        \"TimeTrackerProvider\",\r\n        new TimeTrackerProvider(this.container)\r\n      );\r\n      this.container.register(\r\n        \"PublishedSurveyResponeseProvider\",\r\n        new PublishedSurveyResponeseProvider(this.container)\r\n      );\r\n      this.container.register(\r\n        \"ImageProvider\",\r\n        new ImageProvider(this.container)\r\n      );\r\n      this.container.register(\r\n        \"DefaultPaginatorProvider\",\r\n        new DefaultPaginatorProvider(this.container)\r\n      );\r\n      this.container.register(\r\n        \"GroupsPaginatorProvider\",\r\n        new GroupsPaginatorProvider(this.container)\r\n      );\r\n      this.container.register(\r\n        \"ResponsesPaginatorProvider\",\r\n        new ResponsesPaginatorProvider(this.container)\r\n      );\r\n      return this.container;\r\n    }\r\n  };\r\n\r\nexport default DIService.initialize();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/diservice/index.js","import React from \"react\";\r\nimport TimeTrackerActions from \"../../actions/timetrackeractions.js\";\r\n\r\nmodule.exports = Component =>\r\n  class Wrapped extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.constructor.displayName = `Tracker_${Component.displayName}`;\r\n    }\r\n    componentDidMount() {\r\n      TimeTrackerActions.recordTime(Component.displayName);\r\n    }\r\n    render() {\r\n      return <Component {...this.props} />;\r\n    }\r\n  };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/timetracker/index.js","import createStore from \"reflux-core/lib/createStore\";\r\nimport createHashHistory from \"history/lib/createHashHistory\";\r\nimport useQueries from \"history/lib/useQueries\";\r\nimport { Router } from \"react-router\";\r\nimport Immutable from \"immutable\";\r\nimport _ from \"lodash\";\r\nimport i18n from \"../helpers/i18n.js\";\r\nimport SurveyRunnerModelProvider from \"../helpers/surveyrunnermodelprovider\";\r\nimport SurveysActions from \"../actions/surveysactions.js\";\r\nimport SurveyRunnerActions from \"../actions/surveyrunneractions.js\";\r\nimport Logger from \"../helpers/logger.js\";\r\nimport PouchDB from \"pouchdb-core\";\r\nconst surveyRunnerModelProvider = SurveyRunnerModelProvider(),\r\n  SurveyRunnerStore = createStore({\r\n    listenables: [SurveyRunnerActions],\r\n    currentPageKey: null,\r\n    nextPageKey: null,\r\n    prevPageKey: null,\r\n    currentQuestionKey: null,\r\n    nextQuestionKey: null,\r\n    prevQuestionKey: null,\r\n    _SurveyRunner: null,\r\n    _allPages: Immutable.Map(),\r\n    _callStack: [],\r\n    _pageSkipInfo: {},\r\n    _questionSkipInfo: {},\r\n    _ignoredKeys: [],\r\n    init: function() {\r\n      this.state = Immutable.Map({\r\n        pages: Immutable.Map(),\r\n        responses: Immutable.Map(),\r\n        showNext: false,\r\n        showPrev: false,\r\n        showFinish: false,\r\n        header: {},\r\n        disabled: Immutable.Map()\r\n      });\r\n    },\r\n    getInitialState: function() {\r\n      return this.state;\r\n    },\r\n    updateState: function(newState, suppress) {\r\n      this.state = newState;\r\n      if (!suppress) {\r\n        this.trigger(this.state);\r\n      }\r\n    },\r\n    prepareState: function() {\r\n      if (this._questionDisplay == \"page\") {\r\n        this.nextPageController();\r\n      }\r\n      if (this._questionDisplay == \"question\") {\r\n        this.nextQuestionController();\r\n      }\r\n    },\r\n    nextPageController: function() {\r\n      //question skip logic\r\n      let lastKey = this._callStack[this._callStack.length - 1],\r\n        flag = false;\r\n      //Logger.debug(\"lastKey\", lastKey);\r\n      if (lastKey) {\r\n        let page = this._allPages.get(lastKey.pageKey);\r\n        for (let i = 0; i < page.get(\"count\"); i++) {\r\n          flag = this.skipQuestion({\r\n            pageKey: lastKey.pageKey,\r\n            questionKey: i + 1\r\n          });\r\n          if (flag) {\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      /***************** ******************/\r\n      if (this.prevPageKey + 1 != this.currentPageKey) {\r\n        this.setIgnoreKeys(this.prevPageKey, this.currentPageKey);\r\n      }\r\n      if (this.currentPageKey != 0) {\r\n        this.updateState(this.state.set(\"showPrev\", true), true);\r\n      } else {\r\n        this.updateState(this.state.set(\"showPrev\", false), true);\r\n      }\r\n      let page = this._allPages.get(this.currentPageKey);\r\n      if (this._totalPage > this.currentPageKey + 1) {\r\n        let showNext = true,\r\n          nextKey = this.currentPageKey + 1;\r\n        //page skip logic\r\n        if (page.get(\"page\").getLogic()) {\r\n          nextKey = page.get(\"page\").getSkipTo();\r\n          if (nextKey == \"eos\") {\r\n            showNext = false;\r\n            this.updateState(this.state.set(\"showFinish\", true), true);\r\n          } else {\r\n            nextKey = parseInt(nextKey);\r\n          }\r\n        }\r\n        /***************** ******************/\r\n        this.nextPageKey = nextKey;\r\n        this.updateState(this.state.set(\"showNext\", showNext), true);\r\n      } else {\r\n        this.updateState(\r\n          this.state.set(\"showNext\", false).set(\"showFinish\", true),\r\n          true\r\n        );\r\n      }\r\n      let currentPage = _.clone(this._allPages.get(this.currentPageKey));\r\n      if (flag) {\r\n        let newPage = {};\r\n        for (let i = 1; i <= currentPage.get(\"count\"); i++) {\r\n          if (i >= this.currentQuestionKey) {\r\n            newPage[i - (this.currentQuestionKey - 1)] = currentPage.getIn([\r\n              \"questions\",\r\n              i\r\n            ]);\r\n            newPage[i - (this.currentQuestionKey - 1)].index =\r\n              i - (this.currentQuestionKey - 1);\r\n          } else {\r\n            let id = currentPage.getIn([\"questions\", i]).pageItem.getId();\r\n            this.updateState(this.state.setIn([\"responses\", id], \"\"));\r\n          }\r\n        }\r\n        currentPage = currentPage.delete(\"questions\");\r\n        _.forIn(newPage, (value, key) => {\r\n          currentPage = currentPage.setIn([\"questions\", key], value);\r\n        });\r\n        currentPage = currentPage.set(\r\n          \"count\",\r\n          currentPage.get(\"count\") - (this.currentQuestionKey - 1)\r\n        );\r\n      }\r\n      this.updateState(this.state.setIn([\"pages\", \"current\"], currentPage));\r\n      this.navigate(this._SurveyRunner.getSurvey().getId(), {\r\n        page: page.getIn([\"page\"]).getId()\r\n      });\r\n    },\r\n    nextQuestionController: function() {\r\n      //question skip logic\r\n      let lastKey = this._callStack[this._callStack.length - 1];\r\n      if (lastKey) {\r\n        this.skipQuestion(lastKey);\r\n      }\r\n      /***************** ******************/\r\n      let page = this._allPages.get(this.currentPageKey);\r\n      if (this.currentPageKey == 0 && this.currentQuestionKey == 1) {\r\n        this.updateState(this.state.set(\"showPrev\", false), true);\r\n      } else {\r\n        this.updateState(this.state.set(\"showPrev\", true), true);\r\n      }\r\n      page = page\r\n        .setIn([\"questions\"], Immutable.Map())\r\n        .setIn(\r\n          [\"questions\", \"current\"],\r\n          this._allPages.getIn([\r\n            this.currentPageKey,\r\n            \"questions\",\r\n            this.currentQuestionKey\r\n          ])\r\n        );\r\n      if (this._totalPage > this.currentPageKey + 1) {\r\n        if (page.get(\"count\") != this.currentQuestionKey) {\r\n          this.nextPageKey = this.currentPageKey;\r\n          this.nextQuestionKey = this.currentQuestionKey + 1;\r\n          this.updateState(\r\n            this.state.set(\"showNext\", true).set(\"showFinish\", false),\r\n            true\r\n          );\r\n        } else {\r\n          let page = this._allPages.get(this.currentPageKey),\r\n            showNext = true,\r\n            showFinish = false,\r\n            nextPageKey = this.currentPageKey + 1;\r\n          //page skip logic\r\n          if (page.get(\"page\").getLogic()) {\r\n            nextPageKey = page.get(\"page\").getSkipTo();\r\n            if (nextPageKey == \"eos\") {\r\n              showNext = false;\r\n              showFinish = true;\r\n            } else {\r\n              nextPageKey = parseInt(nextPageKey);\r\n            }\r\n          }\r\n          /***************** ******************/\r\n          this.nextPageKey = nextPageKey;\r\n          this.nextQuestionKey = 1;\r\n          this.updateState(\r\n            this.state.set(\"showNext\", showNext).set(\"showFinish\", showFinish),\r\n            true\r\n          );\r\n        }\r\n      } else {\r\n        if (page.get(\"count\") == this.currentQuestionKey) {\r\n          this.updateState(\r\n            this.state.set(\"showNext\", false).set(\"showFinish\", true),\r\n            true\r\n          );\r\n        } else {\r\n          this.nextPageKey = this.currentPageKey;\r\n          this.nextQuestionKey = this.currentQuestionKey + 1;\r\n          this.updateState(\r\n            this.state.set(\"showNext\", true).set(\"showFinish\", false),\r\n            true\r\n          );\r\n        }\r\n      }\r\n      this.updateState(this.state.setIn([\"pages\", 0], page));\r\n      this.navigate(this._SurveyRunner.getSurvey().getId(), {\r\n        question: page.getIn([\"questions\", \"current\"]).pageItem.getId()\r\n      });\r\n    },\r\n    //skip question for page mode API\r\n    skipQuestion: function(lastKey) {\r\n      let queCount = this._allPages.getIn([lastKey.pageKey, \"count\"]),\r\n        flag = false,\r\n        index = this._ignoredKeys.pop();\r\n      if (this._questionDisplay == \"page\") {\r\n        for (let i = index || 1; i <= queCount; i++) {\r\n          let lastPageItem = this._allPages.getIn([\r\n            lastKey.pageKey,\r\n            \"questions\",\r\n            i\r\n          ]).pageItem;\r\n          if (\r\n            (lastPageItem.getSubType() == \"yesno\" ||\r\n              lastPageItem.getSubType() == \"multivalue\") &&\r\n            lastPageItem.getLogic()\r\n          ) {\r\n            let skipToObj = lastPageItem.getSkipTo(),\r\n              response = this.state.getIn([\"responses\", lastPageItem.getId()]),\r\n              skipTo = skipToObj.get(response);\r\n            if (skipTo) {\r\n              if (!(skipTo.pageNo == \"eos\")) {\r\n                let skipToPage = parseInt(skipTo.pageNo),\r\n                  skipToQuestion = parseInt(skipTo.questionNo),\r\n                  pageItem = this._allPages.getIn([\r\n                    skipToPage,\r\n                    \"questions\",\r\n                    skipToQuestion\r\n                  ]);\r\n                if (skipToQuestion != pageItem.index) {\r\n                  this._allPages\r\n                    .getIn([skipToPage, \"questions\"])\r\n                    .forEach((question, index) => {\r\n                      if (question.index == skipToQuestion) {\r\n                        skipToQuestion = index;\r\n                        return false;\r\n                      }\r\n                    });\r\n                }\r\n                this.currentPageKey = skipToPage;\r\n                this.currentQuestionKey = skipToQuestion;\r\n                flag = true;\r\n                break;\r\n              }\r\n            } else {\r\n              this.currentQuestionKey = 1;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      if (this._questionDisplay == \"question\") {\r\n        let lastPageItem = this._allPages.getIn([\r\n          lastKey.pageKey,\r\n          \"questions\",\r\n          lastKey.questionKey\r\n        ]).pageItem;\r\n        if (\r\n          (lastPageItem.getSubType() == \"yesno\" ||\r\n            lastPageItem.getSubType() == \"multivalue\") &&\r\n          lastPageItem.getLogic()\r\n        ) {\r\n          let skipToObj = lastPageItem.getSkipTo(),\r\n            response = this.state.getIn([\"responses\", lastPageItem.getId()]),\r\n            skipTo = skipToObj.get(response);\r\n          if (skipTo) {\r\n            if (!(skipTo.pageNo == \"eos\")) {\r\n              let skipToPage = parseInt(skipTo.pageNo),\r\n                skipToQuestion = parseInt(skipTo.questionNo),\r\n                pageItem = this._allPages.getIn([\r\n                  skipToPage,\r\n                  \"questions\",\r\n                  skipToQuestion\r\n                ]);\r\n              if (skipToQuestion != pageItem.index) {\r\n                this._allPages\r\n                  .getIn([skipToPage, \"questions\"])\r\n                  .forEach((question, index) => {\r\n                    if (question.index == skipToQuestion) {\r\n                      skipToQuestion = index;\r\n                      return false;\r\n                    }\r\n                  });\r\n              }\r\n              this.currentPageKey = skipToPage;\r\n              this.currentQuestionKey = skipToQuestion;\r\n              //this._ignoredKeys.push(parseInt(skipTo.questionNo));\r\n              flag = true;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return flag;\r\n    },\r\n    ignoringQuestionKeys: function() {\r\n      let survey = this._SurveyRunner.getSurvey(),\r\n        pageSize = survey.getPagesSize(),\r\n        pageSkipper = null,\r\n        questionSkipper = null;\r\n      this._ignoredKeys = [];\r\n      for (let i = 0; i < pageSize; i++) {\r\n        let page = survey.getPage(i),\r\n          pageItemRefs = page.getPageItemRefs().toArray();\r\n        for (let j = 0; j < pageItemRefs.length; j++) {\r\n          let pageItem = survey.getPageItem(pageItemRefs[j]);\r\n          if (!pageItem.isQuestion) {\r\n            this._ignoredKeys.push(pageItem.getId());\r\n            continue;\r\n          }\r\n          if (i == pageSkipper) {\r\n            if (j < questionSkipper) {\r\n              this._ignoredKeys.push(pageItem.getId());\r\n            }\r\n            continue;\r\n          }\r\n          if (i < pageSkipper) {\r\n            this._ignoredKeys.push(pageItem.getId());\r\n            continue;\r\n          }\r\n          if (\r\n            (pageItem.getSubType() == \"yesno\" ||\r\n              pageItem.getSubType() == \"multivalue\") &&\r\n            pageItem.getLogic()\r\n          ) {\r\n            let skipToObj = pageItem.getSkipTo(),\r\n              response = this.state.getIn([\"responses\", pageItem.getId()]),\r\n              skipTo = skipToObj.get(response);\r\n            if (skipTo) {\r\n              pageSkipper = parseInt(skipTo.pageNo);\r\n              questionSkipper = parseInt(skipTo.questionNo) - 1;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    _getQuestionKeys: function() {\r\n      let survey = this._SurveyRunner.getSurvey();\r\n      if (this._questionDisplay == \"all\") {\r\n        this.ignoringQuestionKeys();\r\n        let keys = survey.getPageItemsKeys().toArray();\r\n        if (this._ignoredKeys.length) {\r\n          _.remove(keys, key => {\r\n            return _.indexOf(this._ignoredKeys, key) != -1;\r\n          });\r\n        }\r\n        return keys;\r\n      }\r\n      if (this._questionDisplay == \"page\") {\r\n        let keys = survey\r\n          .getPage(this.currentPageKey)\r\n          .getPageItemRefs()\r\n          .toArray();\r\n        if (this._ignoredKeys.length) {\r\n          let ignoredKeysIds = [];\r\n          this._ignoredKeys.forEach(index => {\r\n            ignoredKeysIds.push(keys[index - 1]);\r\n          });\r\n          _.remove(keys, key => {\r\n            return _.indexOf(ignoredKeysIds, key) != -1;\r\n          });\r\n        }\r\n        return keys;\r\n      }\r\n      if (this._questionDisplay == \"question\") {\r\n        let pageItem = this._allPages.getIn([\r\n          this.currentPageKey,\r\n          \"questions\",\r\n          this.currentQuestionKey\r\n        ]).pageItem;\r\n        if (!pageItem.isQuestion) {\r\n          return [];\r\n        }\r\n        return [pageItem.getId()];\r\n      }\r\n    },\r\n    navigate: function(surveyId, query) {\r\n      var history = useQueries(createHashHistory)({\r\n        queryKey: false\r\n      });\r\n      history.push({ pathname: `/surveys/design/test/${surveyId}`, query });\r\n    },\r\n    next: function() {\r\n      let questionKeys = this._getQuestionKeys();\r\n      this._SurveyRunner.validateSurvey(questionKeys).then(result => {\r\n        this._callStack.push({\r\n          pageKey: this.currentPageKey,\r\n          questionKey: this.currentQuestionKey\r\n        });\r\n        this.prevPageKey = this.currentPageKey;\r\n        this.currentPageKey = this.nextPageKey;\r\n        if (this._questionDisplay == \"question\") {\r\n          this.prevQuestionKey = this.currentQuestionKey;\r\n          this.currentQuestionKey = this.nextQuestionKey;\r\n        }\r\n        this.prepareState();\r\n      });\r\n    },\r\n    previous: function() {\r\n      let prevKey = this._callStack.pop();\r\n      this.currentPageKey = prevKey.pageKey;\r\n      if (this._questionDisplay == \"question\") {\r\n        this.currentQuestionKey = prevKey.questionKey;\r\n      }\r\n      this.prepareState();\r\n    },\r\n    setIgnoreKeys: function(prevPageKey, currentPageKey) {\r\n      for (let i = prevPageKey + 1; i < currentPageKey; i++) {\r\n        let page = this._allPages.getIn([i, \"page\"]),\r\n          pageItemRefs = page.getPageItemRefs().toArray();\r\n        _.forIn(pageItemRefs, key => {\r\n          this.updateState(this.state.setIn([\"responses\", key], \"\"));\r\n        });\r\n      }\r\n    },\r\n    startTest: function(survey) {\r\n      this._SurveyRunner = surveyRunnerModelProvider.getSurveyRunnerModel(\r\n        survey\r\n      );\r\n      this.prepareSurveyStart();\r\n    },\r\n    stopTest: function() {\r\n      this.reset();\r\n      SurveysActions.stopTest(this._SurveyRunner);\r\n    },\r\n    finish: function() {\r\n      let questionKeys = this._getQuestionKeys();\r\n      this._SurveyRunner.validateSurvey(questionKeys).then(result => {\r\n        this._SurveyRunner = this._SurveyRunner.setStatus(\"completed\");\r\n        this._db = new PouchDB(\"test\");\r\n        this._db\r\n          .allDocs({\r\n            key: \"data\",\r\n            include_docs: true\r\n          })\r\n          .then(result => {\r\n            let [row] = result.rows,\r\n              doc = row ? row.doc : {},\r\n              survey = this._SurveyRunner.getSurvey();\r\n            doc = _.merge(doc, {\r\n              _id: \"data\",\r\n              survey: survey.toJS(),\r\n              responses: this.state.get(\"responses\").toJS(),\r\n              userProfile: {},\r\n              isCommonLink: false,\r\n              isSurvey: survey.getSurveyMarksTotal(),\r\n              isTestMode: true,\r\n              completed: true\r\n            });\r\n            return this._db.put(doc);\r\n          })\r\n          .then(() => {\r\n            this._SurveyRunner.getSurvey().getSurveyMarksTotal()\r\n              ? this.routeTo({\r\n                  pathname: `message/acknowledgement/test/data`\r\n                })\r\n              : this.routeTo({\r\n                  pathname: \"message/thankyou\",\r\n                  query: { testMode: true }\r\n                });\r\n          })\r\n          .catch(err => {\r\n            Logger.log(err);\r\n            this.routeTo({\r\n              pathname: \"message/thankyou\",\r\n              query: { testMode: true }\r\n            });\r\n          });\r\n      });\r\n    },\r\n    routeTo: function(path) {\r\n      let history = useQueries(createHashHistory)({\r\n        queryKey: false\r\n      });\r\n      history.push(path);\r\n    },\r\n    prepareSurveyStart: function() {\r\n      this.reset(true);\r\n      let survey = this._SurveyRunner.getSurvey();\r\n      this._questionDisplay = survey.getQuestionDisplay();\r\n      let title = survey.getTitle(),\r\n        description = survey.getDescription(),\r\n        showHeader = survey.getShowHeader(),\r\n        header = { title, description, showHeader },\r\n        pageSize = survey.getPagesSize();\r\n      this.updateState(this.state.set(\"header\", header), true);\r\n      for (let i = 0; i < pageSize; i++) {\r\n        let page = survey.getPage(i),\r\n          count = 0,\r\n          decorator = 0,\r\n          canSkipIf = [];\r\n        this._allPages = this._allPages.setIn([i, \"page\"], page);\r\n        //page skip info logic\r\n        if (this._questionDisplay == \"all\") {\r\n          _.forIn(this._pageSkipInfo, (value, key) => {\r\n            if (_.indexOf(value, i) != -1) {\r\n              canSkipIf.push(parseInt(key) + 1);\r\n            }\r\n          });\r\n          this._allPages = this._allPages.setIn(\r\n            [i, \"info\"],\r\n            !!canSkipIf.length &&\r\n              `You can ignore this page if you attempted questions in page number ${canSkipIf}`\r\n          );\r\n        }\r\n        /***************** ******************/\r\n        //Page logic checker\r\n        if (page.getLogic()) {\r\n          this._pageSkipInfo[i] = [];\r\n          let skipTo = page.getSkipTo() == \"eos\"\r\n            ? pageSize\r\n            : parseInt(page.getSkipTo());\r\n          for (let j = i + 1; j < skipTo; j++) {\r\n            this._pageSkipInfo[`${i}`].push(j);\r\n          }\r\n        }\r\n        /***************** ******************/\r\n        page.getPageItemRefs().toArray().forEach((key, index) => {\r\n          let pageItem = survey.getPageItem(key),\r\n            canSkipIf = {},\r\n            disableIf = {};\r\n          if (pageItem.isQuestion) {\r\n            count++;\r\n          } else {\r\n            decorator++;\r\n          }\r\n          //question disable logic\r\n          _.forIn(this._questionSkipInfo, (value, key) => {\r\n            _.forIn(value, (value, questionNo) => {\r\n              _.forIn(value.skipTo.toJS(), (skipObj, choice) => {\r\n                if (skipObj.pageNo != \"eos\") {\r\n                  if (parseInt(key) == i) {\r\n                    if (parseInt(questionNo) < count + decorator) {\r\n                      if (parseInt(skipObj.pageNo) == i) {\r\n                        if (parseInt(skipObj.questionNo) > count) {\r\n                          disableIf[value.id] = disableIf[value.id] || [];\r\n                          disableIf[value.id].push(choice);\r\n                        }\r\n                      }\r\n                      if (parseInt(skipObj.pageNo) > i) {\r\n                        disableIf[value.id] = disableIf[value.id] || [];\r\n                        disableIf[value.id].push(choice);\r\n                      }\r\n                    }\r\n                  }\r\n                  if (parseInt(key) < i) {\r\n                    if (parseInt(skipObj.pageNo) == i) {\r\n                      if (parseInt(skipObj.questionNo) > count) {\r\n                        disableIf[value.id] = disableIf[value.id] || [];\r\n                        disableIf[value.id].push(choice);\r\n                      }\r\n                    }\r\n                    if (parseInt(skipObj.pageNo) > i) {\r\n                      disableIf[value.id] = disableIf[value.id] || [];\r\n                      disableIf[value.id].push(choice);\r\n                    }\r\n                  }\r\n                } else {\r\n                  disableIf[value.id] = disableIf[value.id] || [];\r\n                  disableIf[value.id].push(choice);\r\n                }\r\n              });\r\n            });\r\n          });\r\n          /***************** ******************/\r\n          if (pageItem.isQuestion) {\r\n            this._allPages = this._allPages\r\n              .setIn([i, \"questions\", count + decorator], {\r\n                index: count,\r\n                pageItem: pageItem,\r\n                disableIf\r\n              })\r\n              .setIn([i, \"count\"], count + decorator);\r\n          } else {\r\n            this._allPages = this._allPages\r\n              .setIn([i, \"questions\", count + decorator], {\r\n                pageItem: pageItem,\r\n                disableIf\r\n              })\r\n              .setIn([i, \"count\"], count + decorator);\r\n            this._ignoredKeys.push(count + decorator);\r\n          }\r\n          //Question logic checker\r\n          if (\r\n            (pageItem.getSubType() == \"yesno\" ||\r\n              pageItem.getSubType() == \"multivalue\") &&\r\n            pageItem.getLogic()\r\n          ) {\r\n            this._questionSkipInfo[i] = this._questionSkipInfo[i] || {};\r\n            this._questionSkipInfo[i][count] = {\r\n              skipTo: pageItem.getSkipTo(),\r\n              id: pageItem.getId()\r\n            };\r\n          }\r\n          /***************** ******************/\r\n        });\r\n      }\r\n      this._totalPage = this._allPages.size;\r\n      if (this._questionDisplay == \"all\") {\r\n        this.updateState(\r\n          this.state.set(\"pages\", this._allPages).set(\"showFinish\", true)\r\n        );\r\n        this.navigateToAll(survey.getId());\r\n      }\r\n      if (this._questionDisplay == \"page\") {\r\n        this.currentPageKey = 0;\r\n        if (this._totalPage > 1) {\r\n          let page = this._allPages.get(this.currentPageKey),\r\n            showNext = true,\r\n            nextKey = this.currentPageKey + 1;\r\n          //page skip logic\r\n          if (page.get(\"page\").getLogic()) {\r\n            nextKey = page.get(\"page\").getSkipTo();\r\n            if (nextKey == \"eos\") {\r\n              showNext = false;\r\n              this.updateState(this.state.set(\"showFinish\", true), true);\r\n            } else {\r\n              nextKey = parseInt(nextKey);\r\n            }\r\n          }\r\n          /***************** ******************/\r\n          this.nextPageKey = nextKey;\r\n          this.updateState(this.state.set(\"showNext\", showNext), true);\r\n        } else {\r\n          this.updateState(this.state.set(\"showFinish\", true), true);\r\n        }\r\n        this.updateState(\r\n          this.state.setIn(\r\n            [\"pages\", \"current\"],\r\n            this._allPages.get(this.currentPageKey)\r\n          )\r\n        );\r\n        this.navigateToAll(survey.getId());\r\n      }\r\n      if (this._questionDisplay == \"question\") {\r\n        this.currentPageKey = 0;\r\n        this.currentQuestionKey = 1;\r\n        let page = this._allPages.get(this.currentPageKey);\r\n        page = page\r\n          .setIn([\"questions\"], Immutable.Map())\r\n          .setIn(\r\n            [\"questions\", \"current\"],\r\n            this._allPages.getIn([\r\n              this.currentPageKey,\r\n              \"questions\",\r\n              this.currentQuestionKey\r\n            ])\r\n          );\r\n        if (this._totalPage > 1) {\r\n          if (page.get(\"count\") != this.currentQuestionKey) {\r\n            this.nextPageKey = this.currentPageKey;\r\n            this.nextQuestionKey = this.currentQuestionKey + 1;\r\n            this.updateState(this.state.set(\"showNext\", true), true);\r\n          } else {\r\n            let showNext = true,\r\n              showFinish = false,\r\n              nextPageKey = this.currentPageKey + 1;\r\n            //page skip logic\r\n            if (page.get(\"page\").getLogic()) {\r\n              nextPageKey = page.get(\"page\").getSkipTo();\r\n              if (nextPageKey == \"eos\") {\r\n                showNext = false;\r\n                showFinish = true;\r\n              } else {\r\n                nextPageKey = parseInt(nextPageKey);\r\n              }\r\n            }\r\n            /***************** ******************/\r\n            this.nextPageKey = nextPageKey;\r\n            this.nextQuestionKey = 1;\r\n            this.updateState(\r\n              this.state\r\n                .set(\"showNext\", showNext)\r\n                .set(\"showFinish\", showFinish),\r\n              true\r\n            );\r\n          }\r\n        } else {\r\n          if (page.get(\"count\") == this.currentQuestionKey) {\r\n            this.updateState(this.state.set(\"showFinish\", true), true);\r\n          } else {\r\n            this.nextPageKey = this.currentPageKey;\r\n            this.nextQuestionKey = this.currentQuestionKey + 1;\r\n            this.updateState(this.state.set(\"showNext\", true), true);\r\n          }\r\n        }\r\n        this.updateState(this.state.setIn([\"pages\", 0], page));\r\n        this.navigateToAll(survey.getId(), this._questionDisplay);\r\n      }\r\n    },\r\n    reset: function(supress) {\r\n      this._allPages = Immutable.Map();\r\n      this._callStack = [];\r\n      this._pageSkipInfo = {};\r\n      this._questionSkipInfo = {};\r\n      this._ignoredKeys = [];\r\n      this._allPages = Immutable.Map();\r\n      this.currentPageKey = null;\r\n      this.currentQuestionKey = null;\r\n      this.prevPageKey = null;\r\n      this.prevQuestionKey = null;\r\n      this.nextPageKey = null;\r\n      this.nextQuestionKey = null;\r\n      this.updateState(\r\n        this.state\r\n          .set(\"pages\", Immutable.Map())\r\n          .set(\"showNext\", false)\r\n          .set(\"showPrev\", false)\r\n          .set(\"showFinish\", false)\r\n          .set(\"header\", {})\r\n          .set(\"responses\", Immutable.Map()),\r\n        supress\r\n      );\r\n    },\r\n    navigateToAll: function(surveyId) {\r\n      var history = useQueries(createHashHistory)({\r\n        queryKey: false\r\n      });\r\n      history.push(`/surveys/design/test/${surveyId}`);\r\n    },\r\n    setResponse: function(questionId, response) {\r\n      this._SurveyRunner = this._SurveyRunner.setResponse(questionId, response);\r\n      this.updateState(this.state.setIn([\"responses\", questionId], response));\r\n      this.checkEOS(questionId);\r\n    },\r\n    checkEOS: function(questionId) {\r\n      if (this._questionDisplay == \"all\") {\r\n        return;\r\n      }\r\n      let pageItem = null;\r\n      if (this._questionDisplay == \"question\") {\r\n        pageItem = this._allPages.getIn([\r\n          this.currentPageKey,\r\n          \"questions\",\r\n          this.currentQuestionKey\r\n        ]).pageItem;\r\n      }\r\n      if (this._questionDisplay == \"page\") {\r\n        pageItem = this._SurveyRunner.getSurvey().getPageItem(questionId);\r\n      }\r\n      if (pageItem) {\r\n        if (\r\n          (pageItem.getSubType() == \"yesno\" ||\r\n            pageItem.getSubType() == \"multivalue\") &&\r\n          pageItem.getLogic()\r\n        ) {\r\n          let skipToObj = pageItem.getSkipTo(),\r\n            response = this.state.getIn([\"responses\", pageItem.getId()]),\r\n            skipTo = skipToObj.get(response);\r\n          if (skipTo) {\r\n            if (skipTo.pageNo == \"eos\") {\r\n              this.updateState(\r\n                this.state.set(\"showNext\", false).set(\"showFinish\", true)\r\n              );\r\n            } else {\r\n              let showNext = true,\r\n                showFinish = false;\r\n              if (this._totalPage == this.currentPageKey + 1) {\r\n                showNext = false;\r\n                showFinish = true;\r\n                if (this._questionDisplay == \"question\") {\r\n                  let count = this._allPages.getIn([\r\n                    this.currentPageKey,\r\n                    \"count\"\r\n                  ]);\r\n                  if (count > this.currentQuestionKey) {\r\n                    showNext = true;\r\n                    showFinish = false;\r\n                  }\r\n                }\r\n              }\r\n              this.updateState(\r\n                this.state\r\n                  .set(\"showNext\", showNext)\r\n                  .set(\"showFinish\", showFinish)\r\n              );\r\n            }\r\n          } else {\r\n            let showNext = true,\r\n              showFinish = false;\r\n            if (this._totalPage == this.currentPageKey + 1) {\r\n              showNext = false;\r\n              showFinish = true;\r\n              if (this._questionDisplay == \"question\") {\r\n                let count = this._allPages.getIn([\r\n                  this.currentPageKey,\r\n                  \"count\"\r\n                ]);\r\n                if (count > this.currentQuestionKey) {\r\n                  showNext = true;\r\n                  showFinish = false;\r\n                }\r\n              }\r\n            }\r\n            this.updateState(\r\n              this.state.set(\"showNext\", showNext).set(\"showFinish\", showFinish)\r\n            );\r\n          }\r\n        }\r\n      }\r\n    },\r\n    setDisable: function(key, disable) {\r\n      this.updateState(this.state.setIn([\"disabled\", key], disable));\r\n    }\r\n  });\r\n\r\nexport default SurveyRunnerStore;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/stores/surveyrunnerstore.js","import createStore from 'reflux-core/lib/createStore';\r\nimport Immutable from 'immutable';\r\nimport _ from \"lodash\";\r\nimport ImagesActions from '../actions/imagesactions.js';\r\nimport DIService from '../helpers/diservice';\r\nimport resizeImage from 'resize-image';\r\nimport NotificationActions from '../actions/notificationactions.js';\r\nimport { Notifications } from '../appsettings.json';\r\nimport i18n from '../helpers/i18n.js';\r\nimport Logger from '../helpers/logger.js';\r\nimport AuthActions from '../actions/authactions.js';\r\nimport readBlob from 'read-blob';\r\nimport axios from 'axios';\r\nimport ImageModelBuilder from '../helpers/image/imagemodelbuilder';\r\nconst imageModelBuilder = ImageModelBuilder(),\r\n    ImagesStore = createStore({\r\n        listenables: [ImagesActions, AuthActions],\r\n        _images: Immutable.Map(),\r\n        init: function () {\r\n            this.state = Immutable.Map({\r\n                images: Immutable.Map(),\r\n                uploading: false,\r\n                openAddDialog: false\r\n            });\r\n        },\r\n        getInitialState: function () {\r\n            return this.state;\r\n        },\r\n        updateState: function (newState, suppressTrigger) {\r\n            if (newState) {\r\n                this.state = newState;\r\n            }\r\n\r\n            if (!suppressTrigger) {\r\n                this.trigger(this.state);\r\n            }\r\n        },\r\n        userChanged: function (prevProfile, newProfile) {\r\n            this._currentProfile = newProfile;\r\n            this._imageProvider = DIService.get(\"ImageProvider\");\r\n            return this._imageProvider.getImages()\r\n                .then((imageDocs) => {\r\n                    this.reset();\r\n                    _.forIn(imageDocs.rows, (imageDoc) => {\r\n                        if (!imageDoc.doc)\r\n                            return;\r\n                        let imageModel = imageModelBuilder.fromModel(imageDoc.doc);\r\n                        this._images = this._images.set(imageModel.getId(), imageModel);\r\n                    });\r\n                    this.prepaireImages(this._images);\r\n                });\r\n        },\r\n        reset: function () {\r\n            this.updateState(this.state.set(\"images\", Immutable.Map()));\r\n        },\r\n        openAddDialog: function () {\r\n            this.updateState(this.state.set(\"openAddDialog\", true));\r\n        },\r\n        closeAddDialog: function () {\r\n            this.updateState(this.state.set(\"openAddDialog\", false));\r\n        },\r\n        addImages: function (imageFiles) {\r\n            this.updateState(this.state.set(\"uploading\", true));\r\n            imageFiles.forEach((imageFile) => {\r\n                let doc = {\r\n                    name: imageFile.name,\r\n                    mimeType: imageFile.file.type,\r\n                    tags: imageFile.tags\r\n                },\r\n                    newImageModel = imageModelBuilder.createImage(doc),\r\n                    data = new FormData();\r\n                data.append(\"file\", imageFile.file);\r\n                data.append(\"userId\", this._currentProfile._id);\r\n                data.append(\"id\", newImageModel.getId());\r\n                axios({\r\n                    url: '/media',\r\n                    method: 'post',\r\n                    data,\r\n                    headers: { 'content-type': 'multipart/form-data' },\r\n                }).then((response) => {\r\n                    Logger.log(response);\r\n                    let data = response.data;\r\n                    newImageModel = newImageModel\r\n                        .setHeight(data.height)\r\n                        .setWidth(data.width)\r\n                        .setThumbnail(data.thumbnail)\r\n                        .setThumbnailInfo(data.thumbnailInfo)\r\n                        .setVibrant(data.vibrant)\r\n                        .setDarkVibrant(data.darkVibrant);\r\n                    return this._imageProvider.addImages([newImageModel.toJS()]);\r\n                }).then((imageDocs) => {\r\n                    this.updateState(this.state.set(\"uploading\", false).set(\"openAddDialog\", false));\r\n                    _.forIn(imageDocs.rows, (imageDoc) => {\r\n                        let imageModel = imageModelBuilder.fromModel(imageDoc.doc);\r\n                        this._images = this._images.set(imageModel.getId(), imageModel);\r\n                        this.prepaireImages(this._images);\r\n                    });\r\n                }).catch((error) => {\r\n                    this.updateState(this.state.set(\"uploading\", false).set(\"openAddDialog\", false));\r\n                    Logger.error(error);\r\n                });\r\n            });\r\n        },\r\n        removeImage: function (id) {\r\n\r\n        },\r\n        onDropReject: function (file) {\r\n            NotificationActions.notify(Notifications.ERROR, i18n.t(\"File size limit(200kb) exceeded.\"));\r\n        },\r\n        search: function (value) {\r\n            if (!value) {\r\n                this.prepaireImages(this._images);\r\n            }\r\n            else {\r\n                let filterImages = this._images.filter((file) => {\r\n                    let words = _.words(file.getName()),\r\n                        tags = file.getTags().toArray(),\r\n                        add = false;\r\n                    _.forIn(words, (word) => {\r\n                        if (_.startsWith(word.toLowerCase(), value.toLowerCase())) {\r\n                            add = true;\r\n                            return false;\r\n                        }\r\n                    });\r\n                    _.forIn(tags, (tag) => {\r\n                        if (_.startsWith(tag.toLowerCase(), value.toLowerCase())) {\r\n                            add = true;\r\n                            return false;\r\n                        }\r\n                    });\r\n                    return add;\r\n                });\r\n                this.prepaireImages(filterImages);\r\n            }\r\n        },\r\n        prepaireImages: function (imageModels) {\r\n            imageModels = imageModels.sortBy((file) => file.getDate())\r\n                .reverse();\r\n            this.updateState(this.state.set(\"images\", imageModels));\r\n        }\r\n    });\r\n\r\nexport default ImagesStore;\n\n\n// WEBPACK FOOTER //\n// ./src/js/stores/imagesstore.js","import Reflux from 'reflux-core';\r\nconst ImagesActions = Reflux.createActions(\r\n    [\"addImages\", \"deleteImage\", \"search\", \"onDropReject\", \"openAddDialog\", \"closeAddDialog\"]\r\n);\r\n\r\nexport default ImagesActions;\n\n\n// WEBPACK FOOTER //\n// ./src/js/actions/imagesactions.js","import createStore from \"reflux-core/lib/createStore\";\r\nimport Immutable from \"immutable\";\r\nimport AuthActions from \"../actions/authactions.js\";\r\nimport RecipientsActions from \"../actions/recipientsactions.js\";\r\nimport GroupsActions from \"../actions/groupsactions\";\r\nimport NotificationActions from \"../actions/notificationactions.js\";\r\nimport { Notifications } from \"../appsettings.json\";\r\nimport i18n from \"../helpers/i18n.js\";\r\nimport { contactView } from \"../appsettings.json\";\r\nimport DIService from \"../helpers/diservice\";\r\nimport GroupsAndRecipientsProvider from \"../helpers/contacts/groupsandrecipientsprovider\";\r\nimport SettingsDefinitionBuilder from \"../helpers/settingdefinitionbuilder.js\";\r\nimport SettingsActions from \"../actions/settingsactions.js\";\r\nimport _ from \"lodash\";\r\nvar GroupsAndRecipientsStore = createStore({\r\n  listenables: [RecipientsActions, GroupsActions, AuthActions],\r\n  contactBeingEdited: null,\r\n  groups: Immutable.Set(),\r\n  init: function() {\r\n    this.state = Immutable.fromJS({\r\n      isAuthorizedUser: false\r\n    });\r\n  },\r\n  getInitialState: function() {\r\n    return this.state;\r\n  },\r\n  userChanged: function(prevProfile, newProfile) {\r\n    this.updateState(this.state.set(\"isAuthorizedUser\", !newProfile.isGuest));\r\n    if (!newProfile.isGuest) {\r\n      this.updateState(this.state.set(\"isAuthorizedUser\", true));\r\n      this._currentProfile = newProfile;\r\n      this._groupsAndRecipientsProvider = DIService.get(\r\n        \"GroupsAndRecipientsProvider\"\r\n      );\r\n      return this.updateGroups();\r\n    }\r\n  },\r\n  updateState: function(newState, suppress) {\r\n    this.state = newState;\r\n    if (!suppress) {\r\n      this.trigger(this.state);\r\n    }\r\n  },\r\n  updateGroups: function() {\r\n    return this._groupsAndRecipientsProvider\r\n      .get()\r\n      .then(groups => (this.groups = Immutable.Set(groups)));\r\n  },\r\n  addRecipient: function(model) {\r\n    this._groupsAndRecipientsProvider.addRecipient(model).then(() => {\r\n      this.updateGroups();\r\n      NotificationActions.notify(\r\n        Notifications.INFO,\r\n        i18n.t(\"Contact added successfully\")\r\n      );\r\n    });\r\n  },\r\n  deleteRecipient: function(id) {\r\n    this._groupsAndRecipientsProvider.deleteRecipient(id).then(result => {\r\n      this.updateGroups();\r\n      NotificationActions.notify(\r\n        Notifications.INFO,\r\n        i18n.t(\"The contact has been deleted\"),\r\n        i18n.t(\"undo\"),\r\n        RecipientsActions.undoRecipent.bind(null, result)\r\n      );\r\n    });\r\n  },\r\n  undo: function(doc) {\r\n    this._groupsAndRecipientsProvider.undo(doc);\r\n  },\r\n  storeLastState: function() {\r\n    this.lastState = Immutable.fromJS({\r\n      recipients: this.state.get(\"recipients\"),\r\n      groups: this.groups\r\n    });\r\n  },\r\n  getAllGroups: function() {\r\n    return this.groups.toArray();\r\n  },\r\n  //updated by find\r\n  ensureEmail: function(value) {\r\n    if (this.contactBeingEdited) {\r\n      return Promise.resolve();\r\n    }\r\n    return this._groupsAndRecipientsProvider.ensureEmail(value);\r\n  },\r\n  /*** */\r\n  getRecipientDoc: function(id) {\r\n    if (!id) {\r\n      return Promise.resolve();\r\n    }\r\n    return this._groupsAndRecipientsProvider.getRecipient(id);\r\n  },\r\n  optionsContactOpen: function(id, options) {\r\n    this.getRecipientDoc(id).then(doc => {\r\n      this.contactBeingEdited = doc;\r\n      this.contactSettingToolbar(id, options);\r\n    });\r\n  },\r\n  contactSettingToolbar: function(id, options) {\r\n    let settingsDef = SettingsDefinitionBuilder(),\r\n      settingsValues = {\r\n        fullName: id ? this.contactBeingEdited.getFullName() : \"\",\r\n        email: id ? this.contactBeingEdited.getEmail() : \"\",\r\n        groups: id ? this.contactBeingEdited.getGroups().toArray() : []\r\n      },\r\n      groupTitle = id ? i18n.t(\"Manage contact\") : i18n.t(\"Add contact\");\r\n    settingsDef\r\n      .addSettingsGroup(groupTitle)\r\n      .addSetting(\"fullName\", \"string\", i18n.t(\"Full Name\"), {\r\n        required: true\r\n      })\r\n      .addSetting(\"email\", \"string\", i18n.t(\"Email\"), {\r\n        required: true,\r\n        type: \"email\",\r\n        customValidation: this.ensureEmail\r\n      })\r\n      .addSetting(\"groups\", \"groups\", i18n.t(\"Groups\"), {\r\n        dataSource: this.getAllGroups,\r\n        settingFor: i18n.t(\"Group\")\r\n      });\r\n    SettingsActions.open(\r\n      settingsDef.getSettingsDefinition(),\r\n      settingsValues,\r\n      RecipientsActions.optionsContactDone,\r\n      null,\r\n      options\r\n    );\r\n  },\r\n  optionsContactDone: function(values) {\r\n    let { fullName, email, groups } = values;\r\n    fullName = _.trim(fullName);\r\n    email = _.trim(email);\r\n    if (this.contactBeingEdited) {\r\n      this.contactBeingEdited = this.contactBeingEdited\r\n        .setFullName(fullName)\r\n        .setEmail(email)\r\n        .setGroups(groups);\r\n      this._groupsAndRecipientsProvider\r\n        .updateRecipient(this.contactBeingEdited)\r\n        .then(result => {\r\n          this.updateGroups();\r\n          this.contactBeingEdited = null;\r\n          NotificationActions.notify(\r\n            Notifications.INFO,\r\n            i18n.t(\"Contact edited successfully\")\r\n          );\r\n        })\r\n        .catch(err => {\r\n          if (err.status === 409) {\r\n            this.contactBeingEdited = null;\r\n          }\r\n        });\r\n    } else {\r\n      this.addRecipient(values);\r\n    }\r\n  },\r\n  optionsEditGroupOpen: function(groupName, options) {\r\n    let settingsDef = SettingsDefinitionBuilder(),\r\n      settingsValues = {\r\n        oldName: groupName,\r\n        newName: \"\"\r\n      };\r\n    settingsDef\r\n      .addSettingsGroup()\r\n      .addSetting(\"oldName\", \"string\", i18n.t(\"Old Name\"), {\r\n        disabled: true\r\n      })\r\n      .addSetting(\"newName\", \"string\", i18n.t(\"New Name\"), {\r\n        required: true\r\n      });\r\n    SettingsActions.open(\r\n      settingsDef.getSettingsDefinition(),\r\n      settingsValues,\r\n      GroupsActions.optionsEditGroupDone,\r\n      null,\r\n      options\r\n    );\r\n  },\r\n  optionsEditGroupDone: function(values) {\r\n    let { oldName, newName } = values;\r\n    newName = _.trim(newName);\r\n    this._groupsAndRecipientsProvider\r\n      .renameGroup(oldName, newName)\r\n      .then(groups => {\r\n        this.groups = groups;\r\n      })\r\n      .catch(err => {\r\n        throw err;\r\n      });\r\n  },\r\n  undoRecipients: function() {\r\n    let undoModifiedRecipients = [];\r\n    this.lastState.get(\"recipients\").map(recipient => {\r\n      var latestRecipients = this.state.getIn([\r\n        \"recipients\",\r\n        recipient.getId()\r\n      ]);\r\n      if (recipient != latestRecipients) {\r\n        recipient = recipient.setRev(latestRecipients.getRev());\r\n        undoModifiedRecipients.push(recipient);\r\n      }\r\n    });\r\n    this._groupsAndRecipientsProvider.undoRecipients(undoModifiedRecipients);\r\n  },\r\n  undoGroups: function() {\r\n    this._groupsAndRecipientsProvider\r\n      .undoGroups(this.lastState.get(\"groups\").toArray())\r\n      .then(groups => {\r\n        this.groups = groups;\r\n      });\r\n  },\r\n  removeGroup: function(group) {\r\n    this._groupsAndRecipientsProvider\r\n      .removeGroup(group)\r\n      .then(() => this.updateGroups())\r\n      .catch(err => {\r\n        throw err;\r\n      });\r\n  },\r\n  add: function(values) {\r\n    this._groupsAndRecipientsProvider.add(values).then(groups => {\r\n      this.groups = groups;\r\n    });\r\n  },\r\n  remove: function(groupName) {\r\n    this.storeLastState();\r\n    this._groupsAndRecipientsProvider\r\n      .remove(groupName)\r\n      .then(groups => {\r\n        this.groups = groups;\r\n        NotificationActions.notify(\r\n          Notifications.INFO,\r\n          i18n.t(\"The group has been deleted\"),\r\n          i18n.t(\"undo\"),\r\n          GroupsActions.undoGroups\r\n        );\r\n      })\r\n      .catch(err => {\r\n        throw err;\r\n      });\r\n  }\r\n});\r\n\r\nexport default GroupsAndRecipientsStore;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/stores/groupsandrecipientsstore.js","import Reflux from \"reflux-core\";\r\nconst GroupsActions = Reflux.createActions([\r\n  \"add\",\r\n  \"remove\",\r\n  \"undoGroups\",\r\n  \"optionsEditGroupOpen\",\r\n  \"optionsEditGroupDone\"\r\n]);\r\n\r\nexport default GroupsActions;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/actions/groupsactions.js","import createStore from \"reflux-core/lib/createStore\";\r\nimport createHashHistory from \"history/lib/createHashHistory\";\r\nimport useQueries from \"history/lib/useQueries\";\r\nimport { Router } from \"react-router\";\r\nimport Immutable from \"immutable\";\r\nimport Promise from \"bluebird\";\r\nimport AuthActions from \"../actions/authactions.js\";\r\nimport _ from \"lodash\";\r\nimport DIService from \"../helpers/diservice\";\r\nimport ClientSurveyResponseModelProvider from \"../helpers/clientsurveyresponsemodelprovider\";\r\nimport PublishedSurveyModelProvider from \"../helpers/publishedsurveys/publishedsurveymodelprovider\";\r\nimport i18n from \"../helpers/i18n.js\";\r\nimport Logger from \"../helpers/logger.js\";\r\nimport AnalysisActions from \"../actions/analysisactions.js\";\r\nconst clientSurveyResponseModelProvider = ClientSurveyResponseModelProvider(),\r\n  publishedSurveyModelProvider = PublishedSurveyModelProvider(),\r\n  AnalysisStore = createStore({\r\n    listenables: [AnalysisActions, AuthActions],\r\n    _publishedSurvey: null,\r\n    init: function() {\r\n      this.state = Immutable.Map({\r\n        survey: null,\r\n        surveyResponses: Immutable.Map(),\r\n        info: Immutable.Map()\r\n      });\r\n    },\r\n    getInitialState: function() {\r\n      return this.state;\r\n    },\r\n    userChanged: function(prevProfile, newProfile) {\r\n      this._publishedSurveyProvider = DIService.get(\"PublishedSurveyProvider\", {\r\n        PublishedSurveyModelProvider: publishedSurveyModelProvider\r\n      });\r\n      this._publishedSurveyResponseProvider = DIService.get(\r\n        \"PublishedSurveyResponeseProvider\"\r\n      );\r\n    },\r\n    updateState: function(newState, suppress) {\r\n      if (this.state.equals(newState)) {\r\n        return;\r\n      }\r\n      this.state = newState;\r\n      Logger.log(\"AnalysisStore:updateState\", newState.toJS());\r\n      if (!suppress) {\r\n        this.trigger(this.state);\r\n      }\r\n    },\r\n    initializeAnalysis: function(id) {\r\n      if (id) {\r\n        this._publishedSurveyProvider\r\n          .getUserPublishedSurvey(id)\r\n          .then(publishedSurvey => {\r\n            this._publishedSurvey = publishedSurvey;\r\n            if (!this._publishedSurvey.getContacts().size) {\r\n              this.updateState(\r\n                this.state.set(\"survey\", this._publishedSurvey.getSurvey())\r\n              );\r\n              return;\r\n            }\r\n            this.updateState(\r\n              this.state.set(\"survey\", this._publishedSurvey.getSurvey()),\r\n              true\r\n            );\r\n            let promises = this._publishedSurvey\r\n              .getContacts()\r\n              .map((contact, cId) => {\r\n                if (contact.completed) {\r\n                  return Promise.try(() =>\r\n                    this._publishedSurveyResponseProvider\r\n                      .getResponse(contact.responseId)\r\n                      .then(response => {\r\n                        return {\r\n                          id: contact.responseId,\r\n                          name: contact.name,\r\n                          email: contact.email,\r\n                          completed: true,\r\n                          response: clientSurveyResponseModelProvider.fromModel(\r\n                            response\r\n                          )\r\n                        };\r\n                      })\r\n                  );\r\n                } else {\r\n                  return Promise.try(() =>\r\n                    Promise.resolve({\r\n                      id: contact.responseId,\r\n                      name: contact.name,\r\n                      email: contact.email\r\n                    })\r\n                  );\r\n                }\r\n              })\r\n              .toArray();\r\n            this.settleAll(promises).then(results => {\r\n              let surveyResponses = Immutable.Map();\r\n              _.forIn(results, result => {\r\n                if (!result.isRejected()) {\r\n                  let value = result.value();\r\n                  surveyResponses = surveyResponses.set(value.id, value);\r\n                }\r\n              });\r\n              this.updateState(\r\n                this.state.set(\"surveyResponses\", surveyResponses)\r\n              );\r\n            });\r\n          });\r\n      }\r\n    },\r\n    setInfo: function(id, option) {\r\n      if (option) {\r\n        let info = Immutable.Map({\r\n          [id]: Immutable.Set()\r\n        });\r\n        this.state.get(\"surveyResponses\").map(responseObj => {\r\n          if (responseObj.completed) {\r\n            if (\r\n              responseObj.response.getResponse(id) &&\r\n              responseObj.response.getResponse(id).toLowerCase() ==\r\n                (option && option.toLowerCase())\r\n            ) {\r\n              let objInfo = {\r\n                name: responseObj.name,\r\n                email: responseObj.email,\r\n                os: responseObj.response.getOS(),\r\n                browser: responseObj.response.getBrowserName()\r\n              };\r\n              info = info.update(id, set => set.add(objInfo));\r\n            }\r\n          }\r\n        });\r\n        this.updateState(\r\n          this.state.set(\"info\", this.state.get(\"info\").merge(info))\r\n        );\r\n      } else {\r\n        this.state.setIn([\"info\", id], null);\r\n      }\r\n    },\r\n    reset: function(suppress) {\r\n      this.updateState(\r\n        this.state\r\n          .set(\"survey\", null)\r\n          .set(\"surveyResponses\", Immutable.Map())\r\n          .set(\"info\", Immutable.Map()),\r\n        suppress\r\n      );\r\n    },\r\n    settleAll: function(promises) {\r\n      return Promise.all(\r\n        promises.map(promise => {\r\n          Logger.debug(\"promise\", promise);\r\n          return promise.reflect();\r\n        })\r\n      ).each(inspection => {\r\n        Logger.log(inspection);\r\n        if (inspection.isFulfilled()) {\r\n          return inspection.value();\r\n        } else {\r\n          return inspection.reason();\r\n        }\r\n      });\r\n    }\r\n  });\r\n\r\nexport default AnalysisStore;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/stores/analysisstore.js","import Reflux from \"reflux-core\";\r\nconst AnalysisActions = Reflux.createActions([\r\n  \"initializeAnalysis\",\r\n  \"setInfo\",\r\n  \"reset\"\r\n]);\r\n\r\nexport default AnalysisActions;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/actions/analysisactions.js","import \"./helpers/styles.js\";\r\nimport injectTapEventPlugin from \"react-tap-event-plugin\";\r\nimport DetectDevice from \"./detectdevice.jsx\";\r\nimport errorlogger from \"./errorlogger.js\";\r\nimport AppRoute from \"./approute.jsx\";\r\ninjectTapEventPlugin();\r\nAppRoute();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/startup.js","// One stop shop for all style includes.\r\nimport FontIcons from '../../styles/fonts.css';\r\nimport Layout from '../../styles/layout.css';\r\nimport SurveyStyles from '../../styles/styles.css';\r\nimport highlight from 'highlight.js/styles/default.css';\r\nimport darkCSS from 'highlight.js/styles/atelier-sulphurpool-light.css';\r\nimport FlipMove from '../../styles/flipmove.css';\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/styles.js","import ErrorActions from \"./actions/erroractions.js\";\r\nimport ErrorToJSON from \"error-tojson\";\r\nimport StackTrace from \"stacktrace-js\";\r\nimport _ from \"lodash\";\r\n\r\nlet registerError = ErrorActions.registerError,\r\n  getError = reason => {\r\n    if (!reason) {\r\n      return Promise.resolve(null);\r\n    }\r\n    let errorPromise = reason.toJSON && StackTrace.fromError(reason);\r\n    if (reason.toJSON) {\r\n      return errorPromise.then(errTrace =>\r\n        errTrace.map(stackframe => {\r\n          let fileNameArray = stackframe.getFileName().split(/\\?|\\//),\r\n            fileName =\r\n              fileNameArray[\r\n                _.findIndex(fileNameArray, string => _.endsWith(string, \".js\"))\r\n              ];\r\n          stackframe.setFileName(fileName);\r\n          stackframe.setSource(\"ORIGINAL_STACK_LINE\");\r\n          return JSON.stringify(stackframe);\r\n        })\r\n      );\r\n    }\r\n    return Promise.resolve(reason);\r\n  },\r\n  getErrorMessage = reason =>\r\n    reason && (reason.message || reason.name || reason.error),\r\n  getBlubirdListenerObject = ({ reason, type, detail }) =>\r\n    getError(reason || detail.reason).then(errTrace => ({\r\n      message:\r\n        getErrorMessage(reason) ||\r\n        getErrorMessage(detail && detail.reason) ||\r\n        \"error unknown\",\r\n      type,\r\n      error: errTrace\r\n    })),\r\n  registerListener = (type, mapInputParamsToErrorObject) => {\r\n    window.addEventListener(type, details =>\r\n      mapInputParamsToErrorObject(details).then(registerError)\r\n    );\r\n  };\r\n\r\nregisterListener(\"error\", ({ message, lineno, colno, error }) =>\r\n  getError(error).then(errTrace => ({\r\n    message,\r\n    line: lineno,\r\n    column: colno,\r\n    type: \"window-error\",\r\n    error: errTrace\r\n  }))\r\n);\r\n\r\nregisterListener(\"unhandledrejection\", getBlubirdListenerObject);\r\n\r\nregisterListener(\"rejectionhandled\", getBlubirdListenerObject);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/errorlogger.js","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport Router from \"react-router/lib/Router\";\r\nimport Route from \"react-router/lib/Route\";\r\nimport Redirect from \"react-router/lib/Redirect\";\r\nimport createHashHistory from \"history/lib/createHashHistory\";\r\nimport useRouterHistory from \"react-router/lib/useRouterHistory\";\r\nimport Link from \"react-router/lib/Link\";\r\nimport IndexRoute from \"react-router/lib/IndexRoute\";\r\nimport i18n from \"./helpers/i18n.js\";\r\nimport ProxyLoader from \"./proxyloader/proxyloader.jsx\";\r\nimport DetectDevice from \"./detectdevice.jsx\";\r\nimport DesignApp from \"./designapp.jsx\";\r\nimport RunApp from \"./runapp.jsx\";\r\nlet RouteHandler = Router.RouteHandler,\r\n  history = useRouterHistory(createHashHistory)({\r\n    queryKey: false\r\n  });\r\n\r\nmodule.exports = () =>\r\n  i18n.init().then(() => {\r\n    ReactDOM.render(\r\n      <Router history={history}>\r\n        <Redirect from=\"/\" to=\"/surveys\" />\r\n        <Route path=\"/\" component={DetectDevice}>\r\n          <Route path=\"/\" component={DesignApp}>\r\n            <Route\r\n              path=\"home\"\r\n              component={ProxyLoader(() =>\r\n                import(/* webpackChunkName: \"design\" */ \"./components/homepage.jsx\")\r\n              )}\r\n            />\r\n            <Route\r\n              path=\"surveys\"\r\n              component={ProxyLoader(() =>\r\n                import(/* webpackChunkName: \"design\" */ \"./components/usersurveys.jsx\")\r\n              )}\r\n            >\r\n              <IndexRoute\r\n                component={ProxyLoader(() =>\r\n                  import(/* webpackChunkName: \"design\" */ \"./components/designsurveysgrid.jsx\")\r\n                )}\r\n              />\r\n              <Route path=\"design\">\r\n                <IndexRoute\r\n                  component={ProxyLoader(() =>\r\n                    import(/* webpackChunkName: \"design\" */ \"./components/designsurveysgrid.jsx\")\r\n                  )}\r\n                />\r\n                <Route\r\n                  path=\"edit\"\r\n                  component={ProxyLoader(() =>\r\n                    import(/* webpackChunkName: \"design\" */ \"./components/surveyeditor.jsx\")\r\n                  )}\r\n                >\r\n                  <Route\r\n                    path=\":id\"\r\n                    component={ProxyLoader(() =>\r\n                      import(/* webpackChunkName: \"design\" */ \"./components/survey.jsx\")\r\n                    )}\r\n                  />\r\n                </Route>\r\n                <Route\r\n                  path=\":mode\"\r\n                  component={ProxyLoader(() =>\r\n                    import(/* webpackChunkName: \"design\" */ \"./components/surveyrunner.jsx\")\r\n                  )}\r\n                >\r\n                  <Route\r\n                    path=\":id\"\r\n                    component={ProxyLoader(() =>\r\n                      import(/* webpackChunkName: \"design\" */ \"./components/survey.jsx\")\r\n                    )}\r\n                  />\r\n                </Route>\r\n              </Route>\r\n              <Route path=\"published\">\r\n                <Route\r\n                  path=\":id\"\r\n                  component={ProxyLoader(() =>\r\n                    import(/* webpackChunkName: \"design\" */ \"./components/publishedsurveyrenderer.jsx\")\r\n                  )}\r\n                >\r\n                  <Route\r\n                    path=\"survey\"\r\n                    component={ProxyLoader(() =>\r\n                      import(/* webpackChunkName: \"design\" */ \"./components/publishedsurveysnapshot.jsx\")\r\n                    )}\r\n                  >\r\n                    <IndexRoute\r\n                      component={ProxyLoader(() =>\r\n                        import(/* webpackChunkName: \"design\" */ \"./components/survey.jsx\")\r\n                      )}\r\n                    />\r\n                  </Route>\r\n                  <Route\r\n                    path=\"contacts\"\r\n                    component={ProxyLoader(() =>\r\n                      import(/* webpackChunkName: \"design\" */ \"./components/publishedcontacts.jsx\")\r\n                    )}\r\n                  />\r\n                  <Route\r\n                    path=\"contacts/:responseId/:userName\"\r\n                    component={ProxyLoader(() =>\r\n                      import(/* webpackChunkName: \"design\" */ \"./components/clientrespondedsurvey.jsx\")\r\n                    )}\r\n                  >\r\n                    <IndexRoute\r\n                      component={ProxyLoader(() =>\r\n                        import(/* webpackChunkName: \"design\" */ \"./components/survey.jsx\")\r\n                      )}\r\n                    />\r\n                  </Route>\r\n                  <Route\r\n                    path=\"analysis\"\r\n                    component={ProxyLoader(() =>\r\n                      import(/* webpackChunkName: \"design\" */ \"./components/responseanalysis.jsx\")\r\n                    )}\r\n                  />\r\n                </Route>\r\n              </Route>\r\n              <Route\r\n                path=\"publish\"\r\n                component={ProxyLoader(() =>\r\n                  import(/* webpackChunkName: \"design\" */ \"./components/publishstepper.jsx\")\r\n                )}\r\n              >\r\n                <Route\r\n                  path=\"step1\"\r\n                  component={ProxyLoader(() =>\r\n                    import(/* webpackChunkName: \"design\" */ \"./components/choosesurvey.jsx\")\r\n                  )}\r\n                />\r\n                <Route\r\n                  path=\"step2\"\r\n                  component={ProxyLoader(() =>\r\n                    import(/* webpackChunkName: \"design\" */ \"./components/choosedistribution.jsx\")\r\n                  )}\r\n                />\r\n                <Route\r\n                  path=\"step3\"\r\n                  component={ProxyLoader(() =>\r\n                    import(/* webpackChunkName: \"design\" */ \"./components/choosecontacts.jsx\")\r\n                  )}\r\n                />\r\n                <Route\r\n                  path=\"step4\"\r\n                  component={ProxyLoader(() =>\r\n                    import(/* webpackChunkName: \"design\" */ \"./components/othersettings.jsx\")\r\n                  )}\r\n                />\r\n                <Route\r\n                  path=\"step5\"\r\n                  component={ProxyLoader(() =>\r\n                    import(/* webpackChunkName: \"design\" */ \"./components/publishsurvey.jsx\")\r\n                  )}\r\n                />\r\n              </Route>\r\n            </Route>\r\n            <Route\r\n              path=\"help\"\r\n              component={ProxyLoader(() =>\r\n                import(/* webpackChunkName: \"design\" */ \"./components/helppage.jsx\")\r\n              )}\r\n            />\r\n            <Route\r\n              path=\"contacts\"\r\n              component={ProxyLoader(() =>\r\n                import(/* webpackChunkName: \"design\" */ \"./components/recipients.jsx\")\r\n              )}\r\n            />\r\n          </Route>\r\n          <Route path=\"/run\" component={RunApp}>\r\n            <Route\r\n              path=\":instanceId\"\r\n              component={ProxyLoader(() =>\r\n                import(/* webpackChunkName: \"run\" */ \"./components/clientsurvey.jsx\")\r\n              )}\r\n            >\r\n              <Route\r\n                path=\":responseId\"\r\n                component={ProxyLoader(() =>\r\n                  import(/* webpackChunkName: \"run\" */ \"./components/survey.jsx\")\r\n                )}\r\n              />\r\n            </Route>\r\n          </Route>\r\n          <Route\r\n            path=\"/message\"\r\n            component={ProxyLoader(() =>\r\n              import(/* webpackChunkName: \"run\" */ \"./runapp.jsx\")\r\n            )}\r\n          >\r\n            <Route\r\n              path=\"acknowledgement\"\r\n              component={ProxyLoader(() =>\r\n                import(/* webpackChunkName: \"run\" */ \"./components/acknowledgement.jsx\")\r\n              )}\r\n            >\r\n              <Route\r\n                path=\":instanceId/:responseId\"\r\n                component={ProxyLoader(() =>\r\n                  import(/* webpackChunkName: \"run\" */ \"./components/survey.jsx\")\r\n                )}\r\n              />\r\n            </Route>\r\n            <Route path=\"/surveyavailibility\">\r\n              <Route\r\n                path=\":instanceId\"\r\n                component={ProxyLoader(() =>\r\n                  import(/* webpackChunkName: \"run\" */ \"./components/surveyavailibility.jsx\")\r\n                )}\r\n              />\r\n            </Route>\r\n            <Route path=\"/geolocation\">\r\n              <Route\r\n                path=\":instanceId/:responseId\"\r\n                component={ProxyLoader(() =>\r\n                  import(/* webpackChunkName: \"run\" */ \"./locationdetect.jsx\")\r\n                )}\r\n              />\r\n            </Route>\r\n            <Route\r\n              path=\"signout/:instanceId/:responseId\"\r\n              component={ProxyLoader(() =>\r\n                import(/* webpackChunkName: \"run\" */ \"./components/signout.jsx\")\r\n              )}\r\n            />\r\n            <Route\r\n              path=\"login/:id\"\r\n              component={ProxyLoader(() =>\r\n                import(/* webpackChunkName: \"run\" */ \"./components/login.jsx\")\r\n              )}\r\n            />\r\n            <Route\r\n              path=\"thankyou\"\r\n              component={ProxyLoader(() =>\r\n                import(/* webpackChunkName: \"run\" */ \"./components/thankyou.jsx\")\r\n              )}\r\n            />\r\n            <Route\r\n              path=\"migration/failed\"\r\n              component={ProxyLoader(() =>\r\n                import(/* webpackChunkName: \"run\" */ \"./components/failed.jsx\")\r\n              )}\r\n            />\r\n            <Route\r\n              path=\"completed\"\r\n              component={ProxyLoader(() =>\r\n                import(/* webpackChunkName: \"run\" */ \"./components/completed.jsx\")\r\n              )}\r\n            />\r\n            <Route\r\n              path=\"migration/:id\"\r\n              component={ProxyLoader(() =>\r\n                import(/* webpackChunkName: \"run\" */ \"./components/notrequest.jsx\")\r\n              )}\r\n            />\r\n            <Route\r\n              path=\"shared\"\r\n              component={ProxyLoader(() =>\r\n                import(/* webpackChunkName: \"run\" */ \"./components/sharedresponse.jsx\")\r\n              )}\r\n            >\r\n              <Route\r\n                path=\":id\"\r\n                component={ProxyLoader(() =>\r\n                  import(/* webpackChunkName: \"run\" */ \"./components/survey.jsx\")\r\n                )}\r\n              />\r\n            </Route>\r\n          </Route>\r\n        </Route>\r\n        <Route\r\n          path=\"*\"\r\n          component={ProxyLoader(() =>\r\n            import(/* webpackChunkName: \"run\" */ \"./components/notfound404.jsx\")\r\n          )}\r\n        />\r\n      </Router>,\r\n      document.getElementById(\"app\")\r\n    );\r\n  });\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/approute.jsx","import ObjectID from \"bson-objectid\";\r\nimport _ from \"lodash\";\r\nimport im from \"immutable\";\r\nimport i18n from \"i18next\";\r\nimport makeTypedRecord from \"../maketypedrecord\";\r\nimport processRevivers from \"../processrevivers\";\r\nimport Assertions from \"./assertions.js\";\r\nconst defaultSchemaVersion = \"1.0\",\r\n  SurveySchemaBuilders = {\r\n    \"1.0\": function() {\r\n      const SchemaVersion = \"1.0\",\r\n        QuestionTypes = {\r\n          singletext: \"singletext\",\r\n          yesno: \"yesno\",\r\n          datepicker: \"datepicker\",\r\n          multivalue: \"multivalue\",\r\n          code: \"code\"\r\n        },\r\n        DecoratorTypes = {\r\n          image: \"image\",\r\n          text: \"text\"\r\n        },\r\n        QuestionDisplayTypes = {\r\n          ALL: \"all\",\r\n          PAGE: \"page\",\r\n          QUESTION: \"question\"\r\n        },\r\n        CodeValidationStatus = {\r\n          UNCHECKED: \"unchecked\",\r\n          SUCCESS: \"success\",\r\n          FAILED: \"failed\"\r\n        },\r\n        Models = {\r\n          Owner: {\r\n            schema: {\r\n              owner: {\r\n                _id: \"\",\r\n                name: \"\"\r\n              }\r\n            },\r\n            methods: {\r\n              revivers: {\r\n                owner: function(model) {\r\n                  let { owner } = model,\r\n                    { _id, name } = owner || {\r\n                      _id: \"\",\r\n                      name: \"\"\r\n                    };\r\n                  return this.setOwnerId(_id).setOwnerName(name);\r\n                }\r\n              },\r\n              getOwnerId: function() {\r\n                return this.getIn([\"owner\", \"_id\"]);\r\n              },\r\n              setOwnerId: function(id) {\r\n                if (!_.isUndefined(id)) {\r\n                  return this.setIn([\"owner\", \"_id\"], id);\r\n                }\r\n\r\n                return this;\r\n              },\r\n              getOwnerName: function() {\r\n                return this.getIn([\"owner\", \"name\"]);\r\n              },\r\n              setOwnerName: function(name) {\r\n                if (_.isString(name)) {\r\n                  name = _.trim(name);\r\n                  if (name.length > 0) {\r\n                    return this.setIn([\"owner\", \"name\"], name);\r\n                  }\r\n                }\r\n\r\n                return this;\r\n              }\r\n            }\r\n          },\r\n          Id: {\r\n            schema: {\r\n              _id: null\r\n            },\r\n            methods: {\r\n              revivers: {\r\n                _id: function(model) {\r\n                  let { _id } = model;\r\n                  return this.setId(_id);\r\n                }\r\n              },\r\n              getId: function() {\r\n                return this.get(\"_id\");\r\n              },\r\n              setId: function(id) {\r\n                Assertions.IdIsValid(id);\r\n\r\n                return this.setIn([\"_id\"], id);\r\n              }\r\n            }\r\n          },\r\n          Header: {\r\n            schema: {\r\n              header: {\r\n                title: \"\",\r\n                description: \"\",\r\n                showHeader: true\r\n              }\r\n            },\r\n            methods: {\r\n              revivers: {\r\n                header: function(model) {\r\n                  let { header } = model,\r\n                    { title, description, showHeader } = header || {\r\n                      title: \"\",\r\n                      description: \"\",\r\n                      showHeader: true\r\n                    };\r\n                  return this.setTitle(title)\r\n                    .setDescription(description)\r\n                    .setShowHeader(showHeader);\r\n                }\r\n              },\r\n              getTitle: function() {\r\n                return this.getIn([\"header\", \"title\"]);\r\n              },\r\n              setTitle: function(title) {\r\n                if (_.isString(title)) {\r\n                  title = _.trim(title);\r\n                  let header = this.set(\"header\", im.Map(this.header));\r\n                  return header.setIn([\"header\", \"title\"], title);\r\n                }\r\n\r\n                return this;\r\n              },\r\n              getDescription: function() {\r\n                return this.getIn([\"header\", \"description\"]);\r\n              },\r\n              setDescription: function(description) {\r\n                if (_.isString(description)) {\r\n                  description = _.trim(description);\r\n                  let header = this.set(\"header\", im.Map(this.header));\r\n                  return header.setIn([\"header\", \"description\"], description);\r\n                }\r\n\r\n                return this;\r\n              },\r\n              getShowHeader: function() {\r\n                return this.getIn([\"header\", \"showHeader\"]);\r\n              },\r\n              setShowHeader: function(show) {\r\n                if (_.isBoolean(show)) {\r\n                  let header = this.set(\"header\", im.Map(this.header));\r\n                  return header.setIn([\"header\", \"showHeader\"], show);\r\n                }\r\n\r\n                return this;\r\n              }\r\n            }\r\n          }\r\n        };\r\n      Models.PageItem = _.merge(\r\n        {\r\n          schema: {\r\n            type: \"\",\r\n            subType: \"\",\r\n            parentPageId: \"\",\r\n            questionTimeOut: null\r\n          },\r\n          methods: {\r\n            isPageItem: true,\r\n            revivers: {\r\n              pageItem: function(model) {\r\n                let { parentPageId, questionTimeOut } = model;\r\n                return this.setParentPageId(parentPageId).setQuestionTimeOut(\r\n                  questionTimeOut\r\n                );\r\n              }\r\n            },\r\n            getType: function() {\r\n              return this.get(\"type\");\r\n            },\r\n            getSubType: function() {\r\n              return this.get(\"subType\");\r\n            },\r\n            getParentPageId: function() {\r\n              return this.get(\"parentPageId\");\r\n            },\r\n            setParentPageId: function(parentPageId) {\r\n              Assertions.IdIsValid(parentPageId);\r\n\r\n              return this.set(\"parentPageId\", parentPageId);\r\n            },\r\n            getQuestionTimeOut: function() {\r\n              return this.get(\"questionTimeOut\");\r\n            },\r\n            setQuestionTimeOut: function(questionTimeOut) {\r\n              return this.set(\"questionTimeOut\", questionTimeOut);\r\n            }\r\n          }\r\n        },\r\n        Models.Id\r\n      );\r\n      Models.Question = {\r\n        Base: _.merge({}, Models.Header, Models.PageItem, {\r\n          schema: {\r\n            type: \"question\",\r\n            validations: {}\r\n          },\r\n          methods: {\r\n            isQuestion: true,\r\n            getValidations: function() {\r\n              return this.get(\"validations\");\r\n            },\r\n            validate: function(response) {\r\n              if (this.validators) {\r\n                let promises = [],\r\n                  validatorsKeys = Object.keys(this.validators);\r\n                for (let i = 0; i < validatorsKeys.length; i++) {\r\n                  let validatorsKey = validatorsKeys[i];\r\n                  promises.push(\r\n                    this.validators[validatorsKey].call(this, response)\r\n                  );\r\n                }\r\n                return Promise.all(promises);\r\n              }\r\n              return Promise.resolve();\r\n            }\r\n          }\r\n        }),\r\n        Validations: {\r\n          Required: {\r\n            schema: {\r\n              validations: {\r\n                required: false\r\n              }\r\n            },\r\n            methods: {\r\n              revivers: {\r\n                required: function(model) {\r\n                  let { validations } = model,\r\n                    { required } = validations;\r\n                  return this.setRequired(required);\r\n                }\r\n              },\r\n              getRequired: function() {\r\n                return this.getIn([\"validations\", \"required\"]);\r\n              },\r\n              setRequired: function(required) {\r\n                if (_.isBoolean(required)) {\r\n                  return this.setIn([\"validations\", \"required\"], required);\r\n                }\r\n\r\n                return this;\r\n              },\r\n              validators: {\r\n                checkRequired: function(response) {\r\n                  return new Promise((resolve, reject) => {\r\n                    let err = null;\r\n\r\n                    if (!response) {\r\n                      if (this.getRequired()) {\r\n                        err = { [this.getId()]: \"This field is required.\" };\r\n                        return reject(err);\r\n                      }\r\n                    }\r\n                    return resolve();\r\n                  });\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      };\r\n      Models.Question[QuestionTypes.singletext] = _.merge(\r\n        {},\r\n        Models.Question.Base,\r\n        {\r\n          schema: {\r\n            subType: QuestionTypes.singletext\r\n          }\r\n        },\r\n        Models.Question.Validations.Required\r\n      );\r\n      Models.Question[QuestionTypes.code] = _.merge({}, Models.Question.Base, {\r\n        schema: {\r\n          subType: QuestionTypes.code,\r\n          language: \"javascript\",\r\n          codeValidator: \"\",\r\n          quizMode: true,\r\n          markdown: false,\r\n          defaultTemplate: \"\",\r\n          codeValidationStatus: im.Map({\r\n            status: CodeValidationStatus.UNCHECKED,\r\n            reason: \"\"\r\n          })\r\n        },\r\n        methods: {\r\n          revivers: {\r\n            code: function(model) {\r\n              let {\r\n                language,\r\n                quizMode,\r\n                codeValidator,\r\n                markdown,\r\n                defaultTemplate,\r\n                codeValidationStatus\r\n              } = model;\r\n              return this.setQuizMode(quizMode)\r\n                .setLanguage(language)\r\n                .setCodeValidator(codeValidator)\r\n                .setCodeValidationStatus(codeValidationStatus)\r\n                .setMarkdown(markdown)\r\n                .setDefaultTemplate(defaultTemplate);\r\n            }\r\n          },\r\n          getLanguage: function() {\r\n            return this.get(\"language\");\r\n          },\r\n          setLanguage: function(language) {\r\n            return this.set(\"language\", language || \"javascript\");\r\n          },\r\n          getQuizMode: function() {\r\n            return this.get(\"quizMode\");\r\n          },\r\n          setQuizMode: function(mode) {\r\n            return this.set(\"quizMode\", mode);\r\n          },\r\n          getCodeValidator: function() {\r\n            return this.get(\"codeValidator\");\r\n          },\r\n          setCodeValidator: function(codeValidator) {\r\n            return this.set(\"codeValidator\", codeValidator);\r\n          },\r\n          getMarkdown: function() {\r\n            return this.get(\"markdown\");\r\n          },\r\n          setMarkdown: function(markdown) {\r\n            return this.set(\"markdown\", markdown);\r\n          },\r\n          getDefaultTemplate: function() {\r\n            return this.get(\"defaultTemplate\");\r\n          },\r\n          setDefaultTemplate: function(defaultTemplate) {\r\n            return this.set(\"defaultTemplate\", defaultTemplate);\r\n          },\r\n          getCodeValidationStatus: function() {\r\n            return this.getIn([\"codeValidationStatus\", \"status\"]);\r\n          },\r\n          getCodeValidationReason: function() {\r\n            return this.getIn([\"codeValidationStatus\", \"reason\"]);\r\n          },\r\n          setCodeValidationStatus: function(codeValidationStatus) {\r\n            if (!codeValidationStatus) {\r\n              return this;\r\n            }\r\n            return this.set(\r\n              \"codeValidationStatus\",\r\n              im.Map(codeValidationStatus)\r\n            );\r\n          }\r\n        }\r\n      });\r\n      Models.Question[QuestionTypes.yesno] = _.merge({}, Models.Question.Base, {\r\n        schema: {\r\n          subType: QuestionTypes.yesno,\r\n          quizMode: false,\r\n          answer: \"\",\r\n          marks: 1,\r\n          logic: false,\r\n          skipTo: im.Map()\r\n        },\r\n        methods: {\r\n          revivers: {\r\n            yesno: function(model) {\r\n              let { quizMode, answer, marks, logic, skipTo } = model,\r\n                yesno = this;\r\n              yesno = yesno\r\n                .setQuizMode(quizMode)\r\n                .setAnswer(answer)\r\n                .setMarks(marks)\r\n                .setLogic(logic);\r\n              _.forIn(skipTo, (value, key) => {\r\n                yesno = yesno.setSkipTo(key, value);\r\n              });\r\n              return yesno;\r\n            }\r\n          },\r\n          getQuizMode: function() {\r\n            return this.get(\"quizMode\");\r\n          },\r\n          setQuizMode: function(mode) {\r\n            return this.set(\"quizMode\", mode);\r\n          },\r\n          getAnswer: function() {\r\n            return this.get(\"answer\");\r\n          },\r\n          setAnswer: function(answer) {\r\n            return this.set(\"answer\", answer);\r\n          },\r\n          getMarks: function() {\r\n            return this.get(\"marks\");\r\n          },\r\n          setMarks: function(marks) {\r\n            return this.set(\"marks\", marks || 1);\r\n          },\r\n          getLogic: function() {\r\n            return this.get(\"logic\");\r\n          },\r\n          setLogic: function(logic) {\r\n            if (_.isBoolean(logic)) {\r\n              return this.set(\"logic\", logic);\r\n            }\r\n\r\n            return this;\r\n          },\r\n          getSkipTo: function(id) {\r\n            if (!id) {\r\n              return this.get(\"skipTo\");\r\n            }\r\n            return this.getIn([\"skipTo\", id]);\r\n          },\r\n          setSkipTo: function(id, skipTo) {\r\n            if (!id || !skipTo) {\r\n              return this;\r\n            }\r\n            return this.setIn([\"skipTo\", id], skipTo);\r\n          },\r\n          removeSkipTo: function(id) {\r\n            return this.deleteIn([\"skipTo\", id]);\r\n          }\r\n        }\r\n      });\r\n      Models.Question[QuestionTypes.datepicker] = _.merge(\r\n        {},\r\n        Models.Question.Base,\r\n        {\r\n          schema: {\r\n            subType: QuestionTypes.datepicker\r\n          }\r\n        },\r\n        Models.Question.Validations.Required\r\n      );\r\n      Models.Question[QuestionTypes.multivalue] = _.merge(\r\n        {},\r\n        Models.Question.Base,\r\n        {\r\n          schema: {\r\n            subType: QuestionTypes.multivalue,\r\n            options: [\"one\", \"two\"],\r\n            quizMode: false,\r\n            answer: null,\r\n            marks: 1,\r\n            displayType: \"dropdown\",\r\n            logic: false,\r\n            skipTo: im.Map(),\r\n            markdown: false\r\n          },\r\n          methods: {\r\n            revivers: {\r\n              multivalue: function(model) {\r\n                let {\r\n                    options,\r\n                    quizMode,\r\n                    answer,\r\n                    marks,\r\n                    displayType,\r\n                    logic,\r\n                    skipTo,\r\n                    markdown\r\n                  } = model,\r\n                  multivalue = this;\r\n\r\n                multivalue = multivalue\r\n                  .setOptions(options)\r\n                  .setQuizMode(quizMode)\r\n                  .setAnswer(answer)\r\n                  .setMarks(marks)\r\n                  .setDisplayType(displayType)\r\n                  .setLogic(logic)\r\n                  .setMarkdown(markdown);\r\n                _.forIn(skipTo, (value, key) => {\r\n                  multivalue = multivalue.setSkipTo(key, value);\r\n                });\r\n                return multivalue;\r\n              }\r\n            },\r\n            getOptions: function() {\r\n              return this.get(\"options\").toArray();\r\n            },\r\n            setOptions: function(value) {\r\n              if (_.isArray(value)) {\r\n                value = im.List(value);\r\n              }\r\n\r\n              if (im.List.isList(value)) {\r\n                return this.set(\"options\", value);\r\n              }\r\n\r\n              return this;\r\n            },\r\n            getQuizMode: function() {\r\n              return this.get(\"quizMode\");\r\n            },\r\n            setQuizMode: function(mode) {\r\n              return this.set(\"quizMode\", mode);\r\n            },\r\n            getMarkdown: function() {\r\n              return this.get(\"markdown\");\r\n            },\r\n            setMarkdown: function(markdown) {\r\n              return this.set(\"markdown\", markdown);\r\n            },\r\n            getAnswer: function() {\r\n              return this.get(\"answer\");\r\n            },\r\n            setAnswer: function(answer) {\r\n              return this.set(\"answer\", answer);\r\n            },\r\n            getMarks: function() {\r\n              return this.get(\"marks\");\r\n            },\r\n            setMarks: function(marks) {\r\n              return this.set(\"marks\", marks || 1);\r\n            },\r\n            getDisplayType: function() {\r\n              return this.get(\"displayType\");\r\n            },\r\n            setDisplayType: function(displayType) {\r\n              return this.set(\"displayType\", displayType);\r\n            },\r\n            getLogic: function() {\r\n              return this.get(\"logic\");\r\n            },\r\n            setLogic: function(logic) {\r\n              if (_.isBoolean(logic)) {\r\n                return this.set(\"logic\", logic);\r\n              }\r\n\r\n              return this;\r\n            },\r\n            getSkipTo: function(id) {\r\n              if (!id) {\r\n                return this.get(\"skipTo\");\r\n              }\r\n              return this.getIn([\"skipTo\", id]);\r\n            },\r\n            setSkipTo: function(id, skipTo) {\r\n              if (!id || !skipTo) {\r\n                return this;\r\n              }\r\n              return this.setIn([\"skipTo\", id], skipTo);\r\n            },\r\n            removeSkipTo: function(id) {\r\n              return this.deleteIn([\"skipTo\", id]);\r\n            }\r\n          }\r\n        },\r\n        Models.Question.Validations.Required\r\n      );\r\n      Models.Decorator = _.merge({}, Models.PageItem, {\r\n        schema: {\r\n          type: \"decorator\"\r\n        },\r\n        methods: {\r\n          isQuestion: false\r\n        }\r\n      });\r\n      Models.Dimensions = {\r\n        schema: {\r\n          dimensions: {\r\n            width: \"\",\r\n            height: \"\"\r\n          }\r\n        },\r\n        methods: {\r\n          revivers: {\r\n            dimensions: function(model) {\r\n              let { dimensions } = model;\r\n              return this.setDimensions(dimensions);\r\n            }\r\n          },\r\n          getDimensions: function() {\r\n            return this.get(\"dimensions\");\r\n          },\r\n          setDimensions: function(dimensions) {\r\n            if (!dimensions) {\r\n              return this;\r\n            }\r\n            let dimention = this.set(\"dimensions\", im.Map());\r\n            return dimention\r\n              .setIn([\"dimensions\", \"width\"], dimensions.width)\r\n              .setIn([\"dimensions\", \"height\"], dimensions.height);\r\n          },\r\n          getWidth: function() {\r\n            return this.getIn([\"dimensions\", \"width\"]);\r\n          },\r\n          setWidth: function(width) {\r\n            return this.setIn([\"dimensions\", \"width\"], width);\r\n          },\r\n          getHeight: function() {\r\n            return this.getIn([\"dimensions\", \"height\"]);\r\n          },\r\n          setHeight: function(height) {\r\n            return this.setIn([\"dimensions\", \"height\"], height);\r\n          }\r\n        }\r\n      };\r\n      Models.Decorator[\r\n        DecoratorTypes.image\r\n      ] = _.merge({}, Models.Decorator, Models.Dimensions, Models.Header, {\r\n        schema: {\r\n          subType: DecoratorTypes.image,\r\n          imageId: null\r\n        },\r\n        methods: {\r\n          revivers: {\r\n            image: function(model) {\r\n              let { imageId } = model;\r\n              return this.setImageId(imageId);\r\n            }\r\n          },\r\n          setImageId: function(imageId) {\r\n            return this.setIn([\"imageId\"], imageId);\r\n          },\r\n          getImageId: function() {\r\n            return this.getIn([\"imageId\"]);\r\n          }\r\n        }\r\n      });\r\n      Models.Decorator[\r\n        DecoratorTypes.text\r\n      ] = _.merge({}, Models.Decorator, Models.Header, {\r\n        schema: {\r\n          subType: DecoratorTypes.text\r\n        },\r\n        methods: {\r\n          revivers: {\r\n            text: function(model) {\r\n              return this;\r\n            }\r\n          }\r\n        }\r\n      });\r\n      Models.Page = _.merge(\r\n        {\r\n          schema: {\r\n            randomizeQuestions: false,\r\n            pageItemRefs: [],\r\n            maxPageItemsAllowed: null,\r\n            logic: false,\r\n            skipTo: \"eos\",\r\n            totalPageMarks: 0\r\n          },\r\n          methods: {\r\n            isPage: true,\r\n            revivers: {\r\n              page: function(model) {\r\n                let {\r\n                    randomizeQuestions,\r\n                    pageItemRefs,\r\n                    maxPageItemsAllowed,\r\n                    logic,\r\n                    skipTo,\r\n                    totalPageMarks\r\n                  } = model,\r\n                  page = this.setRandomizeQuestions(randomizeQuestions)\r\n                    .setMaxPageItemsAllowed(maxPageItemsAllowed)\r\n                    .setLogic(logic)\r\n                    .setSkipTo(skipTo)\r\n                    .setPageMarksTotal(totalPageMarks);\r\n                // Add page item refs\r\n                if (_.isArray(pageItemRefs)) {\r\n                  for (let i = 0; i < pageItemRefs.length; i++) {\r\n                    page = page.addPageItemRef(pageItemRefs[i]);\r\n                  }\r\n                }\r\n\r\n                return page;\r\n              }\r\n            },\r\n            getRandomizeQuestions: function() {\r\n              return this.get(\"randomizeQuestions\");\r\n            },\r\n            setRandomizeQuestions: function(randomizeQuestions) {\r\n              if (_.isBoolean(randomizeQuestions)) {\r\n                return this.set(\"randomizeQuestions\", randomizeQuestions);\r\n              }\r\n\r\n              return this;\r\n            },\r\n            getMaxPageItemsAllowed: function() {\r\n              return this.get(\"maxPageItemsAllowed\");\r\n            },\r\n            setMaxPageItemsAllowed: function(maxPageItemsAllowed) {\r\n              return this.set(\"maxPageItemsAllowed\", maxPageItemsAllowed);\r\n            },\r\n            getLogic: function() {\r\n              return this.get(\"logic\");\r\n            },\r\n            setLogic: function(logic) {\r\n              if (_.isBoolean(logic)) {\r\n                return this.set(\"logic\", logic);\r\n              }\r\n\r\n              return this;\r\n            },\r\n            getSkipTo: function() {\r\n              return this.get(\"skipTo\");\r\n            },\r\n            setSkipTo: function(skipTo) {\r\n              if (!skipTo) {\r\n                skipTo = \"eos\";\r\n              }\r\n              return this.set(\"skipTo\", skipTo);\r\n            },\r\n            getPageMarksTotal: function() {\r\n              return this.get(\"totalPageMarks\");\r\n            },\r\n            setPageMarksTotal: function(totalPageMarks) {\r\n              return this.set(\"totalPageMarks\", totalPageMarks);\r\n            },\r\n            getPageItemRefsSize: function() {\r\n              return this.get(\"pageItemRefs\").size;\r\n            },\r\n            getPageItemRefs: function() {\r\n              return this.get(\"pageItemRefs\").valueSeq();\r\n            },\r\n            getPageItemRef: function(index) {\r\n              Assertions.IndexIsInBounds(index, this.getPageItemRefsSize());\r\n\r\n              return this.getIn([\"pageItemRefs\", index]);\r\n            },\r\n            getPageItemRefIndex: function(ref) {\r\n              return this.get(\"pageItemRefs\")\r\n                .toArray()\r\n                .indexOf(ref);\r\n            },\r\n            addPageItemRef: function(ref, index = -1) {\r\n              Assertions.IdIsValid(ref);\r\n\r\n              let size = this.getPageItemRefsSize();\r\n              if (index == -1) {\r\n                index = size;\r\n              } else {\r\n                Assertions.IndexIsInBounds(index, size + 1);\r\n              }\r\n\r\n              Assertions.PageItemRefIsNotInPage(this, ref);\r\n\r\n              let pageItemRefs = this.get(\"pageItemRefs\");\r\n              pageItemRefs = pageItemRefs.insert(index, ref);\r\n\r\n              return this.setIn([\"pageItemRefs\"], pageItemRefs);\r\n            },\r\n            removePageItemRef: function(indexOrRef) {\r\n              let index = -1;\r\n              if (typeof indexOrRef == \"number\") {\r\n                Assertions.IndexIsInBounds(\r\n                  indexOrRef,\r\n                  this.getPageItemRefsSize()\r\n                );\r\n                index = indexOrRef;\r\n              } else {\r\n                index = this.getPageItemRefIndex(indexOrRef);\r\n              }\r\n              if (index == -1) {\r\n                throw `The PageItemRef - ${indexOrRef} does not exist in page - ${this.getId()}.`;\r\n              }\r\n              return this.deleteIn([\"pageItemRefs\", index]);\r\n            },\r\n            movePageItemRef: function(oldIndex, newIndex) {\r\n              if (newIndex == oldIndex) {\r\n                return this;\r\n              }\r\n\r\n              if (newIndex == -1) {\r\n                return this;\r\n              }\r\n\r\n              if (newIndex > this.size) {\r\n                return this;\r\n              }\r\n\r\n              let value = this.getPageItemRef(oldIndex);\r\n              return this.removePageItemRef(oldIndex).addPageItemRef(\r\n                value,\r\n                newIndex\r\n              );\r\n            }\r\n          }\r\n        },\r\n        Models.Id,\r\n        Models.Header\r\n      );\r\n      Models.Date = {\r\n        schema: {\r\n          date: im.Map({\r\n            created: \"\",\r\n            updated: \"\"\r\n          })\r\n        },\r\n        methods: {\r\n          revivers: {\r\n            date: function({ date }) {\r\n              let { created, updated } = date || {};\r\n              return this.setCreated(created).setUpdated(updated);\r\n            }\r\n          },\r\n          getDate: function() {\r\n            return this.get(\"date\");\r\n          },\r\n          getCreated: function() {\r\n            return this.getIn([\"date\", \"created\"]);\r\n          },\r\n          setCreated: function(dateString) {\r\n            if (!dateString) {\r\n              return this;\r\n            }\r\n            return this.setIn([\"date\", \"created\"], dateString);\r\n          },\r\n          getUpdated: function() {\r\n            return this.getIn([\"date\", \"updated\"]);\r\n          },\r\n          setUpdated: function(dateString) {\r\n            if (!dateString) {\r\n              return this;\r\n            }\r\n            return this.setIn([\"date\", \"updated\"], dateString);\r\n          }\r\n        }\r\n      };\r\n\r\n      Models.Attachments = {\r\n        schema: {\r\n          thumbnail: \"\"\r\n        },\r\n        methods: {\r\n          revivers: {\r\n            attachments: function(model) {\r\n              let { thumbnail } = model;\r\n              return this.setThumbnail(thumbnail);\r\n            }\r\n          },\r\n          getThumbnail: function() {\r\n            return this.getIn([\"thumbnail\"]);\r\n          },\r\n          setThumbnail: function(thumbnail) {\r\n            return this.setIn([\"thumbnail\"], thumbnail);\r\n          }\r\n        }\r\n      };\r\n      Models.Survey = _.merge(\r\n        {\r\n          schema: {\r\n            _rev: null,\r\n            _schemaVersion: \"1.0\",\r\n            _isDeleted: false,\r\n            /**If set to true, the Survey will ensure default Page and Questions are maintained\r\n                     * during Page/Question deletions. \r\n                     */\r\n            _ensureDefaults: false,\r\n            isTimer: false,\r\n            showMarksRunMode: false,\r\n            timeout: null,\r\n            questionDisplay: QuestionDisplayTypes.QUESTION,\r\n            minimumMarks: 0,\r\n            pages: [],\r\n            pageItems: {},\r\n            startFrom: 0,\r\n            surveyMarksTotal: 0,\r\n            restrictPrevious: false\r\n          },\r\n          methods: {\r\n            isSurvey: true,\r\n            revivers: {\r\n              survey: function(model) {\r\n                let {\r\n                    _rev,\r\n                    _ensureDefaults,\r\n                    pages,\r\n                    pageItems,\r\n                    isTimer,\r\n                    timeout,\r\n                    questionDisplay,\r\n                    minimumMarks,\r\n                    startFrom,\r\n                    showMarksRunMode,\r\n                    surveyMarksTotal,\r\n                    restrictPrevious\r\n                  } = model,\r\n                  survey = this;\r\n\r\n                // Add pages.\r\n                if (_.isArray(pages)) {\r\n                  for (let i = 0; i < pages.length; i++) {\r\n                    let page = PageFactory.fromModel(pages[i]);\r\n                    survey = survey.pushPage(page);\r\n                  }\r\n                }\r\n\r\n                // Add page items\r\n                if (_.isPlainObject(pageItems)) {\r\n                  let pageItemsKeys = Object.keys(pageItems);\r\n                  for (let i = 0; i < pageItemsKeys.length; i++) {\r\n                    let pageItemKey = pageItemsKeys[i],\r\n                      pageItem = PageItemFactory.fromModel(\r\n                        pageItems[pageItemKey]\r\n                      );\r\n                    survey = survey.addPageItem(pageItem);\r\n                  }\r\n                }\r\n                // Important to set ensureDefaults in the end, otherwise\r\n                // Survey.addPage/addPageItem will obey ensureDefaults!\r\n                return survey\r\n                  .setRevision(_rev)\r\n                  ._setEnsureDefaults(_ensureDefaults)\r\n                  .setIsTimer(isTimer)\r\n                  .setTimeout(timeout)\r\n                  .setQuestionDisplay(questionDisplay)\r\n                  .setMinimumMarks(minimumMarks)\r\n                  .setStartFrom(startFrom)\r\n                  .setShowMarksRunMode(showMarksRunMode)\r\n                  .setSurveyMarksTotal(surveyMarksTotal)\r\n                  .setRestrictPrevious(restrictPrevious);\r\n              }\r\n            },\r\n            clone: function() {\r\n              return this.setId(ObjectID().str);\r\n            },\r\n            _getEnsureDefaults: function() {\r\n              return this.get(\"_ensureDefaults\");\r\n            },\r\n            _setEnsureDefaults: function(ensureDefaults) {\r\n              if (_.isBoolean(ensureDefaults)) {\r\n                return this.set(\"_ensureDefaults\", ensureDefaults);\r\n              }\r\n\r\n              return this;\r\n            },\r\n            getPages: function() {\r\n              return this.get(\"pages\");\r\n            },\r\n            getIsTimer: function() {\r\n              return this.get(\"isTimer\");\r\n            },\r\n            setIsTimer: function(isTimer) {\r\n              if (_.isBoolean(isTimer)) {\r\n                return this.set(\"isTimer\", isTimer);\r\n              }\r\n\r\n              return this;\r\n            },\r\n            getShowMarksRunMode: function() {\r\n              return this.get(\"showMarksRunMode\");\r\n            },\r\n            setShowMarksRunMode: function(showMarksRunMode) {\r\n              if (_.isBoolean(showMarksRunMode)) {\r\n                return this.set(\"showMarksRunMode\", showMarksRunMode);\r\n              }\r\n\r\n              return this;\r\n            },\r\n            getSurveyMarksTotal: function() {\r\n              return this.get(\"surveyMarksTotal\");\r\n            },\r\n            setSurveyMarksTotal: function(surveyMarksTotal) {\r\n              return this.set(\"surveyMarksTotal\", surveyMarksTotal);\r\n            },\r\n            getRestrictPrevious: function() {\r\n              return this.get(\"restrictPrevious\");\r\n            },\r\n            setRestrictPrevious: function(restrictPrevious) {\r\n              return this.set(\"restrictPrevious\", restrictPrevious);\r\n            },\r\n            getTimeout: function() {\r\n              return this.get(\"timeout\");\r\n            },\r\n            setTimeout: function(timeout) {\r\n              return this.set(\"timeout\", timeout);\r\n            },\r\n            getStartFrom: function() {\r\n              return this.get(\"startFrom\");\r\n            },\r\n            setStartFrom: function(startFrom) {\r\n              return this.set(\"startFrom\", startFrom);\r\n            },\r\n            getQuestionDisplay: function() {\r\n              return this.get(\"questionDisplay\");\r\n            },\r\n            setQuestionDisplay: function(style) {\r\n              if (!style) {\r\n                return this;\r\n              }\r\n              if (!QuestionDisplayTypes[style.toUpperCase()]) {\r\n                return this;\r\n              }\r\n              return this.set(\"questionDisplay\", style);\r\n            },\r\n            getMinimumMarks: function() {\r\n              return parseInt(this.get(\"minimumMarks\"));\r\n            },\r\n            setMinimumMarks: function(marks) {\r\n              return this.set(\"minimumMarks\", parseInt(marks));\r\n            },\r\n            getIsDeleted: function() {\r\n              return this.get(\"_isDeleted\");\r\n            },\r\n            setIsDeleted: function(isDeleted) {\r\n              if (_.isBoolean(isDeleted)) {\r\n                return this.set(\"_isDeleted\", isDeleted);\r\n              }\r\n\r\n              return this;\r\n            },\r\n            _ensureDefaultsPageItems: function(page) {\r\n              // If ensure defaults is not set, return the survey model unchanged.\r\n              if (!this._getEnsureDefaults()) {\r\n                return this;\r\n              }\r\n\r\n              // If the page is empty, add a default question.\r\n              if (page.getPageItemRefsSize() == 0) {\r\n                let question = PageItemFactory._createDefaultQuestion();\r\n                return this.addPageItemToPageAndSurvey(page, question);\r\n              }\r\n\r\n              return this;\r\n            },\r\n            _ensureDefaultPage: function() {\r\n              // If ensure defaults is not set, return the survey model unchanged.\r\n              if (!this._getEnsureDefaults()) {\r\n                return this;\r\n              }\r\n\r\n              // If no pages are present, add a default page.\r\n              if (this.getPagesSize() == 0) {\r\n                let page = PageFactory._createDefaultPage();\r\n                return this.pushPage(page);\r\n              }\r\n\r\n              return this;\r\n            },\r\n            getRevision: function() {\r\n              return this.get(\"_rev\");\r\n            },\r\n            setRevision: function(revision) {\r\n              if (!_.isUndefined(revision)) {\r\n                return this.setIn([\"_rev\"], revision);\r\n              }\r\n\r\n              return this;\r\n            },\r\n            getPageItemsSize: function() {\r\n              return this.get(\"pageItems\").count();\r\n            },\r\n            getPageItemsKeys: function() {\r\n              return this.get(\"pageItems\").keySeq();\r\n            },\r\n            getPageItemBySubtype: function(subType) {\r\n              return this.get(\"pageItems\").filter(\r\n                obj => obj.getSubType() == subType\r\n              );\r\n            },\r\n            getPageItem: function(key) {\r\n              Assertions.IdIsValid(key);\r\n\r\n              return this.getIn([\"pageItems\", key]);\r\n            },\r\n            addPageItem: function(newPageItem) {\r\n              Assertions.ItemIsPageItem(newPageItem);\r\n\r\n              return this.setIn(\r\n                [\"pageItems\", newPageItem.getId()],\r\n                newPageItem\r\n              );\r\n            },\r\n            /** Adds an existing PageItem to and existing Page in this Survey.\r\n                     *  Both the PageItem and Page must be present in this Survey.\r\n                     * @param  {any} pageOrPageId\r\n                     * @param  {any} pageItemOrPageItemId\r\n                     * @param  {any} pageItemRefPositon\r\n                     */\r\n            addPageItemToPage: function(\r\n              pageOrPageId,\r\n              pageItemOrPageItemId,\r\n              pageItemRefPositon\r\n            ) {\r\n              // The page must be valid and existing in this survey.\r\n              // This assertion will be performed inside updatePage.\r\n              let page = pageOrPageId.isPage\r\n                ? pageOrPageId\r\n                : this.getPage(pageOrPageId);\r\n\r\n              // The page item must be valid and existing in this survey.\r\n              let pageItem = pageItemOrPageItemId.isPageItem\r\n                ? pageItemOrPageItemId\r\n                : this.getPageItem(pageItemOrPageItemId);\r\n              Assertions.ItemIsPageItem(pageItemOrPageItemId);\r\n              Assertions.PageItemIsPresentInSurvey(this, pageItemOrPageItemId);\r\n\r\n              // The item ref must not already exist in the page\r\n              // This assertion is handled in the Page.addPageItemRef\r\n              // Assertions.PageItemRefIsNotInPage(page, pageItem.getId());\r\n\r\n              // Find the existing index of this page\r\n              let pageIndex = this.getPageIndex(page);\r\n\r\n              // Get the new page with item added\r\n              page = page.addPageItemRef(pageItem.getId(), pageItemRefPositon);\r\n\r\n              // Set the pageItem's parentPageId to this Page.\r\n              pageItem = pageItem.setParentPageId(page.getId());\r\n\r\n              // Set the new page into this survey and update the PageItem too.\r\n              return this.updatePage(pageIndex, page).updatePageItem(pageItem);\r\n            },\r\n            /** Adds a new PageItem to an existing page in this Survey.\r\n                     *  This function in a convenience method over addPageItem and addPageItemToPage.\r\n                     *  The PageItem must NOT be present in this Survey.\r\n                     *  The Page must exist in this Survey.\r\n                     * @param  {any} pageOrPageId\r\n                     * @param  {any} pageItemOrPageItemId\r\n                     * @param  {any} pageItemRefPositon\r\n                     */\r\n            addPageItemToPageAndSurvey: function(\r\n              pageOrPageId,\r\n              newPageItemOrPageItemId,\r\n              pageItemRefPositon\r\n            ) {\r\n              Assertions.PageItemIsNotPresentInSurvey(\r\n                this,\r\n                newPageItemOrPageItemId\r\n              );\r\n\r\n              return this.addPageItem(\r\n                newPageItemOrPageItemId\r\n              ).addPageItemToPage(\r\n                pageOrPageId,\r\n                newPageItemOrPageItemId,\r\n                pageItemRefPositon\r\n              );\r\n            },\r\n            updatePageItem: function(pageItem) {\r\n              Assertions.ItemIsPageItem(pageItem);\r\n              Assertions.PageItemIsPresentInSurvey(this, pageItem);\r\n\r\n              return this.setIn([\"pageItems\", pageItem.getId()], pageItem);\r\n            },\r\n            removePageItem: function(pageItemOrPageItemId) {\r\n              let pageItemId = pageItemOrPageItemId.isPageItem\r\n                ? pageItemOrPageItemId.getId()\r\n                : pageItemOrPageItemId;\r\n              Assertions.PageItemIsPresentInSurvey(this, pageItemId);\r\n              // Remove PageItem references from its parent page.\r\n              let parentPageId = pageItemOrPageItemId.isPageItem\r\n                  ? pageItemOrPageItemId.getParentPageId()\r\n                  : this.getPageItem(pageItemOrPageItemId).getParentPageId(),\r\n                page = parentPageId\r\n                  ? this.getPage(this.getPageIndex(parentPageId))\r\n                  : null;\r\n\r\n              let result = this.deleteIn([\"pageItems\", pageItemId]);\r\n\r\n              if (page) {\r\n                page = page.removePageItemRef(pageItemId);\r\n                result = result.updatePage(this.getPageIndex(page), page);\r\n              }\r\n\r\n              return result._ensureDefaultsPageItems(page);\r\n            },\r\n            getPagesSize: function() {\r\n              return this.get(\"pages\").size;\r\n            },\r\n            getPageIndex: function(pageOrPageId) {\r\n              let pages = this.get(\"pages\"),\r\n                pageId = pageOrPageId.isPage\r\n                  ? pageOrPageId.getId()\r\n                  : pageOrPageId,\r\n                queryResults = pages.findEntry(\r\n                  (page, index) => page.getId() == pageId\r\n                );\r\n\r\n              return queryResults ? queryResults[0] : -1;\r\n            },\r\n            getPage: function(index) {\r\n              Assertions.IndexIsInBounds(index, this.getPagesSize());\r\n\r\n              return this.getIn([\"pages\", index]);\r\n            },\r\n            updatePage: function(index, page) {\r\n              Assertions.ItemIsPage(page);\r\n              Assertions.PageIsPresentInSurvey(this, page);\r\n              Assertions.IndexIsInBounds(index, this.getPagesSize());\r\n\r\n              return this.setIn([\"pages\", index], page);\r\n            },\r\n            insertPage: function(index, page) {\r\n              Assertions.ItemIsPage(page);\r\n              Assertions.IndexIsInBounds(index, this.getPagesSize());\r\n\r\n              let pages = this.get(\"pages\").insert(index, page);\r\n\r\n              return this.set(\"pages\", pages)._ensureDefaultsPageItems(page);\r\n            },\r\n            pushPage: function(page) {\r\n              Assertions.ItemIsPage(page);\r\n\r\n              let pages = this.get(\"pages\").push(page);\r\n\r\n              // Ensure an empty page has default items.\r\n              return this.set(\"pages\", pages)._ensureDefaultsPageItems(page);\r\n            },\r\n            removePage: function(index) {\r\n              Assertions.IndexIsInBounds(index, this.getPagesSize());\r\n\r\n              let page = this.getPage(index),\r\n                pageItemRefsToRemove = page.getPageItemRefs(),\r\n                result = this;\r\n\r\n              // Remove all PageItems of this Page.\r\n              for (let pageItemRef of pageItemRefsToRemove) {\r\n                result = result.removePageItem(pageItemRef);\r\n              }\r\n\r\n              // Remove the Page\r\n              return result.deleteIn([\"pages\", index])._ensureDefaultPage();\r\n            },\r\n            movePage: function(oldIndex, newIndex) {\r\n              if (newIndex == oldIndex) {\r\n                return this;\r\n              }\r\n\r\n              if (newIndex == -1) {\r\n                return this;\r\n              }\r\n\r\n              if (newIndex > this.getPagesSize()) {\r\n                return this;\r\n              }\r\n\r\n              let pageToMove = this.getIn([\"pages\", oldIndex]),\r\n                result = this.deleteIn([\"pages\", oldIndex]),\r\n                pages = result.get(\"pages\").insert(newIndex, pageToMove);\r\n\r\n              return result.set(\"pages\", pages);\r\n            }\r\n          }\r\n        },\r\n        Models.Id,\r\n        Models.Owner,\r\n        Models.Header,\r\n        Models.Date,\r\n        Models.Attachments\r\n      );\r\n      const Types = {\r\n          Page: makeTypedRecord(Models.Page),\r\n          Question: {\r\n            [QuestionTypes.singletext]: makeTypedRecord(\r\n              Models.Question.singletext\r\n            ),\r\n            [QuestionTypes.yesno]: makeTypedRecord(Models.Question.yesno),\r\n            [QuestionTypes.datepicker]: makeTypedRecord(\r\n              Models.Question.datepicker\r\n            ),\r\n            [QuestionTypes.multivalue]: makeTypedRecord(\r\n              Models.Question.multivalue\r\n            ),\r\n            [QuestionTypes.code]: makeTypedRecord(Models.Question.code)\r\n          },\r\n          Decorator: {\r\n            [DecoratorTypes.image]: makeTypedRecord(Models.Decorator.image),\r\n            [DecoratorTypes.text]: makeTypedRecord(Models.Decorator.text)\r\n          },\r\n          Survey: makeTypedRecord(Models.Survey)\r\n        },\r\n        PageFactory = {\r\n          _createDefaultPage: function() {\r\n            let page = this.create();\r\n            return page;\r\n          },\r\n          create: function() {\r\n            let item = {\r\n              _id: ObjectID().str\r\n            };\r\n\r\n            return this.fromModel(item);\r\n          },\r\n          fromModel: function(model) {\r\n            let page = new Types.Page();\r\n            return processRevivers(page, model);\r\n          }\r\n        },\r\n        PageItemFactory = {\r\n          QuestionTypes,\r\n          DecoratorTypes,\r\n          decorator: function(subType, model) {\r\n            //throw \"Not implemented.\";\r\n            if (!DecoratorTypes[subType]) {\r\n              throw `Unsupported subType ${subType}.`;\r\n            }\r\n\r\n            if (!model) {\r\n              throw \"Default is unavailable.\";\r\n            }\r\n            if (!model._id) {\r\n              model._id = ObjectID().str;\r\n            }\r\n            model.subType = subType;\r\n            return new Types.Decorator[subType](model);\r\n          },\r\n          _createDefaultQuestion: function() {\r\n            let question = this.question(QuestionTypes.singletext);\r\n            return question;\r\n          },\r\n          _createDefaultDecorator: function() {\r\n            let decorator = this.decorator(DecoratorTypes.text, {});\r\n            return decorator;\r\n          },\r\n          question: function(subType, model) {\r\n            if (!QuestionTypes[subType]) {\r\n              throw `Unsupported subType ${subType}.`;\r\n            }\r\n\r\n            if (!model) {\r\n              model = {\r\n                _id: ObjectID().str,\r\n                subType\r\n              };\r\n            }\r\n            return new Types.Question[subType](model);\r\n          },\r\n          fromModel: function(model) {\r\n            let { type, subType } = model;\r\n\r\n            if (type !== \"question\" && type !== \"decorator\") {\r\n              throw `Invalid model type - ${type}`;\r\n            }\r\n            let pageItem = null;\r\n            if (type == \"question\") {\r\n              pageItem = this.question(subType);\r\n            }\r\n            if (type == \"decorator\") {\r\n              pageItem = this.decorator(subType, model);\r\n            }\r\n            return processRevivers(pageItem, model);\r\n          }\r\n        },\r\n        reviveSurvey = function(model) {\r\n          let survey = new Types.Survey();\r\n          return processRevivers(survey, model);\r\n        },\r\n        createSurveyModel = function(model) {\r\n          if (!model) {\r\n            model = {\r\n              _id: ObjectID().str\r\n            };\r\n\r\n            return new Types.Survey(model);\r\n          }\r\n\r\n          return reviveSurvey(model);\r\n        };\r\n\r\n      // Concrete SurveyModelBuilder object.\r\n      return {\r\n        PageFactory: PageFactory,\r\n        PageItemFactory: PageItemFactory,\r\n        fromModel: function(model) {\r\n          return createSurveyModel(model);\r\n        },\r\n        createEmptyModel: function() {\r\n          return createSurveyModel();\r\n        },\r\n        createDefaultModel: function() {\r\n          // Create empty model and set ensureDefaults to true.\r\n          let model = this.createEmptyModel()._setEnsureDefaults(true),\r\n            page = PageFactory._createDefaultPage();\r\n\r\n          model = model.setShowHeader(true);\r\n          // pushPage will add the defaul page items.\r\n          model = model.pushPage(page);\r\n\r\n          return model;\r\n        }\r\n      };\r\n    }\r\n  },\r\n  SurveyModelBuilder = function(schemaVersion = defaultSchemaVersion) {\r\n    return SurveySchemaBuilders[schemaVersion]();\r\n  };\r\n\r\nexport default SurveyModelBuilder;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/surveymodelbuilder/index.js","import React from \"react\";\r\nimport DefaultLoader from \"./defaultloader.jsx\";\r\nimport Loadable from \"react-loadable\";\r\nimport ErrorLoader from \"./errorloadercomponent.jsx\";\r\n\r\nconst ProxyLoader = (moduleToImport, customLoadingComponent, customDelay = 0) =>\r\n  Loadable({\r\n    loader: moduleToImport,\r\n    LoadingComponent: getLoadingComponent(customLoadingComponent),\r\n    delay: 1\r\n  });\r\nlet getLoadingComponent = customLoadingComponent => {\r\n  let LoadingComponent = customLoadingComponent || DefaultLoader;\r\n  return ({ isLoading, error, pastDelay }) => {\r\n    if (isLoading) {\r\n      return pastDelay ? <LoadingComponent /> : null; // Don't flash \"Loading...\" when we don't need to.\r\n    }\r\n    if (error) {\r\n      console.error(error);\r\n      return <ErrorLoader />;\r\n    }\r\n    return null;\r\n  };\r\n};\r\n\r\nexport default ProxyLoader;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/proxyloader/proxyloader.jsx","import React from 'react';\r\nimport getMuiTheme from 'material-ui/styles/getMuiTheme';\r\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider';\r\nimport i18n from '../helpers/i18n.js';\r\nimport RefreshIndicator from 'material-ui/RefreshIndicator';\r\n\r\nconst zIndex = {\r\n    zIndex: {\r\n        tooltip: 5000\r\n    }\r\n},\r\n    DefaultLoader = React.createClass({\r\n        render: function () {\r\n            return (\r\n                <MuiThemeProvider muiTheme={getMuiTheme({}, zIndex)}>\r\n                    <div className=\"row center-xs\">\r\n                        <div className=\"col-xs-8\" style={{ padding: '2%' }}>\r\n                            <RefreshIndicator\r\n                                size={40}\r\n                                left={0}\r\n                                top={0}\r\n                                status=\"loading\"\r\n                                style={{\r\n                                    display: 'inline-block',\r\n                                    position: 'relative'\r\n                                }}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </MuiThemeProvider>\r\n            );\r\n        }\r\n    });\r\n\r\n\r\nexport default DefaultLoader;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/proxyloader/defaultloader.jsx","const Logger = REMOVE_LOGS\r\n  ? {\r\n      log: () => {},\r\n      info: () => {},\r\n      debug: () => {},\r\n      warn: () => {},\r\n      error: () => {}\r\n    }\r\n  : {\r\n      log: console.log.bind(console),\r\n      info: console.info.bind(console),\r\n      debug: console.debug.bind(console),\r\n      warn: console.warn.bind(console),\r\n      error: console.error.bind(console)\r\n    };\r\nexport default Logger;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/logger.js","import Reflux from 'reflux-core';\r\nconst NotificationActions = Reflux.createActions(\r\n    [\"notify\"]\r\n);\r\n\r\nexport default NotificationActions;\n\n\n// WEBPACK FOOTER //\n// ./src/js/actions/notificationactions.js","import React from 'react';\r\nimport getMuiTheme from 'material-ui/styles/getMuiTheme';\r\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider';\r\nimport i18n from '../helpers/i18n.js';\r\nimport RefreshIndicator from 'material-ui/RefreshIndicator';\r\nimport FontIcon from 'material-ui/FontIcon';\r\nimport * as Colors from 'material-ui/styles/colors';\r\n\r\nconst zIndex = {\r\n    zIndex: {\r\n        tooltip: 5000\r\n    }\r\n},\r\n    ErrorLoader = React.createClass({\r\n        render: function () {\r\n            return (\r\n                <MuiThemeProvider muiTheme={getMuiTheme({}, zIndex)}>\r\n                    <div className=\"row center-xs\">\r\n                        <div className=\"col-xs-8\" style={{ padding: '2%', color: Colors.red500 }}>\r\n                            <div><FontIcon className=\"material-icons\" color={Colors.red500}>error</FontIcon></div>\r\n                            <div>Component failed to load</div>\r\n                        </div>\r\n                    </div>\r\n                </MuiThemeProvider>\r\n            );\r\n        }\r\n    });\r\n\r\n\r\nexport default ErrorLoader;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/proxyloader/errorloadercomponent.jsx","import React from \"react\";\r\nimport connect from \"reflux/src/connect\";\r\nimport PureRenderMixin from \"react-addons-pure-render-mixin\";\r\nimport injectTapEventPlugin from \"react-tap-event-plugin\";\r\nimport getMuiTheme from \"material-ui/styles/getMuiTheme\";\r\nimport MuiThemeProvider from \"material-ui/styles/MuiThemeProvider\";\r\nimport AppStore from \"./stores/appstore.js\";\r\nimport SiteHeader from \"./components/siteheader.jsx\";\r\nimport HelpPage from \"./components/helppage.jsx\";\r\nimport i18n from \"./helpers/i18n.js\";\r\nimport CustomThemeProvider from \"./customtheme/customthemeprovider.js\";\r\nimport getCustomTheme from \"./customtheme/getcustomtheme.js\";\r\nimport TouchBackend from \"./reactdndtouchbackend.js\";\r\nimport { DragDropContext } from \"react-dnd\";\r\nconst zIndex = {\r\n    zIndex: {\r\n      tooltip: 5000\r\n    }\r\n  },\r\n  App = React.createClass({\r\n    mixins: [PureRenderMixin, connect(AppStore, \"AppState\")],\r\n    childContextTypes: {\r\n      location: React.PropTypes.object,\r\n      history: React.PropTypes.object\r\n    },\r\n\r\n    getChildContext: function() {\r\n      return { location: this.props.location, history: this.props.history };\r\n    },\r\n    render: function() {\r\n      let self = this,\r\n        childrenWithProps = React.Children.map(this.props.children, function(\r\n          child\r\n        ) {\r\n          return React.cloneElement(child, {\r\n            isMobile: self.props.isMobile,\r\n            isShort: self.props.isShort\r\n          });\r\n        }),\r\n        { isMobile } = this.props;\r\n      return (\r\n        <MuiThemeProvider muiTheme={getMuiTheme({}, zIndex)}>\r\n          <CustomThemeProvider customTheme={getCustomTheme({}, isMobile)}>\r\n            <div\r\n              key={this.state.AppState.get(\"language\")}\r\n              style={{ height: \"100%\", overflow: \"auto\" }}\r\n            >\r\n              <div>\r\n                <SiteHeader\r\n                  isMobile={this.props.isMobile}\r\n                  questionMode={this.state.AppState.get(\"questionMode\")}\r\n                />\r\n                <div className=\"wr\" style={{ height: \"100%\" }}>\r\n                  <div className=\"Demo\">\r\n                    {childrenWithProps}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </CustomThemeProvider>\r\n        </MuiThemeProvider>\r\n      );\r\n    }\r\n  });\r\n\r\n//injectTapEventPlugin();\r\nexport default DragDropContext(TouchBackend({ enableMouseEvents: true }))(App);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/designapp.jsx","// Generated by CoffeeScript 1.3.3\r\n(function () {\r\n  module.exports.container = function() {\r\n    var argList, container, factories, get, haveVisited, notEmpty, register, registerOne, resolve, toFactory;\r\n    factories = {};\r\n    register = function (name, func) {\r\n      var hash, _results;\r\n      if (name === Object(name)) {\r\n        hash = name;\r\n        _results = [];\r\n        for (name in hash) {\r\n          func = hash[name];\r\n          _results.push(registerOne(name, func));\r\n        }\r\n        return _results;\r\n      } else {\r\n        return registerOne(name, func);\r\n      }\r\n    };\r\n    registerOne = function (name, func) {\r\n      if (!(func != null)) {\r\n        throw new Error(\"cannot register null function\");\r\n      }\r\n      return factories[name] = toFactory(func);\r\n    };\r\n    toFactory = function (func) {\r\n      if (typeof func === \"function\") {\r\n        return {\r\n          func: func,\r\n          required: argList(func)\r\n        };\r\n      } else {\r\n        return {\r\n          func: function () {\r\n            return func;\r\n          },\r\n          required: []\r\n        };\r\n      }\r\n    };\r\n    argList = function (func) {\r\n      var match, required;\r\n      match = func.toString().match(/function.*?\\(([\\s\\S]*?)\\)/);\r\n      if (!(match != null)) {\r\n        throw new Error(\"could not parse function arguments: \" + (func != null ? func.toString() : void 0));\r\n      }\r\n      required = match[1].split(\",\").filter(notEmpty).map(function (str) {\r\n        return str.trim();\r\n      });\r\n      return required;\r\n    };\r\n    notEmpty = function (a) {\r\n      return a;\r\n    };\r\n    get = function (name, overrides, visited) {\r\n      var dependencies, factory, instance, isOverridden;\r\n      if (visited == null) {\r\n        visited = [];\r\n      }\r\n      isOverridden = overrides != null;\r\n      if (haveVisited(visited, name)) {\r\n        throw new Error(\"circular dependency with '\" + name + \"'\");\r\n      }\r\n      visited = visited.concat(name);\r\n      factory = factories[name];\r\n      if (!(factory != null)) {\r\n        throw new Error(\"dependency '\" + name + \"' was not registered\");\r\n      }\r\n      if ((factory.instance != null) && !isOverridden) {\r\n        return factory.instance;\r\n      }\r\n      dependencies = factory.required.map(function (name) {\r\n        if ((overrides != null ? overrides[name] : void 0) != null) {\r\n          return overrides != null ? overrides[name] : void 0;\r\n        } else {\r\n          return get(name, overrides, visited);\r\n        }\r\n      });\r\n      instance = factory.func.apply(factory, dependencies);\r\n      if (!isOverridden) {\r\n        factory.instance = instance;\r\n      }\r\n      return instance;\r\n    };\r\n    haveVisited = function (visited, name) {\r\n      var isName;\r\n      isName = function (n) {\r\n        return n === name;\r\n      };\r\n      return visited.filter(isName).length;\r\n    };\r\n    resolve = function (overrides, func) {\r\n      if (!func) {\r\n        func = overrides;\r\n        overrides = null;\r\n      }\r\n      register(\"__temp\", func);\r\n      return get(\"__temp\", overrides);\r\n    };\r\n    container = {\r\n      get: get,\r\n      resolve: resolve,\r\n      register: register\r\n    };\r\n    container.register(\"_container\", container);\r\n    return container;\r\n  };\r\n}).call(this);\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/dependable/index.js","import ObjectID from 'bson-objectid';\r\nconst Assertions = {\r\n    \"ItemIsDefined\" : function(item){\r\n        if (typeof item == \"undefined\"){\r\n            throw 'Undefined value specified.';\r\n        }\r\n    },\r\n    \"IdIsValid\" : function(id){\r\n        if (!ObjectID.isValid(id)){\r\n            throw `Invalid id - ${id}`;\r\n        }\r\n    },\r\n    \"IndexIsInBounds\" : function(index, size){\r\n        if (typeof index !== \"number\"){\r\n            throw `${index} is an invalid index value.`\r\n        }\r\n        if (index < 0 || index >= size){\r\n            throw `${index} is out of bounds.`;\r\n        }\r\n    },\r\n    \"ItemIsSurvey\" : function(item){\r\n        this.ItemIsDefined(item);\r\n        \r\n        if (!item.isSurvey){\r\n            throw \"The object is not a valid survey.\";\r\n        }\r\n    },\r\n    \"ItemIsPage\" : function(item){\r\n        this.ItemIsDefined(item);\r\n        \r\n        if (!item.isPage){\r\n            throw \"The object is not a valid page.\";\r\n        }\r\n    },\r\n    \"ItemIsPageItem\" : function(item){\r\n        this.ItemIsDefined(item);\r\n        \r\n        if (!item.isPageItem){\r\n            throw \"The object is not a valid page item.\";\r\n        }\r\n    },\r\n    \"isQuestion\" : function(item){\r\n        this.ItemIsDefined(item);\r\n        \r\n        if (!item.isQuestion){\r\n            throw \"The object is not a valid question.\";\r\n        }\r\n    },\r\n    \"PageIsPresentInSurvey\" : function(survey, pageOrPageId){\r\n        let pageId = pageOrPageId.isPage ? pageOrPageId.getId() : pageOrPageId;\r\n        \r\n        if (survey.getPageIndex(pageId) == -1){\r\n            throw `The page - ${pageId} does not exist in the survey - ${survey.getId()}`;\r\n        }\r\n    },\r\n    \"PageItemIsPresentInSurvey\" : function(survey, pageItemOrPageItemId){\r\n        let pageItemId = pageItemOrPageItemId.isPageItem ? pageItemOrPageItemId.getId() \r\n                        : pageItemOrPageItemId;\r\n        \r\n        if (!survey.getPageItem(pageItemId)){\r\n            throw `The page item - ${pageItemId} does not exist in the survey - ${survey.getId()}`;\r\n        }\r\n    },\r\n    \"PageItemIsNotPresentInSurvey\" : function(survey, pageItemOrPageItemId){\r\n        let pageItemId = pageItemOrPageItemId.isPageItem ? pageItemOrPageItemId.getId() \r\n                        : pageItemOrPageItemId;\r\n        \r\n        if (survey.getPageItem(pageItemId)){\r\n            throw `The page item - ${pageItemId} already exists in the survey - ${survey.getId()}`;\r\n        }\r\n    },\r\n    \"PageItemRefIsNotInPage\" : function(page, pageItemId){\r\n        let pageItemRefs = page.getPageItemRefs(),\r\n            error = `The item - ${pageItemId} already exists in the page - ${page.getId()}`;\r\n        \r\n        for (let pageItemRef of pageItemRefs){\r\n            if (pageItemRef == pageItemId){\r\n                throw error;\r\n            }\r\n        }\r\n    }       \r\n};\r\n\r\nexport default Assertions;\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/surveymodelbuilder/assertions.js","import ObjectID from 'bson-objectid';\r\nconst Assertions = {  \r\n};\r\n\r\nexport default Assertions;\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/publishedsurveys/publishedsurveymodelprovider/assertions.js","export default class CouchDBRecipientAdapter {\r\n    constructor(contactBuilder) {\r\n        this.ContactBuilder = contactBuilder;\r\n    }\r\n    fromRecipientModel(recipientModelInstance) {\r\n        var docJSON = recipientModelInstance.toJS();\r\n        if(docJSON[\"_deleted\"] == false){\r\n            delete docJSON[\"_deleted\"];\r\n        }\r\n        docJSON[\"docType\"] = 'contact';\r\n        return docJSON;\r\n    }\r\n    toRecipientModel(docJSON) {\r\n        if(!docJSON._id){\r\n            return this.ContactBuilder.createContact(docJSON);\r\n        }\r\n        return this.ContactBuilder.fromModel(docJSON);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/contacts/couchdbrecipientadapter/index.js","import EventEmitter from \"events\";\r\nimport Logger from \"../../logger.js\";\r\n\r\nvar pouchMirrorLocalFirst = function(localDB, remoteDB) {\r\n  var self = this;\r\n  this.isSynchronized = false;\r\n\r\n  this.remoteDB = remoteDB;\r\n  this.localDB = localDB;\r\n  // Use RemoteDB till the initial sync is finished.\r\n  this.DB = this.remoteDB;\r\n\r\n  // Tracks the destroy pending promise when\r\n  // destroy detects an ongoing sync.\r\n  this.pendingDestroy = null;\r\n\r\n  // This method listens to changes in the LocalDB and calls\r\n  // replication within 3 sec if changes detected.\r\n  // It also reschedules replication if another change\r\n  // is detected within this time-frame.\r\n  function listenChanges(db) {\r\n    self.changes = db\r\n      .changes({\r\n        since: \"now\",\r\n        live: true,\r\n        conflicts: true\r\n      })\r\n      .on(\"change\", function(change) {\r\n        Logger.debug(\"changes\", change);\r\n        if (self.replicationHandle) {\r\n          clearTimeout(self.replicationHandle);\r\n          self.replicationHandle = null;\r\n          Logger.debug(\"previous sync call is aborted.\");\r\n        }\r\n        self.replicationHandle = setTimeout(\r\n          replicateDataToRemote.bind(self),\r\n          300\r\n        );\r\n      })\r\n      .on(\"complete\", function(info) {\r\n        Logger.debug(\"Changes are done.\");\r\n      })\r\n      .on(\"error\", function(err) {\r\n        Logger.error(err);\r\n      });\r\n  }\r\n\r\n  // This API synchronizes changes between local and remote.\r\n  function replicateDataToRemote() {\r\n    if (self.DB == self.localDB) {\r\n      self.emit(\"delta-sync-started\");\r\n      self.DB\r\n        .sync(remoteDB, {\r\n          filter: \"documents/typed\"\r\n        })\r\n        .on(\"change\", function(change) {\r\n          self.emit(\"delta-sync-changes-detected\", change);\r\n          Logger.debug(\"changes\", change);\r\n        })\r\n        .on(\"denied\", function(err) {\r\n          self.emit(\"delta-sync-failed\", err);\r\n          Logger.error(err);\r\n        })\r\n        .on(\"complete\", function(info) {\r\n          self.replicationHandle = null;\r\n          Logger.debug(\"Changes are synchronized\");\r\n          self.emit(\"delta-sync-completed\", info);\r\n          if (self.pendingDestroy) {\r\n            Logger.debug(\"Pending destroy detected, invoking it.\");\r\n            self.destroy().then(() => {\r\n              self.pendingDestroy();\r\n              self.pendingDestroy = null;\r\n            });\r\n          }\r\n        })\r\n        .on(\"error\", function(err) {\r\n          self.emit(\"delta-sync-failed\", err);\r\n          Logger.error(err);\r\n        });\r\n    }\r\n  }\r\n\r\n  // Start the initial synchronization between Local and Remote.\r\n  self.emit(\"initial-sync-started\");\r\n  this.localDB\r\n    .sync(remoteDB, {\r\n      filter: \"documents/typed\"\r\n    })\r\n    .on(\"change\", function(change) {\r\n      self.emit(\"initial-sync-changes-detected\", change);\r\n      Logger.debug(\"Initial sync > changes detected\", change);\r\n    })\r\n    .on(\"denied\", function(err) {\r\n      self.DB = self.localDB;\r\n      self.emit(\"initial-sync-failed\", err);\r\n      Logger.error(err);\r\n    })\r\n    .on(\"complete\", function(info) {\r\n      Logger.debug(\"Initial sync completed.\");\r\n      self.DB = self.localDB;\r\n      self.emit(\"initial-sync-completed\", info);\r\n      listenChanges(self.DB);\r\n    })\r\n    .on(\"error\", function(err) {\r\n      self.DB = self.localDB;\r\n      self.emit(\"initial-sync-failed\", err);\r\n      Logger.error(err);\r\n    });\r\n\r\n  this.remoteDB\r\n    .changes({\r\n      since: \"now\",\r\n      live: true,\r\n      include_docs: true\r\n    })\r\n    .on(\"change\", function(change) {\r\n      Logger.debug(\"delta-remote-changes-detected: \", change);\r\n      let { doc } = change;\r\n      if (doc.docType === \"surveyresponse\" || doc.docType === \"publishedsurvey\")\r\n        replicateDataToRemote();\r\n    })\r\n    .on(\"error\", function(err) {\r\n      Logger.error(\"delta-remote-error-detected: \" + err);\r\n      self.emit(\"delta-remote-error-detected\", err);\r\n    });\r\n};\r\n\r\nexport default pouchMirrorLocalFirst;\r\n\r\npouchMirrorLocalFirst.prototype = Object.create(EventEmitter.prototype);\r\n\r\npouchMirrorLocalFirst.prototype.createIndex = function(obj) {\r\n  return this.localDB.createIndex(obj);\r\n};\r\n\r\npouchMirrorLocalFirst.prototype.destroy = function(obj) {\r\n  if (this.replicationHandle) {\r\n    Logger.debug(\"Destroy > Detected pending sync. Pooled the destroy.\");\r\n\r\n    return new Promise((resolve, reject) => {\r\n      // This resolve will be invoked in replicateDataToRemote.\r\n      this.pendingDestroy = resolve;\r\n    });\r\n  }\r\n  this.cancelChanges();\r\n  return this.localDB.destroy(obj);\r\n};\r\n\r\npouchMirrorLocalFirst.prototype.find = function(obj) {\r\n  return this.DB.find(obj);\r\n};\r\n\r\npouchMirrorLocalFirst.prototype.getIndexes = function() {\r\n  return this.DB.getIndexes();\r\n};\r\n\r\npouchMirrorLocalFirst.prototype.deleteIndex = function(obj) {\r\n  return this.DB.deleteIndex.apply(obj);\r\n};\r\n\r\npouchMirrorLocalFirst.prototype.get = function() {\r\n  return this.DB.get.apply(this.DB, arguments);\r\n};\r\n\r\npouchMirrorLocalFirst.prototype.allDocs = function() {\r\n  return this.DB.allDocs.apply(this.DB, arguments);\r\n};\r\n\r\npouchMirrorLocalFirst.prototype.put = function() {\r\n  return this.DB.put.apply(this.DB, arguments);\r\n};\r\n\r\npouchMirrorLocalFirst.prototype.post = function() {\r\n  return this.DB.post.apply(this.DB, arguments);\r\n};\r\n\r\npouchMirrorLocalFirst.prototype.bulkDocs = function() {\r\n  return this.DB.bulkDocs.apply(this.DB, arguments);\r\n};\r\n\r\npouchMirrorLocalFirst.prototype.remove = function() {\r\n  return this.DB.remove.apply(this.DB, arguments);\r\n};\r\n\r\npouchMirrorLocalFirst.prototype.changes = function() {\r\n  return this.DB.changes.apply(this.DB, arguments);\r\n};\r\n\r\npouchMirrorLocalFirst.prototype.replicate = function() {\r\n  return this.DB.replicate.apply(this.DB, arguments);\r\n};\r\n\r\npouchMirrorLocalFirst.prototype.sync = function() {\r\n  return this.DB.sync.apply(this.DB, arguments);\r\n};\r\n\r\npouchMirrorLocalFirst.prototype.putAttachment = function() {\r\n  return this.DB.putAttachment.apply(this.DB, arguments);\r\n};\r\n\r\npouchMirrorLocalFirst.prototype.getAttachment = function() {\r\n  return this.DB.getAttachment.apply(this.DB, arguments);\r\n};\r\n\r\npouchMirrorLocalFirst.prototype.removeAttachment = function() {\r\n  return this.DB.removeAttachment.apply(this.DB, arguments);\r\n};\r\n\r\npouchMirrorLocalFirst.prototype.query = function() {\r\n  return this.DB.query.apply(this.DB, arguments);\r\n};\r\n\r\npouchMirrorLocalFirst.prototype.info = function() {};\r\n\r\npouchMirrorLocalFirst.prototype.cancelChanges = function() {\r\n  if (this.changes.cancel) this.changes.cancel();\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/contexts/pouchmirrorlocalfirst/index.js","export default { \r\n  \"documents\": {\r\n    _id: '_design/documents',\r\n    filters: {\r\n      typed: function (doc, req) {\r\n        var type = req && req.query \r\n                  && req.query.type ? req.query.type\r\n                  : false;\r\n        if (type){\r\n          return doc.docType === type;\r\n        }\r\n        \r\n        return \"docType\" in doc;\r\n      }\r\n    }\r\n  }\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/contexts/designs/private/designs.js","export default {\r\n    \"getByDocType\": {\r\n        _id: '_design/getByDocType',\r\n        views: {\r\n            typed: {\r\n                map: function (doc) { if (doc.docType) { emit(doc.docType); } }\r\n            }\r\n        },\r\n        language: \"javascript\"\r\n    },\r\n    \"custom\": {\r\n        _id: '_design/custom',\r\n        views: {\r\n            surveyIdAndTitle: {\r\n                map: function (doc) {\r\n                    if (doc.docType) {\r\n                        if (doc.header) {\r\n                            emit(doc.docType, { id: doc._id, title: doc.header.title });\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            passedCandidate: {\r\n                map: function (doc) {\r\n                    if (doc.docType == 'surveyresponse') {\r\n                        if (doc.obtainedMarks >= doc.survey.minimumMarks)\r\n                            emit(doc._id, { minimumMarks: doc.survey.minimumMarks, obtainedMarks: doc.obtainedMarks });\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        language: \"javascript\"\r\n    },\r\n    \"search\": {\r\n        _id: '_design/search',\r\n        views: {\r\n            recipientsByFullName: {\r\n                map: function (doc) {\r\n                    if (doc.fullName && doc.docType == 'contact') {\r\n                        emit(doc.fullName.toLowerCase());\r\n                    }\r\n                }\r\n            },\r\n            recipientsByEmail: {\r\n                map: function (doc) {\r\n                    if (doc.email && doc.docType == 'contact') {\r\n                        emit(doc.email);\r\n                    }\r\n                }\r\n            },\r\n            recipientsByGroups: {\r\n                map: function (doc) {\r\n                    if (doc.groups && doc.docType == 'contact') {\r\n                        for (var i = 0; i < doc.groups.length; i++) {\r\n                            if (doc.groups[i]) {\r\n                                emit(doc.groups[i]);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            recipientsByKey: {\r\n                map: function (doc) {\r\n                    if (doc.fullName && doc.docType == 'contact') {\r\n                        emit(doc.fullName.toLowerCase());\r\n                    }\r\n                    if (doc.email && doc.docType == 'contact') {\r\n                        emit(doc.email);\r\n                    }\r\n                    if (doc.groups && doc.docType == 'contact') {\r\n                        for (var i = 0; i < doc.groups.length; i++) {\r\n                            if (doc.groups[i]) {\r\n                                emit(doc.groups[i]);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        language: \"javascript\"\r\n    }\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/contexts/designs/private/views.js","module.exports = {\r\n  docType: {\r\n    index: {\r\n      fields: [\"docType\"]\r\n    },\r\n    name: \"docType\",\r\n    ddoc: \"doctype\"\r\n  },\r\n  groups: {\r\n    index: {\r\n      fields: [\"docType\", \"groups\"]\r\n    },\r\n    name: \"groups\",\r\n    ddoc: \"groups\"\r\n  },\r\n  publishedSurveys: {\r\n    index: {\r\n      fields: [\"docType\", \"date.updated\"]\r\n    },\r\n    name: \"publishedsurveys\",\r\n    ddoc: \"publishedsurveys\"\r\n  },\r\n  date: {\r\n    index: {\r\n      fields: [\"date.updated\"]\r\n    },\r\n    name: \"date\",\r\n    ddoc: \"date\"\r\n  },\r\n  contact: {\r\n    index: {\r\n      fields: [\"docType\", \"fullName\", \"email\", \"groups\"]\r\n    },\r\n    name: \"contact\",\r\n    ddoc: \"contact\"\r\n  }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/designs/indexes/index.js","let Promise = require('bluebird');\r\nmodule.exports = (promises) => {\r\n    //console.log(promises);\r\n    return Promise.all(promises.map((promise) => {\r\n        //console.log(promise);\r\n        return promise.reflect();\r\n    })).each((inspection) => {\r\n        //console.log(inspection);\r\n        if (inspection.isFulfilled()) {\r\n            return inspection.value();\r\n        } else {\r\n            return inspection.reason();\r\n        }\r\n    });\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/settleAll/index.js","import regex from '../../regex';\r\nconst Assertions = {\r\n    \"validEmail\": function (email) {\r\n        if (!email) {\r\n            throw TypeError(\"Email is required.\");\r\n        }\r\n        if (!regex[\"email\"].test(email)) {\r\n            throw TypeError(\"Email is not valid.\");\r\n        }\r\n    },\r\n    \"validFullName\": function (fullName) {\r\n        if (!fullName) {\r\n            throw TypeError(\"Name is required.\");\r\n        }\r\n    }\r\n};\r\n\r\nexport default Assertions;\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/contacts/contactbuilder/assertions.js","import Reflux from 'reflux-core';\r\nconst DataStorageClientActions = Reflux.createActions(\r\n          [\"dataLoaded\", \"dataStored\"]\r\n      ),\r\n      DataStorageActions = Reflux.createActions(\r\n          [\"loadData\", \"storeData\"]\r\n      );\r\n\r\nexport default {\r\n\t\"DataStorageClientActions\": DataStorageClientActions,\r\n\t\"DataStorageActions\": DataStorageActions\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/actions/datastorageactions.js","import ObjectID from 'bson-objectid';\r\nimport _ from 'lodash';\r\nimport im from 'immutable';\r\nimport SurveyModelFactory from '../surveymodelbuilder';\r\nimport makeTypedRecord from '../maketypedrecord';\r\nimport processRevivers from '../processrevivers';\r\nimport Assertions from './assertions.js';\r\nimport MakeValid from './makevalid.js';\r\nconst defaultSchemaVersion = \"1.0\",\r\n      SurveyRunnerSchemaProvider = function () {\r\n          const version = [\"1.0\"];\r\n          version[\"1.0\"] = function (surveyOrModel) {\r\n              const\r\n                  SchemaVersion = \"1.0\",\r\n                  Model = {\r\n                      \"schema\": {\r\n                          \"_id\": \"\",\r\n                          \"survey\": {},\r\n                          \"_schemaVersion\": \"1.0\",\r\n                          \"docType\": \"surveyresponse\",\r\n                          \"status\": \"pending\",\r\n                          \"responses\": im.Map(),\r\n                          \"participantDetails\": {}\r\n                      },\r\n                      \"methods\": {\r\n                          \"validateSurvey\": function (questionKeys) {\r\n                              var survey = this.getSurvey(),\r\n                                  promises = [];\r\n                              for (var i = 0; i < questionKeys.length; i++) {\r\n                                  promises.push(survey.getPageItem(questionKeys[i]).validate(this.getResponse(questionKeys[i])));\r\n                              }\r\n                              return Promise.all(promises);\r\n                          },\r\n                          \"revivers\": {\r\n                              \"surveyRunner\": function (model) {\r\n                                  let {_id, survey, responses, status, participantDetails} = model,\r\n                                      surveyRunner = this,\r\n                                      SurveyModelBuilder = SurveyModelFactory(survey._schemaVersion);\r\n                                  survey = SurveyModelBuilder.fromModel(survey);\r\n                                  return surveyRunner.setId(_id)\r\n                                      .setSurvey(survey)\r\n                                      .setStatus(status)\r\n                                      .setResponses(im.Map(responses))\r\n                                      .setParticipantDetails(participantDetails);\r\n                              }\r\n                          },\r\n                          \"getId\": function () {\r\n                              return this.get(\"_id\");\r\n                          },\r\n                          \"setId\": function (id) {\r\n                              return this.setIn([\"_id\"], id);\r\n                          },\r\n                          \"getSurvey\": function () {\r\n                              return this.get(\"survey\");\r\n                          },\r\n                          \"setSurvey\": function (survey) {\r\n                              return this.setIn([\"survey\"], survey);\r\n                          },\r\n                          \"getStatus\": function () {\r\n                              return this.get(\"status\");\r\n                          },\r\n                          \"setStatus\": function (status) {\r\n                              return this.setIn([\"status\"], status);\r\n                          },\r\n                          \"getResponses\": function () {\r\n                              return this.get(\"responses\");\r\n                          },\r\n                          \"setResponses\": function (responses) {\r\n                              return this.setIn([\"responses\"], responses);\r\n                          },\r\n                          \"getResponse\": function (key) {\r\n                              return this.getIn([\"responses\", key]);\r\n                          },\r\n                          \"setResponse\": function (id, response) {\r\n                              var obj = MakeValid.responseObj(id, response);\r\n                              return this.setIn([\"responses\", id], obj[id]);\r\n                          },\r\n                          \"getParticipantDetails\": function () {\r\n                              return this.get(\"participantDetails\");\r\n                          },\r\n                          \"setParticipantDetails\": function (obj) {\r\n                              return this.setIn([\"participantDetails\"], obj);\r\n                          }\r\n                      }\r\n                  },\r\n                  Types = {\r\n                      \"SurveyRunner\": makeTypedRecord(Model)\r\n                  },\r\n                  reviveSurveyRunnerModel = function (model) {\r\n                      let surveyRunner = new Types.SurveyRunner();\r\n                      return processRevivers(surveyRunner, model);\r\n                  },\r\n                  getSurveyRunnerModel = function (surveyOrModel) {\r\n                      surveyOrModel = MakeValid.surveyOrModel(surveyOrModel);\r\n                      if (!surveyOrModel.docType) {\r\n                          var SurveyModelBuilder = SurveyModelFactory(surveyOrModel._schemaVersion),\r\n                              model = {\r\n                                  \"_id\": ObjectID().str,\r\n                                  \"survey\": SurveyModelBuilder.fromModel(surveyOrModel)\r\n                              };\r\n                          return new Types.SurveyRunner(model);\r\n                      }\r\n                      return reviveSurveyRunnerModel(surveyOrModel);\r\n                  };\r\n\r\n              return getSurveyRunnerModel(surveyOrModel);\r\n          }\r\n          return {\r\n              \"getSurveyRunnerModel\": function (survey) {\r\n                  var _schemaVersion = defaultSchemaVersion;\r\n                  if (survey._schemaVersion) {\r\n                      _schemaVersion = survey._schemaVersion;\r\n                  }\r\n                  return version[_schemaVersion](survey);\r\n              },\r\n              \"fromModel\": function (model) {\r\n                  var _schemaVersion = defaultSchemaVersion;\r\n                  if (model._schemaVersion) {\r\n                      _schemaVersion = model.survey._schemaVersion;\r\n                  }\r\n                  return version[_schemaVersion](model);\r\n              }\r\n          }\r\n      },\r\n      SurveyRunnerModelProvider = function (schemaVersion = defaultSchemaVersion) {\r\n          return SurveyRunnerSchemaProvider();\r\n      };\r\n\r\nexport default SurveyRunnerModelProvider;                \n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/surveyrunnermodelprovider/index.js","import _ from 'lodash';\r\nconst\r\n    MakeValid = {\r\n        \"responseObj\": function (id, response) {\r\n            if (typeof response === 'string') {\r\n                if (response == \"\") {\r\n                    response = null;\r\n                }\r\n            }\r\n            else {\r\n                if (response && !response.length) {\r\n                    response = null;\r\n                }\r\n            }\r\n\r\n            return { [id]: response };\r\n        },\r\n        \"surveyOrModel\": function (surveyOrModel) {\r\n            if (_.isPlainObject(surveyOrModel)) {\r\n                return surveyOrModel;\r\n            }\r\n\r\n            return surveyOrModel.toJSON();\r\n        }\r\n    }\r\n\r\nexport default MakeValid;    \n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/surveyrunnermodelprovider/makevalid.js","import ObjectID from 'bson-objectid';\r\nconst Assertions = {  \r\n};\r\n\r\nexport default Assertions;\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/clientsurveyresponsemodelprovider/assertions.js","import i18n from \"i18next\";\r\nimport XHR from \"i18next-xhr-backend\";\r\nimport Promise from \"bluebird\";\r\nimport intervalPlural from \"i18next-intervalplural-postprocessor\";\r\nimport logger from \"../helpers/logger.js\";\r\nimport { SupportedLanguagesCollection } from \"../appsettings.json\";\r\nimport _ from \"lodash\";\r\nlet lng = window.navigator.userLanguage || window.navigator.language || \"en-US\";\r\nif (_.indexOf(SupportedLanguagesCollection, lng) == -1) {\r\n  lng = \"en-US\";\r\n}\r\nconst i18nOptions = {\r\n  debug: !REMOVE_LOGS,\r\n  lng,\r\n  load: \"currentOnly\",\r\n  returnObjects: false,\r\n  postProcess: false,\r\n  pluralSeparator: \"_\",\r\n  contextSeparator: \"_\",\r\n  interpolation: {\r\n    escapeValue: true,\r\n    prefix: \"{{\",\r\n    suffix: \"}}\",\r\n    formatSeparator: \",\",\r\n    unescapePrefix: \"-\",\r\n    nestingPrefix: \"$t(\",\r\n    nestingSuffix: \")\"\r\n  },\r\n  fallbackLng: \"en-US\",\r\n  backend: {\r\n    loadPath: \"/locale/{{lng}}/translation.json\"\r\n  }\r\n};\r\n\r\nexport default {\r\n  _i18n: null,\r\n  init: function() {\r\n    this._i18n = i18n.use(XHR).use(intervalPlural);\r\n    let promise = new Promise((res, rej) => {\r\n      this._i18n.init(i18nOptions, (err, t) => {\r\n        if (err) {\r\n          return rej(err);\r\n        }\r\n        return res(t);\r\n      });\r\n    });\r\n    return promise\r\n      .then(t => {\r\n        this.t = this._i18n.t.bind(this._i18n);\r\n      })\r\n      .catch(err => {\r\n        logger.error(\"Error initializing i18n...\");\r\n        logger.error(err);\r\n\r\n        throw err;\r\n      });\r\n  },\r\n  setLanguage: function(language) {\r\n    i18nOptions.lng = language;\r\n    return this.init();\r\n  },\r\n  t: function() {\r\n    // this method is recreated on successful initialization of i18n.\r\n    throw 'i18n not initialized yet. Please invoke \"init\" method first.';\r\n  }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/i18n.js","import ObjectID from 'bson-objectid';\r\nimport _ from 'lodash';\r\nimport Promise from 'bluebird';\r\nimport im from 'immutable';\r\nimport regex from '../../regex';\r\nimport makeTypedRecord from '../../maketypedrecord';\r\nimport processRevivers from '../../processrevivers';\r\nimport Assertions from './assertions.js';\r\nconst ImageBuilder = function () {\r\n    const image = function (model) {\r\n        const Model = {\r\n            \"schema\": {\r\n                \"_id\": \"\",\r\n                \"_rev\": \"\",\r\n                \"mimeType\": \"\",\r\n                \"name\": \"\",\r\n                \"uri\": \"\",\r\n                \"tags\": im.Set(),\r\n                \"vibrant\": null,\r\n                \"darkVibrant\": null,\r\n                \"description\": \"\",\r\n                \"date\": new Date()\r\n            },\r\n            \"methods\": {\r\n                \"revivers\": {\r\n                    \"image\": function (model) {\r\n                        let {_id, _rev, mimeType, name, uri, description, date, vibrant, darkVibrant, tags} = model,\r\n                            image = this;\r\n                        return image.setId(_id)\r\n                            .setRev(_rev)\r\n                            .setMimeType(mimeType)\r\n                            .setName(name)\r\n                            .setURI(uri)\r\n                            .setTags(tags)\r\n                            .setVibrant(vibrant)\r\n                            .setDarkVibrant(darkVibrant)\r\n                            .setDescription(description)\r\n                            .setDate(date);\r\n                    }\r\n                },\r\n                \"getId\": function () {\r\n                    return this.get(\"_id\");\r\n                },\r\n                \"setId\": function (id) {\r\n                    return this.set(\"_id\", id);\r\n                },\r\n                \"getRev\": function () {\r\n                    return this.get(\"_rev\");\r\n                },\r\n                \"setRev\": function (rev) {\r\n                    return this.set(\"_rev\", rev);\r\n                },\r\n                \"getMimeType\": function () {\r\n                    return this.get(\"mimeType\");\r\n                },\r\n                \"setMimeType\": function (mimeType) {\r\n                    return this.set(\"mimeType\", mimeType);\r\n                },\r\n                \"getName\": function () {\r\n                    return this.get(\"name\");\r\n                },\r\n                \"setName\": function (name) {\r\n                    return this.set(\"name\", name);\r\n                },\r\n                \"getVibrant\": function () {\r\n                    return this.get(\"vibrant\");\r\n                },\r\n                \"getVibrantColor\": function () {\r\n                    let vibrant = this.get(\"vibrant\"),\r\n                        vibrantColor = vibrant && `rgb(${vibrant[0]}, ${vibrant[1]}, ${vibrant[2]})`\r\n                    return vibrantColor;\r\n                },\r\n                \"setVibrant\": function (vibrant) {\r\n                    return this.set(\"vibrant\", vibrant);\r\n                },\r\n                \"getDarkVibrant\": function () {\r\n                    return this.get(\"darkVibrant\");\r\n                },\r\n                \"getDarkVibrantColor\": function () {\r\n                    let darkVibrant = this.get(\"darkVibrant\"),\r\n                        darkVibrantColor = darkVibrant && `rgb(${darkVibrant[0]}, ${darkVibrant[1]}, ${darkVibrant[2]})`\r\n                    return darkVibrantColor;\r\n                },\r\n                \"setDarkVibrant\": function (darkVibrant) {\r\n                    return this.set(\"darkVibrant\", darkVibrant);\r\n                },\r\n                \"getURI\": function () {\r\n                    return this.get(\"uri\");\r\n                },\r\n                \"setURI\": function (uri) {\r\n                    return this.set(\"uri\", uri);\r\n                },\r\n                \"getTags\": function () {\r\n                    return this.get(\"tags\").toSeq();\r\n                },\r\n                \"setTag\": function (tag) {\r\n                    return this.set(\"tags\", this.get(\"tags\").add(tag));\r\n                },\r\n                \"setTags\": function (tags) {\r\n                    tags = im.Set(tags);\r\n                    return this.set(\"tags\", tags);\r\n                },\r\n                \"getDescription\": function () {\r\n                    return this.get(\"description\");\r\n                },\r\n                \"setDescription\": function (description) {\r\n                    return this.set(\"description\", description);\r\n                },\r\n                \"getDate\": function () {\r\n                    return this.getIn([\"date\"]);\r\n                },\r\n                \"setDate\": function (dateString) {\r\n                    if (!dateString) {\r\n                        return this;\r\n                    }\r\n                    let date = new Date(dateString);\r\n                    return this.setIn([\"date\"], date);\r\n                },\r\n            }\r\n\r\n        };\r\n        Model.Dimensions = {\r\n            \"schema\": {\r\n                \"dimensions\": {\r\n                    \"width\": \"\",\r\n                    \"height\": \"\"\r\n                }\r\n            },\r\n            \"methods\": {\r\n                \"revivers\": {\r\n                    \"dimensions\": function (model) {\r\n                        let {dimensions} = model;\r\n                        return this.setDimensions(dimensions);\r\n                    }\r\n                },\r\n                \"getDimensions\": function () {\r\n                    return this.get(\"dimensions\");\r\n                },\r\n                \"setDimensions\": function (dimensions) {\r\n                    if (!dimensions) {\r\n                        return this;\r\n                    }\r\n                    return this.setIn([\"dimensions\", \"width\"], dimensions.width)\r\n                        .setIn([\"dimensions\", \"height\"], dimensions.height);\r\n                },\r\n                \"getWidth\": function () {\r\n                    return this.getIn([\"dimensions\", \"width\"]);\r\n                },\r\n                \"setWidth\": function (width) {\r\n                    return this.setIn([\"dimensions\", \"width\"], width);\r\n                },\r\n                \"getHeight\": function () {\r\n                    return this.getIn([\"dimensions\", \"height\"]);\r\n                },\r\n                \"setHeight\": function (height) {\r\n                    return this.setIn([\"dimensions\", \"height\"], height)\r\n                }\r\n            }\r\n        }\r\n        Model.Attachments = {\r\n            \"schema\": {\r\n                \"_attachments\": {\r\n                    \"image\": \"\",\r\n                }\r\n            },\r\n            \"methods\": {\r\n                \"revivers\": {\r\n                    \"attachments\": function (model) {\r\n                        let {_attachments} = model;\r\n                        return this.setThumbnail(_attachments);\r\n                    }\r\n                },\r\n                \"getThumbnail\": function () {\r\n                    let base64 = this.getIn([\"_attachments\", \"image\"]).data,\r\n                        dataURL = `data:${this.getMimeType()};base64,${base64}`;\r\n                    return dataURL;\r\n                },\r\n                \"setThumbnail\": function (attachments) {\r\n                    if (!attachments) {\r\n                        return this;\r\n                    }\r\n                    return this.setIn([\"_attachments\", \"image\"], attachments.image);\r\n                },\r\n            }\r\n        }\r\n        Model.Thumbnail = {\r\n            \"schema\": {\r\n                \"thumbnail\": {\r\n                    \"height\": \"\",\r\n                    \"width\": \"\",\r\n                    \"orignal\": \"\"\r\n                }\r\n            },\r\n            \"methods\": {\r\n                \"revivers\": {\r\n                    \"thumbnail\": function (model) {\r\n                        let {thumbnail} = model;\r\n                        return this.setThumbnailInfo(thumbnail);\r\n                    }\r\n                },\r\n                \"setThumbnailInfo\": function (thumbnail) {\r\n                    if (!thumbnail) {\r\n                        return this;\r\n                    }\r\n                    return this.setIn([\"thumbnail\"], im.Map(thumbnail));\r\n                },\r\n                \"getThumbnailHeight\": function () {\r\n                    return this.getIn([\"thumbnail\", \"height\"]);\r\n                },\r\n                \"setThumbnailHeight\": function (height) {\r\n                    return this.setIn([\"thumbnail\", \"height\"], height);\r\n                },\r\n                \"getThumbnailWidth\": function () {\r\n                    return this.getIn([\"thumbnail\", \"width\"]);\r\n                },\r\n                \"setThumbnailWidth\": function (width) {\r\n                    return this.setIn([\"thumbnail\", \"width\"], width);\r\n                },\r\n                \"isThumbnailOrignal\": function () {\r\n                    return this.getIn([\"thumbnail\", \"orignal\"]);\r\n                },\r\n            }\r\n        }\r\n        Model.Image = _.merge(Model, Model.Dimensions, Model.Attachments, Model.Thumbnail);\r\n        const Types = {\r\n            \"Image\": makeTypedRecord(Model.Image)\r\n        },\r\n            reviveImageModel = function (model) {\r\n                let imageModel = new Types.Image();\r\n                return processRevivers(imageModel, model);\r\n            },\r\n            getImageModel = function (model) {\r\n                if (!model._id) {\r\n                    var model = {\r\n                        \"_id\": ObjectID().str,\r\n                        \"name\": model.name,\r\n                        \"description\": model.description,\r\n                        \"mimeType\": model.mimeType,\r\n                        \"tags\": model.tags\r\n                    };\r\n                    return new Types.Image(model);\r\n                }\r\n                return reviveImageModel(model);\r\n            };\r\n\r\n        return getImageModel(model);\r\n\r\n    }\r\n\r\n    return {\r\n        \"createImage\": function (img) {\r\n            return image(img);\r\n        },\r\n        \"fromModel\": function (model) {\r\n            return image(model);\r\n        }\r\n    }\r\n};\r\n\r\nexport default ImageBuilder;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/image/imagemodelbuilder/index.js","import ObjectID from 'bson-objectid';\r\nconst Assertions = {};\r\n\r\nexport default Assertions;\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/image/imagemodelbuilder/assertions.js","// Creates a Record object extended with the given type.\r\nimport im from 'immutable';\r\nimport _ from \"lodash\";\r\n\r\nexport default (typeInfo) => {\r\n    let \r\n    deepConvertToImmutable = (item, goingDeep) =>{\r\n        if (!_.isPlainObject(item)\r\n            && ! _.isArray(item)){\r\n            return item;\r\n        }\r\n        \r\n        if (_.isPlainObject(item)){\r\n            if (_.isEmpty(item)){\r\n                return im.Map(); \r\n            }\r\n            \r\n            _.forOwn(item, (member, key, object)=>{\r\n                // Deeply convert all members.\r\n                object[key] = deepConvertToImmutable(member, true);\r\n            });\r\n            \r\n            // Create a new Record of this object schema.\r\n            return goingDeep ? new (im.Record(item))() : im.Record(item);\r\n        }\r\n        \r\n        if (_.isArray(item)){\r\n            return im.List(item);\r\n        }\r\n    },\r\n    type = deepConvertToImmutable(typeInfo.schema);\r\n    Object.assign(type.prototype, typeInfo.methods);\r\n    return type;\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/maketypedrecord/index.js","import createStore from \"reflux-core/lib/createStore\";\r\nimport Immutable from \"immutable\";\r\nimport ErrorActions from \"../actions/erroractions.js\";\r\nimport axios from \"axios\";\r\nimport _ from \"lodash\";\r\nimport ObjectID from \"bson-objectid\";\r\nimport DIService from \"../helpers/diservice\";\r\nimport Logger from \"../helpers/logger.js\";\r\nimport AuthActions from \"../actions/authactions.js\";\r\nimport Router from \"react-router/lib/Router\";\r\nimport platform from \"platform\";\r\nimport Fingerprint2 from \"fingerprintjs2\";\r\n\r\nvar ErrorStore = createStore({\r\n  listenables: [ErrorActions, AuthActions],\r\n  _errors: [],\r\n  _userProfile: {},\r\n  userChanged: function(prevProfile, newProfile) {\r\n    this._userProfile = newProfile;\r\n  },\r\n  registerError: function(message) {\r\n    let self = this;\r\n    clearTimeout(this.callRegisterErrors);\r\n    self._errors.push(message);\r\n    this.callRegisterErrors = setTimeout(() => {\r\n      self._errors = _.uniqWith(self._errors, _.isEqual);\r\n      this.postToServer(self._errors);\r\n    }, 3000);\r\n  },\r\n  postToServer: function(errorsToPost) {\r\n    let userInfo = this._getUserInfo();\r\n    _.forEach(errorsToPost, errordoc => {\r\n      errordoc = _.merge(errordoc, userInfo, {\r\n        docType: \"client-error\",\r\n        _id: ObjectID().str\r\n      });\r\n    });\r\n    this._errorProvider = DIService.get(\"ErrorProvider\");\r\n    this._errorProvider\r\n      .reportErrors(errorsToPost)\r\n      .then(response => {\r\n        Logger.log(\"ErrorDocs synched in localDB\");\r\n        Logger.log(response);\r\n      })\r\n      .catch(err => {\r\n        Logger.log(err);\r\n      });\r\n  },\r\n  _getUserInfo: function() {\r\n    let { name, email, userDbUrl } = this._userProfile,\r\n      route = window.location.href,\r\n      operatingSystem = platform.os.toString(),\r\n      browser = platform.name,\r\n      description = platform.description,\r\n      userAgent = platform.ua;\r\n    return {\r\n      userInfo: {\r\n        name,\r\n        email,\r\n        userDbUrl,\r\n        route,\r\n        operatingSystem,\r\n        browser,\r\n        description,\r\n        userAgent\r\n      }\r\n    };\r\n  }\r\n});\r\n\r\nexport default ErrorStore;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/stores/errorstore.js","import React from \"react\";\r\nimport PureRenderMixin from \"react-addons-pure-render-mixin\";\r\nimport Drawer from \"material-ui/Drawer\";\r\nimport AppBar from \"material-ui/AppBar\";\r\nimport FooterMobile from \"./footermobile.jsx\";\r\nimport i18n from \"../helpers/i18n.js\";\r\nimport HeaderTabs from \"./headertabs.jsx\";\r\nimport MobileMenu from \"./mobilemenu.jsx\";\r\nimport UserProfile from \"./userprofile.jsx\";\r\nimport ToolbarGroup from \"material-ui/Toolbar/ToolbarGroup\";\r\nimport navImg from \"../../navIcon.png\";\r\nimport { Link } from \"react-router\";\r\n\r\nconst SiteHeader = React.createClass({\r\n  mixins: [PureRenderMixin],\r\n  getInitialState: function() {\r\n    return {\r\n      open: false\r\n    };\r\n  },\r\n\r\n  handleToggle: function() {\r\n    this.setState({ open: !this.state.open });\r\n  },\r\n  closeMenu: function() {\r\n    this.setState({ open: false });\r\n  },\r\n  gotoHome: function() {\r\n    let router = this.context.router,\r\n      location = router.createLocation(\"/\");\r\n    router.push(location);\r\n  },\r\n  getSiteHeader: function() {\r\n    if (this.props.isMobile) {\r\n      return (\r\n        <div>\r\n          <AppBar\r\n            title={\r\n              <div\r\n                style={{ cursor: \"pointer\", width: \"20%\" }}\r\n                onClick={this.gotoHome}\r\n              >\r\n                {i18n.t(\"quizMe\")}\r\n              </div>\r\n            }\r\n            titleStyle={{\r\n              ...this.context.customTheme.siteHeader\r\n            }}\r\n            style={{ position: \"fixed\", zIndex: 1200 }}\r\n            iconClassNameRight=\"muidocs-icon-navigation-expand-more\"\r\n            onLeftIconButtonTouchTap={this.handleToggle}\r\n          >\r\n            <ToolbarGroup style={{ right: -12, top: 13 }}>\r\n              <UserProfile />\r\n            </ToolbarGroup>\r\n          </AppBar>\r\n          <Drawer\r\n            width={285}\r\n            docked={false}\r\n            open={this.state.open}\r\n            onRequestChange={open => this.setState({ open })}\r\n            containerStyle={{ overflow: \"hidden !important\" }}\r\n          >\r\n            <AppBar\r\n              title={\r\n                <div style={this.context.customTheme.smallText}>\r\n                  {i18n.t(\"quizMe\")}\r\n                </div>\r\n              }\r\n              iconElementLeft={\r\n                <img\r\n                  src=\"../../images/navIcon.png\"\r\n                  alt=\"navImg\"\r\n                  style={{\r\n                    height: 32,\r\n                    padding: 7\r\n                  }}\r\n                />\r\n              }\r\n            />\r\n            <MobileMenu closeMenu={this.closeMenu} />\r\n            <footer className=\"center-xs ft\">\r\n              <FooterMobile />\r\n            </footer>\r\n          </Drawer>\r\n        </div>\r\n      );\r\n    }\r\n    let headerTabs = <HeaderTabs {...this.props} />;\r\n    return (\r\n      <AppBar\r\n        title={\r\n          <div\r\n            style={{ cursor: \"pointer\", width: \"20%\" }}\r\n            onClick={this.gotoHome}\r\n          >\r\n            {i18n.t(\"quizMe\")}\r\n          </div>\r\n        }\r\n        titleStyle={{\r\n          ...this.context.customTheme.siteHeader\r\n        }}\r\n        showMenuIconButton={false}\r\n        iconElementRight={headerTabs}\r\n        iconStyleRight={{ flex: 1.5, marginRight: 4 }}\r\n      />\r\n    );\r\n  },\r\n  render: function() {\r\n    return <div>{this.getSiteHeader()}</div>;\r\n  }\r\n});\r\nSiteHeader.contextTypes = {\r\n  customTheme: React.PropTypes.object,\r\n  router: React.PropTypes.object\r\n};\r\nexport default SiteHeader;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/components/siteheader.jsx","import _ from 'lodash';\r\n\r\nexport default (item, model) => {\r\n    var revivers = item.revivers,\r\n        reviverKeys = Object.keys(revivers);\r\n    _.forIn(reviverKeys, (reviverKey) => {\r\n        item = revivers[reviverKey].call(item, model);\r\n    })\r\n\r\n    return item;\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/helpers/processrevivers/index.js","import React from 'react';\r\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\r\nconst Footer = React.createClass({\r\n    mixins: [PureRenderMixin],\r\n    render: function () {\r\n        return (<div style={{ padding: 10 }}>\r\n            <div>\r\n                Copyright © Paragyte\r\n           </div>\r\n        </div>);\r\n    }\r\n});\r\n\r\nexport default Footer;\n\n\n// WEBPACK FOOTER //\n// ./src/js/components/footermobile.jsx","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport PureRenderMixin from \"react-addons-pure-render-mixin\";\r\nimport Tabs from \"material-ui/Tabs/Tabs\";\r\nimport Tab from \"material-ui/Tabs/Tab\";\r\nimport Toolbar from \"material-ui/Toolbar/Toolbar\";\r\nimport ToolbarGroup from \"material-ui/Toolbar/ToolbarGroup\";\r\nimport withRouter from \"react-router/lib/withRouter\";\r\nimport MediaQuery from \"react-responsive\";\r\nimport i18n from \"../helpers/i18n.js\";\r\nimport LanguageMenu from \"../components/languagemenu.jsx\";\r\nimport UserProfile from \"./userprofile.jsx\";\r\nimport PublishSurveyActions from \"../actions/publishsurveyactions.js\";\r\n//import { AppDrawer } from \"p10platformbarshellreact\";\r\nconst TabsModel = [\r\n    { title: \"Surveys\", path: \"/surveys\" },\r\n    { title: \"Contacts\", path: \"/contacts\" }\r\n  ],\r\n  HeaderTabs = React.createClass({\r\n    mixins: [PureRenderMixin],\r\n    contextTypes: {\r\n      history: React.PropTypes.object.isRequired,\r\n      location: React.PropTypes.object.isRequired,\r\n      customTheme: React.PropTypes.object\r\n    },\r\n    _handleActive: function(tab) {\r\n      if (tab.props.value == \"/surveys\") {\r\n        PublishSurveyActions.tabChanged();\r\n      }\r\n      let router = this.props.router,\r\n        location = router.createLocation(tab.props.value);\r\n      router.push(location);\r\n    },\r\n    getTabIndexFromPath: function(path) {\r\n      let result = TabsModel.findIndex(tab => tab.path == path);\r\n      if (result < 0) {\r\n        result = 0;\r\n      }\r\n      if (path.split(\"/\")[1] == \"surveys\") {\r\n        result = 0;\r\n      }\r\n      return result;\r\n    },\r\n    componentWillMount: function() {\r\n      if (!window.React) {\r\n        window.React = React;\r\n        window.ReactDOM = ReactDOM;\r\n      }\r\n    },\r\n    renderTabs: function() {\r\n      return TabsModel.map((tab, index) => {\r\n        return (\r\n          <Tab\r\n            className=\"tabs-Mob\"\r\n            style={{ width: 100 }}\r\n            key={index.toString()}\r\n            value={tab.path}\r\n            label={i18n.t(tab.title)}\r\n            onActive={this._handleActive}\r\n          />\r\n        );\r\n      });\r\n    },\r\n\r\n    render: function() {\r\n      let initialSelectedIndex = this.getTabIndexFromPath(\r\n          this.context.location.pathname\r\n        ),\r\n        { isMobile } = this.context.customTheme;\r\n      return (\r\n        <div>\r\n          {!isMobile && (\r\n            <div>\r\n              <div className=\"row\">\r\n                <div className=\"col-xs flex-xs-middle\">\r\n                  <ToolbarGroup>\r\n                    <Tabs\r\n                      initialSelectedIndex={initialSelectedIndex}\r\n                      ref=\"tabs\"\r\n                    >\r\n                      {this.renderTabs()}\r\n                    </Tabs>\r\n                  </ToolbarGroup>\r\n                </div>\r\n                <div\r\n                  className=\"end-xs flex-xs-middle\"\r\n                  style={{ display: \"flex\" }}\r\n                >\r\n                  <div className=\"mat3\">\r\n                    <div className=\"col-xs-12 col-md-8\">\r\n                      <LanguageMenu />\r\n                    </div>\r\n                  </div>\r\n                  {/* <div\r\n                    className=\"end-xs\"\r\n                    style={{\r\n                      paddingTop: 6,\r\n                      paddingLeft: 0,\r\n                      paddingRight: 12\r\n                    }}\r\n                  >\r\n                    <AppDrawer\r\n                      initConfig={{\r\n                        serviceApiUrl: \"https://ps.p10.io\",\r\n                        version: \"6.0\"\r\n                      }}\r\n                    />\r\n                  </div> */}\r\n                  <div className=\"end-xs\" style={{ padding: 6 }}>\r\n                    <UserProfile />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n  });\r\nexport default withRouter(HeaderTabs);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/components/headertabs.jsx","import React from \"react\";\r\nimport connect from \"reflux/src/connect\";\r\nimport PureRenderMixin from \"react-addons-pure-render-mixin\";\r\nimport AppActions from \"../actions/appactions.js\";\r\nimport { SupportedLanguages } from \"../appsettings.json\";\r\nimport * as Colors from \"material-ui/styles/colors\";\r\nimport _ from \"lodash\";\r\nimport Appstore from \"../stores/appstore.js\";\r\nimport DropDownMenu from \"material-ui/DropDownMenu\";\r\nimport MenuItem from \"material-ui/MenuItem\";\r\nconst LanguageMenu = React.createClass({\r\n  mixins: [PureRenderMixin, connect(Appstore, \"appCollection\")],\r\n  handleChange: function(event, index, value) {\r\n    this.setState({ value });\r\n    AppActions.changeLanguage(value);\r\n    event.preventDefault();\r\n  },\r\n  render: function() {\r\n    let languageMenu = [];\r\n    let self = this;\r\n    let selectedLanguage = this.state.appCollection.getIn([\"language\"]);\r\n    let options = _.forIn(SupportedLanguages, function(key, value) {\r\n      languageMenu.push(\r\n        <MenuItem\r\n          key={key}\r\n          value={key}\r\n          primaryText={value}\r\n          style={self.context.customTheme.menuItem}\r\n        />\r\n      );\r\n    });\r\n    return (\r\n      <DropDownMenu\r\n        labelStyle={{\r\n          color: Colors.white,\r\n          ...this.context.customTheme.DropDownMenu\r\n        }}\r\n        menuStyle={this.context.customTheme.DropDownMenu}\r\n        value={selectedLanguage}\r\n        onChange={this.handleChange}\r\n      >\r\n        {languageMenu}\r\n      </DropDownMenu>\r\n    );\r\n  }\r\n});\r\nLanguageMenu.contextTypes = {\r\n  customTheme: React.PropTypes.object\r\n};\r\nexport default LanguageMenu;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/components/languagemenu.jsx","import React from \"react\";\r\nimport connect from \"reflux/src/connect\";\r\nimport { Collapse } from \"react-collapse\";\r\nimport PureRenderMixin from \"react-addons-pure-render-mixin\";\r\nimport MenuItem from \"material-ui/MenuItem\";\r\nimport Menu from \"material-ui/Menu\";\r\nimport FontIcon from \"material-ui/FontIcon\";\r\nimport { red500, yellow500, blue500 } from \"material-ui/styles/colors\";\r\nimport Tabs from \"material-ui/Tabs/Tabs\";\r\nimport Tab from \"material-ui/Tabs/Tab\";\r\nimport * as Colors from \"material-ui/styles/colors\";\r\nimport withRouter from \"react-router/lib/withRouter\";\r\nimport { SupportedLanguages } from \"../appsettings.json\";\r\nimport MobileLanguageLink from \"../components/mobilelanguagelink.jsx\";\r\nimport i18n from \"../helpers/i18n.js\";\r\nimport Appstore from \"../stores/appstore.js\";\r\nimport PublishSurveyActions from \"../actions/publishsurveyactions.js\";\r\nimport _ from \"lodash\";\r\nconst TabsModel = [\r\n    { title: \"Surveys\", path: \"/surveys\" },\r\n    { title: \"Contacts\", path: \"/contacts\" }\r\n  ],\r\n  fontClass = {\r\n    0: {\r\n      class: \"icon-Survey\",\r\n      icon: \"\"\r\n    },\r\n    1: {\r\n      class: \"material-icons\",\r\n      icon: \"contact_phone\"\r\n    },\r\n    2: {\r\n      class: \"material-icons\",\r\n      icon: \"help\"\r\n    },\r\n    Language: {\r\n      class: \"material-icons\",\r\n      icon: \"language\"\r\n    }\r\n  },\r\n  MobileMenu = React.createClass({\r\n    mixins: [PureRenderMixin, connect(Appstore, \"appCollection\")],\r\n    contextTypes: {\r\n      history: React.PropTypes.object.isRequired,\r\n      location: React.PropTypes.object.isRequired,\r\n      customTheme: React.PropTypes.object\r\n    },\r\n    getInitialState: function() {\r\n      return {\r\n        displayLanguageMenu: false\r\n      };\r\n    },\r\n    _handleActive: function(event, value) {\r\n      if (value == \"/surveys\") {\r\n        PublishSurveyActions.tabChanged();\r\n      }\r\n      let router = this.props.router,\r\n        location = router.createLocation(value);\r\n      router.push(location);\r\n      this.props.closeMenu();\r\n    },\r\n    getTabIndexFromPath: function(path) {\r\n      let result = TabsModel.findIndex(tab => tab.path == path);\r\n      if (result < 0) {\r\n        result = 0;\r\n      }\r\n      if (path.split(\"/\")[1] == \"surveys\") {\r\n        result = 0;\r\n      }\r\n      return result;\r\n    },\r\n    renderMenu: function(menuCSS, menuIconCSS) {\r\n      let self = this;\r\n      return TabsModel.map((tab, i) => {\r\n        return (\r\n          <MenuItem\r\n            style={self.context.customTheme.menuItem}\r\n            value={tab.path}\r\n            primaryText={\r\n              <div key={i} style={menuCSS}>\r\n                {i18n.t(tab.title)}\r\n              </div>\r\n            }\r\n            key={i}\r\n            leftIcon={\r\n              <FontIcon\r\n                className={fontClass[i].class}\r\n                style={menuIconCSS}\r\n                color={red500}\r\n              >\r\n                {fontClass[i].icon}\r\n              </FontIcon>\r\n            }\r\n          />\r\n        );\r\n      });\r\n    },\r\n    renderLanguages: function() {\r\n      let selectedLanguage = this.state.appCollection.getIn([\"language\"]),\r\n        lang = [];\r\n      _.forIn(SupportedLanguages, function(key, value) {\r\n        if (key == selectedLanguage) {\r\n          lang.push(\r\n            <div key={key} className=\"langMenu\">\r\n              <MobileLanguageLink\r\n                language={key}\r\n                key={`link_${key}`}\r\n                text={value}\r\n                isSelected={true}\r\n              />\r\n            </div>\r\n          );\r\n        } else {\r\n          lang.push(\r\n            <div key={key} className=\"langMenu\">\r\n              <MobileLanguageLink\r\n                language={key}\r\n                key={`link_${key}`}\r\n                text={value}\r\n                isSelected={false}\r\n              />\r\n            </div>\r\n          );\r\n        }\r\n      });\r\n      return lang;\r\n    },\r\n    _handleLanguageRender: function() {\r\n      let { displayLanguageMenu } = this.state;\r\n      this.setState({ displayLanguageMenu: !displayLanguageMenu });\r\n    },\r\n    render: function() {\r\n      let locallink = [],\r\n        menuCSS = {\r\n          fontFamily: \"Roboto, sans-serif\",\r\n          ...this.context.customTheme.titleText,\r\n          fontWeight: \"700\",\r\n          textTransform: \"uppercase\",\r\n          color: \"#00BCD4\"\r\n        },\r\n        menuIconCSS = {\r\n          marginRight: 24,\r\n          marginTop: \"3%\",\r\n          width: \"232px\"\r\n        },\r\n        self = this,\r\n        initialSelectedIndex = this.getTabIndexFromPath(location.pathname),\r\n        { displayLanguageMenu } = this.state;\r\n      return (\r\n        <div>\r\n          <Menu onChange={this._handleActive} style={{ width: \"232px\" }}>\r\n            {this.renderMenu(menuCSS, menuIconCSS)}\r\n          </Menu>\r\n\r\n          <MenuItem\r\n            style={{\r\n              marginBottom: 10,\r\n              marginTop: -10,\r\n              ...this.context.customTheme.menuItem\r\n            }}\r\n            key={\"drawer\"}\r\n            value={i18n.t(\"Language\")}\r\n            primaryText={\r\n              <div style={menuCSS}>\r\n                {i18n.t(\"Language\")}\r\n              </div>\r\n            }\r\n            leftIcon={\r\n              <FontIcon\r\n                className={fontClass[\"Language\"].class}\r\n                style={menuIconCSS}\r\n                color={red500}\r\n              >\r\n                {fontClass[\"Language\"].icon}\r\n              </FontIcon>\r\n            }\r\n            rightIcon={\r\n              <FontIcon\r\n                className={fontClass[\"Language\"].class}\r\n                style={{ margin: \"12px -2px\" }}\r\n                color={red500}\r\n              >\r\n                {displayLanguageMenu\r\n                  ? \"keyboard_arrow_down\"\r\n                  : \"keyboard_arrow_right\"}\r\n              </FontIcon>\r\n            }\r\n            onClick={this._handleLanguageRender}\r\n          />\r\n          <Collapse isOpened={displayLanguageMenu}>\r\n            {this.renderLanguages()}\r\n          </Collapse>\r\n        </div>\r\n      );\r\n    }\r\n  });\r\n\r\nexport default withRouter(MobileMenu);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/components/mobilemenu.jsx","import React from \"react\";\r\nimport PureRenderMixin from \"react-addons-pure-render-mixin\";\r\nimport AppActions from \"../actions/appactions.js\";\r\nconst MobileLanguageLink = React.createClass({\r\n  mixins: [PureRenderMixin],\r\n  _handleClick: function(e) {\r\n    AppActions.changeLanguage(this.props.language);\r\n    e.preventDefault();\r\n  },\r\n  render: function() {\r\n    let { isSelected } = this.props;\r\n    return (\r\n      <a\r\n        style={{ color: isSelected ? \"maroon\" : \"#00BCD4\" }}\r\n        onClick={this._handleClick}\r\n        href=\"#\"\r\n      >\r\n        {this.props.text}\r\n      </a>\r\n    );\r\n  }\r\n});\r\n\r\nexport default MobileLanguageLink;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/components/mobilelanguagelink.jsx","module.exports = __webpack_public_path__ + \"./images/navIcon.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/navIcon.png\n// module id = 881\n// module chunks = 3","/**\r\n * NB: If you update this file, please also update `docs/src/app/customization/Themes.js`\r\n */\r\n\r\nimport {\r\n  cyan500,\r\n  cyan700,\r\n  pinkA200,\r\n  grey100,\r\n  grey300,\r\n  grey400,\r\n  grey500,\r\n  white,\r\n  darkBlack,\r\n  fullBlack\r\n} from \"./colors\";\r\nimport { fade } from \"./colorManipulator\";\r\nimport spacing from \"./spacing\";\r\n\r\n/**\r\n *  Light Theme is the default theme used in material-ui. It is guaranteed to\r\n *  have all theme variables needed for every component. Variables not defined\r\n *  in a custom theme will default to these values.\r\n */\r\nexport default {\r\n  spacing: spacing,\r\n  fontFamily: \"Roboto, sans-serif\",\r\n  palette: {\r\n    primary1Color: cyan500,\r\n    primary2Color: cyan700,\r\n    primary3Color: grey400,\r\n    accent1Color: pinkA200,\r\n    accent2Color: grey100,\r\n    accent3Color: grey500,\r\n    textColor: darkBlack,\r\n    secondaryTextColor: fade(darkBlack, 0.54),\r\n    alternateTextColor: white,\r\n    canvasColor: white,\r\n    borderColor: grey300,\r\n    disabledColor: fade(darkBlack, 0.3),\r\n    pickerHeaderColor: cyan500,\r\n    clockCircleColor: fade(darkBlack, 0.07),\r\n    shadowColor: fullBlack\r\n  }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/customtheme/lightBaseTheme.js","export default {\r\n  iconSize: 24,\r\n  desktopGutter: 24,\r\n  desktopGutterMore: 32,\r\n  desktopGutterLess: 16,\r\n  desktopGutterMini: 8,\r\n  desktopKeylineIncrement: 64,\r\n  desktopDropDownMenuItemHeight: 32,\r\n  desktopDropDownMenuFontSize: 15,\r\n  desktopDrawerMenuItemHeight: 48,\r\n  desktopSubheaderHeight: 48,\r\n  desktopToolbarHeight: 56\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/customtheme/spacing.js","export default {\r\n  menu: 1000,\r\n  appBar: 1100,\r\n  drawerOverlay: 1200,\r\n  drawer: 1300,\r\n  dialogOverlay: 1400,\r\n  dialog: 1500,\r\n  layer: 2000,\r\n  popover: 2100,\r\n  snackbar: 2900,\r\n  tooltip: 3000\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/customtheme/zIndex.js","import InlineStylePrefixer from 'inline-style-prefixer';\r\nimport warning from 'warning';\r\n\r\nlet hasWarnedAboutUserAgent = false;\r\n\r\nexport default function(muiTheme) {\r\n  let userAgent = muiTheme.userAgent;\r\n\r\n  if (userAgent === undefined && typeof navigator !== 'undefined') {\r\n    userAgent = navigator.userAgent;\r\n  }\r\n\r\n  if (userAgent === undefined && !hasWarnedAboutUserAgent) {\r\n    warning(false, `Material-UI: userAgent should be supplied in the muiTheme context\r\n      for server-side rendering.`);\r\n\r\n    hasWarnedAboutUserAgent = true;\r\n  }\r\n\r\n  const isServer = typeof window === 'undefined';\r\n\r\n  if (userAgent === false) { // Disabled autoprefixer\r\n    return null;\r\n  } else if (userAgent === 'all' || userAgent === undefined) { // Prefix for all user agent\r\n    return (style) => {\r\n      let isFlex = false;\r\n\r\n      if (isServer) {\r\n        isFlex = ['flex', 'inline-flex'].indexOf(style.display) !== -1;\r\n      }\r\n\r\n      const stylePrefixed = InlineStylePrefixer.prefixAll(style);\r\n\r\n      // We can't apply this join with react-dom:\r\n      // #https://github.com/facebook/react/issues/6467\r\n      if (isFlex) {\r\n        stylePrefixed.display = stylePrefixed.display.join('; display: ');\r\n      }\r\n\r\n      return stylePrefixed;\r\n    };\r\n  } else {\r\n    const prefixer = new InlineStylePrefixer({\r\n      userAgent: userAgent,\r\n    });\r\n\r\n    return (style) => prefixer.prefix(style);\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/customtheme/autoprefixer.js","import warning from 'warning';\r\n\r\nconst CALLED_ONCE = 'muiPrepared';\r\n\r\nexport default function callOnce() {\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    return (style) => {\r\n      if (style[CALLED_ONCE]) {\r\n        warning(false, 'Material-UI: You cannot call prepareStyles() on the same style object more than once.');\r\n      }\r\n      style[CALLED_ONCE] = true;\r\n      return style;\r\n    };\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/customtheme/callOnce.js","const reTranslate = /((^|\\s)translate(3d|X)?\\()(\\-?[\\d]+)/;\r\nconst reSkew = /((^|\\s)skew(x|y)?\\()\\s*(\\-?[\\d]+)(deg|rad|grad)(,\\s*(\\-?[\\d]+)(deg|rad|grad))?/;\r\n\r\n/**\r\n * This function ensures that `style` supports both ltr and rtl directions by\r\n * checking `styleConstants` in `muiTheme` and replacing attribute keys if\r\n * necessary.\r\n */\r\nexport default function rtl(muiTheme) {\r\n  if (muiTheme.isRtl) {\r\n    return (style) => {\r\n      if (style.directionInvariant === true) {\r\n        return style;\r\n      }\r\n\r\n      const flippedAttributes = {\r\n        // Keys and their replacements.\r\n        right: 'left',\r\n        left: 'right',\r\n        marginRight: 'marginLeft',\r\n        marginLeft: 'marginRight',\r\n        paddingRight: 'paddingLeft',\r\n        paddingLeft: 'paddingRight',\r\n        borderRight: 'borderLeft',\r\n        borderLeft: 'borderRight',\r\n      };\r\n\r\n      const newStyle = {};\r\n\r\n      Object.keys(style).forEach(function(attribute) {\r\n        let value = style[attribute];\r\n        let key = attribute;\r\n\r\n        if (flippedAttributes.hasOwnProperty(attribute)) {\r\n          key = flippedAttributes[attribute];\r\n        }\r\n\r\n        switch (attribute) {\r\n          case 'float':\r\n          case 'textAlign':\r\n            if (value === 'right') {\r\n              value = 'left';\r\n            } else if (value === 'left') {\r\n              value = 'right';\r\n            }\r\n            break;\r\n\r\n          case 'direction':\r\n            if (value === 'ltr') {\r\n              value = 'rtl';\r\n            } else if (value === 'rtl') {\r\n              value = 'ltr';\r\n            }\r\n            break;\r\n\r\n          case 'transform':\r\n            if (!value) break;\r\n            let matches;\r\n            if ((matches = value.match(reTranslate))) {\r\n              value = value.replace(matches[0], matches[1] + (-parseFloat(matches[4])) );\r\n            }\r\n            if ((matches = value.match(reSkew))) {\r\n              value = value.replace(matches[0], matches[1] + (-parseFloat(matches[4])) + matches[5] +\r\n                matches[6] ? `, ${(-parseFloat(matches[7])) + matches[8]}` : ''\r\n              );\r\n            }\r\n            break;\r\n\r\n          case 'transformOrigin':\r\n            if (!value) break;\r\n            if (value.indexOf('right') > -1) {\r\n              value = value.replace('right', 'left');\r\n            } else if (value.indexOf('left') > -1) {\r\n              value = value.replace('left', 'right');\r\n            }\r\n            break;\r\n        }\r\n\r\n        newStyle[key] = value;\r\n      });\r\n\r\n      return newStyle;\r\n    };\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/customtheme/rtl.js","import {\r\n  fullBlack,\r\n  darkBlack,\r\n  lightBlack,\r\n  minBlack,\r\n  fullWhite,\r\n  darkWhite,\r\n  lightWhite\r\n} from \"./colors\";\r\n\r\nclass Typography {\r\n  constructor() {\r\n    // text colors\r\n    this.textFullBlack = fullBlack;\r\n    this.textDarkBlack = darkBlack;\r\n    this.textLightBlack = lightBlack;\r\n    this.textMinBlack = minBlack;\r\n    this.textFullWhite = fullWhite;\r\n    this.textDarkWhite = darkWhite;\r\n    this.textLightWhite = lightWhite;\r\n\r\n    // font weight\r\n    this.fontWeightLight = 300;\r\n    this.fontWeightNormal = 400;\r\n    this.fontWeightMedium = 500;\r\n\r\n    this.fontStyleButtonFontSize = 14;\r\n  }\r\n}\r\n\r\nexport default new Typography();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/customtheme/typography.js","import { fonts } from \"./appsettings.json\";\r\nimport * as Colors from \"material-ui/styles/colors\";\r\nconst themeSetting = {\r\n  surveyHeader: {\r\n    fontSize: fonts.x_large\r\n  },\r\n  sectionTitle: {\r\n    fontSize: fonts.large\r\n  },\r\n  sectionDescription: {\r\n    fontSize: fonts.small\r\n  },\r\n  sectionHeader: {\r\n    fontSize: fonts.normal\r\n  },\r\n  textField: {\r\n    fontSize: fonts.normal\r\n  },\r\n  radioButton: {\r\n    fontSize: fonts.medium\r\n  },\r\n  datePicker: {\r\n    fontSize: fonts.large\r\n  },\r\n  dropDownMenu: {\r\n    fontSize: fonts.normal\r\n  },\r\n  titleDecorator: {\r\n    fontSize: fonts.x_large\r\n  },\r\n  titleDescriptionDecorator: {\r\n    fontSize: fonts.small\r\n  },\r\n  toggleLabel: {\r\n    fontSize: fonts.medium\r\n  },\r\n  toggleDescription: {\r\n    fontSize: fonts.small\r\n  },\r\n  menuItem: {\r\n    fontSize: fonts.medium\r\n  },\r\n  validations: {\r\n    success: Colors.green500,\r\n    failed: Colors.red700,\r\n    unchecked: Colors.amber500\r\n  },\r\n  messageText: {\r\n    fontSize: fonts.larger\r\n  },\r\n  smallText: {\r\n    fontSize: fonts.small\r\n  },\r\n  titleText: {\r\n    fontSize: fonts.large\r\n  },\r\n  descriptionText: {\r\n    fontSize: fonts.small\r\n  },\r\n  infoText: {\r\n    fontSize: fonts.smaller\r\n  },\r\n  siteHeader: {\r\n    fontSize: fonts.x_large\r\n  },\r\n  normalText: {\r\n    fontSize: fonts.normal\r\n  },\r\n  timerText: {\r\n    fontSize: fonts.x_small\r\n  }\r\n};\r\n\r\nexport default themeSetting;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/themesetting.js","/**\r\n * Copyright 2015, Yahoo Inc.\r\n * Copyrights licensed under the MIT License. See the accompanying LICENSE file for terms.\r\n */\r\n\"use strict\";\r\n\r\nimport invariant from \"invariant\";\r\n\r\nfunction getEventClientTouchOffset(e) {\r\n  if (e.targetTouches.length === 1) {\r\n    return getEventClientOffset(e.targetTouches[0]);\r\n  }\r\n}\r\n\r\nfunction getEventClientOffset(e) {\r\n  if (e.targetTouches) {\r\n    return getEventClientTouchOffset(e);\r\n  } else {\r\n    return {\r\n      x: e.clientX,\r\n      y: e.clientY\r\n    };\r\n  }\r\n}\r\n\r\nconst supportsPassive = (() => {\r\n  //simular to jQuery's test\r\n  let supported = false;\r\n  try {\r\n    addEventListener(\r\n      \"test\",\r\n      null,\r\n      Object.defineProperty({}, \"passive\", {\r\n        get() {\r\n          supported = true;\r\n        }\r\n      })\r\n    );\r\n  } catch (e) {}\r\n  return supported;\r\n})();\r\n\r\nconst ELEMENT_NODE = 1;\r\nfunction getNodeClientOffset(node) {\r\n  const el = node.nodeType === ELEMENT_NODE ? node : node.parentElement;\r\n\r\n  if (!el) {\r\n    return null;\r\n  }\r\n\r\n  const { top, left } = el.getBoundingClientRect();\r\n  return { x: left, y: top };\r\n}\r\n\r\nconst eventNames = {\r\n  mouse: {\r\n    start: \"mousedown\",\r\n    move: \"mousemove\",\r\n    end: \"mouseup\"\r\n  },\r\n  touch: {\r\n    start: \"touchstart\",\r\n    move: \"touchmove\",\r\n    end: \"touchend\"\r\n  },\r\n  keyboard: {\r\n    keydown: \"keydown\"\r\n  }\r\n};\r\n\r\nexport class TouchBackend {\r\n  constructor(manager, options = {}) {\r\n    options.delayTouchStart = options.delayTouchStart || options.delay;\r\n\r\n    options = {\r\n      enableTouchEvents: true,\r\n      enableMouseEvents: false,\r\n      enableKeyboardEvents: false,\r\n      delayTouchStart: 0,\r\n      delayMouseStart: 0,\r\n      ...options\r\n    };\r\n\r\n    this.actions = manager.getActions();\r\n    this.monitor = manager.getMonitor();\r\n    this.registry = manager.getRegistry();\r\n\r\n    this.enableKeyboardEvents = options.enableKeyboardEvents;\r\n    this.delayTouchStart = options.delayTouchStart;\r\n    this.delayMouseStart = options.delayMouseStart;\r\n    this.sourceNodes = {};\r\n    this.sourceNodeOptions = {};\r\n    this.sourcePreviewNodes = {};\r\n    this.sourcePreviewNodeOptions = {};\r\n    this.targetNodeOptions = {};\r\n    this.listenerTypes = [];\r\n    this._mouseClientOffset = {};\r\n\r\n    if (options.enableMouseEvents) {\r\n      this.listenerTypes.push(\"mouse\");\r\n    }\r\n\r\n    if (options.enableTouchEvents) {\r\n      this.listenerTypes.push(\"touch\");\r\n    }\r\n\r\n    if (options.enableKeyboardEvents) {\r\n      this.listenerTypes.push(\"keyboard\");\r\n    }\r\n\r\n    this.getSourceClientOffset = this.getSourceClientOffset.bind(this);\r\n    this.handleTopMoveStart = this.handleTopMoveStart.bind(this);\r\n    this.handleTopMoveStartDelay = this.handleTopMoveStartDelay.bind(this);\r\n    this.handleTopMoveStartCapture = this.handleTopMoveStartCapture.bind(this);\r\n    this.handleTopMoveCapture = this.handleTopMoveCapture.bind(this);\r\n    this.handleTopMove = this.handleTopMove.bind(this);\r\n    this.handleTopMoveEndCapture = this.handleTopMoveEndCapture.bind(this);\r\n    this.handleCancelOnEscape = this.handleCancelOnEscape.bind(this);\r\n  }\r\n\r\n  setup() {\r\n    if (typeof window === \"undefined\") {\r\n      return;\r\n    }\r\n\r\n    invariant(\r\n      !this.constructor.isSetUp,\r\n      \"Cannot have two Touch backends at the same time.\"\r\n    );\r\n    this.constructor.isSetUp = true;\r\n\r\n    this.addEventListener(window, \"start\", this.getTopMoveStartHandler());\r\n    this.addEventListener(\r\n      window,\r\n      \"start\",\r\n      this.handleTopMoveStartCapture,\r\n      true\r\n    );\r\n    this.addEventListener(window, \"move\", this.handleTopMove);\r\n    this.addEventListener(window, \"move\", this.handleTopMoveCapture, true);\r\n    this.addEventListener(window, \"end\", this.handleTopMoveEndCapture, true);\r\n\r\n    if (this.enableKeyboardEvents) {\r\n      this.addEventListener(window, \"keydown\", this.handleCancelOnEscape, true);\r\n    }\r\n  }\r\n\r\n  teardown() {\r\n    if (typeof window === \"undefined\") {\r\n      return;\r\n    }\r\n\r\n    this.constructor.isSetUp = false;\r\n    this._mouseClientOffset = {};\r\n\r\n    this.removeEventListener(\r\n      window,\r\n      \"start\",\r\n      this.handleTopMoveStartCapture,\r\n      true\r\n    );\r\n    this.removeEventListener(window, \"start\", this.handleTopMoveStart);\r\n    this.removeEventListener(window, \"move\", this.handleTopMoveCapture, true);\r\n    this.removeEventListener(window, \"move\", this.handleTopMove);\r\n    this.removeEventListener(window, \"end\", this.handleTopMoveEndCapture, true);\r\n\r\n    if (this.enableKeyboardEvents) {\r\n      this.removeEventListener(\r\n        window,\r\n        \"keydown\",\r\n        this.handleCancelOnEscape,\r\n        true\r\n      );\r\n    }\r\n\r\n    this.uninstallSourceNodeRemovalObserver();\r\n  }\r\n\r\n  addEventListener(subject, event, handler, capture) {\r\n    const options = supportsPassive ? { capture, passive: false } : capture;\r\n\r\n    this.listenerTypes.forEach(function(listenerType) {\r\n      subject.addEventListener(\r\n        eventNames[listenerType][event],\r\n        handler,\r\n        options\r\n      );\r\n    });\r\n  }\r\n\r\n  removeEventListener(subject, event, handler, capture) {\r\n    const options = supportsPassive ? { capture, passive: false } : capture;\r\n\r\n    this.listenerTypes.forEach(function(listenerType) {\r\n      subject.removeEventListener(\r\n        eventNames[listenerType][event],\r\n        handler,\r\n        options\r\n      );\r\n    });\r\n  }\r\n\r\n  connectDragSource(sourceId, node, options) {\r\n    const handleMoveStart = this.handleMoveStart.bind(this, sourceId);\r\n    this.sourceNodes[sourceId] = node;\r\n\r\n    this.addEventListener(node, \"start\", handleMoveStart);\r\n\r\n    return () => {\r\n      delete this.sourceNodes[sourceId];\r\n      this.removeEventListener(node, \"start\", handleMoveStart);\r\n    };\r\n  }\r\n\r\n  connectDragPreview(sourceId, node, options) {\r\n    this.sourcePreviewNodeOptions[sourceId] = options;\r\n    this.sourcePreviewNodes[sourceId] = node;\r\n\r\n    return () => {\r\n      delete this.sourcePreviewNodes[sourceId];\r\n      delete this.sourcePreviewNodeOptions[sourceId];\r\n    };\r\n  }\r\n\r\n  connectDropTarget(targetId, node) {\r\n    const handleMove = e => {\r\n      let coords;\r\n\r\n      /**\r\n             * Grab the coordinates for the current mouse/touch position\r\n             */\r\n      switch (e.type) {\r\n        case eventNames.mouse.move:\r\n          coords = { x: e.clientX, y: e.clientY };\r\n          break;\r\n\r\n        case eventNames.touch.move:\r\n          coords = { x: e.touches[0].clientX, y: e.touches[0].clientY };\r\n          break;\r\n      }\r\n\r\n      /**\r\n             * Use the coordinates to grab the element the drag ended on.\r\n             * If the element is the same as the target node (or any of it's children) then we have hit a drop target and can handle the move.\r\n             */\r\n      let droppedOn = document.elementFromPoint(coords.x, coords.y);\r\n      let childMatch = node.contains(droppedOn);\r\n\r\n      if (droppedOn === node || childMatch) {\r\n        return this.handleMove(e, targetId);\r\n      }\r\n    };\r\n\r\n    /**\r\n         * Attaching the event listener to the body so that touchmove will work while dragging over multiple target elements.\r\n         */\r\n    this.addEventListener(document.querySelector(\"body\"), \"move\", handleMove);\r\n\r\n    return () => {\r\n      this.removeEventListener(\r\n        document.querySelector(\"body\"),\r\n        \"move\",\r\n        handleMove\r\n      );\r\n    };\r\n  }\r\n\r\n  getSourceClientOffset(sourceId) {\r\n    return getNodeClientOffset(this.sourceNodes[sourceId]);\r\n  }\r\n\r\n  handleTopMoveStartCapture(e) {\r\n    this.moveStartSourceIds = [];\r\n  }\r\n\r\n  handleMoveStart(sourceId) {\r\n    this.moveStartSourceIds.unshift(sourceId);\r\n  }\r\n\r\n  getTopMoveStartHandler() {\r\n    if (!this.delayTouchStart && !this.delayMouseStart) {\r\n      return this.handleTopMoveStart;\r\n    }\r\n\r\n    return this.handleTopMoveStartDelay;\r\n  }\r\n\r\n  handleTopMoveStart(e) {\r\n    // Don't prematurely preventDefault() here since it might:\r\n    // 1. Mess up scrolling\r\n    // 2. Mess up long tap (which brings up context menu)\r\n    // 3. If there's an anchor link as a child, tap won't be triggered on link\r\n\r\n    const clientOffset = getEventClientOffset(e);\r\n    if (clientOffset) {\r\n      this._mouseClientOffset = clientOffset;\r\n    }\r\n  }\r\n\r\n  handleTopMoveStartDelay(e) {\r\n    const delay = e.type === eventNames.touch.start\r\n      ? this.delayTouchStart\r\n      : this.delayMouseStart;\r\n    this.timeout = setTimeout(this.handleTopMoveStart.bind(this, e), delay);\r\n  }\r\n\r\n  handleTopMoveCapture(e) {\r\n    this.dragOverTargetIds = [];\r\n  }\r\n\r\n  handleMove(e, targetId) {\r\n    this.dragOverTargetIds.unshift(targetId);\r\n  }\r\n\r\n  handleTopMove(e) {\r\n    clearTimeout(this.timeout);\r\n\r\n    const { moveStartSourceIds, dragOverTargetIds } = this;\r\n    const clientOffset = getEventClientOffset(e);\r\n\r\n    if (!clientOffset) {\r\n      return;\r\n    }\r\n\r\n    // If we're not dragging and we've moved a little, that counts as a drag start\r\n    if (\r\n      !this.monitor.isDragging() &&\r\n      this._mouseClientOffset.hasOwnProperty(\"x\") &&\r\n      moveStartSourceIds &&\r\n      (this._mouseClientOffset.x !== clientOffset.x ||\r\n        this._mouseClientOffset.y !== clientOffset.y)\r\n    ) {\r\n      this.moveStartSourceIds = null;\r\n      this.actions.beginDrag(moveStartSourceIds, {\r\n        clientOffset: this._mouseClientOffset,\r\n        getSourceClientOffset: this.getSourceClientOffset,\r\n        publishSource: false\r\n      });\r\n    }\r\n\r\n    if (!this.monitor.isDragging()) {\r\n      return;\r\n    }\r\n\r\n    const sourceNode = this.sourceNodes[this.monitor.getSourceId()];\r\n    this.installSourceNodeRemovalObserver(sourceNode);\r\n    this.actions.publishDragSource();\r\n\r\n    e.preventDefault();\r\n\r\n    /******************** scroll API *******************************/\r\n    let rect = document.querySelector(\"body\").getBoundingClientRect(),\r\n      scrollHeight = document.querySelector(\"body\").scrollHeight;\r\n\r\n    if (80 >= clientOffset.y) {\r\n      var tY = rect.top * -1 - 15;\r\n      if (tY >= 0) {\r\n        window.scrollTo(0, tY);\r\n      }\r\n    }\r\n    if (window.outerHeight - 100 <= clientOffset.y) {\r\n      var bY = rect.top * -1 + 15;\r\n      if (bY <= scrollHeight) {\r\n        window.scrollTo(0, bY);\r\n      }\r\n    }\r\n    /***************************************************************/\r\n\r\n    this.actions.hover(dragOverTargetIds, {\r\n      clientOffset: clientOffset\r\n    });\r\n  }\r\n\r\n  handleTopMoveEndCapture(e) {\r\n    if (!this.monitor.isDragging() || this.monitor.didDrop()) {\r\n      this.moveStartSourceIds = null;\r\n      return;\r\n    }\r\n\r\n    e.preventDefault();\r\n\r\n    this._mouseClientOffset = {};\r\n\r\n    this.uninstallSourceNodeRemovalObserver();\r\n    this.actions.drop();\r\n    this.actions.endDrag();\r\n  }\r\n\r\n  handleCancelOnEscape(e) {\r\n    if (e.key === \"Escape\") {\r\n      this._mouseClientOffset = {};\r\n\r\n      this.uninstallSourceNodeRemovalObserver();\r\n      this.actions.endDrag();\r\n    }\r\n  }\r\n\r\n  installSourceNodeRemovalObserver(node) {\r\n    this.uninstallSourceNodeRemovalObserver();\r\n\r\n    this.draggedSourceNode = node;\r\n    this.draggedSourceNodeRemovalObserver = new window.MutationObserver(() => {\r\n      if (!node.parentElement) {\r\n        this.resurrectSourceNode();\r\n        this.uninstallSourceNodeRemovalObserver();\r\n      }\r\n    });\r\n\r\n    if (!node || !node.parentElement) {\r\n      return;\r\n    }\r\n\r\n    this.draggedSourceNodeRemovalObserver.observe(node.parentElement, {\r\n      childList: true\r\n    });\r\n  }\r\n\r\n  resurrectSourceNode() {\r\n    this.draggedSourceNode.style.display = \"none\";\r\n    this.draggedSourceNode.removeAttribute(\"data-reactid\");\r\n    document.body.appendChild(this.draggedSourceNode);\r\n  }\r\n\r\n  uninstallSourceNodeRemovalObserver() {\r\n    if (this.draggedSourceNodeRemovalObserver) {\r\n      this.draggedSourceNodeRemovalObserver.disconnect();\r\n    }\r\n\r\n    this.draggedSourceNodeRemovalObserver = null;\r\n    this.draggedSourceNode = null;\r\n  }\r\n}\r\n\r\nexport default function createTouchBackend(optionsOrManager = {}) {\r\n  const touchBackendFactory = function(manager) {\r\n    return new TouchBackend(manager, optionsOrManager);\r\n  };\r\n\r\n  if (optionsOrManager.getMonitor) {\r\n    return touchBackendFactory(optionsOrManager);\r\n  } else {\r\n    return touchBackendFactory;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/reactdndtouchbackend.js","import createStore from \"reflux-core/lib/createStore\";\r\nimport Immutable from \"immutable\";\r\nimport _ from \"lodash\";\r\nimport PouchDB from \"pouchdb-core\";\r\nimport AuthActions from \"../actions/authactions.js\";\r\nimport TimeTrackerActions from \"../actions/timetrackeractions.js\";\r\nimport TimeTrackerProvider from \"../helpers/timetrackerprovider\";\r\nimport DIService from \"../helpers/diservice\";\r\nimport ObjectID from \"bson-objectid\";\r\nimport Logger from \"../helpers/logger.js\";\r\nconst TimeTrackerStore = createStore({\r\n  listenables: [TimeTrackerActions, AuthActions],\r\n  init: function() {\r\n    this.state = Immutable.Map({\r\n      loadTimes: []\r\n    });\r\n  },\r\n  getInitialState: function() {\r\n    return this.state;\r\n  },\r\n  userChanged: function(prevProfile, newProfile) {\r\n    if (!newProfile.isGuest) {\r\n      this._timeTrackerProvider = DIService.get(\"TimeTrackerProvider\");\r\n    }\r\n  },\r\n  updateState: function(newState, suppress) {\r\n    this.state = newState;\r\n    if (!suppress) {\r\n      this.trigger(this.state);\r\n    }\r\n  },\r\n  recordTime: function(componentName) {\r\n    if (componentName) {\r\n      let loadTimes = this.state.get(\"loadTimes\");\r\n      if (localStorage && localStorage.getItem(\"startTime\")) {\r\n        let startTime = localStorage.getItem(\"startTime\"),\r\n          currentTime = new Date().getTime(),\r\n          timeDiffSeconds = (currentTime - startTime) / 1000;\r\n        loadTimes.push({\r\n          componentName: componentName,\r\n          offset: timeDiffSeconds,\r\n          timeStamp: new Date(currentTime).toISOString()\r\n        });\r\n        this.updateState(this.state.set(\"loadTimes\", loadTimes), true);\r\n      }\r\n    }\r\n  },\r\n  updateTimerInformation: function(isRefreshed, userProfile) {\r\n    let trackerInfo = this.state.get(\"loadTimes\");\r\n    if (localStorage && localStorage.getItem(\"startTime\")) {\r\n      let startTimer = {\r\n        componentName: `Survey initiated`,\r\n        offset: 0,\r\n        timeStamp: new Date(\r\n          parseInt(localStorage.getItem(\"startTime\"))\r\n        ).toISOString(),\r\n        instanceInfo: isRefreshed ? `Refreshed Instance` : `Fresh Instance`,\r\n        userName: userProfile.name,\r\n        userEmail: userProfile.email\r\n      };\r\n      trackerInfo.splice(0, 0, startTimer);\r\n    }\r\n    let trackerInfoDoc = {\r\n      docType: \"surveytracker_info\",\r\n      _id: ObjectID().str,\r\n      trackerInfo\r\n    };\r\n    this._timeTrackerProvider &&\r\n      this._timeTrackerProvider\r\n        .reportTrackerInfo(trackerInfoDoc)\r\n        .then(response => {\r\n          Logger.log(\"ErrorDocs synched in localDB\");\r\n          Logger.log(response);\r\n        })\r\n        .catch(err => {\r\n          Logger.log(err);\r\n        });\r\n  }\r\n});\r\n\r\nexport default TimeTrackerStore;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/stores/timetrackerstore.js"],"sourceRoot":""}